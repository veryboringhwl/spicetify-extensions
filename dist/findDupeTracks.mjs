await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
function ze(t){if(!t)return{};let e={},r=(i,l)=>{if(!(!i||typeof i!="object"))for(let a in i)Object.hasOwn(i,a)&&l[a]===void 0&&(l[a]=i[a])};return r(t,e),r(t.item,e),r(t.reference,e),e}var j=ze;var L=Spicetify.ReactJSX,o=L.jsx,m=L.jsxs,Lt=L.jsxDEV,ee=L.Fragment;var z={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},reload:{path:"M7.98 0a7.97 7.97 0 0 0-3.365.752 8.008 8.008 0 0 0-4.227 9.715 8.006 8.006 0 0 0 9.12 5.389 8.005 8.005 0 0 0 6.474-8.385.5.5 0 0 0-.531-.467.5.5 0 0 0-.467.533 6.994 6.994 0 0 1-5.664 7.338 6.994 6.994 0 0 1-7.98-4.717 6.993 6.993 0 0 1 3.696-8.5A6.996 6.996 0 0 1 13.745 4h-3.246a.5.5 0 0 0-.5.5.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5.5.5 0 0 0-.5.5v2.215A8.014 8.014 0 0 0 7.979 0z",size:16}},Ee=t=>{let{path:e,size:r}=z[t],i=({size:l=r,fill:a="currentColor"})=>o("svg",{fill:a,height:l,role:"img",viewBox:`0 0 ${r} ${r}`,width:l,children:o("path",{d:e})});return i.displayName=`Icon(${t})`,i.defaultProps={size:r,fill:"currentColor"},i},{raw:Fe,react:Be,html:We}=Object.keys(z).reduce((t,e)=>(t.raw[e]=z[e].path,t.react[e]=Ee(e),t.html[e]=`<path d="${z[e].path}"/>`,t),{raw:{},react:{},html:{}}),T={React:Be,HTML:We,RAW:Fe};var h=Spicetify.React;var E=Spicetify.ReactDOM;var te=new CSSStyleSheet;te.replaceSync("dialog.modal{padding:0;overflow:visible;color:var(--spice-text);background:transparent;border:none}dialog.modal::backdrop{background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9)!important;border-radius:7px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5)!important;backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 12px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:34px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px!important;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var oe=te;var{isValidElement:Ge,memo:Ve,useEffect:$e,useRef:He}=h,{createRoot:Ue}=E;document.adoptedStyleSheets.push(oe);var I=null,Z="popup-modal-container",J=()=>{let t=document.getElementById(Z);I&&(I.unmount(),I=null),t&&t.remove(),document.body.style.overflow="auto"},je=Ve(({title:t,content:e,isLarge:r,buttons:i,icon:l,onClose:a})=>{let p=He(null);$e(()=>{let d=p.current;if(d){d.addEventListener("cancel",u=>{u.preventDefault()}),d.showModal(),document.body.style.overflow="hidden";let g=()=>a();return d.addEventListener("close",g),()=>{d.removeEventListener("close",g)}}},[a]);let n=()=>{p.current?.close()},c=d=>{d.target===p.current&&n()},s=()=>Ge(e)?e:typeof e=="function"?o(e,{}):e;return o("dialog",{className:"modal",onClick:c,ref:p,children:m("div",{className:`modal__container${r?" modal__container--large":""}`,children:[m("div",{className:"modal__header",children:[m("div",{className:"modal__titleContainer",children:[l&&o("div",{className:"modal__icon",children:l}),o("h1",{className:"modal__title",children:t})]}),m("div",{className:"modal__buttonContainer",children:[i,o(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:o("button",{className:"modal__button modal__button--close",onClick:n,children:o(T.React.close,{size:18})})})]})]}),o("div",{className:"modal__content",children:s()})]})})}),R=t=>{document.getElementById(Z)&&J();let e=document.createElement("div");e.id=Z,document.body.appendChild(e),I=Ue(e),I.render(o(je,{...t,onClose:J}))};R.hide=J;import xt from"https://esm.sh/dexie@4.0.11";async function Ze(){return(await Spicetify.Platform.LibraryAPI.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var re=Ze;async function Je(t){return{items:(await Spicetify.Platform.PlaylistAPI.getContents(t,{offset:0,limit:-1})).items}}var ae=Je;async function Qe(t){let e=new Map,r=Array.from(t).map(async i=>{let a=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:i,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(a)for(let p of a){let n=p?.track?.uri;n&&e.set(n,p.track)}});return await Promise.all(r),e}var ne=Qe;async function Xe(t){let e=new Map,r=new Map;for(let a of t)a&&r.set(a,Spicetify.URI.fromString(a).id);let i=50,l=Array.from(r.values()).reduce((a,p,n)=>{let c=Math.floor(n/i);return a[c]=a[c]||[],a[c].push(p),a},[]).map(async a=>{let p=`https://api.spotify.com/v1/tracks?ids=${a.join(",")}`,n=await Spicetify.CosmosAsync.get(p);if(n?.tracks)for(let c of n.tracks){let s=c?.uri;s&&e.set(s,c)}});return await Promise.all(l),e}var ie=Xe;var{useEffect:se,useRef:Ye,useState:qe}=h,{createRoot:Ke}=E;function F({titleText:t,descriptionText:e,cancelText:r="Cancel",confirmText:i="Confirm",onConfirm:l,onClose:a,onOpen:p,onOutside:n,allowHTML:c,confirmLabel:s,shouldCloseOnEsc:d,shouldCloseOnOverlayClick:g,shouldFocusAfterRender:u,width:b}){let y=document.createElement("div");document.body.appendChild(y);let f=Ke(y),v=()=>{let[w,x]=qe(!0),_=Ye(null);se(()=>{p?.()},[p]),se(()=>{if(w)return;let k=()=>{f.unmount(),y.remove()},C=_.current;if(C)return C.addEventListener("animationend",k,{once:!0}),()=>{C.removeEventListener("animationend",k)};k()},[w]);let S=k=>()=>{k?.(),x(!1)};return o(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:c,cancelText:r,confirmLabel:s,confirmText:i,descriptionText:e,isOpen:w,onClose:S(a),onConfirm:S(l),onOutside:S(n),ref:_,shouldCloseOnEsc:d,shouldCloseOnOverlayClick:g,shouldFocusAfterRender:u,titleText:t,width:b})};f.render(o(v,{}))}var le=new CSSStyleSheet;le.replaceSync(".dropdown{position:relative;width:fit-content;min-width:100px;font-size:14px!important;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px;.dropdown__arrow{display:flex}}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(var(--spice-rgb-subtext),.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003;.dropdown__option{display:flex;align-items:center;height:32px;padding:0 8px;cursor:pointer;&:first-child{border-top-left-radius:4px;border-top-right-radius:4px}&:last-child{border-bottom-right-radius:4px;border-bottom-left-radius:4px}}.dropdown__option--selected,.dropdown__option:hover{background:var(--spice-button)}}}");var ce=le;var{memo:et,useId:tt,useRef:ot}=h;document.adoptedStyleSheets.push(ce);var B=et(({value:t,options:e,onChange:r,disabled:i})=>{let l=tt(),a=ot(null),p=`--dropdown-anchor-${l.replace(/:/g,"id")}`,n=s=>{r?.(s.value),a.current?.hidePopover()},c=e.find(s=>s.value===t)?.label||"Select...";return m("div",{className:"dropdown",disabled:i,children:[m("button",{className:"dropdown__button",popoverTarget:l,popoverTargetAction:"toggle",style:{anchorName:p},children:[o("div",{className:"dropdown__text",children:c}),o("div",{className:"dropdown__arrow",children:o(T.React.dropdown,{size:12})})]}),o("div",{className:"dropdown__menu",id:l,popover:"auto",ref:a,style:{top:`calc(anchor(${p} bottom) + 4px)`,left:`anchor(${p} left)`,width:`anchor-size(${p} width)`},children:e.map(s=>o("div",{"aria-selected":t===s.value,className:`dropdown__option${t===s.value?" dropdown__option--selected":""}`,onClick:()=>n(s),onKeyDown:d=>d.key==="Enter"&&n(s),role:"option",tabIndex:0,children:s.label},s.value))})]})});var pe=new CSSStyleSheet;pe.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1!important}.slider__fill{background-color:var(--fill-color)!important}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var de=pe;var{memo:rt,useCallback:D,useEffect:at,useRef:ue}=h;document.adoptedStyleSheets.push(de);var W=rt(({value:t,min:e=0,max:r=100,step:i=1,defaultValue:l,onChange:a,onRelease:p,disabled:n})=>{let c=ue(null),s=ue(!1),d=t!==void 0?t:l,g=r>e&&d!==void 0?(d-e)/(r-e)*100:0,u=D(x=>{if(!c.current||n)return;let _=c.current.getBoundingClientRect(),S="touches"in x?x.touches[0].clientX:x.clientX,C=Math.max(0,Math.min(S-_.left,_.width))/_.width*(r-e)+e;C=Math.round(C/i)*i,C=Math.max(e,Math.min(C,r)),a(C)},[e,r,i,a,n]),b=D(x=>{n||(s.current=!0,u(x.nativeEvent))},[u,n]),y=D(x=>{n||(s.current=!0,u(x.nativeEvent))},[u,n]),f=D(()=>{s.current&&p?.(),s.current=!1},[p]),v=D(x=>{s.current&&(x.preventDefault(),u(x))},[u]),w=D(x=>{s.current&&u(x)},[u]);return at(()=>(window.addEventListener("mousemove",v),window.addEventListener("mouseup",f),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",f),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",f),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",f)}),[v,f,w]),o("div",{className:"slider",disabled:n,children:o("div",{className:"slider-container",onMouseDown:b,onTouchStart:y,ref:c,children:m("div",{className:"slider__track",children:[o("div",{className:"slider__fill",style:{width:`${g}%`}}),o("div",{className:"slider__thumb",style:{left:`${g}%`}})]})})})});var{useCallback:G,useEffect:nt,useMemo:it,useRef:me,useState:Q}=h,V=0,A=null,st=()=>{A||(A=setInterval(()=>{let t=Spicetify.Platform.PlayerAPI._state;Spicetify.Platform.PlayerAPI._events.emit("progress",t)},100))},lt=()=>{A&&(clearInterval(A),A=null)},ct=(t,e)=>{let[r,i]=Q(Spicetify.Platform.PlayerAPI._state),[l,a]=Q(0),[p,n]=Q(e),c=me(!1),s=me(0),d=G((f,v=!1)=>{if(i(f),f.item?.uri===t){if(!v&&s.current!==0&&f.positionAsOfTimestamp<500&&(Spicetify.Platform.PlayerAPI.seekTo(s.current),s.current=0),!c.current){let x=v&&!f.isPaused?f.positionAsOfTimestamp+(Date.now()-f.timestamp):f.positionAsOfTimestamp;a(Math.min(x,f.duration))}n(f.duration)}else a(0),n(e)},[t,e]);nt(()=>{V===0&&st(),V++;let f=Spicetify.Platform.PlayerAPI._state;d(f);let v=x=>d(x.data),w=x=>d(x.data,!0);return Spicetify.Platform.PlayerAPI._events.addListener("update",v),Spicetify.Platform.PlayerAPI._events.addListener("progress",w),()=>{V--,V===0&&lt(),Spicetify.Platform.PlayerAPI._events.removeListener("update",v),Spicetify.Platform.PlayerAPI._events.removeListener("progress",w)}},[d]);let g=G(()=>{r.item?.uri===t?r.isPaused?Spicetify.Platform.PlayerAPI.resume():Spicetify.Platform.PlayerAPI.pause():Spicetify.Platform.PlayerAPI.play({uri:t},{},{})},[r,t]),u=G(f=>{c.current=!0,a(f),s.current=f},[]),b=G(()=>{c.current&&(r.item?.uri===t?Spicetify.Platform.PlayerAPI.seekTo(l):Spicetify.Platform.PlayerAPI.play({uri:t},{},{}),c.current=!1)},[l,t,r]),y=it(()=>!r.isPaused&&r.item?.uri===t,[r,t]);return{position:l,duration:p,isCurrentlyPlayingThisTrack:y,togglePlay:g,handleSliderChange:u,handleSliderRelease:b}},fe=ct;var ge=new CSSStyleSheet;ge.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var be=ge;var{memo:pt}=h;document.adoptedStyleSheets.push(be);var $=pt(({value:t,onChange:e,placeholder:r,disabled:i=!1})=>o("input",{className:"input",disabled:i,onChange:a=>{e(a.target.value)},placeholder:r,type:"text",value:t}));var ye=new CSSStyleSheet;ye.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var he=ye;var _e=new CSSStyleSheet;_e.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var xe=_e;var{memo:dt}=h;document.adoptedStyleSheets.push(xe);var ve=dt(({value:t,onChange:e,disabled:r})=>o("button",{className:"toggle",disabled:r,onClick:()=>{r||e(!t)},role:"switch",children:o("span",{className:"toggle__background",children:o("span",{className:`toggle__slider${t?" toggle__slider--enabled":""}${r?" toggle__slider--disabled":""}`})})}));var{memo:ut}=h,ke=ut(({option:t,value:e,onChange:r,disabled:i})=>{switch(t.type){case"toggle":return o(ve,{disabled:i,onChange:r,value:e});case"input":return o($,{disabled:i,onChange:r,placeholder:t.placeholder,value:e});case"dropdown":return o(B,{disabled:i,onChange:r,options:t.options||[],value:e});case"slider":return o(W,{disabled:i,max:t.max,min:t.min,onChange:r,step:t.step,value:e});default:return console.warn(`Unknown option type for option "${t.name||"N/A"}"`),null}});var{memo:mt}=h,we=mt(({name:t,popupModal:e})=>o("button",{className:"popup-button",onClick:()=>R({title:t,content:o(e,{}),isLarge:!1}),children:o(T.React.editButton,{size:16})}));var{memo:ft}=h,Te=ft(({tippy:t})=>o(Spicetify.ReactComponent.TooltipWrapper,{label:t,placement:"top",showDelay:0,children:o("div",{className:"info-tippy",children:o(T.React.questionMark,{fill:"var(--spice-subtext)",size:20})})}));var{memo:gt}=h;document.adoptedStyleSheets.push(he);var Ce=gt(({name:t,desc:e,tippy:r,popupModal:i,option:l,value:a,onChange:p,disabled:n})=>m("div",{className:"option__row",children:[m("div",{className:"option__content",children:[o("div",{className:"option__desc",children:e}),r&&o(Te,{tippy:r})]}),m("div",{className:"option__control",children:[i&&o(we,{name:t,popupModal:i}),l&&o(ke,{disabled:n,onChange:p||(()=>{}),option:l,value:a})]})]}));var{useEffect:bt,useState:Se}=h,Pe=["live","remix","mix","acoustic","instrumental","radio","version","ver","edit","mono","stereo","deluxe","intro","outro","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],De="findDupeTracks",yt="findDupeTracks:settingsChanged",N={groupSettings:{exact:!0,isrc:!0,likely:!0,possible:!0},confirmSettings:{exact:!1,isrc:!1,likely:!0,possible:!0},defaultNormalizeWords:[...Pe],customNormalizeWords:[]},Ne=()=>{let t=localStorage.getItem(De);if(t){let e=JSON.parse(t);e.defaultNormalizeWords||(e.defaultNormalizeWords=[...Pe]);let r={...N,...e};return r.groupSettings={...N.groupSettings,...e.groupSettings||{}},r.confirmSettings={...N.confirmSettings,...e.confirmSettings||{}},r}return JSON.parse(JSON.stringify(N))},ht=t=>{localStorage.setItem(De,JSON.stringify(t)),window.dispatchEvent(new CustomEvent(yt))},H=()=>Ne(),_t=()=>{let[t,e]=Se(Ne()),[r,i]=Se("");bt(()=>{ht(t)},[t]);let l=(s,d,g)=>m("section",{className:"duplicate-settings__section",children:[o("h3",{className:"duplicate-settings__section-title",children:s}),o("div",{className:"duplicate-settings__options",children:Object.entries(g).map(([u,b])=>{let y={type:"toggle",name:`${u}-${d}`,desc:b,defaultVal:N[d][u]};return o(Ce,{desc:b,name:`${u}-${d}`,onChange:f=>e(v=>({...v,[d]:{...v[d],[u]:f}})),option:y,value:t[d][u]},u)})})]}),a=()=>{let s=r.trim().toLowerCase();s&&((t.customNormalizeWords||[]).includes(s)||(t.defaultNormalizeWords||[]).includes(s)||(e(d=>({...d,customNormalizeWords:[...d.customNormalizeWords||[],s]})),i("")))},p=(s,d)=>{e(g=>d?{...g,defaultNormalizeWords:(g.defaultNormalizeWords||[]).filter(u=>u!==s)}:{...g,customNormalizeWords:(g.customNormalizeWords||[]).filter(u=>u!==s)})},n=()=>{F({titleText:"Are you sure?",descriptionText:"This will reset all settings to default!",confirmText:"Reset",onConfirm:()=>e(JSON.parse(JSON.stringify(N)))})},c=[...(t.defaultNormalizeWords||[]).map(s=>({word:s,isDefault:!0})),...(t.customNormalizeWords||[]).map(s=>({word:s,isDefault:!1}))];return m("div",{className:"duplicate-settings",children:[l("Duplicate Groups to Display","groupSettings",{exact:"Exact Duplicates (Same URI)",isrc:"ISRC Duplicates (Same Recording)",likely:"Likely Duplicates (Same Name)",possible:"Possible Duplicates (Similar Name)"}),l("Confirm Before Deleting","confirmSettings",{exact:"Exact Duplicates",isrc:"ISRC Duplicates",likely:"Likely Duplicates",possible:"Possible Duplicates"}),m("section",{className:"duplicate-settings__section",children:[o("h3",{className:"duplicate-settings__section-title",children:"Normalization Words"}),o("p",{className:"duplicate-settings__description",children:"Add or remove words to be ignored when comparing track names for similarity."}),m("div",{className:"option__row",children:[o("div",{className:"option__content",children:o("div",{className:"option__desc",children:"Add a word to normalization list"})}),m("div",{className:"option__control",children:[o($,{disabled:!1,onChange:s=>i(s),placeholder:"Enter word to normalize",value:r}),o("button",{onClick:a,onKeyDown:s=>s.key==="Enter"&&a(),style:{marginLeft:8},type:"button",children:"Add"})]})]}),o("div",{className:"duplicate-settings__words-list",children:c.length>0?o("div",{className:"duplicate-settings__words-ul",children:c.map(({word:s,isDefault:d})=>m("div",{className:"duplicate-settings__word-item",children:[s,o("button",{className:"duplicate-settings__word-remove",onClick:()=>p(s,d),type:"button",children:"Remove"})]},s))}):o("p",{className:"duplicate-settings__no-words",children:"No normalization words"})})]}),o("div",{className:"duplicate-settings__actions",children:o("button",{className:"duplicate-settings__reset",onClick:n,type:"button",children:"Reset to Defaults"})})]})},Me=_t;var{memo:O,useCallback:X,useEffect:Y,useMemo:vt,useState:P}=h;var q=class extends xt{tracks;constructor(){super("findDupeTracks"),this.version(1).stores({tracks:"&trackUri, trackName, trackDuration, albumUri, trackPlayCount, trackIsrc, ignoreDuplicates"})}},M=new q;async function kt(){return(await re()).filter(e=>e.type==="playlist"&&!!e.canAddTo)}async function wt(t){let r=(await ae(t)).items,i=r.map(n=>n.uri),l=await M.tracks.bulkGet(i),a=new Map(l.filter(n=>!!n).map(n=>[n.trackUri,n])),p=r.flatMap(n=>{let c=a.get(n.uri);return!c||c.trackName!==n.name||c.albumUri!==n.album.uri?[{trackUri:n.uri,trackName:n.name,albumUri:n.album.uri,trackDuration:c?.trackDuration??null,trackPlayCount:c?.trackPlayCount??null,trackIsrc:c?.trackIsrc??null}]:[]});return p.length>0&&await M.tracks.bulkPut(p),{items:r}}async function Tt(t){let e=new Map,r=[],i=t.filter(n=>n?.uri),l=i.map(n=>n.uri);if(l.length===0)return{isrcMap:e};let a=await M.tracks.bulkGet(l),p=new Map(a.filter(n=>!!n).map(n=>[n.trackUri,n]));for(let n of i){let c=p.get(n.uri);c?.trackIsrc?e.set(n.uri,c.trackIsrc):r.push(n)}if(r.length>0){let n=await ie(r.map(s=>s.uri)),c=[];for(let[s,d]of n.entries()){let g=d?.external_ids?.isrc;g&&(e.set(s,g),c.push({key:s,changes:{trackIsrc:g}}))}c.length>0&&await M.tracks.bulkUpdate(c)}return{isrcMap:e}}async function Ct(t){let e=new Map,r=new Map,i=[],l=t.filter(c=>c?.uri),a=l.map(c=>c.uri);if(a.length===0)return{trackPlayCountMap:e,trackDurationMap:r};let p=await M.tracks.bulkGet(a),n=new Map(p.filter(c=>!!c).map(c=>[c.trackUri,c]));for(let c of l){let s=n.get(c.uri);s?.trackPlayCount!=null&&e.set(c.uri,s.trackPlayCount),s?.trackDuration!=null&&r.set(c.uri,s.trackDuration),(s?.trackPlayCount==null||s?.trackDuration==null)&&i.push(c)}if(i.length>0){let c=new Set(i.map(g=>g.album.uri).filter(Boolean)),s=await ne(c),d=[];for(let[g,u]of s.entries()){let b=u,y=b.playcount!=null?Number.parseInt(String(b.playcount),10):null,f=b.duration?.totalMilliseconds??null;y!==null&&e.set(g,y),f!==null&&r.set(g,f),d.push({key:g,changes:{trackPlayCount:y,trackDuration:f}})}d.length>0&&await M.tracks.bulkUpdate(d)}return{trackPlayCountMap:e,trackDurationMap:r}}var St=t=>{let e=H(),r=[...e.defaultNormalizeWords,...e.customNormalizeWords],i=new RegExp(`\\b(${r.join("|")})\\b`,"gi");return t.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(i,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim()},Pt=O(function({track:e,trackPlayCounts:r,trackIsrcs:i}){let l=r.get(e.uri),a=l!=null?l.toLocaleString():"N/A",p=i.get(e.uri)||"N/A",n=e.album?.name||"N/A",c=e.artists?.map(s=>s.name).join(", ")||"N/A";return m("div",{className:"track-details",children:[m("div",{className:"track-details__line",children:[m("span",{className:"track-details__artists",children:["Artists: ",c]}),m("span",{className:"track-details__album",children:["Album: ",n]})]}),m("div",{className:"track-details__line",children:[m("span",{className:"track-details__playcount",children:["Plays: ",a]}),m("span",{className:"track-details__isrc",children:["ISRC: ",p]})]})]})}),Dt=O(function({trackUri:e,trackDuration:r}){let{position:i,duration:l,isCurrentlyPlayingThisTrack:a,togglePlay:p,handleSliderChange:n,handleSliderRelease:c}=fe(e,r),s=u=>{if(u==null||Number.isNaN(u)||u<0)return"N/A";let b=Math.floor(u/1e3),y=Math.floor(b/60),f=b%60;return`${y}:${f.toString().padStart(2,"0")}`},d=s(i),g=s(l);return m("div",{className:"duplicate-group__playback-controls",children:[o("button",{className:"duplicate-group__playback-button",onClick:p,type:"button",children:a?o(T.React.pause,{}):o(T.React.play,{})}),o("span",{className:"slider-time",children:d}),o(W,{max:l||0,min:0,onChange:n,onRelease:c,step:1,value:i||0}),o("span",{className:"slider-time",children:g})]})}),Ie=O(function({track:e,category:r,groupIndex:i,onDelete:l,isSource:a,trackPlayCounts:p,trackIsrcs:n,trackDurations:c}){return m("div",{className:`duplicate-group__duplicate-item duplicate-group__item--${r}`,children:[m("div",{className:"duplicate-group__duplicate-info",children:[m("div",{className:"duplicate-group__duplicate-content",children:[m("span",{className:"duplicate-group__duplicate-name",children:[a?"Source: ":"",e.name]}),o(Pt,{track:e,trackIsrcs:n,trackPlayCounts:p})]}),o("button",{className:"duplicate-group__delete-button",onClick:()=>l(r,i,e),type:"button",children:"Delete"})]}),o("div",{className:"duplicate-group__actions",children:o(Dt,{trackDuration:c.get(e.uri),trackUri:e.uri})})]})}),Nt=O(function({group:e,category:r,groupIndex:i,onDelete:l,trackPlayCounts:a,trackIsrcs:p,trackDurations:n}){return m("div",{className:`duplicate-group__item duplicate-group__item--${r}`,children:[o(Ie,{category:r,groupIndex:i,isSource:!0,onDelete:l,track:e.mainTrack,trackDurations:n,trackIsrcs:p,trackPlayCounts:a}),o("div",{className:"duplicate-group__duplicates-label",children:"Duplicates:"}),o("div",{className:"duplicate-group__duplicates-list",children:e.duplicates.map(c=>o(Ie,{category:r,groupIndex:i,onDelete:l,track:c,trackDurations:n,trackIsrcs:p,trackPlayCounts:a},`${c.uri}-${c.uid||c.uri}`))})]},`${e.mainTrack.uri}-${e.mainTrack.uid||i}`)}),U=O(function({title:e,groups:r,category:i,onDelete:l,trackPlayCounts:a,trackIsrcs:p,trackDurations:n}){return H().groupSettings[i]?m("div",{className:"duplicate-group",children:[m("div",{className:"duplicate-group__heading",children:[o("div",{className:"duplicate-group__heading-title",children:e}),m("div",{className:"duplicate-group__heading-length",children:[r.length," found"]})]}),r.length>0?o("div",{className:"duplicate-group__list",children:r.map((s,d)=>o(Nt,{category:i,group:s,groupIndex:d,onDelete:l,trackDurations:n,trackIsrcs:p,trackPlayCounts:a},`${s.mainTrack.uri}-${d}`))}):o("div",{className:"duplicate-group__empty",children:"No duplicates found in this category."})]}):null}),Mt=(t,e,r)=>{let i=new Set,l=(a,p,n)=>{let s=a.filter(u=>!i.has(u.uri)).filter(u=>{let b=n(p(u));return b!=null&&b!==""}),d=Object.groupBy(s,u=>n(p(u))),g=[];for(let u of Object.values(d))if(u&&u.length>1){let b=u.toSorted((y,f)=>(e.get(f.uri)??0)-(e.get(y.uri)??0));for(let y of b)i.add(y.uri);g.push({mainTrack:b[0],duplicates:b.slice(1)})}return g.sort((u,b)=>{let y=e.get(u.mainTrack.uri)??0,f=e.get(b.mainTrack.uri)??0;return f!==y?f-y:u.mainTrack.name.localeCompare(b.mainTrack.name)})};return{exact:l(t,a=>a.uri,a=>a),isrc:l(t,a=>r.get(a.uri),a=>a),likely:l(t,a=>a.name,a=>a?.trim()),possible:l(t,a=>a.name,a=>a?St(a):void 0)}};function It({selectedPlaylist:t}){let[e,r]=P([]),[i,l]=P(t||null),[a,p]=P([]),[n,c]=P(new Map),[s,d]=P(new Map),[g,u]=P(new Map),[b,y]=P({exact:[],isrc:[],likely:[],possible:[]});Y(()=>{let _=!1;return(async()=>{let S=await kt();_||(r(S),l(t||S.at(0)||null))})(),()=>{_=!0}},[t]);let f=X(_=>{let S=e.find(k=>k.uri===_)??null;l(S)},[e]),v=X(async _=>{i&&(await Spicetify.Platform.PlaylistAPI.remove(i.uri,[{uid:_.uid}]),p(S=>S.filter(k=>!(k.uri===_.uri&&k.uid===_.uid))))},[i]),w=X(async(_,S,k)=>{if(!H().confirmSettings[_]){await v(k);return}F({titleText:"Remove Track",descriptionText:`Are you sure you want to remove "${k.name}"? This cannot be undone.`,confirmText:"Remove",onConfirm:()=>void v(k),confirmLabel:"Remove",allowHTML:!1})},[v]);Y(()=>{p([]),y({exact:[],isrc:[],likely:[],possible:[]}),c(new Map),u(new Map),d(new Map);let _=!1;return(async()=>{if(!i?.uri)return;let k=await wt(i.uri);if(_)return;let C=k.items;if(p(C),C.length>0){let[K,Le]=await Promise.all([Ct(C),Tt(C)]);if(_)return;c(K.trackPlayCountMap),d(K.trackDurationMap),u(Le.isrcMap)}})(),()=>{_=!0}},[i]),Y(()=>{a.length===0?y({exact:[],isrc:[],likely:[],possible:[]}):(n.size>0||g.size>0)&&y(Mt(a,n,g))},[a,n,g]);let x=vt(()=>e.map(_=>({value:_.uri,label:_.name})),[e]);return m("div",{className:"find-duplicates",children:[m("div",{className:"find-duplicates__header",children:[o("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),o(B,{disabled:e.length===0,onChange:f,options:x,value:i?.uri||""})]}),o(U,{category:"exact",groups:b.exact,onDelete:w,title:"Exact URI Matches",trackDurations:s,trackIsrcs:g,trackPlayCounts:n}),o(U,{category:"isrc",groups:b.isrc,onDelete:w,title:"Same ISRC",trackDurations:s,trackIsrcs:g,trackPlayCounts:n}),o(U,{category:"likely",groups:b.likely,onDelete:w,title:"Same Title (Likely Duplicates)",trackDurations:s,trackIsrcs:g,trackPlayCounts:n}),o(U,{category:"possible",groups:b.possible,onDelete:w,title:"Similar Title (Possible Duplicates)",trackDurations:s,trackIsrcs:g,trackPlayCounts:n})]})}var Re=It;var Ae=new CSSStyleSheet;Ae.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-player);--fdp-surface-2: var(--spice-player);--fdp-overlay: rgba(255, 255, 255, .02);--fdp-shadow: 0 4px 12px rgba(0, 0, 0, .28);--fdp-shadow-sm: 0 2px 6px rgba(0, 0, 0, .2);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-primary, #1db954);--fdp-exact: 255 90 90;--fdp-isrc: 255 144 80;--fdp-likely: 234 234 102;--fdp-possible: 128 239 128;display:flex;flex-direction:column;gap:var(--fdp-gap);width:100%;animation:fdp-fade-in .24s ease-out both;.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius);box-shadow:none;.find-duplicates__header-label{font-weight:700;color:var(--fdp-text);letter-spacing:.2px}}.find-duplicates__details{font-size:1.1rem;color:var(--fdp-subtext)}}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg);box-shadow:none;transition:border-color .2s ease,background-color .2s ease;&:hover{background-color:var(--fdp-surface);border-color:var(--fdp-border-strong)}.duplicate-group__heading{display:flex;gap:12px;align-items:center;justify-content:space-between;font-size:1.05rem;font-weight:800;color:var(--fdp-text);.duplicate-group__heading-length{align-content:center;padding:2px 10px;font-size:12px;font-weight:600;color:var(--fdp-text);background:#ffffff0a;border:1px solid var(--fdp-border);border-radius:999px;box-shadow:none}}.duplicate-group__list{display:flex;flex-direction:column;gap:12px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;background:transparent;border:1px solid var(--fdp-border);border-left:4px solid;border-radius:var(--fdp-radius);transition:background-color .16s ease,border-color .16s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.06);border-color:var(--fdp-border-strong)}&.duplicate-group__item--exact{border-left-color:rgb(var(--fdp-exact));box-shadow:none}&.duplicate-group__item--isrc{border-left-color:rgb(var(--fdp-isrc));box-shadow:none}&.duplicate-group__item--likely{border-left-color:rgb(var(--fdp-likely));box-shadow:none}&.duplicate-group__item--possible{border-left-color:rgb(var(--fdp-possible));box-shadow:none}}.duplicate-group__playback-controls{display:flex;flex-grow:1;gap:10px;align-items:center;width:100%}.duplicate-group__playback-button{display:flex;flex-shrink:0;align-items:center;justify-content:center;width:32px;height:32px;padding:0;color:#fff;cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%;transition:background-color .14s ease,border-color .14s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}&:active{background-color:rgba(var(--spice-rgb-selected-row),.12)}svg{width:18px;height:18px}}.slider-time{min-width:38px;font-size:13px;color:var(--fdp-subtext);text-align:center}.duplicate-group__duplicates-label{padding-left:15px;font-size:14px;font-weight:700;color:var(--fdp-subtext)}.duplicate-group__duplicates-list{padding-left:15px}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:700;color:var(--fdp-text);letter-spacing:.2px;white-space:nowrap}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:10px;font-size:1rem;border-bottom:1px solid var(--fdp-border);&:last-child{border-bottom:none}}.duplicate-group__actions{padding-bottom:8px}.duplicate-group__duplicate-info{display:flex;flex-direction:row;flex-wrap:nowrap;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex:1 1 auto;flex-direction:column;gap:6px;min-width:0}.duplicate-group__delete-button{padding:8px 14px;font-size:.9rem;font-weight:700;line-height:1;color:#fff;cursor:pointer;background-color:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:20px;transition:filter .14s ease,background-color .14s ease,border-color .14s ease;&:hover{border-color:#e9142999;filter:brightness(1.05)}&:active{background-color:#c71124}}}.track-details{display:flex;flex-direction:column;font-size:.92rem;color:var(--fdp-subtext);.track-details__line{display:flex;flex-wrap:wrap;gap:10px}}.duplicate-settings{width:100%;.duplicate-settings__section{margin-bottom:24px;.duplicate-settings__section-title{padding-bottom:8px;margin-bottom:16px;font-size:16px;font-weight:800;border-bottom:1px solid var(--fdp-border)}}.duplicate-settings__description{margin-bottom:12px;font-size:13px;color:var(--fdp-subtext)}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}.duplicate-settings__option{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}.duplicate-settings__words-list{max-height:200px;overflow-y:auto;.duplicate-settings__no-words{padding:12px;color:var(--fdp-subtext);text-align:center;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}}.duplicate-settings__words-ul{padding:0;margin:0}.duplicate-settings__word-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;margin-bottom:8px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm);.duplicate-settings__word-remove{padding:6px 10px;font-size:12px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ff5a5ae6,#ff3c3ce6);border:1px solid rgba(255,90,90,.35);border-radius:999px;transition:transform .14s ease,box-shadow .16s ease,filter .16s ease;&:hover{box-shadow:0 6px 16px #ff5a5a40;filter:brightness(1.06)}}}.duplicate-settings__actions{display:flex;justify-content:flex-end;margin-top:24px;.duplicate-settings__reset{padding:8px 14px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ffffff0f,#ffffff05);border:1px solid var(--fdp-border);border-radius:999px;transition:filter .16s ease,transform .14s ease,border-color .16s ease;&:hover{border-color:var(--fdp-border-strong);filter:brightness(1.08)}}}}.find-duplicates :is(button,[role=button],a,input,select,textarea):focus-visible{outline:none;border-color:color-mix(in srgb,var(--fdp-accent),transparent 40%);box-shadow:0 0 0 3px color-mix(in srgb,var(--fdp-accent),transparent 50%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 820px){.duplicate-group{padding:12px;.duplicate-group__empty,.duplicate-group__heading{flex-direction:column;gap:6px;align-items:flex-start}}}");var Oe=Ae;document.adoptedStyleSheets.push(Oe);var Rt=(t,e="main")=>{let r=i=>{let l=i==="settings";R({title:l?"Find Duplicates Settings":"Find Duplicates",content:l?o(Me,{}):o(Re,{selectedPlaylist:t}),isLarge:!0,buttons:m(ee,{children:[o(Spicetify.ReactComponent.TooltipWrapper,{label:l?"Back to Duplicates":"Settings",placement:"top",children:o("button",{className:`modal__button modal__button--${l?"back":"settings"}`,onClick:()=>r(l?"main":"settings"),children:l?o(T.React.duplicate,{size:18}):o(T.React.settings,{size:18})})}),o(Spicetify.ReactComponent.TooltipWrapper,{label:"GitHub",placement:"top",children:o("button",{className:"modal__button modal__button--github",onClick:()=>window.open("https://github.com/veryboringhwl/spicetify-extensions"),children:o(T.React.github,{size:18})})})]})})};r(e)},At=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:T.HTML.duplicate,onClick:async(t,e,r)=>{let i=j(t.props),l=i.uri,a=i.name,p=Spicetify.URI.from(l)?.type,n={uri:l,name:a||(await Spicetify.Platform.PlaylistAPI.getMetadata(l,{}))?.name||"",type:p||""};Rt(n)},shouldAdd:(t,e,r)=>{let i=j(t),l=Spicetify.URI.from(i.uri)?.type;return l===Spicetify.URI.Type.PLAYLIST||l===Spicetify.URI.Type.PLAYLIST_V2}});At.register();
