await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Vo=Object.create;var kn=Object.defineProperty;var Jo=Object.getOwnPropertyDescriptor;var qo=Object.getOwnPropertyNames;var es=Object.getPrototypeOf,ts=Object.prototype.hasOwnProperty;var ns=(f,r)=>()=>(f&&(r=f(f=0)),r);var Ci=(f,r)=>()=>(r||f((r={exports:{}}).exports,r),r.exports),rs=(f,r)=>{for(var l in r)kn(f,l,{get:r[l],enumerable:!0})},ki=(f,r,l,x)=>{if(r&&typeof r=="object"||typeof r=="function")for(let y of qo(r))!ts.call(f,y)&&y!==l&&kn(f,y,{get:()=>r[y],enumerable:!(x=Jo(r,y))||x.enumerable});return f};var Ke=(f,r,l)=>(l=f!=null?Vo(es(f)):{},ki(r||!f||!f.__esModule?kn(l,"default",{value:f,enumerable:!0}):l,f)),is=f=>ki(kn({},"__esModule",{value:!0}),f);var Ei={};rs(Ei,{Children:()=>as,Component:()=>os,Fragment:()=>ss,Profiler:()=>us,PureComponent:()=>cs,StrictMode:()=>ls,Suspense:()=>fs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>ds,act:()=>ps,cloneElement:()=>hs,createContext:()=>ms,createElement:()=>vs,createFactory:()=>ys,createRef:()=>gs,default:()=>Os,forwardRef:()=>bs,isValidElement:()=>Cr,lazy:()=>_s,memo:()=>Se,startTransition:()=>ws,unstable_act:()=>xs,useCallback:()=>Ss,useContext:()=>Cs,useDebugValue:()=>ks,useDeferredValue:()=>Es,useEffect:()=>at,useId:()=>kr,useImperativeHandle:()=>Ps,useInsertionEffect:()=>Rs,useLayoutEffect:()=>As,useMemo:()=>Er,useReducer:()=>Ts,useRef:()=>Ne,useState:()=>$e,useSyncExternalStore:()=>En,useTransition:()=>Ds,version:()=>Is});var as,os,ss,us,cs,ls,fs,ds,ps,hs,ms,vs,ys,gs,bs,Cr,_s,Se,ws,xs,Ss,Cs,ks,Es,at,kr,Ps,Rs,As,Er,Ts,Ne,$e,En,Ds,Is,Os,Be=ns(()=>{({Children:as,Component:os,Fragment:ss,Profiler:us,PureComponent:cs,StrictMode:ls,Suspense:fs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ds,act:ps,cloneElement:hs,createContext:ms,createElement:vs,createFactory:ys,createRef:gs,forwardRef:bs,isValidElement:Cr,lazy:_s,memo:Se,startTransition:ws,unstable_act:xs,useCallback:Ss,useContext:Cs,useDebugValue:ks,useDeferredValue:Es,useEffect:at,useId:kr,useImperativeHandle:Ps,useInsertionEffect:Rs,useLayoutEffect:As,useMemo:Er,useReducer:Ts,useRef:Ne,useState:$e,useSyncExternalStore:En,useTransition:Ds,version:Is}=Spicetify.React),Os=Spicetify.React});var je=Ci((Zu,Ii)=>{"use no memo";"use strict";var Ms=Object.create,An=Object.defineProperty,Ks=Object.getOwnPropertyDescriptor,Ns=Object.getOwnPropertyNames,Bs=Object.getPrototypeOf,js=Object.prototype.hasOwnProperty,Fs=(f,r)=>{for(var l in r)An(f,l,{get:r[l],enumerable:!0})},Ti=(f,r,l,x)=>{if(r&&typeof r=="object"||typeof r=="function")for(let y of Ns(r))!js.call(f,y)&&y!==l&&An(f,y,{get:()=>r[y],enumerable:!(x=Ks(r,y))||x.enumerable});return f},$s=(f,r,l)=>(l=f!=null?Ms(Bs(f)):{},Ti(r||!f||!f.__esModule?An(l,"default",{value:f,enumerable:!0}):l,f)),Ls=f=>Ti(An({},"__esModule",{value:!0}),f),Di={};Fs(Di,{$dispatcherGuard:()=>Ws,$makeReadOnly:()=>Ys,$reset:()=>Zs,$structuralCheck:()=>Js,c:()=>Hs,clearRenderCounterRegistry:()=>Gs,renderCounterRegistry:()=>Yt,useRenderCounter:()=>Vs});Ii.exports=Ls(Di);var Dt=$s((Be(),is(Ei))),{useRef:zs,useEffect:Us,isValidElement:At}=Dt,Pi,Pr=(Pi=Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Pi:Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rr=Symbol.for("react.memo_cache_sentinel"),Ri,Hs=typeof((Ri=Dt.__COMPILER_RUNTIME)==null?void 0:Ri.c)=="function"?Dt.__COMPILER_RUNTIME.c:function(r){return Dt.useMemo(()=>{let l=new Array(r);for(let x=0;x<r;x++)l[x]=Rr;return l[Rr]=!0,l},[])},Rn={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(f=>{Rn[f]=()=>{throw new Error(`[React] Unexpected React hook call (${f}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var Zt=null;Rn.useMemoCache=f=>{if(Zt==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return Zt.useMemoCache(f)};function Pn(f){return Pr.ReactCurrentDispatcher.current=f,Pr.ReactCurrentDispatcher.current}var Tt=[];function Ws(f){let r=Pr.ReactCurrentDispatcher.current;if(f===0){if(Tt.push(r),Tt.length===1&&(Zt=r),r===Rn)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");Pn(Rn)}else if(f===1){let l=Tt.pop();if(l==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Tt.length===0&&(Zt=null),Pn(l)}else if(f===2)Tt.push(r),Pn(Zt);else if(f===3){let l=Tt.pop();if(l==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Pn(l)}else throw new Error("React Compiler internal error: unreachable block"+f)}function Zs(f){for(let r=0;r<f.length;r++)f[r]=Rr}function Ys(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Yt=new Map;function Gs(){for(let f of Yt.values())f.forEach(r=>{r.count=0})}function Qs(f,r){let l=Yt.get(f);l==null&&(l=new Set,Yt.set(f,l)),l.add(r)}function Xs(f,r){let l=Yt.get(f);l?.delete(r)}function Vs(f){let r=zs(null);r.current!=null&&(r.current.count+=1),Us(()=>{if(r.current==null){let l={count:0};Qs(f,l),r.current=l}return()=>{r.current!==null&&Xs(f,r.current)}})}var Ai=new Set;function Js(f,r,l,x,y,b){function m(P,k,O,I){let B=`${x}:${b} [${y}] ${l}${O} changed from ${P} to ${k} at depth ${I}`;Ai.has(B)||(Ai.add(B),console.error(B))}let _=2;function C(P,k,O,I){if(!(I>_)){if(P===k)return;if(typeof P!=typeof k)m(`type ${typeof P}`,`type ${typeof k}`,O,I);else if(typeof P=="object"){let B=Array.isArray(P),j=Array.isArray(k);if(P===null&&k!==null)m("null",`type ${typeof k}`,O,I);else if(k===null)m(`type ${typeof P}`,"null",O,I);else if(P instanceof Map)if(!(k instanceof Map))m("Map instance","other value",O,I);else if(P.size!==k.size)m(`Map instance with size ${P.size}`,`Map instance with size ${k.size}`,O,I);else for(let[N,H]of P)k.has(N)?C(H,k.get(N),`${O}.get(${N})`,I+1):m(`Map instance with key ${N}`,`Map instance without key ${N}`,O,I);else if(k instanceof Map)m("other value","Map instance",O,I);else if(P instanceof Set)if(!(k instanceof Set))m("Set instance","other value",O,I);else if(P.size!==k.size)m(`Set instance with size ${P.size}`,`Set instance with size ${k.size}`,O,I);else for(let N of k)P.has(N)||m(`Set instance without element ${N}`,`Set instance with element ${N}`,O,I);else if(k instanceof Set)m("other value","Set instance",O,I);else if(B||j)if(B!==j)m(`type ${B?"array":"object"}`,`type ${j?"array":"object"}`,O,I);else if(P.length!==k.length)m(`array with length ${P.length}`,`array with length ${k.length}`,O,I);else for(let N=0;N<P.length;N++)C(P[N],k[N],`${O}[${N}]`,I+1);else if(At(P)||At(k))At(P)!==At(k)?m(`type ${At(P)?"React element":"object"}`,`type ${At(k)?"React element":"object"}`,O,I):P.type!==k.type?m(`React element of type ${P.type}`,`React element of type ${k.type}`,O,I):C(P.props,k.props,`[props of ${O}]`,I+1);else{for(let N in k)N in P||m(`object without key ${N}`,`object with key ${N}`,O,I);for(let N in P)N in k?C(P[N],k[N],`${O}.${N}`,I+1):m(`object with key ${N}`,`object without key ${N}`,O,I)}}else{if(typeof P=="function")return;isNaN(P)||isNaN(k)?isNaN(P)!==isNaN(k)&&m(`${isNaN(P)?"NaN":"non-NaN value"}`,`${isNaN(k)?"NaN":"non-NaN value"}`,O,I):P!==k&&m(P,k,O,I)}}}C(f,r,"",0)}});var ji=Ci((Ir,Or)=>{(function(f,r){typeof Ir=="object"&&typeof Or<"u"?Or.exports=r():typeof define=="function"&&define.amd?define(r):(f=typeof globalThis<"u"?globalThis:f||self,f.Dexie=r())})(Ir,function(){"use strict";var f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},f(e,t)};function r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");f(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return l=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l.apply(this,arguments)};function x(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,b=Object.keys,m=Array.isArray;typeof Promise<"u"&&!y.Promise&&(y.Promise=Promise);function _(e,t){return typeof t!="object"||b(t).forEach(function(n){e[n]=t[n]}),e}var C=Object.getPrototypeOf,P={}.hasOwnProperty;function k(e,t){return P.call(e,t)}function O(e,t){typeof t=="function"&&(t=t(C(e))),(typeof Reflect>"u"?b:Reflect.ownKeys)(t).forEach(function(n){B(e,n,t[n])})}var I=Object.defineProperty;function B(e,t,n,i){I(e,t,_(n&&k(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function j(e){return{from:function(t){return e.prototype=Object.create(t.prototype),B(e.prototype,"constructor",e),{extend:O.bind(null,e.prototype)}}}}var N=Object.getOwnPropertyDescriptor;function H(e,t){var n=N(e,t),i;return n||(i=C(e))&&H(i,t)}var X=[].slice;function Y(e,t,n){return X.call(e,t,n)}function W(e,t){return t(e)}function ne(e){if(!e)throw new Error("Assertion Failed")}function de(e){y.setImmediate?setImmediate(e):setTimeout(e,0)}function le(e,t){return e.reduce(function(n,i,a){var o=t(i,a);return o&&(n[o[0]]=o[1]),n},{})}function ae(e,t){if(typeof t=="string"&&k(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,a=t.length;i<a;++i){var o=ae(e,t[i]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return u==null?void 0:ae(u,t.substr(s+1))}}function ie(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ne(typeof n!="string"&&"length"in n);for(var i=0,a=t.length;i<a;++i)ie(e,t[i],n[i])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),u=t.substr(o+1);if(u==="")n===void 0?m(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];(!c||!k(e,s))&&(c=e[s]={}),ie(c,u,n)}}else n===void 0?m(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function me(e,t){typeof t=="string"?ie(e,t,void 0):"length"in t&&[].map.call(t,function(n){ie(e,n,void 0)})}function ve(e){var t={};for(var n in e)k(e,n)&&(t[n]=e[n]);return t}var be=[].concat;function pe(e){return be.apply([],e)}var fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pe([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return y[e]}),ye=new Set(fe.map(function(e){return y[e]}));function q(e){var t={};for(var n in e)if(k(e,n)){var i=e[n];t[n]=!i||typeof i!="object"||ye.has(i.constructor)?i:q(i)}return t}function ee(e){for(var t in e)if(k(e,t))return!1;return!0}var se=null;function ke(e){se=new WeakMap;var t=Ae(e);return se=null,t}function Ae(e){if(!e||typeof e!="object")return e;var t=se.get(e);if(t)return t;if(m(e)){t=[],se.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(Ae(e[n]))}else if(ye.has(e.constructor))t=e;else{var a=C(e);t=a===Object.prototype?{}:Object.create(a),se.set(e,t);for(var o in e)k(e,o)&&(t[o]=Ae(e[o]))}return t}var Oe={}.toString;function Qe(e){return Oe.call(e).slice(8,-1)}var De=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_t=typeof De=="symbol"?function(e){var t;return e!=null&&(t=e[De])&&t.apply(e)}:function(){return null};function Le(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var ze={};function xe(e){var t,n,i,a;if(arguments.length===1){if(m(e))return e.slice();if(this===ze&&typeof e=="string")return[e];if(a=_t(e)){for(n=[];i=a.next(),!i.done;)n.push(i.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Nn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ca=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Br=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Bn=Ca.concat(Br),ka={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wt(e,t){this.name=e,this.message=t}j(wt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function jr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,a){return a.indexOf(n)===i}).join(`
`)}function Xt(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=jr(e,t)}j(Xt).from(wt);function xt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=jr(e,this.failures)}j(xt).from(wt);var jn=Bn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ea=wt,Q=Bn.reduce(function(e,t){var n=t+"Error";function i(a,o){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(o?`
 `+o:""),this.inner=o||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=ka[t]||n,this.inner=null)}return j(i).from(Ea),e[t]=i,e},{});Q.Syntax=SyntaxError,Q.Type=TypeError,Q.Range=RangeError;var Fr=Br.reduce(function(e,t){return e[t+"Error"]=Q[t],e},{});function Pa(e,t){if(!e||e instanceof wt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Fr[e.name])return e;var n=new Fr[e.name](t||e.message,e);return"stack"in e&&B(n,"stack",{get:function(){return this.inner.stack}}),n}var Vt=Bn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Q[t]),e},{});Vt.ModifyError=Xt,Vt.DexieError=wt,Vt.BulkError=xt;function he(){}function It(e){return e}function Ra(e,t){return e==null||e===It?t:function(n){return t(e(n))}}function ct(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Aa(e,t){return e===he?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ct(i,this.onsuccess):i),a&&(this.onerror=this.onerror?ct(a,this.onerror):a),o!==void 0?o:n}}function Ta(e,t){return e===he?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ct(n,this.onsuccess):n),i&&(this.onerror=this.onerror?ct(i,this.onerror):i)}}function Da(e,t){return e===he?t:function(n){var i=e.apply(this,arguments);_(n,i);var a=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ct(a,this.onsuccess):a),o&&(this.onerror=this.onerror?ct(o,this.onerror):o),i===void 0?s===void 0?void 0:s:_(i,s)}}function Ia(e,t){return e===he?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Fn(e,t){return e===he?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then(function(){return t.apply(i,o)})}return t.apply(this,arguments)}}var Ue=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $r(e,t){Ue=e}var Ot={},Lr=100,$n=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,C(t),e]})(),zr=$n[0],Ur=$n[1],Oa=$n[2],Ma=Ur&&Ur.then,lt=zr&&zr.constructor,Ln=!!Oa;function Ka(){queueMicrotask(Ba)}var Mt=function(e,t){Kt.push([e,t]),Jt&&(Ka(),Jt=!1)},zn=!0,Jt=!0,ft=[],qt=[],Un=It,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:he,pgp:!1,env:{},finalize:he},Z=Xe,Kt=[],dt=0,en=[];function L(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Z;if(typeof e!="function"){if(e!==Ot)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Wn(this,this._value);return}this._state=null,this._value=null,++t.ref,Wr(this,e)}var Hn={get:function(){var e=Z,t=an;function n(i,a){var o=this,s=!e.global&&(e!==Z||t!==an),u=s&&!Je(),c=new L(function(d,v){Zn(o,new Hr(Gr(i,e,s,u),Gr(a,e,s,u),d,v,e))});return this._consoleTask&&(c._consoleTask=this._consoleTask),c}return n.prototype=Ot,n},set:function(e){B(this,"then",e&&e.prototype===Ot?Hn:{get:function(){return e},set:Hn.set})}};O(L.prototype,{then:Hn,_then:function(e,t){Zn(this,new Hr(null,null,e,t,Z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(i){return i instanceof t?n(i):tn(i)}):this.then(null,function(i){return i&&i.name===t?n(i):tn(i)})},finally:function(e){return this.then(function(t){return L.resolve(e()).then(function(){return t})},function(t){return L.resolve(e()).then(function(){return tn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new L(function(i,a){var o=setTimeout(function(){return a(new Q.Timeout(t))},e);n.then(i,a).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(L.prototype,Symbol.toStringTag,"Dexie.Promise"),Xe.env=Yr();function Hr(e,t,n,i,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=a}O(L,{all:function(){var e=xe.apply(null,arguments).map(on);return new L(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(a,o){return L.resolve(a).then(function(s){e[o]=s,--i||t(e)},n)})})},resolve:function(e){if(e instanceof L)return e;if(e&&typeof e.then=="function")return new L(function(n,i){e.then(n,i)});var t=new L(Ot,!0,e);return t},reject:tn,race:function(){var e=xe.apply(null,arguments).map(on);return new L(function(t,n){e.map(function(i){return L.resolve(i).then(t,n)})})},PSD:{get:function(){return Z},set:function(e){return Z=e}},totalEchoes:{get:function(){return an}},newPSD:Ve,usePSD:pt,scheduler:{get:function(){return Mt},set:function(e){Mt=e}},rejectionMapper:{get:function(){return Un},set:function(e){Un=e}},follow:function(e,t){return new L(function(n,i){return Ve(function(a,o){var s=Z;s.unhandleds=[],s.onunhandled=o,s.finalize=ct(function(){var u=this;ja(function(){u.unhandleds.length===0?a():o(u.unhandleds[0])})},s.finalize),e()},t,n,i)})}}),lt&&(lt.allSettled&&B(L,"allSettled",function(){var e=xe.apply(null,arguments).map(on);return new L(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(a,o){return L.resolve(a).then(function(s){return i[o]={status:"fulfilled",value:s}},function(s){return i[o]={status:"rejected",reason:s}}).then(function(){return--n||t(i)})})})}),lt.any&&typeof AggregateError<"u"&&B(L,"any",function(){var e=xe.apply(null,arguments).map(on);return new L(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,a=new Array(i);e.forEach(function(o,s){return L.resolve(o).then(function(u){return t(u)},function(u){a[s]=u,--i||n(new AggregateError(a))})})})}),lt.withResolvers&&(L.withResolvers=lt.withResolvers));function Wr(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&St();n&&typeof n.then=="function"?Wr(e,function(a,o){n instanceof L?n._then(a,o):n.then(a,o)}):(e._state=!0,e._value=n,Zr(e)),i&&Ct()}},Wn.bind(null,e))}catch(n){Wn(e,n)}}function Wn(e,t){if(qt.push(t),e._state===null){var n=e._lib&&St();t=Un(t),e._state=!1,e._value=t,Fa(e),Zr(e),n&&Ct()}}function Zr(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)Zn(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),dt===0&&(++dt,Mt(function(){--dt===0&&Yn()},[]))}function Zn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++dt,Mt(Na,[n,e,t])}function Na(e,t,n){try{var i,a=t._value;!t._state&&qt.length&&(qt=[]),i=Ue&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),!t._state&&qt.indexOf(a)===-1&&$a(t),n.resolve(i)}catch(o){n.reject(o)}finally{--dt===0&&Yn(),--n.psd.ref||n.psd.finalize()}}function Ba(){pt(Xe,function(){St()&&Ct()})}function St(){var e=zn;return zn=!1,Jt=!1,e}function Ct(){var e,t,n;do for(;Kt.length>0;)for(e=Kt,Kt=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(Kt.length>0);zn=!0,Jt=!0}function Yn(){var e=ft;ft=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=en.slice(0),n=t.length;n;)t[--n]()}function ja(e){function t(){e(),en.splice(en.indexOf(t),1)}en.push(t),++dt,Mt(function(){--dt===0&&Yn()},[])}function Fa(e){ft.some(function(t){return t._value===e._value})||ft.push(e)}function $a(e){for(var t=ft.length;t;)if(ft[--t]._value===e._value){ft.splice(t,1);return}}function tn(e){return new L(Ot,!1,e)}function ge(e,t){var n=Z;return function(){var i=St(),a=Z;try{return qe(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{qe(a,!1),i&&Ct()}}}var Ce={awaits:0,echoes:0,id:0},La=0,nn=[],rn=0,an=0,za=0;function Ve(e,t,n,i){var a=Z,o=Object.create(a);o.parent=a,o.ref=0,o.global=!1,o.id=++za,Xe.env,o.env=Ln?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},t&&_(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=pt(o,e,n,i);return o.ref===0&&o.finalize(),s}function kt(){return Ce.id||(Ce.id=++La),++Ce.awaits,Ce.echoes+=Lr,Ce.id}function Je(){return Ce.awaits?(--Ce.awaits===0&&(Ce.id=0),Ce.echoes=Ce.awaits*Lr,!0):!1}(""+Ma).indexOf("[native code]")===-1&&(kt=Je=he);function on(e){return Ce.echoes&&e&&e.constructor===lt?(kt(),e.then(function(t){return Je(),t},function(t){return Je(),we(t)})):e}function Ua(e){++an,(!Ce.echoes||--Ce.echoes===0)&&(Ce.echoes=Ce.awaits=Ce.id=0),nn.push(Z),qe(e,!0)}function Ha(){var e=nn[nn.length-1];nn.pop(),qe(e,!1)}function qe(e,t){var n=Z;if((t?Ce.echoes&&(!rn++||e!==Z):rn&&(!--rn||e!==Z))&&queueMicrotask(t?Ua.bind(null,e):Ha),e!==Z&&(Z=e,n===Xe&&(Xe.env=Yr()),Ln)){var i=Xe.env.Promise,a=e.env;(n.global||e.global)&&(Object.defineProperty(y,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject,a.allSettled&&(i.allSettled=a.allSettled),a.any&&(i.any=a.any))}}function Yr(){var e=y.Promise;return Ln?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function pt(e,t,n,i,a){var o=Z;try{return qe(e,!0),t(n,i,a)}finally{qe(o,!1)}}function Gr(e,t,n,i){return typeof e!="function"?e:function(){var a=Z;n&&kt(),qe(t,!0);try{return e.apply(this,arguments)}finally{qe(a,!1),i&&queueMicrotask(Je)}}}function Gn(e){Promise===lt&&Ce.echoes===0?rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var we=L.reject;function Qn(e,t,n,i){if(!e.idbdb||!e._state.openComplete&&!Z.letThrough&&!e._vip){if(e._state.openComplete)return we(new Q.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return we(new Q.DatabaseClosed);e.open().catch(he)}return e._state.dbReadyPromise.then(function(){return Qn(e,t,n,i)})}else{var a=e._createTransaction(t,n,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Qn(e,t,n,i)})):we(o)}return a._promise(t,function(o,s){return Ve(function(){return Z.trans=a,i(o,s,a)})}).then(function(o){if(t==="readwrite")try{a.idbtrans.commit()}catch{}return t==="readonly"?o:a._completion.then(function(){return o})})}}var Qr="4.2.1",ht="\uFFFF",Xn=-1/0,Ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xr="String expected.",Et=[],sn="__dbnames",Vn="readonly",Jn="readwrite";function mt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Vr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function un(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=ke(t),delete t[e]),t}:function(t){return t}}function Jr(){throw Q.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function oe(e,t){try{var n=qr(e),i=qr(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Za(ei(e),ei(t));case"Array":return Wa(e,t)}}catch{}return NaN}function Wa(e,t){for(var n=e.length,i=t.length,a=n<i?n:i,o=0;o<a;++o){var s=oe(e[o],t[o]);if(s!==0)return s}return n===i?0:n<i?-1:1}function Za(e,t){for(var n=e.length,i=t.length,a=n<i?n:i,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===i?0:n<i?-1:1}function qr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Qe(e);return n==="ArrayBuffer"?"binary":n}function ei(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function cn(e,t,n){var i=e.schema.yProps;return i?(t&&n.numFailures>0&&(t=t.filter(function(a,o){return!n.failures[o]})),Promise.all(i.map(function(a){var o=a.updatesTable;return t?e.db.table(o).where("k").anyOf(t).delete():e.db.table(o).clear()})).then(function(){return n})):n}var Nt=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,i=this["@@propmod"];if(i.add!==void 0){var a=i.add;if(m(a))return x(x([],m(t)?t:[],!0),a,!0).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(i.remove!==void 0){var o=i.remove;if(m(o))return m(t)?t.filter(function(u){return!o.includes(u)}).sort():[];if(typeof o=="number")return Number(t)-o;if(typeof o=="bigint")try{return BigInt(t)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var s=(n=i.replacePrefix)===null||n===void 0?void 0:n[0];return s&&typeof t=="string"&&t.startsWith(s)?i.replacePrefix[1]+t.substring(s.length):t},e})();function ti(e,t){for(var n=b(t),i=n.length,a=!1,o=0;o<i;++o){var s=n[o],u=t[s],c=ae(e,s);u instanceof Nt?(ie(e,s,u.execute(c)),a=!0):c!==u&&(ie(e,s,u),a=!0)}return a}var ni=(function(){function e(){}return e.prototype._trans=function(t,n,i){var a=this._tx||Z.trans,o=this.name,s=Ue&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function u(v,p,S){if(!S.schema[o])throw new Q.NotFound("Table "+o+" not part of transaction");return n(S.idbtrans,S)}var c=St();try{var d=a&&a.db._novip===this.db._novip?a===Z.trans?a._promise(t,u,i):Ve(function(){return a._promise(t,u,i)},{trans:a,transless:Z.transless||Z}):Qn(this.db,t,[this.name],u);return s&&(d._consoleTask=s,d=d.catch(function(v){return console.trace(v),we(v)})),d}finally{c&&Ct()}},e.prototype.get=function(t,n){var i=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?we(new Q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:t}).then(function(o){return i.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(m(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=b(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&n.every(function(S){return v.keyPath.indexOf(S)>=0})){for(var p=0;p<n.length;++p)if(n.indexOf(v.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(v,p){return v.keyPath.length-p.keyPath.length})[0];if(i&&this.db._maxKey!==ht){var a=i.keyPath.slice(0,n.length);return this.where(a).equals(a.map(function(v){return t[v]}))}!i&&Ue&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var o=this.schema.idxByName;function s(v,p){return oe(v,p)===0}var u=n.reduce(function(v,p){var S=v[0],M=v[1],h=o[p],g=t[p];return[S||h,S||!h?mt(M,h&&h.multi?function(w){var E=ae(w,p);return m(E)&&E.some(function(A){return s(g,A)})}:function(w){return s(g,ae(w,p))}):M]},[null,null]),c=u[0],d=u[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(d):i?this.filter(d):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,m(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,i=n.db,a=n.name;this.schema.mappedClass=t,t.prototype instanceof Jr&&(t=(function(c){r(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(d.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),d.prototype.table=function(){return a},d})(t));for(var o=new Set,s=t.prototype;s;s=C(s))Object.getOwnPropertyNames(s).forEach(function(c){return o.add(c)});var u=function(c){if(!c)return c;var d=Object.create(t.prototype);for(var v in c)if(!o.has(v))try{d[v]=c[v]}catch{}return d};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},e.prototype.defineClass=function(){function t(n){_(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var i=this,a=this.schema.primKey,o=a.auto,s=a.keyPath,u=t;return s&&o&&(u=un(s)(t)),this._trans("readwrite",function(c){return i.core.mutate({trans:c,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(c){return c.numFailures?L.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{ie(t,s,c)}catch{}return c})},e.prototype.upsert=function(t,n){var i=this,a=this.schema.primKey.keyPath;return this._trans("readwrite",function(o){return i.core.get({trans:o,key:t}).then(function(s){var u=s??{};return ti(u,n),a&&ie(u,a,t),i.core.mutate({trans:o,type:"put",values:[u],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[n]}}).then(function(c){return c.numFailures?L.reject(c.failures[0]):!!s})})})},e.prototype.update=function(t,n){if(typeof t=="object"&&!m(t)){var i=ae(t,this.schema.primKey.keyPath);return i===void 0?we(new Q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var i=this,a=this.schema.primKey,o=a.auto,s=a.keyPath,u=t;return s&&o&&(u=un(s)(t)),this._trans("readwrite",function(c){return i.core.mutate({trans:c,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(c){return c.numFailures?L.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{ie(t,s,c)}catch{}return c})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:[t]}).then(function(a){return cn(n,[t],a)}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Vr}).then(function(i){return cn(t,null,i)})}).then(function(n){return n.numFailures?L.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(i){return n.core.getMany({keys:t,trans:i}).then(function(a){return a.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,i){var a=this,o=Array.isArray(n)?n:void 0;i=i||(o?void 0:n);var s=i?i.allKeys:void 0;return this._trans("readwrite",function(u){var c=a.schema.primKey,d=c.auto,v=c.keyPath;if(v&&o)throw new Q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,S=v&&d?t.map(un(v)):t;return a.core.mutate({trans:u,type:"add",keys:o,values:S,wantResults:s}).then(function(M){var h=M.numFailures,g=M.results,w=M.lastResult,E=M.failures,A=s?g:w;if(h===0)return A;throw new xt("".concat(a.name,".bulkAdd(): ").concat(h," of ").concat(p," operations failed"),E)})})},e.prototype.bulkPut=function(t,n,i){var a=this,o=Array.isArray(n)?n:void 0;i=i||(o?void 0:n);var s=i?i.allKeys:void 0;return this._trans("readwrite",function(u){var c=a.schema.primKey,d=c.auto,v=c.keyPath;if(v&&o)throw new Q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,S=v&&d?t.map(un(v)):t;return a.core.mutate({trans:u,type:"put",keys:o,values:S,wantResults:s}).then(function(M){var h=M.numFailures,g=M.results,w=M.lastResult,E=M.failures,A=s?g:w;if(h===0)return A;throw new xt("".concat(a.name,".bulkPut(): ").concat(h," of ").concat(p," operations failed"),E)})})},e.prototype.bulkUpdate=function(t){var n=this,i=this.core,a=t.map(function(u){return u.key}),o=t.map(function(u){return u.changes}),s=[];return this._trans("readwrite",function(u){return i.getMany({trans:u,keys:a,cache:"clone"}).then(function(c){var d=[],v=[];t.forEach(function(S,M){var h=S.key,g=S.changes,w=c[M];if(w){for(var E=0,A=Object.keys(g);E<A.length;E++){var T=A[E],D=g[T];if(T===n.schema.primKey.keyPath){if(oe(D,h)!==0)throw new Q.Constraint("Cannot update primary key in bulkUpdate()")}else ie(w,T,D)}s.push(M),d.push(h),v.push(w)}});var p=d.length;return i.mutate({trans:u,type:"put",keys:d,values:v,updates:{keys:a,changeSpecs:o}}).then(function(S){var M=S.numFailures,h=S.failures;if(M===0)return p;for(var g=0,w=Object.keys(h);g<w.length;g++){var E=w[g],A=s[Number(E)];if(A!=null){var T=h[E];delete h[E],h[A]=T}}throw new xt("".concat(n.name,".bulkUpdate(): ").concat(M," of ").concat(p," operations failed"),h)})})})},e.prototype.bulkDelete=function(t){var n=this,i=t.length;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:t}).then(function(o){return cn(n,t,o)})}).then(function(a){var o=a.numFailures,s=a.lastResult,u=a.failures;if(o===0)return s;throw new xt("".concat(n.name,".bulkDelete(): ").concat(o," of ").concat(i," operations failed"),u)})},e})();function Bt(e){var t={},n=function(u,c){if(c){for(var d=arguments.length,v=new Array(d-1);--d;)v[d-1]=arguments[d];return t[u].subscribe.apply(null,v),e}else if(typeof u=="string")return t[u]};n.addEventType=o;for(var i=1,a=arguments.length;i<a;++i)o(arguments[i]);return n;function o(u,c,d){if(typeof u=="object")return s(u);c||(c=Ia),d||(d=he);var v={subscribers:[],fire:d,subscribe:function(p){v.subscribers.indexOf(p)===-1&&(v.subscribers.push(p),v.fire=c(v.fire,p))},unsubscribe:function(p){v.subscribers=v.subscribers.filter(function(S){return S!==p}),v.fire=v.subscribers.reduce(c,d)}};return t[u]=n[u]=v,v}function s(u){b(u).forEach(function(c){var d=u[c];if(m(d))o(c,u[c][0],u[c][1]);else if(d==="asap")var v=o(c,It,function(){for(var S=arguments.length,M=new Array(S);S--;)M[S]=arguments[S];v.subscribers.forEach(function(h){de(function(){h.apply(null,M)})})});else throw new Q.InvalidArgument("Invalid event config")})}}function jt(e,t){return j(t).from({prototype:e}),t}function Ya(e){return jt(ni.prototype,function(n,i,a){this.db=e,this._tx=a,this.name=n,this.schema=i,this.hook=e._allTables[n]?e._allTables[n].hook:Bt(null,{creating:[Aa,he],reading:[Ra,It],updating:[Da,he],deleting:[Ta,he]})})}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qn(e,t){e.filter=mt(e.filter,t)}function er(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return mt(i(),t())}:t,e.justLimit=n&&!i}function Ga(e,t){e.isMatch=mt(e.isMatch,t)}function ln(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new Q.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ri(e,t,n){var i=ln(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function fn(e,t,n,i){var a=e.replayFilter?mt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(u,c,d){if(!a||a(c,d,function(S){return c.stop(S)},function(S){return c.fail(S)})){var v=c.primaryKey,p=""+v;p==="[object ArrayBuffer]"&&(p=""+new Uint8Array(v)),k(o,p)||(o[p]=!0,t(u,c,d))}};return Promise.all([e.or._iterate(s,n),ii(ri(e,i,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return ii(ri(e,i,n),mt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function ii(e,t,n,i){var a=i?function(s,u,c){return n(i(s),u,c)}:n,o=ge(a);return e.then(function(s){if(s)return s.start(function(){var u=function(){return s.continue()};(!t||t(s,function(c){return u=c},function(c){s.stop(c),u=he},function(c){s.fail(c),u=he}))&&o(s.value,s,function(c){return u=c}),u()})})}var Qa=(function(){function e(){}return e.prototype._read=function(t,n){var i=this._ctx;return i.error?i.table._trans(null,we.bind(null,i.error)):i.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,we.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=mt(n.algorithm,t)},e.prototype._iterate=function(t,n){return fn(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return t&&_(i,t),n._ctx=i,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(i){return fn(n,t,i,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(i){var a=n._ctx,o=a.table.core;if(Pt(a,!0))return o.count({trans:i,query:{index:ln(a,o.schema),range:a.range}}).then(function(u){return Math.min(u,a.limit)});var s=0;return fn(a,function(){return++s,!1},i,o).then(function(){return s})}).then(t)},e.prototype.sortBy=function(t,n){var i=t.split(".").reverse(),a=i[0],o=i.length-1;function s(d,v){return v?s(d[i[v]],v-1):d[a]}var u=this._ctx.dir==="next"?1:-1;function c(d,v){var p=s(d,o),S=s(v,o);return oe(p,S)*u}return this.toArray(function(d){return d.sort(c)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(i){var a=n._ctx;if(a.dir==="next"&&Pt(a,!0)&&a.limit>0){var o=a.valueMapper,s=ln(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:s,range:a.range}}).then(function(c){var d=c.result;return o?d.map(o):d})}else{var u=[];return fn(a,function(c){return u.push(c)},i,a.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Pt(n)?er(n,function(){var i=t;return function(a,o){return i===0?!0:i===1?(--i,!1):(o(function(){a.advance(i),i=0}),!1)}}):er(n,function(){var i=t;return function(){return--i<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),er(this._ctx,function(){var n=t;return function(i,a,o){return--n<=0&&a(o),n>=0}},!0),this},e.prototype.until=function(t,n){return qn(this._ctx,function(i,a,o){return t(i.value)?(a(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return qn(this._ctx,function(n){return t(n.value)}),Ga(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(a,o){i.push(o.key)}).then(function(){return i}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Pt(n,!0)&&n.limit>0)return this._read(function(a){var o=ln(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(a){var o=a.result;return o}).then(t);n.keysOnly=!n.isMatch;var i=[];return this.each(function(a,o){i.push(o.primaryKey)}).then(function(){return i}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var i={};return qn(this._ctx,function(a){var o=a.primaryKey.toString(),s=k(i,o);return i[o]=!0,!s}),this},e.prototype.modify=function(t){var n=this,i=this._ctx;return this._write(function(a){var o;typeof t=="function"?o=t:o=function(E){return ti(E,t)};var s=i.table.core,u=s.schema.primaryKey,c=u.outbound,d=u.extractKey,v=200,p=n.db._options.modifyChunkSize;p&&(typeof p=="object"?v=p[s.name]||p["*"]||200:v=p);var S=[],M=0,h=[],g=function(E,A){var T=A.failures,D=A.numFailures;M+=E-D;for(var R=0,F=b(T);R<F.length;R++){var z=F[R];S.push(T[z])}},w=t===ai;return n.clone().primaryKeys().then(function(E){var A=Pt(i)&&i.limit===1/0&&(typeof t!="function"||w)&&{index:i.index,range:i.range},T=function(D){var R=Math.min(v,E.length-D),F=E.slice(D,D+R);return(w?Promise.resolve([]):s.getMany({trans:a,keys:F,cache:"immutable"})).then(function(z){var $=[],V=[],re=c?[]:null,U=w?F:[];if(!w)for(var te=0;te<R;++te){var J=z[te],ue={value:ke(J),primKey:E[D+te]};o.call(ue,ue.value,ue)!==!1&&(ue.value==null?U.push(E[D+te]):!c&&oe(d(J),d(ue.value))!==0?(U.push(E[D+te]),$.push(ue.value)):(V.push(ue.value),c&&re.push(E[D+te])))}return Promise.resolve($.length>0&&s.mutate({trans:a,type:"add",values:$}).then(function(G){for(var _e in G.failures)U.splice(parseInt(_e),1);g($.length,G)})).then(function(){return(V.length>0||A&&typeof t=="object")&&s.mutate({trans:a,type:"put",keys:re,values:V,criteria:A,changeSpec:typeof t!="function"&&t,isAdditionalChunk:D>0}).then(function(G){return g(V.length,G)})}).then(function(){return(U.length>0||A&&w)&&s.mutate({trans:a,type:"delete",keys:U,criteria:A,isAdditionalChunk:D>0}).then(function(G){return cn(i.table,U,G)}).then(function(G){return g(U.length,G)})}).then(function(){return E.length>D+R&&T(D+v)})})};return T(0).then(function(){if(S.length>0)throw new Xt("Error modifying one or more objects",S,M,h);return E.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Pt(t)&&!t.table.schema.yProps&&(t.isPrimKey||n.type===3)?this._write(function(i){var a=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:i,query:{index:a,range:o}}).then(function(s){return t.table.core.mutate({trans:i,type:"deleteRange",range:o}).then(function(u){var c=u.failures,d=u.numFailures;if(d)throw new Xt("Could not delete some values",Object.keys(c).map(function(v){return c[v]}),s-d);return s-d})})}):this.modify(ai)},e})(),ai=function(e,t){return t.value=null};function Xa(e){return jt(Qa.prototype,function(n,i){this.db=e;var a=Vr,o=null;if(i)try{a=i()}catch(d){o=d}var s=n._ctx,u=s.table,c=u.hook.reading.fire;this._ctx={table:u,index:s.index,isPrimKey:!s.index||u.schema.primKey.keyPath&&s.index===u.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:s.or,valueMapper:c!==It?c:null}})}function Va(e,t){return e<t?-1:e===t?0:1}function Ja(e,t){return e>t?-1:e===t?0:1}function Ie(e,t,n){var i=e instanceof si?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function Rt(e){return new e.Collection(e,function(){return oi("")}).limit(0)}function qa(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function eo(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function to(e,t,n,i,a,o){for(var s=Math.min(e.length,i.length),u=-1,c=0;c<s;++c){var d=t[c];if(d!==i[c])return a(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):a(e[c],i[c])<0?e.substr(0,c)+i[c]+n.substr(c+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;a(e[c],d)<0&&(u=c)}return s<i.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+i[u]+n.substr(u+1)}function dn(e,t,n,i){var a,o,s,u,c,d,v,p=n.length;if(!n.every(function(g){return typeof g=="string"}))return Ie(e,Xr);function S(g){a=qa(g),o=eo(g),s=g==="next"?Va:Ja;var w=n.map(function(E){return{lower:o(E),upper:a(E)}}).sort(function(E,A){return s(E.lower,A.lower)});u=w.map(function(E){return E.upper}),c=w.map(function(E){return E.lower}),d=g,v=g==="next"?"":i}S("next");var M=new e.Collection(e,function(){return et(u[0],c[p-1]+i)});M._ondirectionchange=function(g){S(g)};var h=0;return M._addAlgorithm(function(g,w,E){var A=g.key;if(typeof A!="string")return!1;var T=o(A);if(t(T,c,h))return!0;for(var D=null,R=h;R<p;++R){var F=to(A,T,u[R],c[R],s,d);F===null&&D===null?h=R+1:(D===null||s(D,F)>0)&&(D=F)}return w(D!==null?function(){g.continue(D+v)}:E),!1}),M}function et(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function oi(e){return{type:1,lower:e,upper:e}}var si=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,i,a){i=i!==!1,a=a===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(i||a)&&!(i&&a)?Rt(this):new this.Collection(this,function(){return et(t,n,!i,!a)})}catch{return Ie(this,Ye)}},e.prototype.equals=function(t){return t==null?Ie(this,Ye):new this.Collection(this,function(){return oi(t)})},e.prototype.above=function(t){return t==null?Ie(this,Ye):new this.Collection(this,function(){return et(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Ie(this,Ye):new this.Collection(this,function(){return et(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Ie(this,Ye):new this.Collection(this,function(){return et(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Ie(this,Ye):new this.Collection(this,function(){return et(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Ie(this,Xr):this.between(t,t+ht,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):dn(this,function(n,i){return n.indexOf(i[0])===0},[t],ht)},e.prototype.equalsIgnoreCase=function(t){return dn(this,function(n,i){return n===i[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=xe.apply(ze,arguments);return t.length===0?Rt(this):dn(this,function(n,i){return i.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=xe.apply(ze,arguments);return t.length===0?Rt(this):dn(this,function(n,i){return i.some(function(a){return n.indexOf(a)===0})},t,ht)},e.prototype.anyOf=function(){var t=this,n=xe.apply(ze,arguments),i=this._cmp;try{n.sort(i)}catch{return Ie(this,Ye)}if(n.length===0)return Rt(this);var a=new this.Collection(this,function(){return et(n[0],n[n.length-1])});a._ondirectionchange=function(s){i=s==="next"?t._ascending:t._descending,n.sort(i)};var o=0;return a._addAlgorithm(function(s,u,c){for(var d=s.key;i(d,n[o])>0;)if(++o,o===n.length)return u(c),!1;return i(d,n[o])===0?!0:(u(function(){s.continue(n[o])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[Xn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=xe.apply(ze,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ie(this,Ye)}var n=t.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[Xn,a]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var i=this,a=this._cmp,o=this._ascending,s=this._descending,u=this._min,c=this._max;if(t.length===0)return Rt(this);if(!t.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&o(R[0],R[1])<=0}))return Ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Q.InvalidArgument);var d=!n||n.includeLowers!==!1,v=n&&n.includeUppers===!0;function p(R,F){for(var z=0,$=R.length;z<$;++z){var V=R[z];if(a(F[0],V[1])<0&&a(F[1],V[0])>0){V[0]=u(V[0],F[0]),V[1]=c(V[1],F[1]);break}}return z===$&&R.push(F),R}var S=o;function M(R,F){return S(R[0],F[0])}var h;try{h=t.reduce(p,[]),h.sort(M)}catch{return Ie(this,Ye)}var g=0,w=v?function(R){return o(R,h[g][1])>0}:function(R){return o(R,h[g][1])>=0},E=d?function(R){return s(R,h[g][0])>0}:function(R){return s(R,h[g][0])>=0};function A(R){return!w(R)&&!E(R)}var T=w,D=new this.Collection(this,function(){return et(h[0][0],h[h.length-1][1],!d,!v)});return D._ondirectionchange=function(R){R==="next"?(T=w,S=o):(T=E,S=s),h.sort(M)},D._addAlgorithm(function(R,F,z){for(var $=R.key;T($);)if(++g,g===h.length)return F(z),!1;return A($)?!0:(i._cmp($,h[g][1])===0||i._cmp($,h[g][0])===0||F(function(){S===o?R.continue(h[g][0]):R.continue(h[g][1])}),!1)}),D},e.prototype.startsWithAnyOf=function(){var t=xe.apply(ze,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Rt(this):this.inAnyRange(t.map(function(n){return[n,n+ht]})):Ie(this,"startsWithAnyOf() only works with strings")},e})();function no(e){return jt(si.prototype,function(n,i,a){if(this.db=e,this._ctx={table:n,index:i===":id"?null:i,or:a},this._cmp=this._ascending=oe,this._descending=function(o,s){return oe(s,o)},this._max=function(o,s){return oe(o,s)>0?o:s},this._min=function(o,s){return oe(o,s)<0?o:s},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new Q.MissingAPI})}function He(e){return ge(function(t){return Ft(t),e(t.target.error),!1})}function Ft(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var $t="storagemutated",tr="x-storagemutated-1",tt=Bt(null,$t),ro=(function(){function e(){}return e.prototype._lock=function(){return ne(!Z.global),++this._reculock,this._reculock===1&&!Z.global&&(Z.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ne(!Z.global),--this._reculock===0)for(Z.global||(Z.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{pt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&Z.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(ne(!this.idbtrans),!t&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new Q.DatabaseClosed(a);case"MissingAPIError":throw new Q.MissingAPI(a.message,a);default:throw new Q.OpenFailed(a)}if(!this.active)throw new Q.TransactionInactive;return ne(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):i.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ge(function(o){Ft(o),n._reject(t.error)}),t.onabort=ge(function(o){Ft(o),n.active&&n._reject(new Q.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=ge(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&tt.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,i){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return we(new Q.ReadOnly("Transaction is readonly"));if(!this.active)return we(new Q.TransactionInactive);if(this._locked())return new L(function(s,u){a._blockedFuncs.push([function(){a._promise(t,n,i).then(s,u)},Z])});if(i)return Ve(function(){var s=new L(function(u,c){a._lock();var d=n(u,c,a);d&&d.then&&d.then(u,c)});return s.finally(function(){return a._unlock()}),s._lib=!0,s});var o=new L(function(s,u){var c=n(s,u,a);c&&c.then&&c.then(s,u)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),i=L.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return i});else{n._waitingFor=i,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new L(function(s,u){i.then(function(c){return n._waitingQueue.push(ge(s.bind(null,c)))},function(c){return n._waitingQueue.push(ge(u.bind(null,c)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Q.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(k(n,t))return n[t];var i=this.schema[t];if(!i)throw new Q.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,i,this);return a.core=this.db.core.table(t),n[t]=a,a},e})();function io(e){return jt(ro.prototype,function(n,i,a,o,s){var u=this;n!=="readonly"&&i.forEach(function(c){var d,v=(d=a[c])===null||d===void 0?void 0:d.yProps;v&&(i=i.concat(v.map(function(p){return p.updatesTable})))}),this.db=e,this.mode=n,this.storeNames=i,this.schema=a,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(c,d){u._resolve=c,u._reject=d}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(c){var d=u.active;return u.active=!1,u.on.error.fire(c),u.parent?u.parent._reject(c):d&&u.idbtrans&&u.idbtrans.abort(),we(c)})})}function nr(e,t,n,i,a,o,s,u){return{name:e,keyPath:t,unique:n,multi:i,auto:a,compound:o,src:(n&&!s?"&":"")+(i?"*":"")+(a?"++":"")+ui(t),type:u}}function ui(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function rr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:le(n,function(i){return[i.name,i]})}}function ao(e){return e.length===1?e[0]:e}var Lt=function(e){try{return e.only([[]]),Lt=function(){return[[]]},[[]]}catch{return Lt=function(){return ht},ht}};function ir(e){return e==null?function(){}:typeof e=="string"?oo(e):function(t){return ae(t,e)}}function oo(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ae(n,e)}}function ci(e){return[].slice.call(e)}var so=0;function zt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function uo(e,t,n){function i(p,S){var M=ci(p.objectStoreNames);return{schema:{name:p.name,tables:M.map(function(h){return S.objectStore(h)}).map(function(h){var g=h.keyPath,w=h.autoIncrement,E=m(g),A=g==null,T={},D={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A,compound:E,keyPath:g,autoIncrement:w,unique:!0,extractKey:ir(g)},indexes:ci(h.indexNames).map(function(R){return h.index(R)}).map(function(R){var F=R.name,z=R.unique,$=R.multiEntry,V=R.keyPath,re=m(V),U={name:F,compound:re,keyPath:V,unique:z,multiEntry:$,extractKey:ir(V)};return T[zt(V)]=U,U}),getIndexByKeyPath:function(R){return T[zt(R)]}};return T[":id"]=D.primaryKey,g!=null&&(T[zt(g)]=D.primaryKey),D})},hasGetAll:M.length>0&&"getAll"in S.objectStore(M[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(p){if(p.type===3)return null;if(p.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=p.lower,M=p.upper,h=p.lowerOpen,g=p.upperOpen,w=S===void 0?M===void 0?null:t.upperBound(M,!!g):M===void 0?t.lowerBound(S,!!h):t.bound(S,M,!!h,!!g);return w}function o(p){var S=p.name;function M(w){var E=w.trans,A=w.type,T=w.keys,D=w.values,R=w.range;return new Promise(function(F,z){F=ge(F);var $=E.objectStore(S),V=$.keyPath==null,re=A==="put"||A==="add";if(!re&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var U=(T||D||{length:1}).length;if(T&&D&&T.length!==D.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return F({numFailures:0,failures:{},results:[],lastResult:void 0});var te,J=[],ue=[],G=0,_e=function(Ze){++G,Ft(Ze)};if(A==="deleteRange"){if(R.type===4)return F({numFailures:G,failures:ue,results:[],lastResult:void 0});R.type===3?J.push(te=$.clear()):J.push(te=$.delete(a(R)))}else{var Pe=re?V?[D,T]:[D,null]:[T,null],We=Pe[0],Te=Pe[1];if(re)for(var Me=0;Me<U;++Me)J.push(te=Te&&Te[Me]!==void 0?$[A](We[Me],Te[Me]):$[A](We[Me])),te.onerror=_e;else for(var Me=0;Me<U;++Me)J.push(te=$[A](We[Me])),te.onerror=_e}var it=function(Ze){var Wt=Ze.target.result;J.forEach(function(Fe,Cn){return Fe.error!=null&&(ue[Cn]=Fe.error)}),F({numFailures:G,failures:ue,results:A==="delete"?T:J.map(function(Fe){return Fe.result}),lastResult:Wt})};te.onerror=function(Ze){_e(Ze),it(Ze)},te.onsuccess=it})}function h(w){var E=w.trans,A=w.values,T=w.query,D=w.reverse,R=w.unique;return new Promise(function(F,z){F=ge(F);var $=T.index,V=T.range,re=E.objectStore(S),U=$.isPrimaryKey?re:re.index($.name),te=D?R?"prevunique":"prev":R?"nextunique":"next",J=A||!("openKeyCursor"in U)?U.openCursor(a(V),te):U.openKeyCursor(a(V),te);J.onerror=He(z),J.onsuccess=ge(function(ue){var G=J.result;if(!G){F(null);return}G.___id=++so,G.done=!1;var _e=G.continue.bind(G),Pe=G.continuePrimaryKey;Pe&&(Pe=Pe.bind(G));var We=G.advance.bind(G),Te=function(){throw new Error("Cursor not started")},Me=function(){throw new Error("Cursor not stopped")};G.trans=E,G.stop=G.continue=G.continuePrimaryKey=G.advance=Te,G.fail=ge(z),G.next=function(){var it=this,Ze=1;return this.start(function(){return Ze--?it.continue():it.stop()}).then(function(){return it})},G.start=function(it){var Ze=new Promise(function(Fe,Cn){Fe=ge(Fe),J.onerror=He(Cn),G.fail=Cn,G.stop=function(Xo){G.stop=G.continue=G.continuePrimaryKey=G.advance=Me,Fe(Xo)}}),Wt=function(){if(J.result)try{it()}catch(Fe){G.fail(Fe)}else G.done=!0,G.start=function(){throw new Error("Cursor behind last entry")},G.stop()};return J.onsuccess=ge(function(Fe){J.onsuccess=Wt,Wt()}),G.continue=_e,G.continuePrimaryKey=Pe,G.advance=We,Wt(),Ze},F(G)},z)})}function g(w){return function(E){return new Promise(function(A,T){A=ge(A);var D=E.trans,R=E.values,F=E.limit,z=E.query,$=F===1/0?void 0:F,V=z.index,re=z.range,U=D.objectStore(S),te=V.isPrimaryKey?U:U.index(V.name),J=a(re);if(F===0)return A({result:[]});if(w){var ue=R?te.getAll(J,$):te.getAllKeys(J,$);ue.onsuccess=function(We){return A({result:We.target.result})},ue.onerror=He(T)}else{var G=0,_e=R||!("openKeyCursor"in te)?te.openCursor(J):te.openKeyCursor(J),Pe=[];_e.onsuccess=function(We){var Te=_e.result;if(!Te)return A({result:Pe});if(Pe.push(R?Te.value:Te.primaryKey),++G===F)return A({result:Pe});Te.continue()},_e.onerror=He(T)}})}}return{name:S,schema:p,mutate:M,getMany:function(w){var E=w.trans,A=w.keys;return new Promise(function(T,D){T=ge(T);for(var R=E.objectStore(S),F=A.length,z=new Array(F),$=0,V=0,re,U=function(G){var _e=G.target;(z[_e._pos]=_e.result)!=null,++V===$&&T(z)},te=He(D),J=0;J<F;++J){var ue=A[J];ue!=null&&(re=R.get(A[J]),re._pos=J,re.onsuccess=U,re.onerror=te,++$)}$===0&&T(z)})},get:function(w){var E=w.trans,A=w.key;return new Promise(function(T,D){T=ge(T);var R=E.objectStore(S),F=R.get(A);F.onsuccess=function(z){return T(z.target.result)},F.onerror=He(D)})},query:g(c),openCursor:h,count:function(w){var E=w.query,A=w.trans,T=E.index,D=E.range;return new Promise(function(R,F){var z=A.objectStore(S),$=T.isPrimaryKey?z:z.index(T.name),V=a(D),re=V?$.count(V):$.count();re.onsuccess=ge(function(U){return R(U.target.result)}),re.onerror=He(F)})}}}var s=i(e,n),u=s.schema,c=s.hasGetAll,d=u.tables.map(function(p){return o(p)}),v={};return d.forEach(function(p){return v[p.name]=p}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(p){var S=v[p];if(!S)throw new Error("Table '".concat(p,"' not found"));return v[p]},MIN_KEY:-1/0,MAX_KEY:Lt(t),schema:u}}function co(e,t){return t.reduce(function(n,i){var a=i.create;return l(l({},n),a(n))},e)}function lo(e,t,n,i){var a=n.IDBKeyRange;n.indexedDB;var o=co(uo(t,a,i),e.dbcore);return{dbcore:o}}function pn(e,t){var n=t.db,i=lo(e._middlewares,n,e._deps,t);e.core=i.dbcore,e.tables.forEach(function(a){var o=a.name;e.core.schema.tables.some(function(s){return s.name===o})&&(a.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=a.core))})}function hn(e,t,n,i){n.forEach(function(a){var o=i[a];t.forEach(function(s){var u=H(s,a);(!u||"value"in u&&u.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?B(s,a,{get:function(){return this.table(a)},set:function(c){I(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[a]=new e.Table(a,o))})})}function ar(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function fo(e,t){return e._cfg.version-t._cfg.version}function po(e,t,n,i){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=rr("$meta",fi("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,a);o.create(n),o._completion.catch(i);var s=o._reject.bind(o),u=Z.transless||Z;Ve(function(){if(Z.trans=o,Z.transless=u,t===0)b(a).forEach(function(c){sr(n,c,a[c].primKey,a[c].indexes)}),pn(e,n),L.follow(function(){return e.on.populate.fire(o)}).catch(s);else return pn(e,n),mo(e,o,t).then(function(c){return vo(e,c,o,n)}).catch(s)})}function ho(e,t){li(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=vn(e,e.idbdb,t);yn(e,e._dbSchema,t);for(var i=or(n,e._dbSchema),a=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(d.name);d.add.forEach(function(p){Ue&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(p.src)),mn(v,p)})},o=0,s=i.change;o<s.length;o++){var u=s[o],c=a(u);if(typeof c=="object")return c.value}}function mo(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(i){return i??n}):L.resolve(n)}function vo(e,t,n,i){var a=[],o=e._versions,s=e._dbSchema=vn(e,e.idbdb,i),u=o.filter(function(d){return d._cfg.version>=t});if(u.length===0)return L.resolve();u.forEach(function(d){a.push(function(){var v=s,p=d._cfg.dbschema;yn(e,v,i),yn(e,p,i),s=e._dbSchema=p;var S=or(v,p);S.add.forEach(function(A){sr(i,A[0],A[1].primKey,A[1].indexes)}),S.change.forEach(function(A){if(A.recreate)throw new Q.Upgrade("Not yet support for changing primary key");var T=i.objectStore(A.name);A.add.forEach(function(D){return mn(T,D)}),A.change.forEach(function(D){T.deleteIndex(D.name),mn(T,D)}),A.del.forEach(function(D){return T.deleteIndex(D)})});var M=d._cfg.contentUpgrade;if(M&&d._cfg.version>t){pn(e,i),n._memoizedTables={};var h=ve(p);S.del.forEach(function(A){h[A]=v[A]}),ar(e,[e.Transaction.prototype]),hn(e,[e.Transaction.prototype],b(h),h),n.schema=h;var g=Nn(M);g&&kt();var w,E=L.follow(function(){if(w=M(n),w&&g){var A=Je.bind(null,null);w.then(A,A)}});return w&&typeof w.then=="function"?L.resolve(w):E.then(function(){return w})}}),a.push(function(v){var p=d._cfg.dbschema;yo(p,v),ar(e,[e.Transaction.prototype]),hn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),a.push(function(v){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===d._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(p){return p!=="$meta"})):v.objectStore("$meta").put(d._cfg.version,"version"))})});function c(){return a.length?L.resolve(a.shift()(n.idbtrans)).then(c):L.resolve()}return c().then(function(){li(s,i)})}function or(e,t){var n={del:[],add:[],change:[]},i;for(i in e)t[i]||n.del.push(i);for(i in t){var a=e[i],o=t[i];if(!a)n.add.push([i,o]);else{var s={name:i,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)s.recreate=!0,n.change.push(s);else{var u=a.idxByName,c=o.idxByName,d=void 0;for(d in u)c[d]||s.del.push(d);for(d in c){var v=u[d],p=c[d];v?v.src!==p.src&&s.change.push(p):s.add.push(p)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function sr(e,t,n,i){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(o){return mn(a,o)}),a}function li(e,t){b(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ue&&console.debug("Dexie: Creating missing table",n),sr(t,n,e[n].primKey,e[n].indexes))})}function yo(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function mn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function vn(e,t,n){var i={},a=Y(t.objectStoreNames,0);return a.forEach(function(o){for(var s=n.objectStore(o),u=s.keyPath,c=nr(ui(u),u||"",!0,!1,!!s.autoIncrement,u&&typeof u!="string",!0),d=[],v=0;v<s.indexNames.length;++v){var p=s.index(s.indexNames[v]);u=p.keyPath;var S=nr(p.name,u,!!p.unique,!!p.multiEntry,!1,u&&typeof u!="string",!1);d.push(S)}i[o]=rr(o,c,d)}),i}function go(e,t,n){e.verno=t.version/10;var i=e._dbSchema=vn(e,t,n);e._storeNames=Y(t.objectStoreNames,0),hn(e,[e._allTables],b(i),i)}function bo(e,t){var n=vn(e,e.idbdb,t),i=or(n,e._dbSchema);return!(i.add.length||i.change.some(function(a){return a.add.length||a.change.length}))}function yn(e,t,n){for(var i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c=s.indexNames[u],d=s.index(c).keyPath,v=typeof d=="string"?d:"["+Y(d).join("+")+"]";if(t[o]){var p=t[o].idxByName[v];p&&(p.name=c,delete t[o].idxByName[v],t[o].idxByName[c]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fi(e){return e.split(",").map(function(t,n){var i,a=t.split(":"),o=(i=a[1])===null||i===void 0?void 0:i.trim();t=a[0].trim();var s=t.replace(/([&*]|\+\+)/g,""),u=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return nr(s,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),m(u),n===0,o)})}var _o=(function(){function e(){}return e.prototype._createTableSchema=function(t,n,i){return rr(t,n,i)},e.prototype._parseIndexSyntax=function(t){return fi(t)},e.prototype._parseStoresSpec=function(t,n){var i=this;b(t).forEach(function(a){if(t[a]!==null){var o=i._parseIndexSyntax(t[a]),s=o.shift();if(!s)throw new Q.Schema("Invalid schema for table "+a+": "+t[a]);if(s.unique=!0,s.multi)throw new Q.Schema("Primary key cannot be multiEntry*");o.forEach(function(c){if(c.auto)throw new Q.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new Q.Schema("Index must have a name and cannot be an empty string")});var u=i._createTableSchema(a,s,o);n[a]=u}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,t):t;var i=n._versions,a={},o={};return i.forEach(function(s){_(a,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(a,o)}),n._dbSchema=o,ar(n,[n._allTables,n,n.Transaction.prototype]),hn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],b(o),o),n._storeNames=b(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Fn(this._cfg.contentUpgrade||he,t),this},e})();function wo(e){return jt(_o.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ur(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ge(sn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function cr(e){return e&&typeof e.databases=="function"}function xo(e){var t=e.indexedDB,n=e.IDBKeyRange;return cr(t)?Promise.resolve(t.databases()).then(function(i){return i.map(function(a){return a.name}).filter(function(a){return a!==sn})}):ur(t,n).toCollection().primaryKeys()}function So(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!cr(n)&&t!==sn&&ur(n,i).put({name:t}).catch(he)}function Co(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!cr(n)&&t!==sn&&ur(n,i).delete(t).catch(he)}function lr(e){return Ve(function(){return Z.letThrough=!0,e()})}function ko(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}var fr;function dr(e){return!("from"in e)}var Ee=function(e,t){if(this)_(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Ee;return e&&"d"in e&&_(n,e),n}};O(Ee.prototype,(fr={add:function(e){return Ht(this,e),this},addKey:function(e){return Ut(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Ut(t,n,n)}),this},hasKey:function(e){var t=gn(this).next(e).value;return t&&oe(t.from,e)<=0&&oe(t.to,e)>=0}},fr[De]=function(){return gn(this)},fr));function Ut(e,t,n){var i=oe(t,n);if(!isNaN(i)){if(i>0)throw RangeError();if(dr(e))return _(e,{from:t,to:n,d:1});var a=e.l,o=e.r;if(oe(n,e.from)<0)return a?Ut(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},pi(e);if(oe(t,e.to)>0)return o?Ut(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},pi(e);oe(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),oe(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;a&&!e.l&&Ht(e,a),o&&s&&Ht(e,o)}}function Ht(e,t){function n(i,a){var o=a.from,s=a.to,u=a.l,c=a.r;Ut(i,o,s),u&&n(i,u),c&&n(i,c)}dr(t)||n(e,t)}function di(e,t){var n=gn(t),i=n.next();if(i.done)return!1;for(var a=i.value,o=gn(e),s=o.next(a.from),u=s.value;!i.done&&!s.done;){if(oe(u.from,a.to)<=0&&oe(u.to,a.from)>=0)return!0;oe(a.from,u.from)<0?a=(i=n.next(u.from)).value:u=(s=o.next(a.from)).value}return!1}function gn(e){var t=dr(e)?null:{s:0,n:e};return{next:function(n){for(var i=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&oe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||oe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function pi(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=i>1?"r":i<-1?"l":"";if(a){var o=a==="r"?"l":"r",s=l({},e),u=e[a];e.from=u.from,e.to=u.to,e[a]=u[a],s[a]=u[o],e[o]=s,s.d=hi(s)}e.d=hi(e)}function hi(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function bn(e,t){return b(t).forEach(function(n){e[n]?Ht(e[n],t[n]):e[n]=q(t[n])}),e}function pr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&di(t[n],e[n])})}var vt={},hr={},mr=!1;function _n(e,t){bn(hr,e),mr||(mr=!0,setTimeout(function(){mr=!1;var n=hr;hr={},vr(n,!1)},0))}function vr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,a=Object.values(vt);i<a.length;i++){var o=a[i];mi(o,e,n,t)}else for(var s in e){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(u){var c=u[1],d=u[2],o=vt["idb://".concat(c,"/").concat(d)];o&&mi(o,e,n,t)}}n.forEach(function(v){return v()})}function mi(e,t,n,i){for(var a=[],o=0,s=Object.entries(e.queries.query);o<s.length;o++){for(var u=s[o],c=u[0],d=u[1],v=[],p=0,S=d;p<S.length;p++){var M=S[p];pr(t,M.obsSet)?M.subscribers.forEach(function(E){return n.add(E)}):i&&v.push(M)}i&&a.push([c,v])}if(i)for(var h=0,g=a;h<g.length;h++){var w=g[h],c=w[0],v=w[1];e.queries.query[c]=v}}function Eo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?we(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,a=Math.round(e.verno*10),o=!1;function s(){if(t.openCanceller!==i)throw new Q.DatabaseClosed("db.open() was cancelled")}var u=t.dbReadyResolve,c=null,d=!1,v=function(){return new L(function(p,S){if(s(),!n)throw new Q.MissingAPI;var M=e.name,h=t.autoSchema||!a?n.open(M):n.open(M,a);if(!h)throw new Q.MissingAPI;h.onerror=He(S),h.onblocked=ge(e._fireOnBlocked),h.onupgradeneeded=ge(function(g){if(c=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Ft,c.abort(),h.result.close();var w=n.deleteDatabase(M);w.onsuccess=w.onerror=ge(function(){S(new Q.NoSuchDatabase("Database ".concat(M," doesnt exist")))})}else{c.onerror=He(S);var E=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;d=E<1,e.idbdb=h.result,o&&ho(e,c),po(e,E/10,c,S)}},S),h.onsuccess=ge(function(){c=null;var g=e.idbdb=h.result,w=Y(g.objectStoreNames);if(w.length>0)try{var E=g.transaction(ao(w),"readonly");if(t.autoSchema)go(e,g,E);else if(yn(e,e._dbSchema,E),!bo(e,E)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),a=g.version+1,o=!0,p(v());pn(e,E)}catch{}Et.push(e),g.onversionchange=ge(function(A){t.vcFired=!0,e.on("versionchange").fire(A)}),g.onclose=ge(function(){e.close({disableAutoOpen:!1})}),d&&So(e._deps,M),p()},S)}).catch(function(p){switch(p?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(a>0)return a=0,v();break}return L.reject(p)})};return L.race([i,(typeof navigator>"u"?L.resolve():ko()).then(v)]).then(function(){return s(),t.onReadyBeingFired=[],L.resolve(lr(function(){return e.on.ready.fire(e.vip)})).then(function p(){if(t.onReadyBeingFired.length>0){var S=t.onReadyBeingFired.reduce(Fn,he);return t.onReadyBeingFired=[],L.resolve(lr(function(){return S(e.vip)})).then(p)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(p){t.dbOpenError=p;try{c&&c.abort()}catch{}return i===t.openCanceller&&e._close(),we(p)}).finally(function(){t.openComplete=!0,u()}).then(function(){if(d){var p={};e.tables.forEach(function(S){S.schema.indexes.forEach(function(M){M.name&&(p["idb://".concat(e.name,"/").concat(S.name,"/").concat(M.name)]=new Ee(-1/0,[[[]]]))}),p["idb://".concat(e.name,"/").concat(S.name,"/")]=p["idb://".concat(e.name,"/").concat(S.name,"/:dels")]=new Ee(-1/0,[[[]]])}),tt($t).fire(p),vr(p,!0)}return e})}function yr(e){var t=function(s){return e.next(s)},n=function(s){return e.throw(s)},i=o(t),a=o(n);function o(s){return function(u){var c=s(u),d=c.value;return c.done?d:!d||typeof d.then!="function"?m(d)?Promise.all(d).then(i,a):i(d):d.then(i,a)}}return o(t)()}function Po(e,t,n){var i=arguments.length;if(i<2)throw new Q.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];n=a.pop();var o=pe(a);return[e,o,n]}function vi(e,t,n,i,a){return L.resolve().then(function(){var o=Z.transless||Z,s=e._createTransaction(t,n,e._dbSchema,i);s.explicit=!0;var u={trans:s,transless:o};if(i)s.idbtrans=i.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(p){return p.name===jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return vi(e,t,n,null,a)})):we(p)}var c=Nn(a);c&&kt();var d,v=L.follow(function(){if(d=a.call(s,s),d)if(c){var p=Je.bind(null,null);d.then(p,p)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=yr(d))},u);return(d&&typeof d.then=="function"?L.resolve(d).then(function(p){return s.active?p:we(new Q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):v.then(function(){return d})).then(function(p){return i&&s._resolve(),s._completion.then(function(){return p})}).catch(function(p){return s._reject(p),we(p)})})}function wn(e,t,n){for(var i=m(e)?e.slice():[e],a=0;a<n;++a)i.push(t);return i}function Ro(e){return l(l({},e),{table:function(t){var n=e.table(t),i=n.schema,a={},o=[];function s(g,w,E){var A=zt(g),T=a[A]=a[A]||[],D=g==null?0:typeof g=="string"?1:g.length,R=w>0,F=l(l({},E),{name:R?"".concat(A,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:R,keyTail:w,keyLength:D,extractKey:ir(g),unique:!R&&E.unique});if(T.push(F),F.isPrimaryKey||o.push(F),D>1){var z=D===2?g[0]:g.slice(0,D-1);s(z,w+1,E)}return T.sort(function($,V){return $.keyTail-V.keyTail}),F}var u=s(i.primaryKey.keyPath,0,i.primaryKey);a[":id"]=[u];for(var c=0,d=i.indexes;c<d.length;c++){var v=d[c];s(v.keyPath,0,v)}function p(g){var w=a[zt(g)];return w&&w[0]}function S(g,w){return{type:g.type===1?2:g.type,lower:wn(g.lower,g.lowerOpen?e.MAX_KEY:e.MIN_KEY,w),lowerOpen:!0,upper:wn(g.upper,g.upperOpen?e.MIN_KEY:e.MAX_KEY,w),upperOpen:!0}}function M(g){var w=g.query.index;return w.isVirtual?l(l({},g),{query:{index:w.lowLevelIndex,range:S(g.query.range,w.keyTail)}}):g}var h=l(l({},n),{schema:l(l({},i),{primaryKey:u,indexes:o,getIndexByKeyPath:p}),count:function(g){return n.count(M(g))},query:function(g){return n.query(M(g))},openCursor:function(g){var w=g.query.index,E=w.keyTail,A=w.isVirtual,T=w.keyLength;if(!A)return n.openCursor(g);function D(R){function F($){$!=null?R.continue(wn($,g.reverse?e.MAX_KEY:e.MIN_KEY,E)):g.unique?R.continue(R.key.slice(0,T).concat(g.reverse?e.MIN_KEY:e.MAX_KEY,E)):R.continue()}var z=Object.create(R,{continue:{value:F},continuePrimaryKey:{value:function($,V){R.continuePrimaryKey(wn($,e.MAX_KEY,E),V)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var $=R.key;return T===1?$[0]:$.slice(0,T)}},value:{get:function(){return R.value}}});return z}return n.openCursor(M(g)).then(function(R){return R&&D(R)})}});return h}})}var Ao={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ro};function gr(e,t,n,i){return n=n||{},i=i||"",b(e).forEach(function(a){if(!k(t,a))n[i+a]=void 0;else{var o=e[a],s=t[a];if(typeof o=="object"&&typeof s=="object"&&o&&s){var u=Qe(o),c=Qe(s);u!==c?n[i+a]=t[a]:u==="Object"?gr(o,s,n,i+a+"."):o!==s&&(n[i+a]=t[a])}else o!==s&&(n[i+a]=t[a])}}),b(t).forEach(function(a){k(e,a)||(n[i+a]=t[a])}),n}function br(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var To={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return l(l({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey,a=l(l({},n),{mutate:function(o){var s=Z.trans,u=s.table(t).hook,c=u.deleting,d=u.creating,v=u.updating;switch(o.type){case"add":if(d.fire===he)break;return s._promise("readwrite",function(){return p(o)},!0);case"put":if(d.fire===he&&v.fire===he)break;return s._promise("readwrite",function(){return p(o)},!0);case"delete":if(c.fire===he)break;return s._promise("readwrite",function(){return p(o)},!0);case"deleteRange":if(c.fire===he)break;return s._promise("readwrite",function(){return S(o)},!0)}return n.mutate(o);function p(h){var g=Z.trans,w=h.keys||br(i,h);if(!w)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?l(l({},h),{keys:w}):l({},h),h.type!=="delete"&&(h.values=x([],h.values,!0)),h.keys&&(h.keys=x([],h.keys,!0)),Do(n,h,w).then(function(E){var A=w.map(function(T,D){var R=E[D],F={onerror:null,onsuccess:null};if(h.type==="delete")c.fire.call(F,T,R,g);else if(h.type==="add"||R===void 0){var z=d.fire.call(F,T,h.values[D],g);T==null&&z!=null&&(T=z,h.keys[D]=T,i.outbound||ie(h.values[D],i.keyPath,T))}else{var $=gr(R,h.values[D]),V=v.fire.call(F,$,T,R,g);if(V){var re=h.values[D];Object.keys(V).forEach(function(U){k(re,U)?re[U]=V[U]:ie(re,U,V[U])})}}return F});return n.mutate(h).then(function(T){for(var D=T.failures,R=T.results,F=T.numFailures,z=T.lastResult,$=0;$<w.length;++$){var V=R?R[$]:w[$],re=A[$];V==null?re.onerror&&re.onerror(D[$]):re.onsuccess&&re.onsuccess(h.type==="put"&&E[$]?h.values[$]:V)}return{failures:D,results:R,numFailures:F,lastResult:z}}).catch(function(T){return A.forEach(function(D){return D.onerror&&D.onerror(T)}),Promise.reject(T)})})}function S(h){return M(h.trans,h.range,1e4)}function M(h,g,w){return n.query({trans:h,values:!1,query:{index:i,range:g},limit:w}).then(function(E){var A=E.result;return p({type:"delete",keys:A,trans:h}).then(function(T){return T.numFailures>0?Promise.reject(T.failures[0]):A.length<w?{failures:[],numFailures:0,lastResult:void 0}:M(h,l(l({},g),{lower:A[A.length-1],lowerOpen:!0}),w)})})}}});return a}})}};function Do(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function yi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)oe(t.keys[a],e[o])===0&&(i.push(n?ke(t.values[a]):t.values[a]),++o);return i.length===e.length?i:null}catch{return null}}var Io={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return l(l({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var a=yi(i.keys,i.trans._cache,i.cache==="clone");return a?L.resolve(a):n.getMany(i).then(function(o){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?ke(o):o},o})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function gi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function bi(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Oo={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Ee(e.MIN_KEY,e.MAX_KEY);return l(l({},e),{transaction:function(i,a,o){if(Z.subscr&&a!=="readonly")throw new Q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Z.querier));return e.transaction(i,a,o)},table:function(i){var a=e.table(i),o=a.schema,s=o.primaryKey,u=o.indexes,c=s.extractKey,d=s.outbound,v=s.autoIncrement&&u.filter(function(h){return h.compound&&h.keyPath.includes(s.keyPath)}),p=l(l({},a),{mutate:function(h){var g,w,E=h.trans,A=h.mutatedParts||(h.mutatedParts={}),T=function(J){var ue="idb://".concat(t,"/").concat(i,"/").concat(J);return A[ue]||(A[ue]=new Ee)},D=T(""),R=T(":dels"),F=h.type,z=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[br(s,h).filter(function(J){return J}),h.values]:[],$=z[0],V=z[1],re=h.trans._cache;if(m($)){D.addKeys($);var U=F==="delete"||$.length===V.length?yi($,re):null;U||R.addKeys($),(U||V)&&Mo(T,o,U,V)}else if($){var te={from:(g=$.lower)!==null&&g!==void 0?g:e.MIN_KEY,to:(w=$.upper)!==null&&w!==void 0?w:e.MAX_KEY};R.add(te),D.add(te)}else D.add(n),R.add(n),o.indexes.forEach(function(J){return T(J.name).add(n)});return a.mutate(h).then(function(J){return $&&(h.type==="add"||h.type==="put")&&(D.addKeys(J.results),v&&v.forEach(function(ue){for(var G=h.values.map(function(Te){return ue.extractKey(Te)}),_e=ue.keyPath.findIndex(function(Te){return Te===s.keyPath}),Pe=0,We=J.results.length;Pe<We;++Pe)G[Pe][_e]=J.results[Pe];T(ue.name).addKeys(G)})),E.mutatedParts=bn(E.mutatedParts||{},A),J})}}),S=function(h){var g,w,E=h.query,A=E.index,T=E.range;return[A,new Ee((g=T.lower)!==null&&g!==void 0?g:e.MIN_KEY,(w=T.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},M={get:function(h){return[s,new Ee(h.key)]},getMany:function(h){return[s,new Ee().addKeys(h.keys)]},count:S,query:S,openCursor:S};return b(M).forEach(function(h){p[h]=function(g){var w=Z.subscr,E=!!w,A=gi(Z,a)&&bi(h,g),T=A?g.obsSet={}:w;if(E){var D=function(U){var te="idb://".concat(t,"/").concat(i,"/").concat(U);return T[te]||(T[te]=new Ee)},R=D(""),F=D(":dels"),z=M[h](g),$=z[0],V=z[1];if(h==="query"&&$.isPrimaryKey&&!g.values?F.add(V):D($.name||"").add(V),!$.isPrimaryKey)if(h==="count")F.add(n);else{var re=h==="query"&&d&&g.values&&a.query(l(l({},g),{values:!1}));return a[h].apply(this,arguments).then(function(U){if(h==="query"){if(d&&g.values)return re.then(function(G){var _e=G.result;return R.addKeys(_e),U});var te=g.values?U.result.map(c):U.result;g.values?R.addKeys(te):F.addKeys(te)}else if(h==="openCursor"){var J=U,ue=g.values;return J&&Object.create(J,{key:{get:function(){return F.addKey(J.primaryKey),J.key}},primaryKey:{get:function(){var G=J.primaryKey;return F.addKey(G),G}},value:{get:function(){return ue&&R.addKey(J.primaryKey),J.value}}})}return U})}}return a[h].apply(this,arguments)}}),p}})}};function Mo(e,t,n,i){function a(o){var s=e(o.name||"");function u(d){return d!=null?o.extractKey(d):null}var c=function(d){return o.multiEntry&&m(d)?d.forEach(function(v){return s.addKey(v)}):s.addKey(d)};(n||i).forEach(function(d,v){var p=n&&u(n[v]),S=i&&u(i[v]);oe(p,S)!==0&&(p!=null&&c(p),S!=null&&c(S))})}t.indexes.forEach(a)}function _i(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===i)return null;var a=l({},t);return m(a.keys)&&(a.keys=a.keys.filter(function(o,s){return!(s in n.failures)})),"values"in a&&m(a.values)&&(a.values=a.values.filter(function(o,s){return!(s in n.failures)})),a}function Ko(e,t){return t.lower===void 0?!0:t.lowerOpen?oe(e,t.lower)>0:oe(e,t.lower)>=0}function No(e,t){return t.upper===void 0?!0:t.upperOpen?oe(e,t.upper)<0:oe(e,t.upper)<=0}function _r(e,t){return Ko(e,t)&&No(e,t)}function wi(e,t,n,i,a,o){if(!n||n.length===0)return e;var s=t.query.index,u=s.multiEntry,c=t.query.range,d=i.schema.primaryKey,v=d.extractKey,p=s.extractKey,S=(s.lowLevelIndex||s).extractKey,M=n.reduce(function(h,g){var w=h,E=[];if(g.type==="add"||g.type==="put")for(var A=new Ee,T=g.values.length-1;T>=0;--T){var D=g.values[T],R=v(D);if(!A.hasKey(R)){var F=p(D);(u&&m(F)?F.some(function(U){return _r(U,c)}):_r(F,c))&&(A.addKey(R),E.push(D))}}switch(g.type){case"add":{var z=new Ee().addKeys(t.values?h.map(function(U){return v(U)}):h);w=h.concat(t.values?E.filter(function(U){var te=v(U);return z.hasKey(te)?!1:(z.addKey(te),!0)}):E.map(function(U){return v(U)}).filter(function(U){return z.hasKey(U)?!1:(z.addKey(U),!0)}));break}case"put":{var $=new Ee().addKeys(g.values.map(function(U){return v(U)}));w=h.filter(function(U){return!$.hasKey(t.values?v(U):U)}).concat(t.values?E:E.map(function(U){return v(U)}));break}case"delete":var V=new Ee().addKeys(g.keys);w=h.filter(function(U){return!V.hasKey(t.values?v(U):U)});break;case"deleteRange":var re=g.range;w=h.filter(function(U){return!_r(v(U),re)});break}return w},e);return M===e?e:(M.sort(function(h,g){return oe(S(h),S(g))||oe(v(h),v(g))}),t.limit&&t.limit<1/0&&(M.length>t.limit?M.length=t.limit:e.length===t.limit&&M.length<t.limit&&(a.dirty=!0)),o?Object.freeze(M):M)}function xi(e,t){return oe(e.lower,t.lower)===0&&oe(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Bo(e,t,n,i){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var a=oe(e,t);if(a===0){if(n&&i)return 0;if(n)return 1;if(i)return-1}return a}function jo(e,t,n,i){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var a=oe(e,t);if(a===0){if(n&&i)return 0;if(n)return-1;if(i)return 1}return a}function Fo(e,t){return Bo(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&jo(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function $o(e,t,n,i){var a=vt["idb://".concat(e,"/").concat(t)];if(!a)return[];var o=a.queries[n];if(!o)return[null,!1,a,null];var s=i.query?i.query.index.name:null,u=o[s||""];if(!u)return[null,!1,a,null];switch(n){case"query":var c=u.find(function(p){return p.req.limit===i.limit&&p.req.values===i.values&&xi(p.req.query.range,i.query.range)});if(c)return[c,!0,a,u];var d=u.find(function(p){var S="limit"in p.req?p.req.limit:1/0;return S>=i.limit&&(i.values?p.req.values:!0)&&Fo(p.req.query.range,i.query.range)});return[d,!1,a,u];case"count":var v=u.find(function(p){return xi(p.req.query.range,i.query.range)});return[v,!!v,a,u]}}function Lo(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&zo(e,t)})}function zo(e,t){setTimeout(function(){e.subscribers.size===0&&Le(t,e)},3e3)}var Uo={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=l(l({},e),{transaction:function(i,a,o){var s=e.transaction(i,a,o);if(a==="readwrite"){var u=new AbortController,c=u.signal,d=function(v){return function(){if(u.abort(),a==="readwrite"){for(var p=new Set,S=0,M=i;S<M.length;S++){var h=M[S],g=vt["idb://".concat(t,"/").concat(h)];if(g){var w=e.table(h),E=g.optimisticOps.filter(function(ue){return ue.trans===s});if(s._explicit&&v&&s.mutatedParts)for(var A=0,T=Object.values(g.queries.query);A<T.length;A++)for(var D=T[A],R=0,F=D.slice();R<F.length;R++){var z=F[R];pr(z.obsSet,s.mutatedParts)&&(Le(D,z),z.subscribers.forEach(function(ue){return p.add(ue)}))}else if(E.length>0){g.optimisticOps=g.optimisticOps.filter(function(ue){return ue.trans!==s});for(var $=0,V=Object.values(g.queries.query);$<V.length;$++)for(var D=V[$],re=0,U=D.slice();re<U.length;re++){var z=U[re];if(z.res!=null&&s.mutatedParts)if(v&&!z.dirty){var te=Object.isFrozen(z.res),J=wi(z.res,z.req,E,w,z,te);z.dirty?(Le(D,z),z.subscribers.forEach(function(_e){return p.add(_e)})):J!==z.res&&(z.res=J,z.promise=L.resolve({result:J}))}else z.dirty&&Le(D,z),z.subscribers.forEach(function(_e){return p.add(_e)})}}}}p.forEach(function(ue){return ue()})}}};s.addEventListener("abort",d(!1),{signal:c}),s.addEventListener("error",d(!1),{signal:c}),s.addEventListener("complete",d(!0),{signal:c})}return s},table:function(i){var a=e.table(i),o=a.schema.primaryKey,s=l(l({},a),{mutate:function(u){var c=Z.trans;if(o.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return a.mutate(u);var d=vt["idb://".concat(t,"/").concat(i)];if(!d)return a.mutate(u);var v=a.mutate(u);return(u.type==="add"||u.type==="put")&&(u.values.length>=50||br(o,u).some(function(p){return p==null}))?v.then(function(p){var S=l(l({},u),{values:u.values.map(function(h,g){var w;if(p.failures[g])return h;var E=!((w=o.keyPath)===null||w===void 0)&&w.includes(".")?ke(h):l({},h);return ie(E,o.keyPath,p.results[g]),E})}),M=_i(d,S,p);d.optimisticOps.push(M),queueMicrotask(function(){return u.mutatedParts&&_n(u.mutatedParts)})}):(d.optimisticOps.push(u),u.mutatedParts&&_n(u.mutatedParts),v.then(function(p){if(p.numFailures>0){Le(d.optimisticOps,u);var S=_i(d,u,p);S&&d.optimisticOps.push(S),u.mutatedParts&&_n(u.mutatedParts)}}),v.catch(function(){Le(d.optimisticOps,u),u.mutatedParts&&_n(u.mutatedParts)})),v},query:function(u){var c;if(!gi(Z,a)||!bi("query",u))return a.query(u);var d=((c=Z.trans)===null||c===void 0?void 0:c.db._options.cache)==="immutable",v=Z,p=v.requery,S=v.signal,M=$o(t,i,"query",u),h=M[0],g=M[1],w=M[2],E=M[3];if(h&&g)h.obsSet=u.obsSet;else{var A=a.query(u).then(function(T){var D=T.result;if(h&&(h.res=D),d){for(var R=0,F=D.length;R<F;++R)Object.freeze(D[R]);Object.freeze(D)}else T.result=ke(D);return T}).catch(function(T){return E&&h&&Le(E,h),Promise.reject(T)});h={obsSet:u.obsSet,promise:A,subscribers:new Set,type:"query",req:u,dirty:!1},E?E.push(h):(E=[h],w||(w=vt["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),w.queries.query[u.query.index.name||""]=E)}return Lo(h,E,p,S),h.promise.then(function(T){return{result:wi(T.result,u,w?.optimisticOps,a,h,d)}})}});return s}});return n}};function xn(e,t){return new Proxy(e,{get:function(n,i,a){return i==="db"?t:Reflect.get(n,i,a)}})}var Ge=(function(){function e(t,n){var i=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=l({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:he,dbReadyPromise:null,cancelOpen:he,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};s.dbReadyPromise=new L(function(c){s.dbReadyResolve=c}),s.openCanceller=new L(function(c,d){s.cancelOpen=d}),this._state=s,this.name=t,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[Fn,he]}),this.once=function(c,d){var v=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];i.on(c).unsubscribe(v),d.apply(i,p)};return i.on(c,v)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(c){return function(d,v){e.vip(function(){var p=i._state;if(p.openComplete)p.dbOpenError||L.resolve().then(d),v&&c(d);else if(p.onReadyBeingFired)p.onReadyBeingFired.push(d),v&&c(d);else{c(d);var S=i;v||c(function M(){S.on.ready.unsubscribe(d),S.on.ready.unsubscribe(M)})}})}}),this.Collection=Xa(this),this.Table=Ya(this),this.Transaction=io(this),this.Version=wo(this),this.WhereClause=no(this),this.on("versionchange",function(c){c.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(c.oldVersion/10))}),this._maxKey=Lt(n.IDBKeyRange),this._createTransaction=function(c,d,v,p){return new i.Transaction(c,d,v,i._options.chromeTransactionDurability,p)},this._fireOnBlocked=function(c){i.on("blocked").fire(c),Et.filter(function(d){return d.name===i.name&&d!==i&&!d._state.vcFired}).map(function(d){return d.on("versionchange").fire(c)})},this.use(Io),this.use(Uo),this.use(Oo),this.use(Ao),this.use(To);var u=new Proxy(this,{get:function(c,d,v){if(d==="_vip")return!0;if(d==="table")return function(S){return xn(i.table(S),u)};var p=Reflect.get(c,d,v);return p instanceof ni?xn(p,u):d==="tables"?p.map(function(S){return xn(S,u)}):d==="_createTransaction"?function(){var S=p.apply(this,arguments);return xn(S,u)}:p}});this.vip=u,o.forEach(function(c){return c(i)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Q.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new Q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,i=n.filter(function(a){return a._cfg.version===t})[0];return i||(i=new this.Version(t),n.push(i),n.sort(fo),i.stores({}),this._state.autoSchema=!1,i)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||Z.letThrough||this._vip)?t():new L(function(i,a){if(n._state.openComplete)return a(new Q.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){a(new Q.DatabaseClosed);return}n.open().catch(he)}n._state.dbReadyPromise.then(i,a)}).then(t)},e.prototype.use=function(t){var n=t.stack,i=t.create,a=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var s=this._middlewares[n]||(this._middlewares[n]=[]);return s.push({stack:n,create:i,level:a??10,name:o}),s.sort(function(u,c){return u.level-c.level}),this},e.prototype.unuse=function(t){var n=t.stack,i=t.name,a=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return a?o.create!==a:i?o.name!==i:!1})),this},e.prototype.open=function(){var t=this;return pt(Xe,function(){return Eo(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,n=Et.indexOf(this);if(n>=0&&Et.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new L(function(i){t.dbReadyResolve=i}),t.openCanceller=new L(function(i,a){t.cancelOpen=a}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,i=n.disableAutoOpen,a=this._state;i?(a.isBeingOpened&&a.cancelOpen(new Q.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new Q.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var i=arguments.length>0&&typeof arguments[0]!="object",a=this._state;return new L(function(o,s){var u=function(){n.close(t);var c=n._deps.indexedDB.deleteDatabase(n.name);c.onsuccess=ge(function(){Co(n._deps,n.name),o()}),c.onerror=He(s),c.onblocked=n._fireOnBlocked};if(i)throw new Q.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(u):u()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return b(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Po.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,i){var a=this,o=Z.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var s=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,c;try{if(c=n.map(function(v){var p=v instanceof a.Table?v.name:v;if(typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),t=="r"||t===Vn)u=Vn;else if(t=="rw"||t==Jn)u=Jn;else throw new Q.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===Vn&&u===Jn)if(s)o=null;else throw new Q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&c.forEach(function(v){if(o&&o.storeNames.indexOf(v)===-1)if(s)o=null;else throw new Q.SubTransaction("Table "+v+" not included in parent transaction.")}),s&&o&&!o.active&&(o=null)}}catch(v){return o?o._promise(null,function(p,S){S(v)}):we(v)}var d=vi.bind(null,this,u,c,o,i);return o?o._promise(u,d,"lock"):Z.trans?pt(Z.transless,function(){return a._whenReady(d)}):this._whenReady(d)},e.prototype.table=function(t){if(!k(this._allTables,t))throw new Q.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),Ho=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Wo=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,i){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:i}:t)},e.prototype[Ho]=function(){return this},e})(),Sn;try{Sn={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{Sn={indexedDB:null,IDBKeyRange:null}}function Si(e){var t=!1,n,i=new Wo(function(a){var o=Nn(e);function s(E){var A=St();try{o&&kt();var T=Ve(e,E);return o&&(T=T.finally(Je)),T}finally{A&&Ct()}}var u=!1,c,d={},v={},p={get closed(){return u},unsubscribe:function(){u||(u=!0,c&&c.abort(),S&&tt.storagemutated.unsubscribe(g))}};a.start&&a.start(p);var S=!1,M=function(){return Gn(w)};function h(){return pr(v,d)}var g=function(E){bn(d,E),h()&&M()},w=function(){if(!(u||!Sn.indexedDB)){d={};var E={};c&&c.abort(),c=new AbortController;var A={subscr:E,signal:c.signal,requery:M,querier:e,trans:null},T=s(A);Promise.resolve(T).then(function(D){t=!0,n=D,!(u||A.signal.aborted)&&(d={},v=E,!ee(v)&&!S&&(tt($t,g),S=!0),Gn(function(){return!u&&a.next&&a.next(D)}))},function(D){t=!1,["DatabaseClosedError","AbortError"].includes(D?.name)||u||Gn(function(){u||a.error&&a.error(D)})})}};return setTimeout(M,0),p});return i.hasValue=function(){return t},i.getValue=function(){return n},i}var yt=Ge;O(yt,l(l({},Vt),{delete:function(e){var t=new yt(e,{addons:[]});return t.delete()},exists:function(e){return new yt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return xo(yt.dependencies).then(e)}catch{return we(new Q.MissingAPI)}},defineClass:function(){function e(t){_(this,t)}return e},ignoreTransaction:function(e){return Z.trans?pt(Z.transless,e):e()},vip:lr,async:function(e){return function(){try{var t=yr(e.apply(this,arguments));return!t||typeof t.then!="function"?L.resolve(t):t}catch(n){return we(n)}}},spawn:function(e,t,n){try{var i=yr(e.apply(n,t||[]));return!i||typeof i.then!="function"?L.resolve(i):i}catch(a){return we(a)}},currentTransaction:{get:function(){return Z.trans||null}},waitFor:function(e,t){var n=L.resolve(typeof e=="function"?yt.ignoreTransaction(e):e).timeout(t||6e4);return Z.trans?Z.trans.waitFor(n):n},Promise:L,debug:{get:function(){return Ue},set:function(e){$r(e)}},derive:j,extend:_,props:O,override:W,Events:Bt,on:tt,liveQuery:Si,extendObservabilitySet:bn,getByKeyPath:ae,setByKeyPath:ie,delByKeyPath:me,shallowClone:ve,deepClone:ke,getObjectDiff:gr,cmp:oe,asap:de,minKey:Xn,addons:[],connections:Et,errnames:jn,dependencies:Sn,cache:vt,semVer:Qr,version:Qr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),yt.maxKey=Lt(yt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tt($t,function(e){if(!nt){var t;t=new CustomEvent(tr,{detail:e}),nt=!0,dispatchEvent(t),nt=!1}}),addEventListener(tr,function(e){var t=e.detail;nt||wr(t)}));function wr(e){var t=nt;try{nt=!0,tt.storagemutated.fire(e),vr(e,!0)}finally{nt=t}}var nt=!1,rt,xr=function(){};typeof BroadcastChannel<"u"&&(xr=function(){rt=new BroadcastChannel(tr),rt.onmessage=function(e){return e.data&&wr(e.data)}},xr(),typeof rt.unref=="function"&&rt.unref(),tt($t,function(e){nt||rt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ge.disableBfCache&&e.persisted){Ue&&console.debug("Dexie: handling persisted pagehide"),rt?.close();for(var t=0,n=Et;t<n.length;t++){var i=n[t];i.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!Ge.disableBfCache&&e.persisted&&(Ue&&console.debug("Dexie: handling persisted pageshow"),xr(),wr({all:new Ee(-1/0,[[]])}))}));function Zo(e){return new Nt({add:e})}function Yo(e){return new Nt({remove:e})}function Go(e,t){return new Nt({replacePrefix:[e,t]})}L.rejectionMapper=Pa,$r(Ue);var Qo=Object.freeze({__proto__:null,Dexie:Ge,liveQuery:Si,Entity:Jr,cmp:oe,PropModification:Nt,replacePrefix:Go,add:Zo,remove:Yo,default:Ge,RangeSet:Ee,mergeRanges:Ht,rangesOverlap:di});return l(Ge,Qo,{default:Ge}),Ge})});function Sr(f){if(!f)return{};let r={},l=(x,y)=>{if(!(!x||typeof x!="object"))for(let b in x)Object.hasOwn(x,b)&&y[b]===void 0&&(y[b]=x[b])};return l(f,r),l(f.item,r),l(f.reference,r),r}var Oi=Ke(je());var{Fragment:Ar,jsx:K,jsxs:ce}=Spicetify.ReactJSX;var Tn={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},qs=f=>{let{path:r,size:l}=Tn[f],x=y=>{let b=(0,Oi.c)(4),{size:m,fill:_}=y,C=m===void 0?l:m,P=_===void 0?"currentColor":_,k;b[0]===Symbol.for("react.memo_cache_sentinel")?(k=K("path",{d:r}),b[0]=k):k=b[0];let O;return b[1]!==P||b[2]!==C?(O=K("svg",{fill:P,height:C,role:"img",viewBox:`0 0 ${l} ${l}`,width:C,children:k}),b[1]=P,b[2]=C,b[3]=O):O=b[3],O};return x.defaultProps={size:l,fill:"currentColor"},x},{raw:eu,react:tu,html:nu}=Object.keys(Tn).reduce((f,r)=>(f.raw[r]=Tn[r].path,f.react[r]=qs(r),f.html[r]=`<path d="${Tn[r].path}"/>`,f),{raw:{},react:{},html:{}}),Re={React:tu,HTML:nu,RAW:eu};var Bi=Ke(je());Be();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Xu,createPortal:Vu,createRoot:Mi,findDOMNode:Ju,flushSync:qu,hydrate:ec,hydrateRoot:tc,render:nc,unmountComponentAtNode:rc,unstable_batchedUpdates:ic,unstable_renderSubtreeIntoContainer:ac,version:oc}=Spicetify.ReactDOM,sc=Spicetify.ReactDOM;var Ki=new CSSStyleSheet;Ki.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var Ni=Ki;document.adoptedStyleSheets.push(Ni);var Gt=null,Tr="popup-modal-container",Dr=()=>{let f=document.getElementById(Tr);Gt&&(Gt.unmount(),Gt=null),f&&f.remove(),document.body.style.overflow="auto"},ru=Se(f=>{let r=(0,Bi.c)(44),{title:l,content:x,isLarge:y,buttons:b,icon:m,template:_,onClose:C}=f,P=Ne(null),k,O;r[0]!==C?(k=()=>{document.body.style.overflow="hidden";let le=ae=>{ae.key==="Escape"&&(ae.preventDefault(),C())};return document.addEventListener("keydown",le),()=>{document.removeEventListener("keydown",le)}},O=[C],r[0]=C,r[1]=k,r[2]=O):(k=r[1],O=r[2]),at(k,O);let I;r[3]!==C?(I=()=>{C()},r[3]=C,r[4]=I):I=r[4];let B=I,j;r[5]!==B?(j=le=>{le.target===P.current&&B()},r[5]=B,r[6]=j):j=r[6];let N=j,H;r[7]!==x?(H=()=>Cr(x)?x:typeof x=="function"?K(x,{}):x,r[7]=x,r[8]=H):H=r[8];let X=H;if(_===!0){let le=`modal__container${y?" modal__container--large":""}`,ae;r[9]!==m?(ae=m&&K("div",{className:"modal__icon",children:m}),r[9]=m,r[10]=ae):ae=r[10];let ie;r[11]!==l?(ie=l&&K("h1",{className:"modal__title",children:l}),r[11]=l,r[12]=ie):ie=r[12];let me;r[13]!==ae||r[14]!==ie?(me=ce("div",{className:"modal__titleContainer",children:[ae,ie]}),r[13]=ae,r[14]=ie,r[15]=me):me=r[15];let ve;r[16]===Symbol.for("react.memo_cache_sentinel")?(ve=K(Re.React.close,{size:18}),r[16]=ve):ve=r[16];let be;r[17]!==B?(be=K(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:K("button",{className:"modal__button modal__button--close",onClick:B,children:ve})}),r[17]=B,r[18]=be):be=r[18];let pe;r[19]!==b||r[20]!==be?(pe=ce("div",{className:"modal__buttonContainer",children:[b,be]}),r[19]=b,r[20]=be,r[21]=pe):pe=r[21];let fe;r[22]!==pe||r[23]!==me?(fe=ce("div",{className:"modal__header",children:[me,pe]}),r[22]=pe,r[23]=me,r[24]=fe):fe=r[24];let ye;r[25]!==X?(ye=X(),r[25]=X,r[26]=ye):ye=r[26];let q;r[27]!==ye?(q=K("div",{className:"modal__content",children:ye}),r[27]=ye,r[28]=q):q=r[28];let ee;r[29]!==fe||r[30]!==q||r[31]!==le?(ee=ce("div",{className:le,children:[fe,q]}),r[29]=fe,r[30]=q,r[31]=le,r[32]=ee):ee=r[32];let se;return r[33]!==N||r[34]!==ee?(se=K("div",{className:"modal",onClick:N,ref:P,children:ee}),r[33]=N,r[34]=ee,r[35]=se):se=r[35],se}let Y=`modal__container${y?" modal__container--large":""}`,W;r[36]!==X?(W=X(),r[36]=X,r[37]=W):W=r[37];let ne;r[38]!==Y||r[39]!==W?(ne=K("div",{className:Y,children:W}),r[38]=Y,r[39]=W,r[40]=ne):ne=r[40];let de;return r[41]!==N||r[42]!==ne?(de=K("div",{className:"modal",onClick:N,ref:P,children:ne}),r[41]=N,r[42]=ne,r[43]=de):de=r[43],de}),gt=f=>{document.getElementById(Tr)&&Dr();let r=document.createElement("div");r.id=Tr,document.body.appendChild(r),Gt=Mi(r),Gt.render(K(ru,{...f,onClose:Dr}))};gt.hide=Dr;var ut=Ke(je());var Dn=Ke(ji(),1),Fi=Symbol.for("Dexie"),Qt=globalThis[Fi]||(globalThis[Fi]=Dn.default);if(Dn.default.semVer!==Qt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Dn.default.semVer} and ${Qt.semVer}`);var{liveQuery:vc,mergeRanges:yc,rangesOverlap:gc,RangeSet:bc,cmp:_c,Entity:wc,PropModification:xc,replacePrefix:Sc,add:Cc,remove:kc,DexieYProvider:Ec}=Qt;Be();var iu=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function $i(){return(await iu.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var au=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Li(f){return{items:(await au.getContents(f,{offset:0,limit:-1})).items}}var ou=f=>{let r=window.webpackChunkclient_web.push([[Symbol()],{},l=>l]);for(let l in r.m)try{let x=r(l);if(!x)continue;let y=x;for(let b of Object.values(y))if(b&&(typeof b=="object"||typeof b=="function")&&"SERVICE_ID"in b&&b.SERVICE_ID===f)return b}catch{}};function su(f){let r=0n,l=0n,x=1;for(;;){let y=f[x++];if(r|=BigInt(y&127)<<l,!(y&128))break;l+=7n}return r<=BigInt(Number.MAX_SAFE_INTEGER)?Number(r):r}var In=null;function uu(){if(In)return In;let f=ou("spotify.mdata_esperanto.proto.MetadataService");if(!f)throw new Error("MetadataService not found in webpack modules");let r=Spicetify.Platform.Registry.resolve(Symbol.for("EsperantoTransport"));return In=new f(r),In}var cu=185;async function zi(f){let r=new Map,l=[...new Set(f)],b=(await uu().fetch({extensionQuery:[{extensionKind:cu,entityUri:l}]}))?.extension?.[0]?.entityExtension;if(Array.isArray(b))for(let m of b)m?.entityUri&&m?.extensionData?.value&&r.set(m.entityUri,su(m.extensionData.value));return r}async function Ui(f){let r=new Map,l=[...new Set(f.map(y=>Spicetify.URI.fromString(y).id).filter(y=>!!y))],x=1e3;for(let y=0;y<l.length;y+=x){let b=l.slice(y,y+x);await Promise.allSettled(b.map(async m=>{let _=`spotify:track:${m}`,C=Spicetify.URI.idToHex(m),k=await(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/track/${C}`).send()).body;k&&r.set(_,k)}))}return r}var Zi=Ke(je());Be();var Hi=new CSSStyleSheet;Hi.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Wi=Hi;document.adoptedStyleSheets.push(Wi);var On=Se(f=>{let r=(0,Zi.c)(43),{value:l,options:x,onChange:y,disabled:b}=f,m=kr(),_=Ne(null),C=`--dropdown-anchor-${m.replace(/:/g,"id")}`,P,k,O,I,B,j,N,H,X;if(r[0]!==C||r[1]!==b||r[2]!==y||r[3]!==x||r[4]!==m||r[5]!==l){let ne=fe=>{y?.(fe.value),_.current?.hidePopover()},de;r[15]!==x||r[16]!==l?(de=x.find(fe=>fe.value===l)?.label||"Select...",r[15]=x,r[16]=l,r[17]=de):de=r[17];let le=de;N="dropdown",H=b;let ae;r[18]!==C?(ae={anchorName:C},r[18]=C,r[19]=ae):ae=r[19];let ie;r[20]!==le?(ie=K("div",{className:"dropdown__text",children:le}),r[20]=le,r[21]=ie):ie=r[21];let me;r[22]===Symbol.for("react.memo_cache_sentinel")?(me=K("div",{className:"dropdown__arrow",children:K(Re.React.dropdown,{size:12})}),r[22]=me):me=r[22],r[23]!==m||r[24]!==ae||r[25]!==ie?(X=ce("button",{className:"dropdown__button",popoverTarget:m,popoverTargetAction:"toggle",style:ae,children:[ie,me]}),r[23]=m,r[24]=ae,r[25]=ie,r[26]=X):X=r[26],P="dropdown__menu",k=m,O="auto",I=_;let ve=`calc(anchor(${C} bottom) + 4px)`,be=`anchor(${C} left)`,pe=`anchor-size(${C} width)`;r[27]!==ve||r[28]!==be||r[29]!==pe?(B={top:ve,left:be,width:pe},r[27]=ve,r[28]=be,r[29]=pe,r[30]=B):B=r[30],j=x.map(fe=>K("div",{className:`dropdown__option${l===fe.value?" dropdown__option--selected":""}`,onClick:()=>ne(fe),onKeyDown:ye=>ye.key==="Enter"&&ne(fe),role:"option",tabIndex:0,children:fe.label},fe.value)),r[0]=C,r[1]=b,r[2]=y,r[3]=x,r[4]=m,r[5]=l,r[6]=P,r[7]=k,r[8]=O,r[9]=I,r[10]=B,r[11]=j,r[12]=N,r[13]=H,r[14]=X}else P=r[6],k=r[7],O=r[8],I=r[9],B=r[10],j=r[11],N=r[12],H=r[13],X=r[14];let Y;r[31]!==P||r[32]!==k||r[33]!==O||r[34]!==I||r[35]!==B||r[36]!==j?(Y=K("div",{className:P,id:k,popover:O,ref:I,style:B,children:j}),r[31]=P,r[32]=k,r[33]=O,r[34]=I,r[35]=B,r[36]=j,r[37]=Y):Y=r[37];let W;return r[38]!==Y||r[39]!==N||r[40]!==H||r[41]!==X?(W=ce("div",{className:N,disabled:H,children:[X,Y]}),r[38]=Y,r[39]=N,r[40]=H,r[41]=X,r[42]=W):W=r[42],W});var da=Ke(je());Be();var Yi=new CSSStyleSheet;Yi.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var Gi=Yi;var oa=Ke(je());Be();var Vi=Ke(je());Be();var Qi=new CSSStyleSheet;Qi.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var Xi=Qi;document.adoptedStyleSheets.push(Xi);var Ji=Se(f=>{let r=(0,Vi.c)(7),{value:l,onChange:x,placeholder:y,disabled:b}=f,m=b===void 0?!1:b,_;r[0]!==x?(_=k=>{x(k.target.value)},r[0]=x,r[1]=_):_=r[1];let C=_,P;return r[2]!==m||r[3]!==C||r[4]!==y||r[5]!==l?(P=K("input",{className:"input",disabled:m,onChange:C,placeholder:y,type:"text",value:l}),r[2]=m,r[3]=C,r[4]=y,r[5]=l,r[6]=P):P=r[6],P});var ta=Ke(je());Be();var qi=new CSSStyleSheet;qi.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var ea=qi;document.adoptedStyleSheets.push(ea);var Mn=Se(f=>{let r=(0,ta.c)(28),{value:l,min:x,max:y,step:b,defaultValue:m,onChange:_,onRelease:C,disabled:P}=f,k=x===void 0?0:x,O=y===void 0?100:y,I=b===void 0?1:b,B=Ne(null),j=Ne(!1),N=l!==void 0?l:m,H=O>k&&N!==void 0?(N-k)/(O-k)*100:0,X;r[0]!==P||r[1]!==O||r[2]!==k||r[3]!==_||r[4]!==I?(X=ee=>{if(!B.current||P)return;let se=B.current.getBoundingClientRect(),ke=ee.clientX,Oe=Math.max(0,Math.min(ke-se.left,se.width))/se.width*(O-k)+k;Oe=Math.round(Oe/I)*I,Oe=Math.max(k,Math.min(Oe,O)),_(Oe)},r[0]=P,r[1]=O,r[2]=k,r[3]=_,r[4]=I,r[5]=X):X=r[5];let Y=X,W;r[6]!==P||r[7]!==Y?(W=ee=>{P||!B.current||(j.current=!0,B.current.setPointerCapture(ee.pointerId),Y(ee.nativeEvent))},r[6]=P,r[7]=Y,r[8]=W):W=r[8];let ne=W,de;r[9]!==Y?(de=ee=>{j.current&&Y(ee.nativeEvent)},r[9]=Y,r[10]=de):de=r[10];let le=de,ae;r[11]!==C?(ae=ee=>{!j.current||!B.current||(j.current=!1,B.current.releasePointerCapture(ee.pointerId),C?.())},r[11]=C,r[12]=ae):ae=r[12];let ie=ae,me=`${H}%`,ve;r[13]!==me?(ve=K("div",{className:"slider__fill",style:{width:me}}),r[13]=me,r[14]=ve):ve=r[14];let be=`${H}%`,pe;r[15]!==be?(pe=K("div",{className:"slider__thumb",style:{left:be}}),r[15]=be,r[16]=pe):pe=r[16];let fe;r[17]!==pe||r[18]!==ve?(fe=ce("div",{className:"slider__track",children:[ve,pe]}),r[17]=pe,r[18]=ve,r[19]=fe):fe=r[19];let ye;r[20]!==ne||r[21]!==le||r[22]!==ie||r[23]!==fe?(ye=K("div",{className:"slider-container",onPointerCancel:ie,onPointerDown:ne,onPointerMove:le,onPointerUp:ie,ref:B,children:fe}),r[20]=ne,r[21]=le,r[22]=ie,r[23]=fe,r[24]=ye):ye=r[24];let q;return r[25]!==P||r[26]!==ye?(q=K("div",{className:"slider",disabled:P,children:ye}),r[25]=P,r[26]=ye,r[27]=q):q=r[27],q});var ia=Ke(je());Be();var na=new CSSStyleSheet;na.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var ra=na;document.adoptedStyleSheets.push(ra);var aa=Se(f=>{let r=(0,ia.c)(10),{value:l,onChange:x,disabled:y}=f,b;r[0]!==y||r[1]!==x||r[2]!==l?(b=()=>{y||x(!l)},r[0]=y,r[1]=x,r[2]=l,r[3]=b):b=r[3];let m=b,_=`toggle__slider${l?" toggle__slider--enabled":""}${y?" toggle__slider--disabled":""}`,C;r[4]!==_?(C=K("span",{className:"toggle__background",children:K("span",{className:_})}),r[4]=_,r[5]=C):C=r[5];let P;return r[6]!==y||r[7]!==m||r[8]!==C?(P=K("button",{className:"toggle",disabled:y,onClick:m,role:"switch",children:C}),r[6]=y,r[7]=m,r[8]=C,r[9]=P):P=r[9],P});var sa=Se(f=>{let r=(0,oa.c)(23),{option:l,value:x,onChange:y,disabled:b}=f;switch(l.type){case"toggle":{let m=x,_;return r[0]!==b||r[1]!==y||r[2]!==m?(_=K(aa,{disabled:b,onChange:y,value:m}),r[0]=b,r[1]=y,r[2]=m,r[3]=_):_=r[3],_}case"input":{let m=x,_;return r[4]!==b||r[5]!==y||r[6]!==l.placeholder||r[7]!==m?(_=K(Ji,{disabled:b,onChange:y,placeholder:l.placeholder,value:m}),r[4]=b,r[5]=y,r[6]=l.placeholder,r[7]=m,r[8]=_):_=r[8],_}case"dropdown":{let m;r[9]!==l.options?(m=l.options||[],r[9]=l.options,r[10]=m):m=r[10];let _=x,C;return r[11]!==b||r[12]!==y||r[13]!==m||r[14]!==_?(C=K(On,{disabled:b,onChange:y,options:m,value:_}),r[11]=b,r[12]=y,r[13]=m,r[14]=_,r[15]=C):C=r[15],C}case"slider":{let m=x,_;return r[16]!==b||r[17]!==y||r[18]!==l.max||r[19]!==l.min||r[20]!==l.step||r[21]!==m?(_=K(Mn,{disabled:b,max:l.max,min:l.min,onChange:y,step:l.step,value:m}),r[16]=b,r[17]=y,r[18]=l.max,r[19]=l.min,r[20]=l.step,r[21]=m,r[22]=_):_=r[22],_}default:return console.warn(`Unknown option type for option "${l.name||"N/A"}"`),null}});var ua=Ke(je());Be();var ca=Se(f=>{let r=(0,ua.c)(6),{name:l,popupModal:x}=f,y;r[0]!==x||r[1]!==l?(y=()=>gt({title:l,content:K(x,{}),isLarge:!1}),r[0]=x,r[1]=l,r[2]=y):y=r[2];let b;r[3]===Symbol.for("react.memo_cache_sentinel")?(b=K(Re.React.editButton,{size:16}),r[3]=b):b=r[3];let m;return r[4]!==y?(m=K("button",{className:"popup-button",onClick:y,children:b}),r[4]=y,r[5]=m):m=r[5],m});var la=Ke(je());Be();var fa=Se(f=>{let r=(0,la.c)(3),{tippy:l}=f,x;r[0]===Symbol.for("react.memo_cache_sentinel")?(x=K("div",{className:"info-tippy",children:K(Re.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),r[0]=x):x=r[0];let y;return r[1]!==l?(y=K(Spicetify.ReactComponent.TooltipWrapper,{label:l,placement:"top",showDelay:0,children:x}),r[1]=l,r[2]=y):y=r[2],y});document.adoptedStyleSheets.push(Gi);var pa=Se(f=>{let r=(0,da.c)(21),{name:l,desc:x,tippy:y,popupModal:b,option:m,value:_,onChange:C,disabled:P}=f,k;r[0]!==x?(k=K("div",{className:"option__desc",children:x}),r[0]=x,r[1]=k):k=r[1];let O;r[2]!==y?(O=y&&K(fa,{tippy:y}),r[2]=y,r[3]=O):O=r[3];let I;r[4]!==k||r[5]!==O?(I=ce("div",{className:"option__content",children:[k,O]}),r[4]=k,r[5]=O,r[6]=I):I=r[6];let B;r[7]!==l||r[8]!==b?(B=b&&K(ca,{name:l,popupModal:b}),r[7]=l,r[8]=b,r[9]=B):B=r[9];let j;r[10]!==P||r[11]!==C||r[12]!==m||r[13]!==_?(j=m&&K(sa,{disabled:P,onChange:C||lu,option:m,value:_}),r[10]=P,r[11]=C,r[12]=m,r[13]=_,r[14]=j):j=r[14];let N;r[15]!==B||r[16]!==j?(N=ce("div",{className:"option__control",children:[B,j]}),r[15]=B,r[16]=j,r[17]=N):N=r[17];let H;return r[18]!==I||r[19]!==N?(H=ce("div",{className:"option__row",children:[I,N]}),r[18]=I,r[19]=N,r[20]=H):H=r[20],H});function lu(){}var ha=async()=>{for(;!globalThis.webpackChunkclient_web;)await new Promise(_=>setTimeout(_,50));let f=webpackChunkclient_web.push([[Symbol()],{},_=>_]);for(;!f.m;)await new Promise(_=>setTimeout(_,50));let r=Object.keys(f.m).map(_=>f(_)),l=new Set(Object.values(f.m)),x=_=>{try{return _.toString()}catch{try{return Function.prototype.toString.call(_)}catch{return""}}},y=new Set(r.flatMap(_=>typeof _=="function"?[_]:typeof _=="object"&&_?Object.values(_).flatMap(C=>typeof C=="function"&&!l.has(C)?[C]:C?.$$typeof===Symbol.for("react.forward_ref")&&typeof C.render=="function"?[C.render]:C?.$$typeof===Symbol.for("react.memo")&&C.type?.$$typeof===Symbol.for("react.forward_ref")&&typeof C.type.render=="function"?[C.type.render]:[]):[])),b=/"data-encore-id":(?:[a-zA-Z_$][\w$]*\.)*([A-Z][\w]*)\b/,m={};for(let _ of y){let C=x(_).match(b);C?.[1]&&!m[C[1]]&&(m[C[1]]=_)}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(m).length} components.`),globalThis.UI=m};ha();var Mr=class{starts=new Map;start(r){this.starts.set(r,performance.now())}end(r){let l=this.starts.get(r);if(l){let x=performance.now()-l;console.debug(`[Debug] ${r}: ${x.toFixed(2)}ms`),this.starts.delete(r)}}},st=new Mr,Kr=["exact","isrc","probable","likely","possible","maybe"],ba={exact:{label:"Identical Tracks",tooltip:"The exact same Spotify track added multiple times to the playlist"},isrc:{label:"Same Recording",tooltip:"Different Spotify entries for the same recording (e.g., from different albums but identical audio)"},probable:{label:"Same Title & Artist",tooltip:"Tracks with the same title and at least one shared artist"},likely:{label:"Title & Length Match",tooltip:"Tracks with the same title and similar duration (within 5 seconds)"},possible:{label:"Similar Songs",tooltip:"Tracks with similar titles and durations - may include remixes or covers"},maybe:{label:"Possible Matches",tooltip:"Tracks that may be duplicates based on name similarity - review VERY CAREFULLY!!"}},Nr=class extends Qt{constructor(){super("findDupeTracks"),this.version(.4).stores({tracks:"&trackUri, trackName, trackCoverArt, trackDuration, trackPlayCount, trackIsrc, albumUri, albumReleaseDate, lastUpdated, ignoreDuplicates"}).upgrade(r=>r.table("tracks").clear())}},ma=new Nr,Kn={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0,maybe:!1},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0,maybe:!0},defaultNormaliseWords:["live","remix","mix","acoustic","inst","instrumental","radio","version","ver","edit","mono","stereo","deluxe","demo","rehearsal","intro","outro","remaster","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],customNormaliseWords:[]},va="findDupeTracks:settings",ot={listeners:new Set,snapshot:(()=>{try{let f=localStorage.getItem(va);return f?{...Kn,...JSON.parse(f)}:Kn}catch{return Kn}})(),subscribe(f){return ot.listeners.add(f),()=>ot.listeners.delete(f)},getSnapshot(){return ot.snapshot},update(f){ot.snapshot=f,localStorage.setItem(va,JSON.stringify(f)),ot.listeners.forEach(r=>{r()})}},_a=()=>En(ot.subscribe,ot.getSnapshot),fu=f=>f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),du=f=>{if(!f)return"Unknown";let r=new Date(f);return Number.isNaN(r.getTime())?f:Spicetify.Locale.formatDate(r,{year:"numeric",month:"short",day:"numeric"})},pu=(f,r)=>f.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(r,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),hu=(f,r)=>{let l=f.replace(/\s+/g,""),x=r.replace(/\s+/g,"");if(l===x)return 1;if(l.length<2||x.length<2)return 0;let y=new Map;for(let m=0;m<l.length-1;m++){let _=l.substring(m,m+2);y.set(_,(y.get(_)||0)+1)}let b=0;for(let m=0;m<x.length-1;m++){let _=x.substring(m,m+2),C=y.get(_)||0;C>0&&(y.set(_,C-1),b++)}return 2*b/(l.length+x.length-2)};function mu(){let f=(0,ut.c)(6),r;f[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],f[0]=r):r=f[0];let[l,x]=$e(r),[y,b]=$e(!0),m,_;f[1]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{let P=!0;return(async()=>{st.start("Fetch: All Playlists");let O=await $i();if(!P)return;let I=O.filter(vu);x(I),P&&(b(!1),st.end("Fetch: All Playlists"))})(),()=>{P=!1}},_=[],f[1]=m,f[2]=_):(m=f[1],_=f[2]),at(m,_);let C;return f[3]!==y||f[4]!==l?(C={playlists:l,loading:y},f[3]=y,f[4]=l,f[5]=C):C=f[5],C}function vu(f){return f.type==="playlist"&&f.canAddTo}function yu(f,r){let l=(0,ut.c)(8),x;l[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],l[0]=x):x=l[0];let[y,b]=$e(x),[m,_]=$e(!1),C,P;l[1]!==f||l[2]!==r?(C=()=>{if(!f){b([]);return}let O=new AbortController;return _(!0),(async()=>{st.start("LOAD ALL DATA");let{items:B}=await Li(f);if(O.signal.aborted)return;let j=B,N=j.map(ku),H=await ma.tracks.bulkGet(N),X=new Map(H.filter(Cu).map(Su)),Y=Temporal.Now.instant(),W=[],ne=[],de=new RegExp(`\\b(${[...r.defaultNormaliseWords,...r.customNormaliseWords].map(fu).join("|")})\\b`,"gi");for(let q of j){let ee=X.get(q.uri),se=!1;if(!ee)se=!0;else if(ee.trackPlayCount===null||ee.trackIsrc===null||ee.albumReleaseDate===null)se=!0;else if(ee.lastUpdated)try{let Ae=Temporal.Instant.from(ee.lastUpdated);Y.since(Ae).total("days")>=30&&(se=!0)}catch{se=!0}else se=!0;se&&W.push(q),ne.push({...q,playCount:ee?.trackPlayCount??null,isrc:ee?.trackIsrc??null,releaseDate:ee?.albumReleaseDate??null,coverArt:ee?.trackCoverArt??null,normalisedName:q.name.toLowerCase().trim(),normalisedFuzzy:pu(q.name,de)})}if(O.signal.aborted)return;if(b(ne),W.length===0){_(!1),st.end("LOAD ALL DATA");return}let le=W.filter(q=>{let ee=X.get(q.uri);return!ee||ee.trackPlayCount===null}),ae=W.filter(q=>{let ee=X.get(q.uri);return!ee||ee.trackIsrc===null||ee.albumReleaseDate===null}),[ie,me]=await Promise.allSettled([ae.length>0?Ui(ae.map(xu)):Promise.resolve(new Map),le.length>0?zi(le.map(wu)):Promise.resolve(new Map)]);if(O.signal.aborted)return;let ve=ie.status==="fulfilled"?ie.value:null,be=me.status==="fulfilled"?me.value:null,pe=[],fe=Y.toString(),ye=[...ne];W.forEach(q=>{let ee=X.get(q.uri),se=ve?.get(q.uri),Ae=be?.get(q.uri)??null??ee?.trackPlayCount??null,Oe=null;se&&(Oe=se?.external_ids?.isrc??se?.external_id?.find(_u)?.id??null);let Qe=Oe??ee?.trackIsrc??null,De=null;if(se){let xe=se?.album?.date;typeof xe=="string"?De=xe:xe?.year&&(De=`${xe.year}`,xe.month&&(De=De+`-${String(xe.month).padStart(2,"0")}`),xe.day&&(De=De+`-${String(xe.day).padStart(2,"0")}`))}let _t=De??ee?.albumReleaseDate??null,Le=q.album.images.find(bu)?.url??q.album.images.find(gu)?.url??q.album.images[0]?.url??"";pe.push({trackUri:q.uri,trackName:q.name,trackCoverArt:Le,trackDuration:q.duration.milliseconds,trackPlayCount:Ae,trackIsrc:Qe,albumUri:q.album.uri,albumReleaseDate:_t,lastUpdated:fe});let ze=ye.findIndex(xe=>xe.uid===q.uid);ze!==-1&&(ye[ze]={...ye[ze],playCount:Ae,isrc:Qe,releaseDate:_t,coverArt:Le})}),await ma.tracks.bulkPut(pe),O.signal.aborted||(b(ye),st.end("LOAD ALL DATA")),O.signal.aborted||_(!1)})(),()=>O.abort()},P=[f,r],l[1]=f,l[2]=r,l[3]=C,l[4]=P):(C=l[3],P=l[4]),at(C,P);let k;return l[5]!==m||l[6]!==y?(k={tracks:y,loading:m,setTracks:b},l[5]=m,l[6]=y,l[7]=k):k=l[7],k}function gu(f){return f.label==="large"}function bu(f){return f.label==="xlarge"}function _u(f){return f?.type==="isrc"}function wu(f){return f.uri}function xu(f){return f.uri}function Su(f){return[f.trackUri,f]}function Cu(f){return!!f}function ku(f){return f.uri}function Eu(f,r){let l=(0,ut.c)(4),x;e:{st.start("Dupe Algorithm: Compute");let y;if(l[0]!==r||l[1]!==f){if(y={exact:[],isrc:[],probable:[],likely:[],possible:[],maybe:[]},f.length<2){st.end("Dupe Algorithm: Compute"),x=y;break e}let{groupSettings:b}=r,m=[...f],_=new Set,C=(I,B)=>{if(I.length<2)return;let j=I.sort(Nu);y[B].push({mainTrack:j[0],duplicates:j.slice(1)}),I.forEach(N=>{_.add(N.uid)})},P=()=>{m=m.filter(I=>!_.has(I.uid)),_.clear()};if(b.exact){let I=Object.groupBy(m,Ku);for(let B in I){let j=I[B];j&&C(j,"exact")}P()}if(b.isrc){let I=Object.groupBy(m,Mu);for(let B in I){let j=I[B];B&&j&&C(j,"isrc")}P()}let k=Iu,O=Du;if(b.probable){let I=Object.groupBy(m,Tu);for(let B in I){let j=I[B];if(!j||j.length<2)continue;let N=new Set;for(let H of j){if(N.has(H.uid))continue;let X=j.filter(Y=>H.uid===Y.uid||!N.has(Y.uid)&&k(H,Y));X.length>1&&(C(X,"probable"),X.forEach(Y=>{N.add(Y.uid)}))}}P()}if(b.likely){let I=Object.groupBy(m,Au);for(let B in I){let j=I[B];if(!j||j.length<2)continue;let N=new Set;for(let H of j){if(N.has(H.uid))continue;let X=j.filter(Y=>H.uid===Y.uid||!N.has(Y.uid)&&O(H,Y));X.length>1&&(C(X,"likely"),X.forEach(Y=>{N.add(Y.uid)}))}}P()}if(b.possible){let I=Object.groupBy(m,Ru);for(let B in I){let j=I[B];if(!j||j.length<2)continue;let N=new Set;for(let H of j){if(N.has(H.uid))continue;let X=j.filter(Y=>H.uid===Y.uid||!N.has(Y.uid)&&O(H,Y));X.length>1&&(C(X,"possible"),X.forEach(Y=>{N.add(Y.uid)}))}}P()}if(b.maybe){m.sort(Pu);for(let I=0;I<m.length;I++){let B=m[I];if(_.has(B.uid))continue;let j=[B];for(let N=I+1;N<Math.min(I+30,m.length);N++){let H=m[N];if(!_.has(H.uid)){if(B.normalisedFuzzy[0]!==H.normalisedFuzzy[0])break;hu(B.normalisedFuzzy,H.normalisedFuzzy)>=.8&&j.push(H)}}j.length>1&&C(j,"maybe")}}l[0]=r,l[1]=f,l[2]=y,l[3]=x}else y=l[2],x=l[3];st.end("Dupe Algorithm: Compute"),x=y}return x}function Pu(f,r){return f.normalisedFuzzy.localeCompare(r.normalisedFuzzy)}function Ru(f){return f.normalisedFuzzy}function Au(f){return f.normalisedName}function Tu(f){return f.normalisedName}function Du(f,r){return f.duration.milliseconds==null||r.duration.milliseconds==null?!1:Math.abs(f.duration.milliseconds-r.duration.milliseconds)<=5e3}function Iu(f,r){let l=new Set(f.artists.map(Ou));return r.artists.some(x=>l.has(x.name.toLowerCase()))}function Ou(f){return f.name.toLowerCase()}function Mu(f){return f.isrc||""}function Ku(f){return f.uri}function Nu(f,r){let l=(r.playCount??0)-(f.playCount??0);if(l!==0)return l;let x=f.releaseDate??"9999",y=r.releaseDate??"9999";return x.localeCompare(y)}var Bu=()=>{let f=(0,ut.c)(5),r=_a(),l;f[0]!==r?(l=(b,m,_)=>{let C={...r,[b]:{...r[b],[m]:_}};ot.update(C)},f[0]=r,f[1]=l):l=f[1];let x=l,y;if(f[2]!==r||f[3]!==x){let b=(_,C,P)=>ce("section",{className:"duplicate-settings__section",children:[K("h3",{className:"duplicate-settings__section-title",children:_}),K("div",{className:"duplicate-settings__options",children:Kr.map(k=>K(pa,{desc:P[k],name:`${C}-${k}`,onChange:O=>x(C,k,!!O),option:{type:"toggle",name:k,desc:P[k],defaultVal:Kn[C][k]},value:r[C][k]},k))})]}),m=Object.fromEntries(Kr.map($u));y=ce("div",{className:"duplicate-settings",children:[b("Display Groups","groupSettings",m),b("Confirm Delete","confirmSettings",m)]}),f[2]=r,f[3]=x,f[4]=y}else y=f[4];return y},bt=Spicetify.Platform.PlayerAPI,ya={subscribe:f=>{let r=()=>f();return Spicetify.Platform.PlayerAPI._events.addListener("update",r,{}),()=>{Spicetify.Platform.PlayerAPI._events.removeListener("update",r,{})}},getSnapshot:()=>Spicetify.Platform.PlayerAPI._state},ju=f=>{let r=(0,ut.c)(33),{uri:l,duration:x}=f,y=l,b=x??0,m=En(ya.subscribe,ya.getSnapshot),_=m.item?.uri===y,C=m.isPaused,P=_&&!C,[k,O]=$e(0),[I,B]=$e(b),j=Ne(!1),N=Ne(0),H,X;r[0]!==_||r[1]!==C||r[2]!==m.duration||r[3]!==m.positionAsOfTimestamp||r[4]!==b?(H=()=>{if(!_){O(0),B(b);return}if(B(m.duration),j.current)return;if(C){O(m.positionAsOfTimestamp);return}let Ae=setInterval(()=>{let Oe=Date.now(),Qe=bt._state.positionAsOfTimestamp,De=bt._state.timestamp,_t=Oe-De+Qe;O(Math.min(_t,m.duration))},100);return()=>clearInterval(Ae)},X=[_,C,m.duration,m.positionAsOfTimestamp,b],r[0]=_,r[1]=C,r[2]=m.duration,r[3]=m.positionAsOfTimestamp,r[4]=b,r[5]=H,r[6]=X):(H=r[5],X=r[6]),at(H,X);let Y;r[7]!==_||r[8]!==C||r[9]!==y?(Y=()=>{_?C?bt.resume({}):bt.pause({}):bt.play({uri:y},{})},r[7]=_,r[8]=C,r[9]=y,r[10]=Y):Y=r[10];let W=Y,ne;r[11]===Symbol.for("react.memo_cache_sentinel")?(ne=Ae=>{j.current=!0,O(Ae),N.current=Ae},r[11]=ne):ne=r[11];let de=ne,le;r[12]!==_||r[13]!==y?(le=()=>{j.current=!1,_?bt.seekTo(N.current):bt.play({uri:y},{})},r[12]=_,r[13]=y,r[14]=le):le=r[14];let ae=le,ie=Lu,me;r[15]!==P?(me=P?K(Re.React.pause,{size:20}):K(Re.React.play,{size:20}),r[15]=P,r[16]=me):me=r[16];let ve;r[17]!==me||r[18]!==W?(ve=K("button",{className:"duplicate-group__playback-button",onClick:W,children:me}),r[17]=me,r[18]=W,r[19]=ve):ve=r[19];let be=ie(k),pe;r[20]!==be?(pe=K("span",{className:"slider-time",children:be}),r[20]=be,r[21]=pe):pe=r[21];let fe=I||0,ye=k||0,q;r[22]!==ae||r[23]!==fe||r[24]!==ye?(q=K(Mn,{max:fe,min:0,onChange:de,onRelease:ae,step:1,value:ye}),r[22]=ae,r[23]=fe,r[24]=ye,r[25]=q):q=r[25];let ee=ie(I),se;r[26]!==ee?(se=K("span",{className:"slider-time",children:ee}),r[26]=ee,r[27]=se):se=r[27];let ke;return r[28]!==q||r[29]!==se||r[30]!==ve||r[31]!==pe?(ke=ce("div",{className:"duplicate-group__playback-controls",children:[ve,pe,q,se]}),r[28]=q,r[29]=se,r[30]=ve,r[31]=pe,r[32]=ke):ke=r[32],ke},ga=f=>{let r=(0,ut.c)(42),{track:l,category:x,onDelete:y}=f,b=`duplicate-group__duplicate-item duplicate-group__item--${x}`,m=l.coverArt??"",_;r[0]!==m?(_=K("img",{className:"details-grid__image",src:m}),r[0]=m,r[1]=_):_=r[1];let C;r[2]!==l.name?(C=K("span",{className:"details-grid__name",children:l.name}),r[2]=l.name,r[3]=C):C=r[3];let P;r[4]!==l.playCount?(P=l.playCount?.toLocaleString(),r[4]=l.playCount,r[5]=P):P=r[5];let k;r[6]!==P?(k=ce("span",{className:"details-grid__playcount",children:["Play Count: ",P]}),r[6]=P,r[7]=k):k=r[7];let O;r[8]!==C||r[9]!==k?(O=ce("div",{className:"details-grid__main-info",children:[C,k]}),r[8]=C,r[9]=k,r[10]=O):O=r[10];let I;r[11]!==l.artists?(I=l.artists.map(zu).join(", "),r[11]=l.artists,r[12]=I):I=r[12];let B;r[13]!==I?(B=K("span",{className:"details-grid__artists",children:I}),r[13]=I,r[14]=B):B=r[14];let j;r[15]!==l.album.name?(j=K("span",{className:"details-grid__album",children:l.album.name}),r[15]=l.album.name,r[16]=j):j=r[16];let N;r[17]!==j||r[18]!==B?(N=ce("div",{className:"details-grid__second-info",children:[B,j]}),r[17]=j,r[18]=B,r[19]=N):N=r[19];let H;r[20]!==l.releaseDate?(H=du(l.releaseDate),r[20]=l.releaseDate,r[21]=H):H=r[21];let X;r[22]!==H?(X=K("span",{className:"details-grid__date",children:H}),r[22]=H,r[23]=X):X=r[23];let Y;r[24]!==N||r[25]!==X||r[26]!==_||r[27]!==O?(Y=K("div",{className:"duplicate-group__duplicate-info",children:ce("div",{className:"details-grid",children:[_,O,N,X]})}),r[24]=N,r[25]=X,r[26]=_,r[27]=O,r[28]=Y):Y=r[28];let W;r[29]!==l.duration.milliseconds||r[30]!==l.uri?(W=K(ju,{duration:l.duration.milliseconds,uri:l.uri}),r[29]=l.duration.milliseconds,r[30]=l.uri,r[31]=W):W=r[31];let ne;r[32]!==y||r[33]!==l?(ne=K("button",{className:"duplicate-group__delete-button",onClick:()=>y(l),children:"Delete"}),r[32]=y,r[33]=l,r[34]=ne):ne=r[34];let de;r[35]!==W||r[36]!==ne?(de=ce("div",{className:"duplicate-group__actions",children:[W,ne]}),r[35]=W,r[36]=ne,r[37]=de):de=r[37];let le;return r[38]!==b||r[39]!==Y||r[40]!==de?(le=ce("div",{className:b,children:[Y,de]}),r[38]=b,r[39]=Y,r[40]=de,r[41]=le):le=r[41],le},Fu=f=>{let r=(0,ut.c)(20),{title:l,category:x,groups:y,onDelete:b}=f,m;r[0]!==l.label?(m=K("div",{className:"duplicate-group__heading-title",children:l.label}),r[0]=l.label,r[1]=m):m=r[1];let _;r[2]===Symbol.for("react.memo_cache_sentinel")?(_=K("div",{className:"info-tippy",children:K(Re.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),r[2]=_):_=r[2];let C;r[3]!==l.tooltip?(C=K(Spicetify.ReactComponent.TooltipWrapper,{label:l.tooltip,placement:"top",children:_}),r[3]=l.tooltip,r[4]=C):C=r[4];let P;r[5]!==m||r[6]!==C?(P=ce("div",{className:"duplicate-group__heading-info",children:[m,C]}),r[5]=m,r[6]=C,r[7]=P):P=r[7];let k;r[8]!==y.length?(k=ce("div",{className:"duplicate-group__heading-length",children:[y.length," found"]}),r[8]=y.length,r[9]=k):k=r[9];let O;r[10]!==P||r[11]!==k?(O=ce("div",{className:"duplicate-group__heading",children:[P,k]}),r[10]=P,r[11]=k,r[12]=O):O=r[12];let I;r[13]!==x||r[14]!==y||r[15]!==b?(I=y.length>0&&K("div",{className:"duplicate-group__list",children:y.map(j=>ce("div",{className:`duplicate-group__item duplicate-group__item--${x}`,children:[K(ga,{category:x,onDelete:N=>b(x,N),track:j.mainTrack}),K("div",{className:"duplicate-group__duplicates-list",children:j.duplicates.map(N=>ce(Ar,{children:[K("div",{className:"duplicate-group__duplicate-thread"}),K(ga,{category:x,onDelete:H=>b(x,H),track:N},N.uid)]}))})]},j.mainTrack.uid))}),r[13]=x,r[14]=y,r[15]=b,r[16]=I):I=r[16];let B;return r[17]!==O||r[18]!==I?(B=ce("div",{className:"duplicate-group",children:[O,I]}),r[17]=O,r[18]=I,r[19]=B):B=r[19],B};function wa({selectedPlaylist:f}){let[r,l]=$e("finder"),[x,y]=$e(f?.uri),[b,m]=$e(null),_=_a(),{playlists:C,loading:P}=mu(),k=Er(()=>C.find(W=>W.uri===x)??(x?{uri:x,name:"Selected Playlist",type:"playlist"}:void 0),[C,x]),{tracks:O,loading:I,setTracks:B}=yu(x,_),j=Eu(O,_),N=Ne(performance.now());N.current=performance.now(),at(()=>{let W=performance.now()-N.current;W>10&&console.debug(`[DEBUG] Render:React took ${W.toFixed(2)}ms to render`)});let H=async W=>{k&&(await Spicetify.Platform.PlaylistAPI.remove(k.uri,[{uid:W.uid}]),B(ne=>ne.filter(de=>de.uid!==W.uid)))},X=(W,ne)=>{_.confirmSettings[W]?m({track:ne,category:W}):H(ne)},Y=()=>{b&&H(b.track),m(null)};return ce(Ar,{children:[K(Spicetify.ReactComponent.ConfirmDialog,{cancelText:"Cancel",confirmText:"Remove",descriptionText:b?`Are you sure you want to remove "${b.track.name}"? This cannot be undone.`:"",isOpen:b!==null,onClose:()=>m(null),onConfirm:Y,onOutside:()=>m(null),titleText:"Remove Track"}),ce("div",{className:"find-duplicates",children:[ce("div",{className:"modal__header",children:[K("h1",{className:"find-duplicates__title",children:r==="finder"?"Playlist Duplicate Finder":"Settings"}),K("div",{className:"find-duplicates__dropdown",children:K(On,{disabled:P||I,onChange:y,options:C.map(W=>({value:W.uri,label:W.name})),value:x??""})}),ce("div",{className:"modal__buttonContainer",children:[K("button",{className:"modal__button",onClick:()=>l(W=>W==="finder"?"settings":"finder"),children:K(Re.React.settings,{})}),K("button",{className:"modal__button",onClick:()=>gt.hide(),children:K(Re.React.close,{size:18})})]})]}),K("div",{className:"find-duplicates__content",children:r==="settings"?K(Bu,{}):I?K("div",{className:"find-duplicates__loading",children:K(UI.ProgressDots,{size:"medium"})}):Kr.map(W=>_.groupSettings[W]?K(Fu,{category:W,groups:j[W],onDelete:X,title:ba[W]},W):null)})]})]})}function $u(f){return[f,ba[f].label]}function Lu(f){if(f==null||f<0)return"--:--";let r=Math.floor(f/1e3);return`${Math.floor(r/60)}:${(r%60).toString().padStart(2,"0")}`}function zu(f){return f.name}var xa=new CSSStyleSheet;xa.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-main-elevated);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-button);display:flex;flex-direction:column;overflow:hidden}.find-duplicates__title{font-size:30px;color:var(--spice-text)}.find-duplicates__dropdown{align-content:center}.find-duplicates__header-label{font-weight:600;color:var(--fdp-text)}.find-duplicates__loading{display:flex;align-items:center;justify-content:center;height:16700000px}.find-duplicates__content{display:flex;flex-direction:column;gap:8px;padding:8px 28px;overflow:scroll}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg)}.duplicate-group__heading{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fdp-text)}.duplicate-group__heading-info{display:flex;gap:8px}.duplicate-group__heading-length{padding:2px 8px;font-size:12px;color:var(--fdp-subtext);border:1px solid var(--fdp-border);border-radius:999px}.duplicate-group__list{display:flex;flex-direction:column;gap:10px}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:8px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:12px 10px;border:1px solid var(--fdp-border);border-left:3px solid;border-radius:var(--fdp-radius);transition:background-color .12s ease,border-color .12s ease}.duplicate-group__item:hover{background:rgba(var(--spice-rgb-selected-row),.05);border-color:var(--fdp-border-strong)}.duplicate-group__item--exact{border-left-color:#e53935}.duplicate-group__item--isrc{border-left-color:#fb8c00}.duplicate-group__item--probable{border-left-color:#fdd835}.duplicate-group__item--likely{border-left-color:#43a047}.duplicate-group__item--possible{border-left-color:#1e88e5}.duplicate-group__item--maybe{border-left-color:#306}.duplicate-group__duplicate-info{display:flex;gap:12px;align-items:center;justify-content:space-between}.details-grid{display:grid;grid-template-columns:40px auto auto 85px;gap:8px;width:100%;font-size:.9rem;color:var(--fdp-subtext)}.details-grid__image{width:40px;height:40px;border-radius:4px}.details-grid__name{overflow:hidden;text-overflow:ellipsis;font-weight:600;color:var(--fdp-text);white-space:nowrap}.details-grid__date{text-align:right}.details-grid__main-info,.details-grid__second-info{display:flex;flex-direction:column}.duplicate-group__actions{display:flex;flex-direction:row;gap:8px}.duplicate-group__playback-controls{display:flex;gap:4px;align-items:center;width:100%}.duplicate-group__playback-button{width:32px;height:32px;color:var(--fdp-text);cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%}.duplicate-group__playback-button:hover{background:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}.slider-time{min-width:38px;font-size:12px;color:var(--fdp-subtext);text-align:center}.duplicate-group__delete-button{padding:6px 12px;font-size:.85rem;font-weight:600;color:#fff;cursor:pointer;background:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:999px}.duplicate-group__delete-button:hover{filter:brightness(1.05)}.duplicate-settings__section{margin-bottom:24px}.duplicate-settings__section-title{padding-bottom:6px;margin-bottom:12px;font-weight:600;border-bottom:1px solid var(--fdp-border)}.duplicate-settings__options{display:flex;flex-direction:column;gap:10px}.find-duplicates :is(button,[role=button],input,select):focus-visible{outline:none;border-color:var(--fdp-accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--fdp-accent),transparent 60%)}");var Sa=xa;document.adoptedStyleSheets.push(Sa);var Uu=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:Re.HTML.duplicate,onClick:async(f,r,l)=>{let x=Sr(f.props),y=x.uri,b=x.name,m=Spicetify.URI.from(y)?.type,_={uri:y,name:b||(await Spicetify.Platform.PlaylistAPI.getMetadata(y,{}))?.name||"",type:m||""};gt({title:"Find Duplicates",content:K(wa,{selectedPlaylist:_}),isLarge:!0,template:!1})},divider:"after",shouldAdd:(f,r,l)=>{let x=Sr(f),y=Spicetify.URI.from(x.uri)?.type;return y===Spicetify.URI.Type.PLAYLIST||y===Spicetify.URI.Type.PLAYLIST_V2}});Uu.register();
