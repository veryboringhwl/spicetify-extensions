await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Kh=Object.create;var ua=Object.defineProperty;var Uh=Object.getOwnPropertyDescriptor;var Zh=Object.getOwnPropertyNames;var Wh=Object.getPrototypeOf,qh=Object.prototype.hasOwnProperty;var Hh=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ps=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Gh=(t,e)=>{for(var n in e)ua(t,n,{get:e[n],enumerable:!0})},Bc=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Zh(e))!qh.call(t,a)&&a!==n&&ua(t,a,{get:()=>e[a],enumerable:!(o=Uh(e,a))||o.enumerable});return t};var Yt=(t,e,n)=>(n=t!=null?Kh(Wh(t)):{},Bc(e||!t||!t.__esModule?ua(n,"default",{value:t,enumerable:!0}):n,t)),Qh=t=>Bc(ua({},"__esModule",{value:!0}),t);var Lc={};Gh(Lc,{Children:()=>Xh,Component:()=>Vh,Fragment:()=>Jh,Profiler:()=>em,PureComponent:()=>tm,StrictMode:()=>nm,Suspense:()=>rm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>im,act:()=>om,cloneElement:()=>am,createContext:()=>sm,createElement:()=>um,createFactory:()=>cm,createRef:()=>lm,default:()=>Cm,forwardRef:()=>fm,isValidElement:()=>$s,lazy:()=>dm,memo:()=>st,startTransition:()=>hm,unstable_act:()=>mm,useCallback:()=>pm,useContext:()=>ym,useDebugValue:()=>gm,useDeferredValue:()=>vm,useEffect:()=>An,useId:()=>Ns,useImperativeHandle:()=>_m,useInsertionEffect:()=>bm,useLayoutEffect:()=>wm,useMemo:()=>js,useReducer:()=>Dm,useRef:()=>Ht,useState:()=>an,useSyncExternalStore:()=>Ai,useTransition:()=>xm,version:()=>Em});var Xh,Vh,Jh,em,tm,nm,rm,im,om,am,sm,um,cm,lm,fm,$s,dm,st,hm,mm,pm,ym,gm,vm,An,Ns,_m,bm,wm,js,Dm,Ht,an,Ai,xm,Em,Cm,Gt=Hh(()=>{({Children:Xh,Component:Vh,Fragment:Jh,Profiler:em,PureComponent:tm,StrictMode:nm,Suspense:rm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:im,act:om,cloneElement:am,createContext:sm,createElement:um,createFactory:cm,createRef:lm,forwardRef:fm,isValidElement:$s,lazy:dm,memo:st,startTransition:hm,unstable_act:mm,useCallback:pm,useContext:ym,useDebugValue:gm,useDeferredValue:vm,useEffect:An,useId:Ns,useImperativeHandle:_m,useInsertionEffect:bm,useLayoutEffect:wm,useMemo:js,useReducer:Dm,useRef:Ht,useState:an,useSyncExternalStore:Ai,useTransition:xm,version:Em}=Spicetify.React),Cm=Spicetify.React});var Qt=Ps((y0,Zc)=>{"use no memo";"use strict";var Sm=Object.create,fa=Object.defineProperty,Tm=Object.getOwnPropertyDescriptor,km=Object.getOwnPropertyNames,Im=Object.getPrototypeOf,Mm=Object.prototype.hasOwnProperty,Om=(t,e)=>{for(var n in e)fa(t,n,{get:e[n],enumerable:!0})},Kc=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of km(e))!Mm.call(t,a)&&a!==n&&fa(t,a,{get:()=>e[a],enumerable:!(o=Tm(e,a))||o.enumerable});return t},Rm=(t,e,n)=>(n=t!=null?Sm(Im(t)):{},Kc(e||!t||!t.__esModule?fa(n,"default",{value:t,enumerable:!0}):n,t)),Pm=t=>Kc(fa({},"__esModule",{value:!0}),t),Uc={};Om(Uc,{$dispatcherGuard:()=>jm,$makeReadOnly:()=>Lm,$reset:()=>Bm,$structuralCheck:()=>Um,c:()=>Nm,clearRenderCounterRegistry:()=>Ym,renderCounterRegistry:()=>Ni,useRenderCounter:()=>Km});Zc.exports=Pm(Uc);var Xr=Rm((Gt(),Qh(Lc))),{useRef:Am,useEffect:$m,isValidElement:Gr}=Xr,Yc,Bs=(Yc=Xr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Yc:Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.memo_cache_sentinel"),zc,Nm=typeof((zc=Xr.__COMPILER_RUNTIME)==null?void 0:zc.c)=="function"?Xr.__COMPILER_RUNTIME.c:function(e){return Xr.useMemo(()=>{let n=new Array(e);for(let o=0;o<e;o++)n[o]=Ls;return n[Ls]=!0,n},[])},la={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(t=>{la[t]=()=>{throw new Error(`[React] Unexpected React hook call (${t}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var $i=null;la.useMemoCache=t=>{if($i==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return $i.useMemoCache(t)};function ca(t){return Bs.ReactCurrentDispatcher.current=t,Bs.ReactCurrentDispatcher.current}var Qr=[];function jm(t){let e=Bs.ReactCurrentDispatcher.current;if(t===0){if(Qr.push(e),Qr.length===1&&($i=e),e===la)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");ca(la)}else if(t===1){let n=Qr.pop();if(n==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Qr.length===0&&($i=null),ca(n)}else if(t===2)Qr.push(e),ca($i);else if(t===3){let n=Qr.pop();if(n==null)throw new Error("React Compiler internal error: unexpected null in guard stack");ca(n)}else throw new Error("React Compiler internal error: unreachable block"+t)}function Bm(t){for(let e=0;e<t.length;e++)t[e]=Ls}function Lm(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Ni=new Map;function Ym(){for(let t of Ni.values())t.forEach(e=>{e.count=0})}function zm(t,e){let n=Ni.get(t);n==null&&(n=new Set,Ni.set(t,n)),n.add(e)}function Fm(t,e){let n=Ni.get(t);n?.delete(e)}function Km(t){let e=Am(null);e.current!=null&&(e.current.count+=1),$m(()=>{if(e.current==null){let n={count:0};zm(t,n),e.current=n}return()=>{e.current!==null&&Fm(t,e.current)}})}var Fc=new Set;function Um(t,e,n,o,a,s){function c(m,g,b,D){let T=`${o}:${s} [${a}] ${n}${b} changed from ${m} to ${g} at depth ${D}`;Fc.has(T)||(Fc.add(T),console.error(T))}let l=2;function y(m,g,b,D){if(!(D>l)){if(m===g)return;if(typeof m!=typeof g)c(`type ${typeof m}`,`type ${typeof g}`,b,D);else if(typeof m=="object"){let T=Array.isArray(m),O=Array.isArray(g);if(m===null&&g!==null)c("null",`type ${typeof g}`,b,D);else if(g===null)c(`type ${typeof m}`,"null",b,D);else if(m instanceof Map)if(!(g instanceof Map))c("Map instance","other value",b,D);else if(m.size!==g.size)c(`Map instance with size ${m.size}`,`Map instance with size ${g.size}`,b,D);else for(let[A,j]of m)g.has(A)?y(j,g.get(A),`${b}.get(${A})`,D+1):c(`Map instance with key ${A}`,`Map instance without key ${A}`,b,D);else if(g instanceof Map)c("other value","Map instance",b,D);else if(m instanceof Set)if(!(g instanceof Set))c("Set instance","other value",b,D);else if(m.size!==g.size)c(`Set instance with size ${m.size}`,`Set instance with size ${g.size}`,b,D);else for(let A of g)m.has(A)||c(`Set instance without element ${A}`,`Set instance with element ${A}`,b,D);else if(g instanceof Set)c("other value","Set instance",b,D);else if(T||O)if(T!==O)c(`type ${T?"array":"object"}`,`type ${O?"array":"object"}`,b,D);else if(m.length!==g.length)c(`array with length ${m.length}`,`array with length ${g.length}`,b,D);else for(let A=0;A<m.length;A++)y(m[A],g[A],`${b}[${A}]`,D+1);else if(Gr(m)||Gr(g))Gr(m)!==Gr(g)?c(`type ${Gr(m)?"React element":"object"}`,`type ${Gr(g)?"React element":"object"}`,b,D):m.type!==g.type?c(`React element of type ${m.type}`,`React element of type ${g.type}`,b,D):y(m.props,g.props,`[props of ${b}]`,D+1);else{for(let A in g)A in m||c(`object without key ${A}`,`object with key ${A}`,b,D);for(let A in m)A in g?y(m[A],g[A],`${b}.${A}`,D+1):c(`object with key ${A}`,`object without key ${A}`,b,D)}}else{if(typeof m=="function")return;isNaN(m)||isNaN(g)?isNaN(m)!==isNaN(g)&&c(`${isNaN(m)?"NaN":"non-NaN value"}`,`${isNaN(g)?"NaN":"non-NaN value"}`,b,D):m!==g&&c(m,g,b,D)}}}y(t,e,"",0)}});var Xc=Ps((Ks,Us)=>{(function(t,e){typeof Ks=="object"&&typeof Us<"u"?Us.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.JSBI=e())})(Ks,function(){"use strict";var t=Math.imul,e=Math.clz32;function n(q,X){(X==null||X>q.length)&&(X=q.length);for(var Q=0,ye=Array(X);Q<X;Q++)ye[Q]=q[Q];return ye}function o(q){if(Array.isArray(q))return q}function a(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function s(q,X,Q){return X=b(X),H(q,O()?Reflect.construct(X,Q||[],b(q).constructor):X.apply(q,Q))}function c(q,X){if(!(q instanceof X))throw new TypeError("Cannot call a class as a function")}function l(q,X,Q){if(O())return Reflect.construct.apply(null,arguments);var ye=[null];ye.push.apply(ye,X);var x=new(q.bind.apply(q,ye));return Q&&J(x,Q.prototype),x}function y(q,X){for(var Q,ye=0;ye<X.length;ye++)Q=X[ye],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,le(Q.key),Q)}function m(q,X,Q){return X&&y(q.prototype,X),Q&&y(q,Q),Object.defineProperty(q,"prototype",{writable:!1}),q}function g(q,X){var Q=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!Q){if(Array.isArray(q)||(Q=we(q))||X&&q&&typeof q.length=="number"){Q&&(q=Q);var ye=0,x=function(){};return{s:x,n:function(){return ye>=q.length?{done:!0}:{done:!1,value:q[ye++]}},e:function(E){throw E},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,d=!0,p=!1;return{s:function(){Q=Q.call(q)},n:function(){var E=Q.next();return d=E.done,E},e:function(E){p=!0,Y=E},f:function(){try{d||Q.return==null||Q.return()}finally{if(p)throw Y}}}}function b(q){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},b(q)}function D(q,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(X&&X.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Object.defineProperty(q,"prototype",{writable:!1}),X&&J(q,X)}function T(q){try{return Function.toString.call(q).indexOf("[native code]")!==-1}catch{return typeof q=="function"}}function O(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O=function(){return!!q})()}function A(q,X){var Q=q==null?null:typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(Q!=null){var ye,x,Y,d,p=[],E=!0,I=!1;try{if(Y=(Q=Q.call(q)).next,X===0){if(Object(Q)!==Q)return;E=!1}else for(;!(E=(ye=Y.call(Q)).done)&&(p.push(ye.value),p.length!==X);E=!0);}catch(k){I=!0,x=k}finally{try{if(!E&&Q.return!=null&&(d=Q.return(),Object(d)!==d))return}finally{if(I)throw x}}return p}}function j(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H(q,X){if(X&&(typeof X=="object"||typeof X=="function"))return X;if(X!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(q)}function J(q,X){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Q,ye){return Q.__proto__=ye,Q},J(q,X)}function oe(q,X){return o(q)||A(q,X)||we(q,X)||j()}function ie(q,X){if(typeof q!="object"||!q)return q;var Q=q[Symbol.toPrimitive];if(Q!==void 0){var ye=Q.call(q,X||"default");if(typeof ye!="object")return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(q)}function le(q){var X=ie(q,"string");return typeof X=="symbol"?X:X+""}function pe(q){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},pe(q)}function we(q,X){if(q){if(typeof q=="string")return n(q,X);var Q={}.toString.call(q).slice(8,-1);return Q==="Object"&&q.constructor&&(Q=q.constructor.name),Q==="Map"||Q==="Set"?Array.from(q):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?n(q,X):void 0}}function De(q){var X=typeof Map=="function"?new Map:void 0;return De=function(Q){function ye(){return l(Q,arguments,b(this).constructor)}if(Q===null||!T(Q))return Q;if(typeof Q!="function")throw new TypeError("Super expression must either be null or a function");if(X!==void 0){if(X.has(Q))return X.get(Q);X.set(Q,ye)}return ye.prototype=Object.create(Q.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}}),J(ye,Q)},De(q)}var be=(function(q){var X=Math.abs,Q=Math.max,ye=Math.floor;function x(Y,d){var p;if(c(this,x),p=s(this,x,[Y]),p.sign=d,Object.setPrototypeOf(p,x.prototype),Y>x.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return p}return D(x,q),m(x,[{key:"toDebugString",value:function(){var d,p=["BigInt["],E=g(this);try{for(E.s();!(d=E.n()).done;){var I=d.value;p.push((I&&(I>>>0).toString(16))+", ")}}catch(k){E.e(k)}finally{E.f()}return p.push("]"),p.join("")}},{key:"toString",value:function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>d||36<d)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(d&d-1)==0?x.__toStringBasePowerOfTwo(this,d):x.__toStringGeneric(this,d,!1)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var d=new x(this.length,this.sign),p=0;p<this.length;p++)d[p]=this[p];return d}},{key:"__trim",value:function(){for(var d=this.length,p=this[d-1];p===0;)d--,p=this[d-1],this.pop();return d===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var d=0;d<this.length;d++)this[d]=0}},{key:"__clzmsd",value:function(){return x.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(d,p,E){E>this.length&&(E=this.length);for(var I=32767&d,k=d>>>15,P=0,F=p,L=0;L<E;L++){var ee=this.__digit(L),Z=32767&ee,fe=ee>>>15,xe=x.__imul(Z,I),de=x.__imul(Z,k),ue=x.__imul(fe,I),Ie=x.__imul(fe,k),Pe=F+xe+P;P=Pe>>>30,Pe&=1073741823,Pe+=((32767&de)<<15)+((32767&ue)<<15),P+=Pe>>>30,F=Ie+(de>>>15)+(ue>>>15),this.__setDigit(L,1073741823&Pe)}if(P!==0||F!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(d,p,E){for(var I,k=0,P=0;P<E;P++)I=this.__halfDigit(p+P)+d.__halfDigit(P)+k,k=I>>>15,this.__setHalfDigit(p+P,32767&I);return k}},{key:"__inplaceSub",value:function(d,p,E){var I=E-1>>>1,k=0;if(1&p){p>>=1;for(var P=this.__digit(p),F=32767&P,L=0;L<I;L++){var ee=d.__digit(L),Z=(P>>>15)-(32767&ee)-k;k=1&Z>>>15,this.__setDigit(p+L,(32767&Z)<<15|32767&F),P=this.__digit(p+L+1),F=(32767&P)-(ee>>>15)-k,k=1&F>>>15}var fe=d.__digit(L),xe=(P>>>15)-(32767&fe)-k;k=1&xe>>>15,this.__setDigit(p+L,(32767&xe)<<15|32767&F);var de=fe>>>15;if(p+L+1>=this.length)throw new RangeError("out of bounds");(1&E)==0&&(P=this.__digit(p+L+1),F=(32767&P)-de-k,k=1&F>>>15,this.__setDigit(p+d.length,1073709056&P|32767&F))}else{p>>=1;for(var ue=0;ue<d.length-1;ue++){var Ie=this.__digit(p+ue),Pe=d.__digit(ue),Ne=(32767&Ie)-(32767&Pe)-k;k=1&Ne>>>15;var Fe=(Ie>>>15)-(Pe>>>15)-k;k=1&Fe>>>15,this.__setDigit(p+ue,(32767&Fe)<<15|32767&Ne)}var He=this.__digit(p+ue),Ve=d.__digit(ue),ct=(32767&He)-(32767&Ve)-k;k=1&ct>>>15;var dn=0;(1&E)==0&&(dn=(He>>>15)-(Ve>>>15)-k,k=1&dn>>>15),this.__setDigit(p+ue,(32767&dn)<<15|32767&ct)}return k}},{key:"__inplaceRightShift",value:function(d){if(d!==0){for(var p,E=this.__digit(0)>>>d,I=this.length-1,k=0;k<I;k++)p=this.__digit(k+1),this.__setDigit(k,1073741823&p<<30-d|E),E=p>>>d;this.__setDigit(I,E)}}},{key:"__digit",value:function(d){return this[d]}},{key:"__unsignedDigit",value:function(d){return this[d]>>>0}},{key:"__setDigit",value:function(d,p){this[d]=0|p}},{key:"__setDigitGrow",value:function(d,p){this[d]=0|p}},{key:"__halfDigitLength",value:function(){var d=this.length;return 32767>=this.__unsignedDigit(d-1)?2*d-1:2*d}},{key:"__halfDigit",value:function(d){return 32767&this[d>>>1]>>>15*(1&d)}},{key:"__setHalfDigit",value:function(d,p){var E=d>>>1,I=this.__digit(E),k=1&d?32767&I|p<<15:1073709056&I|32767&p;this.__setDigit(E,k)}}],[{key:"BigInt",value:function(d){var p=Number.isFinite;if(typeof d=="number"){if(d===0)return x.__zero();if(x.__isOneDigitInt(d))return 0>d?x.__oneDigit(-d,!0):x.__oneDigit(d,!1);if(!p(d)||ye(d)!==d)throw new RangeError("The number "+d+" cannot be converted to BigInt because it is not an integer");return x.__fromDouble(d)}if(typeof d=="string"){var E=x.__fromString(d);if(E===null)throw new SyntaxError("Cannot convert "+d+" to a BigInt");return E}if(typeof d=="boolean")return d===!0?x.__oneDigit(1,!1):x.__zero();if(pe(d)==="object"){if(d.constructor===x)return d;var I=x.__toPrimitive(d);return x.BigInt(I)}throw new TypeError("Cannot convert "+d+" to a BigInt")}},{key:"toNumber",value:function(d){var p=d.length;if(p===0)return 0;if(p===1){var E=d.__unsignedDigit(0);return d.sign?-E:E}var I=d.__digit(p-1),k=x.__clz30(I),P=30*p-k;if(1024<P)return d.sign?-1/0:1/0;var F=P-1,L=I,ee=p-1,Z=k+3,fe=Z===32?0:L<<Z;fe>>>=12;var xe=Z-12,de=12<=Z?0:L<<20+Z,ue=20+Z;for(0<xe&&0<ee&&(ee--,L=d.__digit(ee),fe|=L>>>30-xe,de=L<<xe+2,ue=xe+2);0<ue&&0<ee;)ee--,L=d.__digit(ee),de|=30<=ue?L<<ue-30:L>>>30-ue,ue-=30;var Ie=x.__decideRounding(d,ue,ee,L);if((Ie===1||Ie===0&&(1&de)==1)&&(de=de+1>>>0,de===0&&(fe++,fe>>>20!=0&&(fe=0,F++,1023<F))))return d.sign?-1/0:1/0;var Pe=d.sign?-2147483648:0;return F=F+1023<<20,x.__kBitConversionInts[x.__kBitConversionIntHigh]=Pe|F|fe,x.__kBitConversionInts[x.__kBitConversionIntLow]=de,x.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(d){if(d.length===0)return d;var p=d.__copy();return p.sign=!d.sign,p}},{key:"bitwiseNot",value:function(d){return d.sign?x.__absoluteSubOne(d).__trim():x.__absoluteAddOne(d,!0)}},{key:"exponentiate",value:function(d,p){if(p.sign)throw new RangeError("Exponent must be positive");if(p.length===0)return x.__oneDigit(1,!1);if(d.length===0)return d;if(d.length===1&&d.__digit(0)===1)return d.sign&&(1&p.__digit(0))==0?x.unaryMinus(d):d;if(1<p.length)throw new RangeError("BigInt too big");var E=p.__unsignedDigit(0);if(E===1)return d;if(E>=x.__kMaxLengthBits)throw new RangeError("BigInt too big");if(d.length===1&&d.__digit(0)===2){var I=1+(0|E/30),k=d.sign&&(1&E)!=0,P=new x(I,k);P.__initializeDigits();var F=1<<E%30;return P.__setDigit(I-1,F),P}var L=null,ee=d;for((1&E)!=0&&(L=d),E>>=1;E!==0;E>>=1)ee=x.multiply(ee,ee),(1&E)!=0&&(L===null?L=ee:L=x.multiply(L,ee));return L}},{key:"multiply",value:function(d,p){if(d.length===0)return d;if(p.length===0)return p;var E=d.length+p.length;30<=d.__clzmsd()+p.__clzmsd()&&E--;var I=new x(E,d.sign!==p.sign);I.__initializeDigits();for(var k=0;k<d.length;k++)x.__multiplyAccumulate(p,d.__digit(k),I,k);return I.__trim()}},{key:"divide",value:function(d,p){if(p.length===0)throw new RangeError("Division by zero");if(0>x.__absoluteCompare(d,p))return x.__zero();var E,I=d.sign!==p.sign,k=p.__unsignedDigit(0);if(p.length===1&&32767>=k){if(k===1)return I===d.sign?d:x.unaryMinus(d);E=x.__absoluteDivSmall(d,k,null)}else E=x.__absoluteDivLarge(d,p,!0,!1);return E.sign=I,E.__trim()}},{key:"remainder",value:function(d,p){if(p.length===0)throw new RangeError("Division by zero");if(0>x.__absoluteCompare(d,p))return d;var E=p.__unsignedDigit(0);if(p.length===1&&32767>=E){if(E===1)return x.__zero();var I=x.__absoluteModSmall(d,E);return I===0?x.__zero():x.__oneDigit(I,d.sign)}var k=x.__absoluteDivLarge(d,p,!1,!0);return k.sign=d.sign,k.__trim()}},{key:"add",value:function(d,p){var E=d.sign;return E===p.sign?x.__absoluteAdd(d,p,E):0<=x.__absoluteCompare(d,p)?x.__absoluteSub(d,p,E):x.__absoluteSub(p,d,!E)}},{key:"subtract",value:function(d,p){var E=d.sign;return E===p.sign?0<=x.__absoluteCompare(d,p)?x.__absoluteSub(d,p,E):x.__absoluteSub(p,d,!E):x.__absoluteAdd(d,p,E)}},{key:"leftShift",value:function(d,p){return p.length===0||d.length===0?d:p.sign?x.__rightShiftByAbsolute(d,p):x.__leftShiftByAbsolute(d,p)}},{key:"signedRightShift",value:function(d,p){return p.length===0||d.length===0?d:p.sign?x.__leftShiftByAbsolute(d,p):x.__rightShiftByAbsolute(d,p)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(d,p){return 0>x.__compareToBigInt(d,p)}},{key:"lessThanOrEqual",value:function(d,p){return 0>=x.__compareToBigInt(d,p)}},{key:"greaterThan",value:function(d,p){return 0<x.__compareToBigInt(d,p)}},{key:"greaterThanOrEqual",value:function(d,p){return 0<=x.__compareToBigInt(d,p)}},{key:"equal",value:function(d,p){if(d.sign!==p.sign||d.length!==p.length)return!1;for(var E=0;E<d.length;E++)if(d.__digit(E)!==p.__digit(E))return!1;return!0}},{key:"notEqual",value:function(d,p){return!x.equal(d,p)}},{key:"bitwiseAnd",value:function(d,p){if(!d.sign&&!p.sign)return x.__absoluteAnd(d,p).__trim();if(d.sign&&p.sign){var E=Q(d.length,p.length)+1,I=x.__absoluteSubOne(d,E),k=x.__absoluteSubOne(p);return I=x.__absoluteOr(I,k,I),x.__absoluteAddOne(I,!0,I).__trim()}if(d.sign){var P=[p,d];d=P[0],p=P[1]}return x.__absoluteAndNot(d,x.__absoluteSubOne(p)).__trim()}},{key:"bitwiseXor",value:function(d,p){if(!d.sign&&!p.sign)return x.__absoluteXor(d,p).__trim();if(d.sign&&p.sign){var E=Q(d.length,p.length),I=x.__absoluteSubOne(d,E),k=x.__absoluteSubOne(p);return x.__absoluteXor(I,k,I).__trim()}var P=Q(d.length,p.length)+1;if(d.sign){var F=[p,d];d=F[0],p=F[1]}var L=x.__absoluteSubOne(p,P);return L=x.__absoluteXor(L,d,L),x.__absoluteAddOne(L,!0,L).__trim()}},{key:"bitwiseOr",value:function(d,p){var E=Q(d.length,p.length);if(!d.sign&&!p.sign)return x.__absoluteOr(d,p).__trim();if(d.sign&&p.sign){var I=x.__absoluteSubOne(d,E),k=x.__absoluteSubOne(p);return I=x.__absoluteAnd(I,k,I),x.__absoluteAddOne(I,!0,I).__trim()}if(d.sign){var P=[p,d];d=P[0],p=P[1]}var F=x.__absoluteSubOne(p,E);return F=x.__absoluteAndNot(F,d,F),x.__absoluteAddOne(F,!0,F).__trim()}},{key:"asIntN",value:function(d,p){if(p.length===0)return p;if(d=ye(d),0>d)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(d===0)return x.__zero();if(d>=x.__kMaxLengthBits)return p;var E=0|(d+29)/30;if(p.length<E)return p;var I=p.__unsignedDigit(E-1),k=1<<(d-1)%30;if(p.length===E&&I<k)return p;var P=(I&k)===k;if(!P)return x.__truncateToNBits(d,p);if(!p.sign)return x.__truncateAndSubFromPowerOfTwo(d,p,!0);if((I&k-1)==0){for(var F=E-2;0<=F;F--)if(p.__digit(F)!==0)return x.__truncateAndSubFromPowerOfTwo(d,p,!1);return p.length===E&&I===k?p:x.__truncateToNBits(d,p)}return x.__truncateAndSubFromPowerOfTwo(d,p,!1)}},{key:"asUintN",value:function(d,p){if(p.length===0)return p;if(d=ye(d),0>d)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(d===0)return x.__zero();if(p.sign){if(d>x.__kMaxLengthBits)throw new RangeError("BigInt too big");return x.__truncateAndSubFromPowerOfTwo(d,p,!1)}if(d>=x.__kMaxLengthBits)return p;var E=0|(d+29)/30;if(p.length<E)return p;var I=d%30;if(p.length==E){if(I===0)return p;var k=p.__digit(E-1);if(!(k>>>I))return p}return x.__truncateToNBits(d,p)}},{key:"ADD",value:function(d,p){if(d=x.__toPrimitive(d),p=x.__toPrimitive(p),typeof d=="string")return typeof p!="string"&&(p=p.toString()),d+p;if(typeof p=="string")return d.toString()+p;if(d=x.__toNumeric(d),p=x.__toNumeric(p),x.__isBigInt(d)&&x.__isBigInt(p))return x.add(d,p);if(typeof d=="number"&&typeof p=="number")return d+p;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(d,p){return x.__compare(d,p,0)}},{key:"LE",value:function(d,p){return x.__compare(d,p,1)}},{key:"GT",value:function(d,p){return x.__compare(d,p,2)}},{key:"GE",value:function(d,p){return x.__compare(d,p,3)}},{key:"EQ",value:function(d,p){for(;;){if(x.__isBigInt(d))return x.__isBigInt(p)?x.equal(d,p):x.EQ(p,d);if(typeof d=="number"){if(x.__isBigInt(p))return x.__equalToNumber(p,d);if(pe(p)!=="object")return d==p;p=x.__toPrimitive(p)}else if(typeof d=="string"){if(x.__isBigInt(p))return d=x.__fromString(d),d!==null&&x.equal(d,p);if(pe(p)!=="object")return d==p;p=x.__toPrimitive(p)}else if(typeof d=="boolean"){if(x.__isBigInt(p))return x.__equalToNumber(p,+d);if(pe(p)!=="object")return d==p;p=x.__toPrimitive(p)}else if(pe(d)==="symbol"){if(x.__isBigInt(p))return!1;if(pe(p)!=="object")return d==p;p=x.__toPrimitive(p)}else if(pe(d)==="object"){if(pe(p)==="object"&&p.constructor!==x)return d==p;d=x.__toPrimitive(d)}else return d==p}}},{key:"NE",value:function(d,p){return!x.EQ(d,p)}},{key:"DataViewGetBigInt64",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return x.asIntN(64,x.DataViewGetBigUint64(d,p,E))}},{key:"DataViewGetBigUint64",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0&&arguments[2],I=E?[4,0]:[0,4],k=oe(I,2),P=k[0],F=k[1],L=d.getUint32(p+P,E),ee=d.getUint32(p+F,E),Z=new x(3,!1);return Z.__setDigit(0,1073741823&ee),Z.__setDigit(1,(268435455&L)<<2|ee>>>30),Z.__setDigit(2,L>>>28),Z.__trim()}},{key:"DataViewSetBigInt64",value:function(d,p,E){var I=3<arguments.length&&arguments[3]!==void 0&&arguments[3];x.DataViewSetBigUint64(d,p,E,I)}},{key:"DataViewSetBigUint64",value:function(d,p,E){var I=3<arguments.length&&arguments[3]!==void 0&&arguments[3];E=x.asUintN(64,E);var k=0,P=0;if(0<E.length&&(P=E.__digit(0),1<E.length)){var F=E.__digit(1);P|=F<<30,k=F>>>2,2<E.length&&(k|=E.__digit(2)<<28)}var L=I?[4,0]:[0,4],ee=oe(L,2),Z=ee[0],fe=ee[1];d.setUint32(p+Z,k,I),d.setUint32(p+fe,P,I)}},{key:"__zero",value:function(){return new x(0,!1)}},{key:"__oneDigit",value:function(d,p){var E=new x(1,p);return E.__setDigit(0,d),E}},{key:"__decideRounding",value:function(d,p,E,I){if(0<p)return-1;var k;if(0>p)k=-p-1;else{if(E===0)return-1;E--,I=d.__digit(E),k=29}var P=1<<k;if((I&P)==0)return-1;if(P-=1,(I&P)!=0)return 1;for(;0<E;)if(E--,d.__digit(E)!==0)return 1;return 0}},{key:"__fromDouble",value:function(d){var p=0>d;x.__kBitConversionDouble[0]=d;var E,I=2047&x.__kBitConversionInts[x.__kBitConversionIntHigh]>>>20,k=I-1023,P=(0|k/30)+1,F=new x(P,p),L=1048576,ee=1048575&x.__kBitConversionInts[x.__kBitConversionIntHigh]|L,Z=x.__kBitConversionInts[x.__kBitConversionIntLow],fe=20,xe=k%30,de=0;if(xe<fe){var ue=fe-xe;de=ue+32,E=ee>>>ue,ee=ee<<32-ue|Z>>>ue,Z<<=32-ue}else if(xe===fe)de=32,E=ee,ee=Z,Z=0;else{var Ie=xe-fe;de=32-Ie,E=ee<<Ie|Z>>>32-Ie,ee=Z<<Ie,Z=0}F.__setDigit(P-1,E);for(var Pe=P-2;0<=Pe;Pe--)0<de?(de-=30,E=ee>>>2,ee=ee<<30|Z>>>2,Z<<=30):E=0,F.__setDigit(Pe,E);return F.__trim()}},{key:"__isWhitespace",value:function(d){return 13>=d&&9<=d||(159>=d?d==32:131071>=d?d==160||d==5760:196607>=d?(d&=131071,10>=d||d==40||d==41||d==47||d==95||d==4096):d==65279)}},{key:"__fromString",value:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,E=0,I=d.length,k=0;if(k===I)return x.__zero();for(var P=d.charCodeAt(k);x.__isWhitespace(P);){if(++k===I)return x.__zero();P=d.charCodeAt(k)}if(P===43){if(++k===I)return null;P=d.charCodeAt(k),E=1}else if(P===45){if(++k===I)return null;P=d.charCodeAt(k),E=-1}if(p===0){if(p=10,P===48){if(++k===I)return x.__zero();if(P=d.charCodeAt(k),P===88||P===120){if(p=16,++k===I)return null;P=d.charCodeAt(k)}else if(P===79||P===111){if(p=8,++k===I)return null;P=d.charCodeAt(k)}else if(P===66||P===98){if(p=2,++k===I)return null;P=d.charCodeAt(k)}}}else if(p===16&&P===48){if(++k===I)return x.__zero();if(P=d.charCodeAt(k),P===88||P===120){if(++k===I)return null;P=d.charCodeAt(k)}}if(E!==0&&p!==10)return null;for(;P===48;){if(++k===I)return x.__zero();P=d.charCodeAt(k)}var F=I-k,L=x.__kMaxBitsPerChar[p],ee=x.__kBitsPerCharTableMultiplier-1;if(F>1073741824/L)return null;var Z=L*F+ee>>>x.__kBitsPerCharTableShift,fe=0|(Z+29)/30,xe=new x(fe,!1),de=10>p?p:10,ue=10<p?p-10:0;if((p&p-1)==0){L>>=x.__kBitsPerCharTableShift;var Ie=[],Pe=[],Ne=!1;do{for(var Fe,He=0,Ve=0;;){if(Fe=void 0,P-48>>>0<de)Fe=P-48;else if((32|P)-97>>>0<ue)Fe=(32|P)-87;else{Ne=!0;break}if(Ve+=L,He=He<<L|Fe,++k===I){Ne=!0;break}if(P=d.charCodeAt(k),30<Ve+L)break}Ie.push(He),Pe.push(Ve)}while(!Ne);x.__fillFromParts(xe,Ie,Pe)}else{xe.__initializeDigits();var ct=!1,dn=0;do{for(var Ee,Fr=0,_i=1;;){if(Ee=void 0,P-48>>>0<de)Ee=P-48;else if((32|P)-97>>>0<ue)Ee=(32|P)-87;else{ct=!0;break}var vr=_i*p;if(1073741823<vr)break;if(_i=vr,Fr=Fr*p+Ee,dn++,++k===I){ct=!0;break}P=d.charCodeAt(k)}ee=30*x.__kBitsPerCharTableMultiplier-1;var qe=0|(L*dn+ee>>>x.__kBitsPerCharTableShift)/30;xe.__inplaceMultiplyAdd(_i,Fr,qe)}while(!ct)}if(k!==I){if(!x.__isWhitespace(P))return null;for(k++;k<I;k++)if(P=d.charCodeAt(k),!x.__isWhitespace(P))return null}return xe.sign=E===-1,xe.__trim()}},{key:"__fillFromParts",value:function(d,p,E){for(var I=0,k=0,P=0,F=p.length-1;0<=F;F--){var L=p[F],ee=E[F];k|=L<<P,P+=ee,P===30?(d.__setDigit(I++,k),P=0,k=0):30<P&&(d.__setDigit(I++,1073741823&k),P-=30,k=L>>>ee-P)}if(k!==0){if(I>=d.length)throw new Error("implementation bug");d.__setDigit(I++,k)}for(;I<d.length;I++)d.__setDigit(I,0)}},{key:"__toStringBasePowerOfTwo",value:function(d,p){var E=d.length,I=p-1;I=(85&I>>>1)+(85&I),I=(51&I>>>2)+(51&I),I=(15&I>>>4)+(15&I);var k=I,P=p-1,F=d.__digit(E-1),L=x.__clz30(F),ee=30*E-L,Z=0|(ee+k-1)/k;if(d.sign&&Z++,268435456<Z)throw new Error("string too long");for(var fe=Array(Z),xe=Z-1,de=0,ue=0,Ie=0;Ie<E-1;Ie++){var Pe=d.__digit(Ie),Ne=(de|Pe<<ue)&P;fe[xe--]=x.__kConversionChars[Ne];var Fe=k-ue;for(de=Pe>>>Fe,ue=30-Fe;ue>=k;)fe[xe--]=x.__kConversionChars[de&P],de>>>=k,ue-=k}var He=(de|F<<ue)&P;for(fe[xe--]=x.__kConversionChars[He],de=F>>>k-ue;de!==0;)fe[xe--]=x.__kConversionChars[de&P],de>>>=k;if(d.sign&&(fe[xe--]="-"),xe!==-1)throw new Error("implementation bug");return fe.join("")}},{key:"__toStringGeneric",value:function(d,p,E){var I=d.length;if(I===0)return"";if(I===1){var k=d.__unsignedDigit(0).toString(p);return E===!1&&d.sign&&(k="-"+k),k}var P=30*I-x.__clz30(d.__digit(I-1)),F=x.__kMaxBitsPerChar[p],L=F-1,ee=P*x.__kBitsPerCharTableMultiplier;ee+=L-1,ee=0|ee/L;var Z,fe,xe=ee+1>>1,de=x.exponentiate(x.__oneDigit(p,!1),x.__oneDigit(xe,!1)),ue=de.__unsignedDigit(0);if(de.length===1&&32767>=ue){Z=new x(d.length,!1),Z.__initializeDigits();for(var Ie,Pe=0,Ne=2*d.length-1;0<=Ne;Ne--)Ie=Pe<<15|d.__halfDigit(Ne),Z.__setHalfDigit(Ne,0|Ie/ue),Pe=0|Ie%ue;fe=Pe.toString(p)}else{var Fe=x.__absoluteDivLarge(d,de,!0,!0);Z=Fe.quotient;var He=Fe.remainder.__trim();fe=x.__toStringGeneric(He,p,!0)}Z.__trim();for(var Ve=x.__toStringGeneric(Z,p,!0);fe.length<xe;)fe="0"+fe;return E===!1&&d.sign&&(Ve="-"+Ve),Ve+fe}},{key:"__unequalSign",value:function(d){return d?-1:1}},{key:"__absoluteGreater",value:function(d){return d?-1:1}},{key:"__absoluteLess",value:function(d){return d?1:-1}},{key:"__compareToBigInt",value:function(d,p){var E=d.sign;if(E!==p.sign)return x.__unequalSign(E);var I=x.__absoluteCompare(d,p);return 0<I?x.__absoluteGreater(E):0>I?x.__absoluteLess(E):0}},{key:"__compareToNumber",value:function(d,p){if(x.__isOneDigitInt(p)){var E=d.sign,I=0>p;if(E!==I)return x.__unequalSign(E);if(d.length===0){if(I)throw new Error("implementation bug");return p===0?0:-1}if(1<d.length)return x.__absoluteGreater(E);var k=X(p),P=d.__unsignedDigit(0);return P>k?x.__absoluteGreater(E):P<k?x.__absoluteLess(E):0}return x.__compareToDouble(d,p)}},{key:"__compareToDouble",value:function(d,p){if(p!==p)return p;if(p===1/0)return-1;if(p===-1/0)return 1;var E=d.sign,I=0>p;if(E!==I)return x.__unequalSign(E);if(p===0)throw new Error("implementation bug: should be handled elsewhere");if(d.length===0)return-1;x.__kBitConversionDouble[0]=p;var k=2047&x.__kBitConversionInts[x.__kBitConversionIntHigh]>>>20;if(k==2047)throw new Error("implementation bug: handled elsewhere");var P=k-1023;if(0>P)return x.__absoluteGreater(E);var F=d.length,L=d.__digit(F-1),ee=x.__clz30(L),Z=30*F-ee,fe=P+1;if(Z<fe)return x.__absoluteLess(E);if(Z>fe)return x.__absoluteGreater(E);var xe=1048576,de=1048576|1048575&x.__kBitConversionInts[x.__kBitConversionIntHigh],ue=x.__kBitConversionInts[x.__kBitConversionIntLow],Ie=20,Pe=29-ee;if(Pe!==(0|(Z-1)%30))throw new Error("implementation bug");var Ne,Fe=0;if(Pe<Ie){var He=Ie-Pe;Fe=He+32,Ne=de>>>He,de=de<<32-He|ue>>>He,ue<<=32-He}else if(Pe===Ie)Fe=32,Ne=de,de=ue,ue=0;else{var Ve=Pe-Ie;Fe=32-Ve,Ne=de<<Ve|ue>>>32-Ve,de=ue<<Ve,ue=0}if(L>>>=0,Ne>>>=0,L>Ne)return x.__absoluteGreater(E);if(L<Ne)return x.__absoluteLess(E);for(var ct=F-2;0<=ct;ct--){0<Fe?(Fe-=30,Ne=de>>>2,de=de<<30|ue>>>2,ue<<=30):Ne=0;var dn=d.__unsignedDigit(ct);if(dn>Ne)return x.__absoluteGreater(E);if(dn<Ne)return x.__absoluteLess(E)}if(de!==0||ue!==0){if(Fe===0)throw new Error("implementation bug");return x.__absoluteLess(E)}return 0}},{key:"__equalToNumber",value:function(d,p){return x.__isOneDigitInt(p)?p===0?d.length===0:d.length===1&&d.sign===0>p&&d.__unsignedDigit(0)===X(p):x.__compareToDouble(d,p)===0}},{key:"__comparisonResultToBool",value:function(d,p){return p===0?0>d:p===1?0>=d:p===2?0<d:p===3?0<=d:void 0}},{key:"__compare",value:function(d,p,E){if(d=x.__toPrimitive(d),p=x.__toPrimitive(p),typeof d=="string"&&typeof p=="string")switch(E){case 0:return d<p;case 1:return d<=p;case 2:return d>p;case 3:return d>=p}if(x.__isBigInt(d)&&typeof p=="string")return p=x.__fromString(p),p!==null&&x.__comparisonResultToBool(x.__compareToBigInt(d,p),E);if(typeof d=="string"&&x.__isBigInt(p))return d=x.__fromString(d),d!==null&&x.__comparisonResultToBool(x.__compareToBigInt(d,p),E);if(d=x.__toNumeric(d),p=x.__toNumeric(p),x.__isBigInt(d)){if(x.__isBigInt(p))return x.__comparisonResultToBool(x.__compareToBigInt(d,p),E);if(typeof p!="number")throw new Error("implementation bug");return x.__comparisonResultToBool(x.__compareToNumber(d,p),E)}if(typeof d!="number")throw new Error("implementation bug");if(x.__isBigInt(p))return x.__comparisonResultToBool(x.__compareToNumber(p,d),2^E);if(typeof p!="number")throw new Error("implementation bug");return E===0?d<p:E===1?d<=p:E===2?d>p:E===3?d>=p:void 0}},{key:"__absoluteAdd",value:function(d,p,E){if(d.length<p.length)return x.__absoluteAdd(p,d,E);if(d.length===0)return d;if(p.length===0)return d.sign===E?d:x.unaryMinus(d);var I=d.length;(d.__clzmsd()===0||p.length===d.length&&p.__clzmsd()===0)&&I++;for(var k,P=new x(I,E),F=0,L=0;L<p.length;L++)k=d.__digit(L)+p.__digit(L)+F,F=k>>>30,P.__setDigit(L,1073741823&k);for(;L<d.length;L++){var ee=d.__digit(L)+F;F=ee>>>30,P.__setDigit(L,1073741823&ee)}return L<P.length&&P.__setDigit(L,F),P.__trim()}},{key:"__absoluteSub",value:function(d,p,E){if(d.length===0)return d;if(p.length===0)return d.sign===E?d:x.unaryMinus(d);for(var I,k=new x(d.length,E),P=0,F=0;F<p.length;F++)I=d.__digit(F)-p.__digit(F)-P,P=1&I>>>30,k.__setDigit(F,1073741823&I);for(;F<d.length;F++){var L=d.__digit(F)-P;P=1&L>>>30,k.__setDigit(F,1073741823&L)}return k.__trim()}},{key:"__absoluteAddOne",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=d.length;E===null?E=new x(I,p):E.sign=p;for(var k,P=1,F=0;F<I;F++)k=d.__digit(F)+P,P=k>>>30,E.__setDigit(F,1073741823&k);return P!==0&&E.__setDigitGrow(I,1),E}},{key:"__absoluteSubOne",value:function(d,p){var E=d.length;p=p||E;for(var I,k=new x(p,!1),P=1,F=0;F<E;F++)I=d.__digit(F)-P,P=1&I>>>30,k.__setDigit(F,1073741823&I);if(P!==0)throw new Error("implementation bug");for(var L=E;L<p;L++)k.__setDigit(L,0);return k}},{key:"__absoluteAnd",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=d.length,k=p.length,P=k;if(I<k){P=I;var F=d,L=I;d=p,I=k,p=F,k=L}var ee=P;E===null?E=new x(ee,!1):ee=E.length;for(var Z=0;Z<P;Z++)E.__setDigit(Z,d.__digit(Z)&p.__digit(Z));for(;Z<ee;Z++)E.__setDigit(Z,0);return E}},{key:"__absoluteAndNot",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=d.length,k=p.length,P=k;I<k&&(P=I);var F=I;E===null?E=new x(F,!1):F=E.length;for(var L=0;L<P;L++)E.__setDigit(L,d.__digit(L)&~p.__digit(L));for(;L<I;L++)E.__setDigit(L,d.__digit(L));for(;L<F;L++)E.__setDigit(L,0);return E}},{key:"__absoluteOr",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=d.length,k=p.length,P=k;if(I<k){P=I;var F=d,L=I;d=p,I=k,p=F,k=L}var ee=I;E===null?E=new x(ee,!1):ee=E.length;for(var Z=0;Z<P;Z++)E.__setDigit(Z,d.__digit(Z)|p.__digit(Z));for(;Z<I;Z++)E.__setDigit(Z,d.__digit(Z));for(;Z<ee;Z++)E.__setDigit(Z,0);return E}},{key:"__absoluteXor",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=d.length,k=p.length,P=k;if(I<k){P=I;var F=d,L=I;d=p,I=k,p=F,k=L}var ee=I;E===null?E=new x(ee,!1):ee=E.length;for(var Z=0;Z<P;Z++)E.__setDigit(Z,d.__digit(Z)^p.__digit(Z));for(;Z<I;Z++)E.__setDigit(Z,d.__digit(Z));for(;Z<ee;Z++)E.__setDigit(Z,0);return E}},{key:"__absoluteCompare",value:function(d,p){var E=d.length-p.length;if(E!=0)return E;for(var I=d.length-1;0<=I&&d.__digit(I)===p.__digit(I);)I--;return 0>I?0:d.__unsignedDigit(I)>p.__unsignedDigit(I)?1:-1}},{key:"__multiplyAccumulate",value:function(d,p,E,I){if(p!==0){for(var k=32767&p,P=p>>>15,F=0,L=0,ee=0;ee<d.length;ee++,I++){var Z=E.__digit(I),fe=d.__digit(ee),xe=32767&fe,de=fe>>>15,ue=x.__imul(xe,k),Ie=x.__imul(xe,P),Pe=x.__imul(de,k),Ne=x.__imul(de,P);Z+=L+ue+F,F=Z>>>30,Z&=1073741823,Z+=((32767&Ie)<<15)+((32767&Pe)<<15),F+=Z>>>30,L=Ne+(Ie>>>15)+(Pe>>>15),E.__setDigit(I,1073741823&Z)}for(;F!==0||L!==0;I++){var Fe=E.__digit(I);Fe+=F+L,L=0,F=Fe>>>30,E.__setDigit(I,1073741823&Fe)}}}},{key:"__internalMultiplyAdd",value:function(d,p,E,I,k){for(var P=E,F=0,L=0;L<I;L++){var ee=d.__digit(L),Z=x.__imul(32767&ee,p),fe=x.__imul(ee>>>15,p),xe=Z+((32767&fe)<<15)+F+P;P=xe>>>30,F=fe>>>15,k.__setDigit(L,1073741823&xe)}if(k.length>I)for(k.__setDigit(I++,P+F);I<k.length;)k.__setDigit(I++,0);else if(P+F!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(d,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;E===null&&(E=new x(d.length,!1));for(var I=0,k=2*d.length-1;0<=k;k-=2){var P=(I<<15|d.__halfDigit(k))>>>0,F=0|P/p;I=0|P%p,P=(I<<15|d.__halfDigit(k-1))>>>0;var L=0|P/p;I=0|P%p,E.__setDigit(k>>>1,F<<15|L)}return E}},{key:"__absoluteModSmall",value:function(d,p){for(var E,I=0,k=2*d.length-1;0<=k;k--)E=(I<<15|d.__halfDigit(k))>>>0,I=0|E%p;return I}},{key:"__absoluteDivLarge",value:function(d,p,E,I){var k=p.__halfDigitLength(),P=p.length,F=d.__halfDigitLength()-k,L=null;E&&(L=new x(F+2>>>1,!1),L.__initializeDigits());var ee=new x(k+2>>>1,!1);ee.__initializeDigits();var Z=x.__clz15(p.__halfDigit(k-1));0<Z&&(p=x.__specialLeftShift(p,Z,0));for(var fe=x.__specialLeftShift(d,Z,1),xe=p.__halfDigit(k-1),de=0,ue=F;0<=ue;ue--){var Ie=32767,Pe=fe.__halfDigit(ue+k);if(Pe!==xe){var Ne=(Pe<<15|fe.__halfDigit(ue+k-1))>>>0;Ie=0|Ne/xe;for(var Fe=0|Ne%xe,He=p.__halfDigit(k-2),Ve=fe.__halfDigit(ue+k-2);x.__imul(Ie,He)>>>0>(Fe<<16|Ve)>>>0&&(Ie--,Fe+=xe,!(32767<Fe)););}x.__internalMultiplyAdd(p,Ie,0,P,ee);var ct=fe.__inplaceSub(ee,ue,k+1);ct!==0&&(ct=fe.__inplaceAdd(p,ue,k),fe.__setHalfDigit(ue+k,32767&fe.__halfDigit(ue+k)+ct),Ie--),E&&(1&ue?de=Ie<<15:L.__setDigit(ue>>>1,de|Ie))}if(I)return fe.__inplaceRightShift(Z),E?{quotient:L,remainder:fe}:fe;if(E)return L;throw new Error("unreachable")}},{key:"__clz15",value:function(d){return x.__clz30(d)-15}},{key:"__specialLeftShift",value:function(d,p,E){var I=d.length,k=I+E,P=new x(k,!1);if(p===0){for(var F=0;F<I;F++)P.__setDigit(F,d.__digit(F));return 0<E&&P.__setDigit(I,0),P}for(var L,ee=0,Z=0;Z<I;Z++)L=d.__digit(Z),P.__setDigit(Z,1073741823&L<<p|ee),ee=L>>>30-p;return 0<E&&P.__setDigit(I,ee),P}},{key:"__leftShiftByAbsolute",value:function(d,p){var E=x.__toShiftAmount(p);if(0>E)throw new RangeError("BigInt too big");var I=0|E/30,k=E%30,P=d.length,F=k!==0&&d.__digit(P-1)>>>30-k!=0,L=P+I+(F?1:0),ee=new x(L,d.sign);if(k===0){for(var Z=0;Z<I;Z++)ee.__setDigit(Z,0);for(;Z<L;Z++)ee.__setDigit(Z,d.__digit(Z-I))}else{for(var fe=0,xe=0;xe<I;xe++)ee.__setDigit(xe,0);for(var de,ue=0;ue<P;ue++)de=d.__digit(ue),ee.__setDigit(ue+I,1073741823&de<<k|fe),fe=de>>>30-k;if(F)ee.__setDigit(P+I,fe);else if(fe!==0)throw new Error("implementation bug")}return ee.__trim()}},{key:"__rightShiftByAbsolute",value:function(d,p){var E=d.length,I=d.sign,k=x.__toShiftAmount(p);if(0>k)return x.__rightShiftByMaximum(I);var P=0|k/30,F=k%30,L=E-P;if(0>=L)return x.__rightShiftByMaximum(I);var ee=!1;if(I){var Z=(1<<F)-1;if((d.__digit(P)&Z)!=0)ee=!0;else for(var fe=0;fe<P;fe++)if(d.__digit(fe)!==0){ee=!0;break}}if(ee&&F===0){var xe=d.__digit(E-1),de=~xe==0;de&&L++}var ue=new x(L,I);if(F===0){ue.__setDigit(L-1,0);for(var Ie=P;Ie<E;Ie++)ue.__setDigit(Ie-P,d.__digit(Ie))}else{for(var Pe,Ne=d.__digit(P)>>>F,Fe=E-P-1,He=0;He<Fe;He++)Pe=d.__digit(He+P+1),ue.__setDigit(He,1073741823&Pe<<30-F|Ne),Ne=Pe>>>F;ue.__setDigit(Fe,Ne)}return ee&&(ue=x.__absoluteAddOne(ue,!0,ue)),ue.__trim()}},{key:"__rightShiftByMaximum",value:function(d){return d?x.__oneDigit(1,!0):x.__zero()}},{key:"__toShiftAmount",value:function(d){if(1<d.length)return-1;var p=d.__unsignedDigit(0);return p>x.__kMaxLengthBits?-1:p}},{key:"__toPrimitive",value:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(pe(d)!=="object"||d.constructor===x)return d;if(typeof Symbol<"u"&&pe(Symbol.toPrimitive)==="symbol"&&d[Symbol.toPrimitive]){var E=d[Symbol.toPrimitive](p);if(pe(E)!=="object")return E;throw new TypeError("Cannot convert object to primitive value")}var I=d.valueOf;if(I){var k=I.call(d);if(pe(k)!=="object")return k}var P=d.toString;if(P){var F=P.call(d);if(pe(F)!=="object")return F}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(d){return x.__isBigInt(d)?d:+d}},{key:"__isBigInt",value:function(d){return pe(d)==="object"&&d!==null&&d.constructor===x}},{key:"__truncateToNBits",value:function(d,p){for(var E=0|(d+29)/30,I=new x(E,p.sign),k=E-1,P=0;P<k;P++)I.__setDigit(P,p.__digit(P));var F=p.__digit(k);if(d%30!=0){var L=32-d%30;F=F<<L>>>L}return I.__setDigit(k,F),I.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(d,p,E){for(var I=Math.min,k,P=0|(d+29)/30,F=new x(P,E),L=0,ee=P-1,Z=0,fe=I(ee,p.length);L<fe;L++)k=0-p.__digit(L)-Z,Z=1&k>>>30,F.__setDigit(L,1073741823&k);for(;L<ee;L++)F.__setDigit(L,0|1073741823&-Z);var xe,de=ee<p.length?p.__digit(ee):0,ue=d%30;if(ue===0)xe=0-de-Z,xe&=1073741823;else{var Ie=32-ue;de=de<<Ie>>>Ie;var Pe=1<<32-Ie;xe=Pe-de-Z,xe&=Pe-1}return F.__setDigit(ee,xe),F.__trim()}},{key:"__digitPow",value:function(d,p){for(var E=1;0<p;)1&p&&(E*=d),p>>>=1,d*=d;return E}},{key:"__detectBigEndian",value:function(){return x.__kBitConversionDouble[0]=-0,x.__kBitConversionInts[0]!==0}},{key:"__isOneDigitInt",value:function(d){return(1073741823&d)===d}}])})(De(Array));return be.__kMaxLength=33554432,be.__kMaxLengthBits=be.__kMaxLength<<5,be.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],be.__kBitsPerCharTableShift=5,be.__kBitsPerCharTableMultiplier=1<<be.__kBitsPerCharTableShift,be.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],be.__kBitConversionBuffer=new ArrayBuffer(8),be.__kBitConversionDouble=new Float64Array(be.__kBitConversionBuffer),be.__kBitConversionInts=new Int32Array(be.__kBitConversionBuffer),be.__kBitConversionIntHigh=be.__detectBigEndian()?0:1,be.__kBitConversionIntLow=be.__detectBigEndian()?1:0,be.__clz30=e?function(q){return e(q)-2}:function(q){var X=Math.LN2,Q=Math.log;return q===0?30:0|29-(0|Q(q>>>0)/X)},be.__imul=t||function(q,X){return 0|q*X},be})});var Pf=Ps((Qu,Xu)=>{(function(t,e){typeof Qu=="object"&&typeof Xu<"u"?Xu.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=e())})(Qu,function(){"use strict";var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},t(r,i)};function e(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function u(){this.constructor=r}r.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}var n=function(){return n=Object.assign||function(i){for(var u,f=1,h=arguments.length;f<h;f++){u=arguments[f];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(i[v]=u[v])}return i},n.apply(this,arguments)};function o(r,i,u){if(u||arguments.length===2)for(var f=0,h=i.length,v;f<h;f++)(v||!(f in i))&&(v||(v=Array.prototype.slice.call(i,0,f)),v[f]=i[f]);return r.concat(v||Array.prototype.slice.call(i))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s=Object.keys,c=Array.isArray;typeof Promise<"u"&&!a.Promise&&(a.Promise=Promise);function l(r,i){return typeof i!="object"||s(i).forEach(function(u){r[u]=i[u]}),r}var y=Object.getPrototypeOf,m={}.hasOwnProperty;function g(r,i){return m.call(r,i)}function b(r,i){typeof i=="function"&&(i=i(y(r))),(typeof Reflect>"u"?s:Reflect.ownKeys)(i).forEach(function(u){T(r,u,i[u])})}var D=Object.defineProperty;function T(r,i,u,f){D(r,i,l(u&&g(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function O(r){return{from:function(i){return r.prototype=Object.create(i.prototype),T(r.prototype,"constructor",r),{extend:b.bind(null,r.prototype)}}}}var A=Object.getOwnPropertyDescriptor;function j(r,i){var u=A(r,i),f;return u||(f=y(r))&&j(f,i)}var H=[].slice;function J(r,i,u){return H.call(r,i,u)}function oe(r,i){return i(r)}function ie(r){if(!r)throw new Error("Assertion Failed")}function le(r){a.setImmediate?setImmediate(r):setTimeout(r,0)}function pe(r,i){return r.reduce(function(u,f,h){var v=i(f,h);return v&&(u[v[0]]=v[1]),u},{})}function we(r,i){if(typeof i=="string"&&g(r,i))return r[i];if(!i)return r;if(typeof i!="string"){for(var u=[],f=0,h=i.length;f<h;++f){var v=we(r,i[f]);u.push(v)}return u}var w=i.indexOf(".");if(w!==-1){var C=r[i.substr(0,w)];return C==null?void 0:we(C,i.substr(w+1))}}function De(r,i,u){if(!(!r||i===void 0)&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof i!="string"&&"length"in i){ie(typeof u!="string"&&"length"in u);for(var f=0,h=i.length;f<h;++f)De(r,i[f],u[f])}else{var v=i.indexOf(".");if(v!==-1){var w=i.substr(0,v),C=i.substr(v+1);if(C==="")u===void 0?c(r)&&!isNaN(parseInt(w))?r.splice(w,1):delete r[w]:r[w]=u;else{var S=r[w];(!S||!g(r,w))&&(S=r[w]={}),De(S,C,u)}}else u===void 0?c(r)&&!isNaN(parseInt(i))?r.splice(i,1):delete r[i]:r[i]=u}}function be(r,i){typeof i=="string"?De(r,i,void 0):"length"in i&&[].map.call(i,function(u){De(r,u,void 0)})}function q(r){var i={};for(var u in r)g(r,u)&&(i[u]=r[u]);return i}var X=[].concat;function Q(r){return X.apply([],r)}var ye="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Q([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(i){return i+r+"Array"})}))).filter(function(r){return a[r]}),x=new Set(ye.map(function(r){return a[r]}));function Y(r){var i={};for(var u in r)if(g(r,u)){var f=r[u];i[u]=!f||typeof f!="object"||x.has(f.constructor)?f:Y(f)}return i}function d(r){for(var i in r)if(g(r,i))return!1;return!0}var p=null;function E(r){p=new WeakMap;var i=I(r);return p=null,i}function I(r){if(!r||typeof r!="object")return r;var i=p.get(r);if(i)return i;if(c(r)){i=[],p.set(r,i);for(var u=0,f=r.length;u<f;++u)i.push(I(r[u]))}else if(x.has(r.constructor))i=r;else{var h=y(r);i=h===Object.prototype?{}:Object.create(h),p.set(r,i);for(var v in r)g(r,v)&&(i[v]=I(r[v]))}return i}var k={}.toString;function P(r){return k.call(r).slice(8,-1)}var F=typeof Symbol<"u"?Symbol.iterator:"@@iterator",L=typeof F=="symbol"?function(r){var i;return r!=null&&(i=r[F])&&i.apply(r)}:function(){return null};function ee(r,i){var u=r.indexOf(i);return u>=0&&r.splice(u,1),u>=0}var Z={};function fe(r){var i,u,f,h;if(arguments.length===1){if(c(r))return r.slice();if(this===Z&&typeof r=="string")return[r];if(h=L(r)){for(u=[];f=h.next(),!f.done;)u.push(f.value);return u}if(r==null)return[r];if(i=r.length,typeof i=="number"){for(u=new Array(i);i--;)u[i]=r[i];return u}return[r]}for(i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return u}var xe=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},de=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ie=de.concat(ue),Pe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ne(r,i){this.name=r,this.message=i}O(Ne).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Fe(r,i){return r+". Errors: "+Object.keys(i).map(function(u){return i[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function He(r,i,u,f){this.failures=i,this.failedKeys=f,this.successCount=u,this.message=Fe(r,i)}O(He).from(Ne);function Ve(r,i){this.name="BulkError",this.failures=Object.keys(i).map(function(u){return i[u]}),this.failuresByPos=i,this.message=Fe(r,this.failures)}O(Ve).from(Ne);var ct=Ie.reduce(function(r,i){return r[i]=i+"Error",r},{}),dn=Ne,Ee=Ie.reduce(function(r,i){var u=i+"Error";function f(h,v){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(v?`
 `+v:""),this.inner=v||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Pe[i]||u,this.inner=null)}return O(f).from(dn),r[i]=f,r},{});Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError;var Fr=ue.reduce(function(r,i){return r[i+"Error"]=Ee[i],r},{});function _i(r,i){if(!r||r instanceof Ne||r instanceof TypeError||r instanceof SyntaxError||!r.name||!Fr[r.name])return r;var u=new Fr[r.name](i||r.message,r);return"stack"in r&&T(u,"stack",{get:function(){return this.inner.stack}}),u}var vr=Ie.reduce(function(r,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(r[i+"Error"]=Ee[i]),r},{});vr.ModifyError=He,vr.DexieError=Ne,vr.BulkError=Ve;function qe(){}function bi(r){return r}function wd(r,i){return r==null||r===bi?i:function(u){return i(r(u))}}function _r(r,i){return function(){r.apply(this,arguments),i.apply(this,arguments)}}function Dd(r,i){return r===qe?i:function(){var u=r.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var v=i.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?_r(f,this.onsuccess):f),h&&(this.onerror=this.onerror?_r(h,this.onerror):h),v!==void 0?v:u}}function xd(r,i){return r===qe?i:function(){r.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?_r(u,this.onsuccess):u),f&&(this.onerror=this.onerror?_r(f,this.onerror):f)}}function Ed(r,i){return r===qe?i:function(u){var f=r.apply(this,arguments);l(u,f);var h=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var w=i.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?_r(h,this.onsuccess):h),v&&(this.onerror=this.onerror?_r(v,this.onerror):v),f===void 0?w===void 0?void 0:w:l(f,w)}}function Cd(r,i){return r===qe?i:function(){return i.apply(this,arguments)===!1?!1:r.apply(this,arguments)}}function Ga(r,i){return r===qe?i:function(){var u=r.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,v=new Array(h);h--;)v[h]=arguments[h];return u.then(function(){return i.apply(f,v)})}return i.apply(this,arguments)}}var vn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ec(r,i){vn=r}var wi={},tc=100,Qa=typeof Promise>"u"?[]:(function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,y(r),r];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,y(i),r]})(),nc=Qa[0],rc=Qa[1],Sd=Qa[2],Td=rc&&rc.then,br=nc&&nc.constructor,Xa=!!Sd;function kd(){queueMicrotask(Md)}var Di=function(r,i){xi.push([r,i]),No&&(kd(),No=!1)},Va=!0,No=!0,wr=[],jo=[],Ja=bi,Gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qe,pgp:!1,env:{},finalize:qe},Ce=Gn,xi=[],Dr=0,Bo=[];function ge(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=Ce;if(typeof r!="function"){if(r!==wi)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ts(this,this._value);return}this._state=null,this._value=null,++i.ref,oc(this,r)}var es={get:function(){var r=Ce,i=Fo;function u(f,h){var v=this,w=!r.global&&(r!==Ce||i!==Fo),C=w&&!Xn(),S=new ge(function(M,N){ns(v,new ic(uc(f,r,w,C),uc(h,r,w,C),M,N,r))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=wi,u},set:function(r){T(this,"then",r&&r.prototype===wi?es:{get:function(){return r},set:es.set})}};b(ge.prototype,{then:es,_then:function(r,i){ns(this,new ic(null,null,r,i,Ce))},catch:function(r){if(arguments.length===1)return this.then(null,r);var i=arguments[0],u=arguments[1];return typeof i=="function"?this.then(null,function(f){return f instanceof i?u(f):Lo(f)}):this.then(null,function(f){return f&&f.name===i?u(f):Lo(f)})},finally:function(r){return this.then(function(i){return ge.resolve(r()).then(function(){return i})},function(i){return ge.resolve(r()).then(function(){return Lo(i)})})},timeout:function(r,i){var u=this;return r<1/0?new ge(function(f,h){var v=setTimeout(function(){return h(new Ee.Timeout(i))},r);u.then(f,h).finally(clearTimeout.bind(null,v))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(ge.prototype,Symbol.toStringTag,"Dexie.Promise"),Gn.env=sc();function ic(r,i,u,f,h){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof i=="function"?i:null,this.resolve=u,this.reject=f,this.psd=h}b(ge,{all:function(){var r=fe.apply(null,arguments).map(Ko);return new ge(function(i,u){r.length===0&&i([]);var f=r.length;r.forEach(function(h,v){return ge.resolve(h).then(function(w){r[v]=w,--f||i(r)},u)})})},resolve:function(r){if(r instanceof ge)return r;if(r&&typeof r.then=="function")return new ge(function(u,f){r.then(u,f)});var i=new ge(wi,!0,r);return i},reject:Lo,race:function(){var r=fe.apply(null,arguments).map(Ko);return new ge(function(i,u){r.map(function(f){return ge.resolve(f).then(i,u)})})},PSD:{get:function(){return Ce},set:function(r){return Ce=r}},totalEchoes:{get:function(){return Fo}},newPSD:Qn,usePSD:xr,scheduler:{get:function(){return Di},set:function(r){Di=r}},rejectionMapper:{get:function(){return Ja},set:function(r){Ja=r}},follow:function(r,i){return new ge(function(u,f){return Qn(function(h,v){var w=Ce;w.unhandleds=[],w.onunhandled=v,w.finalize=_r(function(){var C=this;Od(function(){C.unhandleds.length===0?h():v(C.unhandleds[0])})},w.finalize),r()},i,u,f)})}}),br&&(br.allSettled&&T(ge,"allSettled",function(){var r=fe.apply(null,arguments).map(Ko);return new ge(function(i){r.length===0&&i([]);var u=r.length,f=new Array(u);r.forEach(function(h,v){return ge.resolve(h).then(function(w){return f[v]={status:"fulfilled",value:w}},function(w){return f[v]={status:"rejected",reason:w}}).then(function(){return--u||i(f)})})})}),br.any&&typeof AggregateError<"u"&&T(ge,"any",function(){var r=fe.apply(null,arguments).map(Ko);return new ge(function(i,u){r.length===0&&u(new AggregateError([]));var f=r.length,h=new Array(f);r.forEach(function(v,w){return ge.resolve(v).then(function(C){return i(C)},function(C){h[w]=C,--f||u(new AggregateError(h))})})})}),br.withResolvers&&(ge.withResolvers=br.withResolvers));function oc(r,i){try{i(function(u){if(r._state===null){if(u===r)throw new TypeError("A promise cannot be resolved with itself.");var f=r._lib&&Kr();u&&typeof u.then=="function"?oc(r,function(h,v){u instanceof ge?u._then(h,v):u.then(h,v)}):(r._state=!0,r._value=u,ac(r)),f&&Ur()}},ts.bind(null,r))}catch(u){ts(r,u)}}function ts(r,i){if(jo.push(i),r._state===null){var u=r._lib&&Kr();i=Ja(i),r._state=!1,r._value=i,Rd(r),ac(r),u&&Ur()}}function ac(r){var i=r._listeners;r._listeners=[];for(var u=0,f=i.length;u<f;++u)ns(r,i[u]);var h=r._PSD;--h.ref||h.finalize(),Dr===0&&(++Dr,Di(function(){--Dr===0&&rs()},[]))}function ns(r,i){if(r._state===null){r._listeners.push(i);return}var u=r._state?i.onFulfilled:i.onRejected;if(u===null)return(r._state?i.resolve:i.reject)(r._value);++i.psd.ref,++Dr,Di(Id,[u,r,i])}function Id(r,i,u){try{var f,h=i._value;!i._state&&jo.length&&(jo=[]),f=vn&&i._consoleTask?i._consoleTask.run(function(){return r(h)}):r(h),!i._state&&jo.indexOf(h)===-1&&Pd(i),u.resolve(f)}catch(v){u.reject(v)}finally{--Dr===0&&rs(),--u.psd.ref||u.psd.finalize()}}function Md(){xr(Gn,function(){Kr()&&Ur()})}function Kr(){var r=Va;return Va=!1,No=!1,r}function Ur(){var r,i,u;do for(;xi.length>0;)for(r=xi,xi=[],u=r.length,i=0;i<u;++i){var f=r[i];f[0].apply(null,f[1])}while(xi.length>0);Va=!0,No=!0}function rs(){var r=wr;wr=[],r.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var i=Bo.slice(0),u=i.length;u;)i[--u]()}function Od(r){function i(){r(),Bo.splice(Bo.indexOf(i),1)}Bo.push(i),++Dr,Di(function(){--Dr===0&&rs()},[])}function Rd(r){wr.some(function(i){return i._value===r._value})||wr.push(r)}function Pd(r){for(var i=wr.length;i;)if(wr[--i]._value===r._value){wr.splice(i,1);return}}function Lo(r){return new ge(wi,!1,r)}function Je(r,i){var u=Ce;return function(){var f=Kr(),h=Ce;try{return Vn(u,!0),r.apply(this,arguments)}catch(v){i&&i(v)}finally{Vn(h,!1),f&&Ur()}}}var lt={awaits:0,echoes:0,id:0},Ad=0,Yo=[],zo=0,Fo=0,$d=0;function Qn(r,i,u,f){var h=Ce,v=Object.create(h);v.parent=h,v.ref=0,v.global=!1,v.id=++$d,Gn.env,v.env=Xa?{Promise:ge,PromiseProp:{value:ge,configurable:!0,writable:!0},all:ge.all,race:ge.race,allSettled:ge.allSettled,any:ge.any,resolve:ge.resolve,reject:ge.reject}:{},i&&l(v,i),++h.ref,v.finalize=function(){--this.parent.ref||this.parent.finalize()};var w=xr(v,r,u,f);return v.ref===0&&v.finalize(),w}function Zr(){return lt.id||(lt.id=++Ad),++lt.awaits,lt.echoes+=tc,lt.id}function Xn(){return lt.awaits?(--lt.awaits===0&&(lt.id=0),lt.echoes=lt.awaits*tc,!0):!1}(""+Td).indexOf("[native code]")===-1&&(Zr=Xn=qe);function Ko(r){return lt.echoes&&r&&r.constructor===br?(Zr(),r.then(function(i){return Xn(),i},function(i){return Xn(),at(i)})):r}function Nd(r){++Fo,(!lt.echoes||--lt.echoes===0)&&(lt.echoes=lt.awaits=lt.id=0),Yo.push(Ce),Vn(r,!0)}function jd(){var r=Yo[Yo.length-1];Yo.pop(),Vn(r,!1)}function Vn(r,i){var u=Ce;if((i?lt.echoes&&(!zo++||r!==Ce):zo&&(!--zo||r!==Ce))&&queueMicrotask(i?Nd.bind(null,r):jd),r!==Ce&&(Ce=r,u===Gn&&(Gn.env=sc()),Xa)){var f=Gn.env.Promise,h=r.env;(u.global||r.global)&&(Object.defineProperty(a,"Promise",h.PromiseProp),f.all=h.all,f.race=h.race,f.resolve=h.resolve,f.reject=h.reject,h.allSettled&&(f.allSettled=h.allSettled),h.any&&(f.any=h.any))}}function sc(){var r=a.Promise;return Xa?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function xr(r,i,u,f,h){var v=Ce;try{return Vn(r,!0),i(u,f,h)}finally{Vn(v,!1)}}function uc(r,i,u,f){return typeof r!="function"?r:function(){var h=Ce;u&&Zr(),Vn(i,!0);try{return r.apply(this,arguments)}finally{Vn(h,!1),f&&queueMicrotask(Xn)}}}function is(r){Promise===br&&lt.echoes===0?zo===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}var at=ge.reject;function os(r,i,u,f){if(!r.idbdb||!r._state.openComplete&&!Ce.letThrough&&!r._vip){if(r._state.openComplete)return at(new Ee.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return at(new Ee.DatabaseClosed);r.open().catch(qe)}return r._state.dbReadyPromise.then(function(){return os(r,i,u,f)})}else{var h=r._createTransaction(i,u,r._dbSchema);try{h.create(),r._state.PR1398_maxLoop=3}catch(v){return v.name===ct.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),r.close({disableAutoOpen:!1}),r.open().then(function(){return os(r,i,u,f)})):at(v)}return h._promise(i,function(v,w){return Qn(function(){return Ce.trans=h,f(v,w,h)})}).then(function(v){if(i==="readwrite")try{h.idbtrans.commit()}catch{}return i==="readonly"?v:h._completion.then(function(){return v})})}}var cc="4.2.1",Er="\uFFFF",as=-1/0,Rn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lc="String expected.",Wr=[],Uo="__dbnames",ss="readonly",us="readwrite";function Cr(r,i){return r?i?function(){return r.apply(this,arguments)&&i.apply(this,arguments)}:r:i}var fc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zo(r){return typeof r=="string"&&!/\./.test(r)?function(i){return i[r]===void 0&&r in i&&(i=E(i),delete i[r]),i}:function(i){return i}}function dc(){throw Ee.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(r,i){try{var u=hc(r),f=hc(i);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return r>i?1:r<i?-1:0;case"binary":return Ld(mc(r),mc(i));case"Array":return Bd(r,i)}}catch{}return NaN}function Bd(r,i){for(var u=r.length,f=i.length,h=u<f?u:f,v=0;v<h;++v){var w=ze(r[v],i[v]);if(w!==0)return w}return u===f?0:u<f?-1:1}function Ld(r,i){for(var u=r.length,f=i.length,h=u<f?u:f,v=0;v<h;++v)if(r[v]!==i[v])return r[v]<i[v]?-1:1;return u===f?0:u<f?-1:1}function hc(r){var i=typeof r;if(i!=="object")return i;if(ArrayBuffer.isView(r))return"binary";var u=P(r);return u==="ArrayBuffer"?"binary":u}function mc(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}function Wo(r,i,u){var f=r.schema.yProps;return f?(i&&u.numFailures>0&&(i=i.filter(function(h,v){return!u.failures[v]})),Promise.all(f.map(function(h){var v=h.updatesTable;return i?r.db.table(v).where("k").anyOf(i).delete():r.db.table(v).clear()})).then(function(){return u})):u}var Ei=(function(){function r(i){this["@@propmod"]=i}return r.prototype.execute=function(i){var u,f=this["@@propmod"];if(f.add!==void 0){var h=f.add;if(c(h))return o(o([],c(i)?i:[],!0),h,!0).sort();if(typeof h=="number")return(Number(i)||0)+h;if(typeof h=="bigint")try{return BigInt(i)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(f.remove!==void 0){var v=f.remove;if(c(v))return c(i)?i.filter(function(C){return!v.includes(C)}).sort():[];if(typeof v=="number")return Number(i)-v;if(typeof v=="bigint")try{return BigInt(i)-v}catch{return BigInt(0)-v}throw new TypeError("Invalid subtrahend ".concat(v))}var w=(u=f.replacePrefix)===null||u===void 0?void 0:u[0];return w&&typeof i=="string"&&i.startsWith(w)?f.replacePrefix[1]+i.substring(w.length):i},r})();function pc(r,i){for(var u=s(i),f=u.length,h=!1,v=0;v<f;++v){var w=u[v],C=i[w],S=we(r,w);C instanceof Ei?(De(r,w,C.execute(S)),h=!0):S!==C&&(De(r,w,C),h=!0)}return h}var yc=(function(){function r(){}return r.prototype._trans=function(i,u,f){var h=this._tx||Ce.trans,v=this.name,w=vn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function C(N,R,W){if(!W.schema[v])throw new Ee.NotFound("Table "+v+" not part of transaction");return u(W.idbtrans,W)}var S=Kr();try{var M=h&&h.db._novip===this.db._novip?h===Ce.trans?h._promise(i,C,f):Qn(function(){return h._promise(i,C,f)},{trans:h,transless:Ce.transless||Ce}):os(this.db,i,[this.name],C);return w&&(M._consoleTask=w,M=M.catch(function(N){return console.trace(N),at(N)})),M}finally{S&&Ur()}},r.prototype.get=function(i,u){var f=this;return i&&i.constructor===Object?this.where(i).first(u):i==null?at(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return f.core.get({trans:h,key:i}).then(function(v){return f.hook.reading.fire(v)})}).then(u)},r.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(c(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var u=s(i);if(u.length===1)return this.where(u[0]).equals(i[u[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&u.every(function(W){return N.keyPath.indexOf(W)>=0})){for(var R=0;R<u.length;++R)if(u.indexOf(N.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(N,R){return N.keyPath.length-R.keyPath.length})[0];if(f&&this.db._maxKey!==Er){var h=f.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(N){return i[N]}))}!f&&vn&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var v=this.schema.idxByName;function w(N,R){return ze(N,R)===0}var C=u.reduce(function(N,R){var W=N[0],ae=N[1],$=v[R],B=i[R];return[W||$,W||!$?Cr(ae,$&&$.multi?function(U){var G=we(U,R);return c(G)&&G.some(function(te){return w(B,te)})}:function(U){return w(B,we(U,R))}):ae]},[null,null]),S=C[0],M=C[1];return S?this.where(S.name).equals(i[S.keyPath]).filter(M):f?this.filter(M):this.where(u).equals("")},r.prototype.filter=function(i){return this.toCollection().and(i)},r.prototype.count=function(i){return this.toCollection().count(i)},r.prototype.offset=function(i){return this.toCollection().offset(i)},r.prototype.limit=function(i){return this.toCollection().limit(i)},r.prototype.each=function(i){return this.toCollection().each(i)},r.prototype.toArray=function(i){return this.toCollection().toArray(i)},r.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},r.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,c(i)?"[".concat(i.join("+"),"]"):i))},r.prototype.reverse=function(){return this.toCollection().reverse()},r.prototype.mapToClass=function(i){var u=this,f=u.db,h=u.name;this.schema.mappedClass=i,i.prototype instanceof dc&&(i=(function(S){e(M,S);function M(){return S!==null&&S.apply(this,arguments)||this}return Object.defineProperty(M.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),M.prototype.table=function(){return h},M})(i));for(var v=new Set,w=i.prototype;w;w=y(w))Object.getOwnPropertyNames(w).forEach(function(S){return v.add(S)});var C=function(S){if(!S)return S;var M=Object.create(i.prototype);for(var N in S)if(!v.has(N))try{M[N]=S[N]}catch{}return M};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),i},r.prototype.defineClass=function(){function i(u){l(this,u)}return this.mapToClass(i)},r.prototype.add=function(i,u){var f=this,h=this.schema.primKey,v=h.auto,w=h.keyPath,C=i;return w&&v&&(C=Zo(w)(i)),this._trans("readwrite",function(S){return f.core.mutate({trans:S,type:"add",keys:u!=null?[u]:null,values:[C]})}).then(function(S){return S.numFailures?ge.reject(S.failures[0]):S.lastResult}).then(function(S){if(w)try{De(i,w,S)}catch{}return S})},r.prototype.upsert=function(i,u){var f=this,h=this.schema.primKey.keyPath;return this._trans("readwrite",function(v){return f.core.get({trans:v,key:i}).then(function(w){var C=w??{};return pc(C,u),h&&De(C,h,i),f.core.mutate({trans:v,type:"put",values:[C],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[u]}}).then(function(S){return S.numFailures?ge.reject(S.failures[0]):!!w})})})},r.prototype.update=function(i,u){if(typeof i=="object"&&!c(i)){var f=we(i,this.schema.primKey.keyPath);return f===void 0?at(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(u)}else return this.where(":id").equals(i).modify(u)},r.prototype.put=function(i,u){var f=this,h=this.schema.primKey,v=h.auto,w=h.keyPath,C=i;return w&&v&&(C=Zo(w)(i)),this._trans("readwrite",function(S){return f.core.mutate({trans:S,type:"put",values:[C],keys:u!=null?[u]:null})}).then(function(S){return S.numFailures?ge.reject(S.failures[0]):S.lastResult}).then(function(S){if(w)try{De(i,w,S)}catch{}return S})},r.prototype.delete=function(i){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"delete",keys:[i]}).then(function(h){return Wo(u,[i],h)}).then(function(h){return h.numFailures?ge.reject(h.failures[0]):void 0})})},r.prototype.clear=function(){var i=this;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"deleteRange",range:fc}).then(function(f){return Wo(i,null,f)})}).then(function(u){return u.numFailures?ge.reject(u.failures[0]):void 0})},r.prototype.bulkGet=function(i){var u=this;return this._trans("readonly",function(f){return u.core.getMany({keys:i,trans:f}).then(function(h){return h.map(function(v){return u.hook.reading.fire(v)})})})},r.prototype.bulkAdd=function(i,u,f){var h=this,v=Array.isArray(u)?u:void 0;f=f||(v?void 0:u);var w=f?f.allKeys:void 0;return this._trans("readwrite",function(C){var S=h.schema.primKey,M=S.auto,N=S.keyPath;if(N&&v)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==i.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var R=i.length,W=N&&M?i.map(Zo(N)):i;return h.core.mutate({trans:C,type:"add",keys:v,values:W,wantResults:w}).then(function(ae){var $=ae.numFailures,B=ae.results,U=ae.lastResult,G=ae.failures,te=w?B:U;if($===0)return te;throw new Ve("".concat(h.name,".bulkAdd(): ").concat($," of ").concat(R," operations failed"),G)})})},r.prototype.bulkPut=function(i,u,f){var h=this,v=Array.isArray(u)?u:void 0;f=f||(v?void 0:u);var w=f?f.allKeys:void 0;return this._trans("readwrite",function(C){var S=h.schema.primKey,M=S.auto,N=S.keyPath;if(N&&v)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==i.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var R=i.length,W=N&&M?i.map(Zo(N)):i;return h.core.mutate({trans:C,type:"put",keys:v,values:W,wantResults:w}).then(function(ae){var $=ae.numFailures,B=ae.results,U=ae.lastResult,G=ae.failures,te=w?B:U;if($===0)return te;throw new Ve("".concat(h.name,".bulkPut(): ").concat($," of ").concat(R," operations failed"),G)})})},r.prototype.bulkUpdate=function(i){var u=this,f=this.core,h=i.map(function(C){return C.key}),v=i.map(function(C){return C.changes}),w=[];return this._trans("readwrite",function(C){return f.getMany({trans:C,keys:h,cache:"clone"}).then(function(S){var M=[],N=[];i.forEach(function(W,ae){var $=W.key,B=W.changes,U=S[ae];if(U){for(var G=0,te=Object.keys(B);G<te.length;G++){var ne=te[G],re=B[ne];if(ne===u.schema.primKey.keyPath){if(ze(re,$)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else De(U,ne,re)}w.push(ae),M.push($),N.push(U)}});var R=M.length;return f.mutate({trans:C,type:"put",keys:M,values:N,updates:{keys:h,changeSpecs:v}}).then(function(W){var ae=W.numFailures,$=W.failures;if(ae===0)return R;for(var B=0,U=Object.keys($);B<U.length;B++){var G=U[B],te=w[Number(G)];if(te!=null){var ne=$[G];delete $[G],$[te]=ne}}throw new Ve("".concat(u.name,".bulkUpdate(): ").concat(ae," of ").concat(R," operations failed"),$)})})})},r.prototype.bulkDelete=function(i){var u=this,f=i.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:i}).then(function(v){return Wo(u,i,v)})}).then(function(h){var v=h.numFailures,w=h.lastResult,C=h.failures;if(v===0)return w;throw new Ve("".concat(u.name,".bulkDelete(): ").concat(v," of ").concat(f," operations failed"),C)})},r})();function Ci(r){var i={},u=function(C,S){if(S){for(var M=arguments.length,N=new Array(M-1);--M;)N[M-1]=arguments[M];return i[C].subscribe.apply(null,N),r}else if(typeof C=="string")return i[C]};u.addEventType=v;for(var f=1,h=arguments.length;f<h;++f)v(arguments[f]);return u;function v(C,S,M){if(typeof C=="object")return w(C);S||(S=Cd),M||(M=qe);var N={subscribers:[],fire:M,subscribe:function(R){N.subscribers.indexOf(R)===-1&&(N.subscribers.push(R),N.fire=S(N.fire,R))},unsubscribe:function(R){N.subscribers=N.subscribers.filter(function(W){return W!==R}),N.fire=N.subscribers.reduce(S,M)}};return i[C]=u[C]=N,N}function w(C){s(C).forEach(function(S){var M=C[S];if(c(M))v(S,C[S][0],C[S][1]);else if(M==="asap")var N=v(S,bi,function(){for(var W=arguments.length,ae=new Array(W);W--;)ae[W]=arguments[W];N.subscribers.forEach(function($){le(function(){$.apply(null,ae)})})});else throw new Ee.InvalidArgument("Invalid event config")})}}function Si(r,i){return O(i).from({prototype:r}),i}function Yd(r){return Si(yc.prototype,function(u,f,h){this.db=r,this._tx=h,this.name=u,this.schema=f,this.hook=r._allTables[u]?r._allTables[u].hook:Ci(null,{creating:[Dd,qe],reading:[wd,bi],updating:[Ed,qe],deleting:[xd,qe]})})}function qr(r,i){return!(r.filter||r.algorithm||r.or)&&(i?r.justLimit:!r.replayFilter)}function cs(r,i){r.filter=Cr(r.filter,i)}function ls(r,i,u){var f=r.replayFilter;r.replayFilter=f?function(){return Cr(f(),i())}:i,r.justLimit=u&&!f}function zd(r,i){r.isMatch=Cr(r.isMatch,i)}function qo(r,i){if(r.isPrimKey)return i.primaryKey;var u=i.getIndexByKeyPath(r.index);if(!u)throw new Ee.Schema("KeyPath "+r.index+" on object store "+i.name+" is not indexed");return u}function gc(r,i,u){var f=qo(r,i.schema);return i.openCursor({trans:u,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:f,range:r.range}})}function Ho(r,i,u,f){var h=r.replayFilter?Cr(r.filter,r.replayFilter()):r.filter;if(r.or){var v={},w=function(C,S,M){if(!h||h(S,M,function(W){return S.stop(W)},function(W){return S.fail(W)})){var N=S.primaryKey,R=""+N;R==="[object ArrayBuffer]"&&(R=""+new Uint8Array(N)),g(v,R)||(v[R]=!0,i(C,S,M))}};return Promise.all([r.or._iterate(w,u),vc(gc(r,f,u),r.algorithm,w,!r.keysOnly&&r.valueMapper)])}else return vc(gc(r,f,u),Cr(r.algorithm,h),i,!r.keysOnly&&r.valueMapper)}function vc(r,i,u,f){var h=f?function(w,C,S){return u(f(w),C,S)}:u,v=Je(h);return r.then(function(w){if(w)return w.start(function(){var C=function(){return w.continue()};(!i||i(w,function(S){return C=S},function(S){w.stop(S),C=qe},function(S){w.fail(S),C=qe}))&&v(w.value,w,function(S){return C=S}),C()})})}var Fd=(function(){function r(){}return r.prototype._read=function(i,u){var f=this._ctx;return f.error?f.table._trans(null,at.bind(null,f.error)):f.table._trans("readonly",i).then(u)},r.prototype._write=function(i){var u=this._ctx;return u.error?u.table._trans(null,at.bind(null,u.error)):u.table._trans("readwrite",i,"locked")},r.prototype._addAlgorithm=function(i){var u=this._ctx;u.algorithm=Cr(u.algorithm,i)},r.prototype._iterate=function(i,u){return Ho(this._ctx,i,u,this._ctx.table.core)},r.prototype.clone=function(i){var u=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return i&&l(f,i),u._ctx=f,u},r.prototype.raw=function(){return this._ctx.valueMapper=null,this},r.prototype.each=function(i){var u=this._ctx;return this._read(function(f){return Ho(u,i,f,u.table.core)})},r.prototype.count=function(i){var u=this;return this._read(function(f){var h=u._ctx,v=h.table.core;if(qr(h,!0))return v.count({trans:f,query:{index:qo(h,v.schema),range:h.range}}).then(function(C){return Math.min(C,h.limit)});var w=0;return Ho(h,function(){return++w,!1},f,v).then(function(){return w})}).then(i)},r.prototype.sortBy=function(i,u){var f=i.split(".").reverse(),h=f[0],v=f.length-1;function w(M,N){return N?w(M[f[N]],N-1):M[h]}var C=this._ctx.dir==="next"?1:-1;function S(M,N){var R=w(M,v),W=w(N,v);return ze(R,W)*C}return this.toArray(function(M){return M.sort(S)}).then(u)},r.prototype.toArray=function(i){var u=this;return this._read(function(f){var h=u._ctx;if(h.dir==="next"&&qr(h,!0)&&h.limit>0){var v=h.valueMapper,w=qo(h,h.table.core.schema);return h.table.core.query({trans:f,limit:h.limit,values:!0,query:{index:w,range:h.range}}).then(function(S){var M=S.result;return v?M.map(v):M})}else{var C=[];return Ho(h,function(S){return C.push(S)},f,h.table.core).then(function(){return C})}},i)},r.prototype.offset=function(i){var u=this._ctx;return i<=0?this:(u.offset+=i,qr(u)?ls(u,function(){var f=i;return function(h,v){return f===0?!0:f===1?(--f,!1):(v(function(){h.advance(f),f=0}),!1)}}):ls(u,function(){var f=i;return function(){return--f<0}}),this)},r.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ls(this._ctx,function(){var u=i;return function(f,h,v){return--u<=0&&h(v),u>=0}},!0),this},r.prototype.until=function(i,u){return cs(this._ctx,function(f,h,v){return i(f.value)?(h(v),u):!0}),this},r.prototype.first=function(i){return this.limit(1).toArray(function(u){return u[0]}).then(i)},r.prototype.last=function(i){return this.reverse().first(i)},r.prototype.filter=function(i){return cs(this._ctx,function(u){return i(u.value)}),zd(this._ctx,i),this},r.prototype.and=function(i){return this.filter(i)},r.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},r.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},r.prototype.desc=function(){return this.reverse()},r.prototype.eachKey=function(i){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,h){i(h.key,h)})},r.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},r.prototype.eachPrimaryKey=function(i){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,h){i(h.primaryKey,h)})},r.prototype.keys=function(i){var u=this._ctx;u.keysOnly=!u.isMatch;var f=[];return this.each(function(h,v){f.push(v.key)}).then(function(){return f}).then(i)},r.prototype.primaryKeys=function(i){var u=this._ctx;if(u.dir==="next"&&qr(u,!0)&&u.limit>0)return this._read(function(h){var v=qo(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:v,range:u.range}})}).then(function(h){var v=h.result;return v}).then(i);u.keysOnly=!u.isMatch;var f=[];return this.each(function(h,v){f.push(v.primaryKey)}).then(function(){return f}).then(i)},r.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},r.prototype.firstKey=function(i){return this.limit(1).keys(function(u){return u[0]}).then(i)},r.prototype.lastKey=function(i){return this.reverse().firstKey(i)},r.prototype.distinct=function(){var i=this._ctx,u=i.index&&i.table.schema.idxByName[i.index];if(!u||!u.multi)return this;var f={};return cs(this._ctx,function(h){var v=h.primaryKey.toString(),w=g(f,v);return f[v]=!0,!w}),this},r.prototype.modify=function(i){var u=this,f=this._ctx;return this._write(function(h){var v;typeof i=="function"?v=i:v=function(G){return pc(G,i)};var w=f.table.core,C=w.schema.primaryKey,S=C.outbound,M=C.extractKey,N=200,R=u.db._options.modifyChunkSize;R&&(typeof R=="object"?N=R[w.name]||R["*"]||200:N=R);var W=[],ae=0,$=[],B=function(G,te){var ne=te.failures,re=te.numFailures;ae+=G-re;for(var V=0,he=s(ne);V<he.length;V++){var ve=he[V];W.push(ne[ve])}},U=i===_c;return u.clone().primaryKeys().then(function(G){var te=qr(f)&&f.limit===1/0&&(typeof i!="function"||U)&&{index:f.index,range:f.range},ne=function(re){var V=Math.min(N,G.length-re),he=G.slice(re,re+V);return(U?Promise.resolve([]):w.getMany({trans:h,keys:he,cache:"immutable"})).then(function(ve){var me=[],ke=[],je=S?[]:null,_e=U?he:[];if(!U)for(var $e=0;$e<V;++$e){var Me=ve[$e],Ke={value:E(Me),primKey:G[re+$e]};v.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?_e.push(G[re+$e]):!S&&ze(M(Me),M(Ke.value))!==0?(_e.push(G[re+$e]),me.push(Ke.value)):(ke.push(Ke.value),S&&je.push(G[re+$e])))}return Promise.resolve(me.length>0&&w.mutate({trans:h,type:"add",values:me}).then(function(Te){for(var it in Te.failures)_e.splice(parseInt(it),1);B(me.length,Te)})).then(function(){return(ke.length>0||te&&typeof i=="object")&&w.mutate({trans:h,type:"put",keys:je,values:ke,criteria:te,changeSpec:typeof i!="function"&&i,isAdditionalChunk:re>0}).then(function(Te){return B(ke.length,Te)})}).then(function(){return(_e.length>0||te&&U)&&w.mutate({trans:h,type:"delete",keys:_e,criteria:te,isAdditionalChunk:re>0}).then(function(Te){return Wo(f.table,_e,Te)}).then(function(Te){return B(_e.length,Te)})}).then(function(){return G.length>re+V&&ne(re+N)})})};return ne(0).then(function(){if(W.length>0)throw new He("Error modifying one or more objects",W,ae,$);return G.length})})})},r.prototype.delete=function(){var i=this._ctx,u=i.range;return qr(i)&&!i.table.schema.yProps&&(i.isPrimKey||u.type===3)?this._write(function(f){var h=i.table.core.schema.primaryKey,v=u;return i.table.core.count({trans:f,query:{index:h,range:v}}).then(function(w){return i.table.core.mutate({trans:f,type:"deleteRange",range:v}).then(function(C){var S=C.failures,M=C.numFailures;if(M)throw new He("Could not delete some values",Object.keys(S).map(function(N){return S[N]}),w-M);return w-M})})}):this.modify(_c)},r})(),_c=function(r,i){return i.value=null};function Kd(r){return Si(Fd.prototype,function(u,f){this.db=r;var h=fc,v=null;if(f)try{h=f()}catch(M){v=M}var w=u._ctx,C=w.table,S=C.hook.reading.fire;this._ctx={table:C,index:w.index,isPrimKey:!w.index||C.schema.primKey.keyPath&&w.index===C.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:v,or:w.or,valueMapper:S!==bi?S:null}})}function Ud(r,i){return r<i?-1:r===i?0:1}function Zd(r,i){return r>i?-1:r===i?0:1}function qt(r,i,u){var f=r instanceof wc?new r.Collection(r):r;return f._ctx.error=u?new u(i):new TypeError(i),f}function Hr(r){return new r.Collection(r,function(){return bc("")}).limit(0)}function Wd(r){return r==="next"?function(i){return i.toUpperCase()}:function(i){return i.toLowerCase()}}function qd(r){return r==="next"?function(i){return i.toLowerCase()}:function(i){return i.toUpperCase()}}function Hd(r,i,u,f,h,v){for(var w=Math.min(r.length,f.length),C=-1,S=0;S<w;++S){var M=i[S];if(M!==f[S])return h(r[S],u[S])<0?r.substr(0,S)+u[S]+u.substr(S+1):h(r[S],f[S])<0?r.substr(0,S)+f[S]+u.substr(S+1):C>=0?r.substr(0,C)+i[C]+u.substr(C+1):null;h(r[S],M)<0&&(C=S)}return w<f.length&&v==="next"?r+u.substr(r.length):w<r.length&&v==="prev"?r.substr(0,u.length):C<0?null:r.substr(0,C)+f[C]+u.substr(C+1)}function Go(r,i,u,f){var h,v,w,C,S,M,N,R=u.length;if(!u.every(function(B){return typeof B=="string"}))return qt(r,lc);function W(B){h=Wd(B),v=qd(B),w=B==="next"?Ud:Zd;var U=u.map(function(G){return{lower:v(G),upper:h(G)}}).sort(function(G,te){return w(G.lower,te.lower)});C=U.map(function(G){return G.upper}),S=U.map(function(G){return G.lower}),M=B,N=B==="next"?"":f}W("next");var ae=new r.Collection(r,function(){return Jn(C[0],S[R-1]+f)});ae._ondirectionchange=function(B){W(B)};var $=0;return ae._addAlgorithm(function(B,U,G){var te=B.key;if(typeof te!="string")return!1;var ne=v(te);if(i(ne,S,$))return!0;for(var re=null,V=$;V<R;++V){var he=Hd(te,ne,C[V],S[V],w,M);he===null&&re===null?$=V+1:(re===null||w(re,he)>0)&&(re=he)}return U(re!==null?function(){B.continue(re+N)}:G),!1}),ae}function Jn(r,i,u,f){return{type:2,lower:r,upper:i,lowerOpen:u,upperOpen:f}}function bc(r){return{type:1,lower:r,upper:r}}var wc=(function(){function r(){}return Object.defineProperty(r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),r.prototype.between=function(i,u,f,h){f=f!==!1,h=h===!0;try{return this._cmp(i,u)>0||this._cmp(i,u)===0&&(f||h)&&!(f&&h)?Hr(this):new this.Collection(this,function(){return Jn(i,u,!f,!h)})}catch{return qt(this,Rn)}},r.prototype.equals=function(i){return i==null?qt(this,Rn):new this.Collection(this,function(){return bc(i)})},r.prototype.above=function(i){return i==null?qt(this,Rn):new this.Collection(this,function(){return Jn(i,void 0,!0)})},r.prototype.aboveOrEqual=function(i){return i==null?qt(this,Rn):new this.Collection(this,function(){return Jn(i,void 0,!1)})},r.prototype.below=function(i){return i==null?qt(this,Rn):new this.Collection(this,function(){return Jn(void 0,i,!1,!0)})},r.prototype.belowOrEqual=function(i){return i==null?qt(this,Rn):new this.Collection(this,function(){return Jn(void 0,i)})},r.prototype.startsWith=function(i){return typeof i!="string"?qt(this,lc):this.between(i,i+Er,!0,!0)},r.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):Go(this,function(u,f){return u.indexOf(f[0])===0},[i],Er)},r.prototype.equalsIgnoreCase=function(i){return Go(this,function(u,f){return u===f[0]},[i],"")},r.prototype.anyOfIgnoreCase=function(){var i=fe.apply(Z,arguments);return i.length===0?Hr(this):Go(this,function(u,f){return f.indexOf(u)!==-1},i,"")},r.prototype.startsWithAnyOfIgnoreCase=function(){var i=fe.apply(Z,arguments);return i.length===0?Hr(this):Go(this,function(u,f){return f.some(function(h){return u.indexOf(h)===0})},i,Er)},r.prototype.anyOf=function(){var i=this,u=fe.apply(Z,arguments),f=this._cmp;try{u.sort(f)}catch{return qt(this,Rn)}if(u.length===0)return Hr(this);var h=new this.Collection(this,function(){return Jn(u[0],u[u.length-1])});h._ondirectionchange=function(w){f=w==="next"?i._ascending:i._descending,u.sort(f)};var v=0;return h._addAlgorithm(function(w,C,S){for(var M=w.key;f(M,u[v])>0;)if(++v,v===u.length)return C(S),!1;return f(M,u[v])===0?!0:(C(function(){w.continue(u[v])}),!1)}),h},r.prototype.notEqual=function(i){return this.inAnyRange([[as,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},r.prototype.noneOf=function(){var i=fe.apply(Z,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return qt(this,Rn)}var u=i.reduce(function(f,h){return f?f.concat([[f[f.length-1][1],h]]):[[as,h]]},null);return u.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},r.prototype.inAnyRange=function(i,u){var f=this,h=this._cmp,v=this._ascending,w=this._descending,C=this._min,S=this._max;if(i.length===0)return Hr(this);if(!i.every(function(V){return V[0]!==void 0&&V[1]!==void 0&&v(V[0],V[1])<=0}))return qt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var M=!u||u.includeLowers!==!1,N=u&&u.includeUppers===!0;function R(V,he){for(var ve=0,me=V.length;ve<me;++ve){var ke=V[ve];if(h(he[0],ke[1])<0&&h(he[1],ke[0])>0){ke[0]=C(ke[0],he[0]),ke[1]=S(ke[1],he[1]);break}}return ve===me&&V.push(he),V}var W=v;function ae(V,he){return W(V[0],he[0])}var $;try{$=i.reduce(R,[]),$.sort(ae)}catch{return qt(this,Rn)}var B=0,U=N?function(V){return v(V,$[B][1])>0}:function(V){return v(V,$[B][1])>=0},G=M?function(V){return w(V,$[B][0])>0}:function(V){return w(V,$[B][0])>=0};function te(V){return!U(V)&&!G(V)}var ne=U,re=new this.Collection(this,function(){return Jn($[0][0],$[$.length-1][1],!M,!N)});return re._ondirectionchange=function(V){V==="next"?(ne=U,W=v):(ne=G,W=w),$.sort(ae)},re._addAlgorithm(function(V,he,ve){for(var me=V.key;ne(me);)if(++B,B===$.length)return he(ve),!1;return te(me)?!0:(f._cmp(me,$[B][1])===0||f._cmp(me,$[B][0])===0||he(function(){W===v?V.continue($[B][0]):V.continue($[B][1])}),!1)}),re},r.prototype.startsWithAnyOf=function(){var i=fe.apply(Z,arguments);return i.every(function(u){return typeof u=="string"})?i.length===0?Hr(this):this.inAnyRange(i.map(function(u){return[u,u+Er]})):qt(this,"startsWithAnyOf() only works with strings")},r})();function Gd(r){return Si(wc.prototype,function(u,f,h){if(this.db=r,this._ctx={table:u,index:f===":id"?null:f,or:h},this._cmp=this._ascending=ze,this._descending=function(v,w){return ze(w,v)},this._max=function(v,w){return ze(v,w)>0?v:w},this._min=function(v,w){return ze(v,w)<0?v:w},this._IDBKeyRange=r._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})}function _n(r){return Je(function(i){return Ti(i),r(i.target.error),!1})}function Ti(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var ki="storagemutated",fs="x-storagemutated-1",er=Ci(null,ki),Qd=(function(){function r(){}return r.prototype._lock=function(){return ie(!Ce.global),++this._reculock,this._reculock===1&&!Ce.global&&(Ce.lockOwnerFor=this),this},r.prototype._unlock=function(){if(ie(!Ce.global),--this._reculock===0)for(Ce.global||(Ce.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var i=this._blockedFuncs.shift();try{xr(i[1],i[0])}catch{}}return this},r.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},r.prototype.create=function(i){var u=this;if(!this.mode)return this;var f=this.db.idbdb,h=this.db._state.dbOpenError;if(ie(!this.idbtrans),!i&&!f)switch(h&&h.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(h);case"MissingAPIError":throw new Ee.MissingAPI(h.message,h);default:throw new Ee.OpenFailed(h)}if(!this.active)throw new Ee.TransactionInactive;return ie(this._completion._state===null),i=this.idbtrans=i||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):f.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),i.onerror=Je(function(v){Ti(v),u._reject(i.error)}),i.onabort=Je(function(v){Ti(v),u.active&&u._reject(new Ee.Abort(i.error)),u.active=!1,u.on("abort").fire(v)}),i.oncomplete=Je(function(){u.active=!1,u._resolve(),"mutatedParts"in i&&er.storagemutated.fire(i.mutatedParts)}),this},r.prototype._promise=function(i,u,f){var h=this;if(i==="readwrite"&&this.mode!=="readwrite")return at(new Ee.ReadOnly("Transaction is readonly"));if(!this.active)return at(new Ee.TransactionInactive);if(this._locked())return new ge(function(w,C){h._blockedFuncs.push([function(){h._promise(i,u,f).then(w,C)},Ce])});if(f)return Qn(function(){var w=new ge(function(C,S){h._lock();var M=u(C,S,h);M&&M.then&&M.then(C,S)});return w.finally(function(){return h._unlock()}),w._lib=!0,w});var v=new ge(function(w,C){var S=u(w,C,h);S&&S.then&&S.then(w,C)});return v._lib=!0,v},r.prototype._root=function(){return this.parent?this.parent._root():this},r.prototype.waitFor=function(i){var u=this._root(),f=ge.resolve(i);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return f});else{u._waitingFor=f,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function w(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=w)})()}var v=u._waitingFor;return new ge(function(w,C){f.then(function(S){return u._waitingQueue.push(Je(w.bind(null,S)))},function(S){return u._waitingQueue.push(Je(C.bind(null,S)))}).finally(function(){u._waitingFor===v&&(u._waitingFor=null)})})},r.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},r.prototype.table=function(i){var u=this._memoizedTables||(this._memoizedTables={});if(g(u,i))return u[i];var f=this.schema[i];if(!f)throw new Ee.NotFound("Table "+i+" not part of transaction");var h=new this.db.Table(i,f,this);return h.core=this.db.core.table(i),u[i]=h,h},r})();function Xd(r){return Si(Qd.prototype,function(u,f,h,v,w){var C=this;u!=="readonly"&&f.forEach(function(S){var M,N=(M=h[S])===null||M===void 0?void 0:M.yProps;N&&(f=f.concat(N.map(function(R){return R.updatesTable})))}),this.db=r,this.mode=u,this.storeNames=f,this.schema=h,this.chromeTransactionDurability=v,this.idbtrans=null,this.on=Ci(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ge(function(S,M){C._resolve=S,C._reject=M}),this._completion.then(function(){C.active=!1,C.on.complete.fire()},function(S){var M=C.active;return C.active=!1,C.on.error.fire(S),C.parent?C.parent._reject(S):M&&C.idbtrans&&C.idbtrans.abort(),at(S)})})}function ds(r,i,u,f,h,v,w,C){return{name:r,keyPath:i,unique:u,multi:f,auto:h,compound:v,src:(u&&!w?"&":"")+(f?"*":"")+(h?"++":"")+Dc(i),type:C}}function Dc(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function hs(r,i,u){return{name:r,primKey:i,indexes:u,mappedClass:null,idxByName:pe(u,function(f){return[f.name,f]})}}function Vd(r){return r.length===1?r[0]:r}var Ii=function(r){try{return r.only([[]]),Ii=function(){return[[]]},[[]]}catch{return Ii=function(){return Er},Er}};function ms(r){return r==null?function(){}:typeof r=="string"?Jd(r):function(i){return we(i,r)}}function Jd(r){var i=r.split(".");return i.length===1?function(u){return u[r]}:function(u){return we(u,r)}}function xc(r){return[].slice.call(r)}var eh=0;function Mi(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function th(r,i,u){function f(R,W){var ae=xc(R.objectStoreNames);return{schema:{name:R.name,tables:ae.map(function($){return W.objectStore($)}).map(function($){var B=$.keyPath,U=$.autoIncrement,G=c(B),te=B==null,ne={},re={name:$.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:te,compound:G,keyPath:B,autoIncrement:U,unique:!0,extractKey:ms(B)},indexes:xc($.indexNames).map(function(V){return $.index(V)}).map(function(V){var he=V.name,ve=V.unique,me=V.multiEntry,ke=V.keyPath,je=c(ke),_e={name:he,compound:je,keyPath:ke,unique:ve,multiEntry:me,extractKey:ms(ke)};return ne[Mi(ke)]=_e,_e}),getIndexByKeyPath:function(V){return ne[Mi(V)]}};return ne[":id"]=re.primaryKey,B!=null&&(ne[Mi(B)]=re.primaryKey),re})},hasGetAll:ae.length>0&&"getAll"in W.objectStore(ae[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var W=R.lower,ae=R.upper,$=R.lowerOpen,B=R.upperOpen,U=W===void 0?ae===void 0?null:i.upperBound(ae,!!B):ae===void 0?i.lowerBound(W,!!$):i.bound(W,ae,!!$,!!B);return U}function v(R){var W=R.name;function ae(U){var G=U.trans,te=U.type,ne=U.keys,re=U.values,V=U.range;return new Promise(function(he,ve){he=Je(he);var me=G.objectStore(W),ke=me.keyPath==null,je=te==="put"||te==="add";if(!je&&te!=="delete"&&te!=="deleteRange")throw new Error("Invalid operation type: "+te);var _e=(ne||re||{length:1}).length;if(ne&&re&&ne.length!==re.length)throw new Error("Given keys array must have same length as given values array.");if(_e===0)return he({numFailures:0,failures:{},results:[],lastResult:void 0});var $e,Me=[],Ke=[],Te=0,it=function(wn){++Te,Ti(wn)};if(te==="deleteRange"){if(V.type===4)return he({numFailures:Te,failures:Ke,results:[],lastResult:void 0});V.type===3?Me.push($e=me.clear()):Me.push($e=me.delete(h(V)))}else{var gt=je?ke?[re,ne]:[re,null]:[ne,null],bn=gt[0],Lt=gt[1];if(je)for(var on=0;on<_e;++on)Me.push($e=Lt&&Lt[on]!==void 0?me[te](bn[on],Lt[on]):me[te](bn[on])),$e.onerror=it;else for(var on=0;on<_e;++on)Me.push($e=me[te](bn[on])),$e.onerror=it}var rr=function(wn){var Pi=wn.target.result;Me.forEach(function(hn,sa){return hn.error!=null&&(Ke[sa]=hn.error)}),he({numFailures:Te,failures:Ke,results:te==="delete"?ne:Me.map(function(hn){return hn.result}),lastResult:Pi})};$e.onerror=function(wn){it(wn),rr(wn)},$e.onsuccess=rr})}function $(U){var G=U.trans,te=U.values,ne=U.query,re=U.reverse,V=U.unique;return new Promise(function(he,ve){he=Je(he);var me=ne.index,ke=ne.range,je=G.objectStore(W),_e=me.isPrimaryKey?je:je.index(me.name),$e=re?V?"prevunique":"prev":V?"nextunique":"next",Me=te||!("openKeyCursor"in _e)?_e.openCursor(h(ke),$e):_e.openKeyCursor(h(ke),$e);Me.onerror=_n(ve),Me.onsuccess=Je(function(Ke){var Te=Me.result;if(!Te){he(null);return}Te.___id=++eh,Te.done=!1;var it=Te.continue.bind(Te),gt=Te.continuePrimaryKey;gt&&(gt=gt.bind(Te));var bn=Te.advance.bind(Te),Lt=function(){throw new Error("Cursor not started")},on=function(){throw new Error("Cursor not stopped")};Te.trans=G,Te.stop=Te.continue=Te.continuePrimaryKey=Te.advance=Lt,Te.fail=Je(ve),Te.next=function(){var rr=this,wn=1;return this.start(function(){return wn--?rr.continue():rr.stop()}).then(function(){return rr})},Te.start=function(rr){var wn=new Promise(function(hn,sa){hn=Je(hn),Me.onerror=_n(sa),Te.fail=sa,Te.stop=function(Fh){Te.stop=Te.continue=Te.continuePrimaryKey=Te.advance=on,hn(Fh)}}),Pi=function(){if(Me.result)try{rr()}catch(hn){Te.fail(hn)}else Te.done=!0,Te.start=function(){throw new Error("Cursor behind last entry")},Te.stop()};return Me.onsuccess=Je(function(hn){Me.onsuccess=Pi,Pi()}),Te.continue=it,Te.continuePrimaryKey=gt,Te.advance=bn,Pi(),wn},he(Te)},ve)})}function B(U){return function(G){return new Promise(function(te,ne){te=Je(te);var re=G.trans,V=G.values,he=G.limit,ve=G.query,me=he===1/0?void 0:he,ke=ve.index,je=ve.range,_e=re.objectStore(W),$e=ke.isPrimaryKey?_e:_e.index(ke.name),Me=h(je);if(he===0)return te({result:[]});if(U){var Ke=V?$e.getAll(Me,me):$e.getAllKeys(Me,me);Ke.onsuccess=function(bn){return te({result:bn.target.result})},Ke.onerror=_n(ne)}else{var Te=0,it=V||!("openKeyCursor"in $e)?$e.openCursor(Me):$e.openKeyCursor(Me),gt=[];it.onsuccess=function(bn){var Lt=it.result;if(!Lt)return te({result:gt});if(gt.push(V?Lt.value:Lt.primaryKey),++Te===he)return te({result:gt});Lt.continue()},it.onerror=_n(ne)}})}}return{name:W,schema:R,mutate:ae,getMany:function(U){var G=U.trans,te=U.keys;return new Promise(function(ne,re){ne=Je(ne);for(var V=G.objectStore(W),he=te.length,ve=new Array(he),me=0,ke=0,je,_e=function(Te){var it=Te.target;(ve[it._pos]=it.result)!=null,++ke===me&&ne(ve)},$e=_n(re),Me=0;Me<he;++Me){var Ke=te[Me];Ke!=null&&(je=V.get(te[Me]),je._pos=Me,je.onsuccess=_e,je.onerror=$e,++me)}me===0&&ne(ve)})},get:function(U){var G=U.trans,te=U.key;return new Promise(function(ne,re){ne=Je(ne);var V=G.objectStore(W),he=V.get(te);he.onsuccess=function(ve){return ne(ve.target.result)},he.onerror=_n(re)})},query:B(S),openCursor:$,count:function(U){var G=U.query,te=U.trans,ne=G.index,re=G.range;return new Promise(function(V,he){var ve=te.objectStore(W),me=ne.isPrimaryKey?ve:ve.index(ne.name),ke=h(re),je=ke?me.count(ke):me.count();je.onsuccess=Je(function(_e){return V(_e.target.result)}),je.onerror=_n(he)})}}}var w=f(r,u),C=w.schema,S=w.hasGetAll,M=C.tables.map(function(R){return v(R)}),N={};return M.forEach(function(R){return N[R.name]=R}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(R){var W=N[R];if(!W)throw new Error("Table '".concat(R,"' not found"));return N[R]},MIN_KEY:-1/0,MAX_KEY:Ii(i),schema:C}}function nh(r,i){return i.reduce(function(u,f){var h=f.create;return n(n({},u),h(u))},r)}function rh(r,i,u,f){var h=u.IDBKeyRange;u.indexedDB;var v=nh(th(i,h,f),r.dbcore);return{dbcore:v}}function Qo(r,i){var u=i.db,f=rh(r._middlewares,u,r._deps,i);r.core=f.dbcore,r.tables.forEach(function(h){var v=h.name;r.core.schema.tables.some(function(w){return w.name===v})&&(h.core=r.core.table(v),r[v]instanceof r.Table&&(r[v].core=h.core))})}function Xo(r,i,u,f){u.forEach(function(h){var v=f[h];i.forEach(function(w){var C=j(w,h);(!C||"value"in C&&C.value===void 0)&&(w===r.Transaction.prototype||w instanceof r.Transaction?T(w,h,{get:function(){return this.table(h)},set:function(S){D(this,h,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):w[h]=new r.Table(h,v))})})}function ps(r,i){i.forEach(function(u){for(var f in u)u[f]instanceof r.Table&&delete u[f]})}function ih(r,i){return r._cfg.version-i._cfg.version}function oh(r,i,u,f){var h=r._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=hs("$meta",Cc("")[0],[]),r._storeNames.push("$meta"));var v=r._createTransaction("readwrite",r._storeNames,h);v.create(u),v._completion.catch(f);var w=v._reject.bind(v),C=Ce.transless||Ce;Qn(function(){if(Ce.trans=v,Ce.transless=C,i===0)s(h).forEach(function(S){gs(u,S,h[S].primKey,h[S].indexes)}),Qo(r,u),ge.follow(function(){return r.on.populate.fire(v)}).catch(w);else return Qo(r,u),sh(r,v,i).then(function(S){return uh(r,S,v,u)}).catch(w)})}function ah(r,i){Ec(r._dbSchema,i),i.db.version%10===0&&!i.objectStoreNames.contains("$meta")&&i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var u=Jo(r,r.idbdb,i);ea(r,r._dbSchema,i);for(var f=ys(u,r._dbSchema),h=function(M){if(M.change.length||M.recreate)return console.warn("Unable to patch indexes of table ".concat(M.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=i.objectStore(M.name);M.add.forEach(function(R){vn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(M.name,".").concat(R.src)),Vo(N,R)})},v=0,w=f.change;v<w.length;v++){var C=w[v],S=h(C);if(typeof S=="object")return S.value}}function sh(r,i,u){return i.storeNames.includes("$meta")?i.table("$meta").get("version").then(function(f){return f??u}):ge.resolve(u)}function uh(r,i,u,f){var h=[],v=r._versions,w=r._dbSchema=Jo(r,r.idbdb,f),C=v.filter(function(M){return M._cfg.version>=i});if(C.length===0)return ge.resolve();C.forEach(function(M){h.push(function(){var N=w,R=M._cfg.dbschema;ea(r,N,f),ea(r,R,f),w=r._dbSchema=R;var W=ys(N,R);W.add.forEach(function(te){gs(f,te[0],te[1].primKey,te[1].indexes)}),W.change.forEach(function(te){if(te.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var ne=f.objectStore(te.name);te.add.forEach(function(re){return Vo(ne,re)}),te.change.forEach(function(re){ne.deleteIndex(re.name),Vo(ne,re)}),te.del.forEach(function(re){return ne.deleteIndex(re)})});var ae=M._cfg.contentUpgrade;if(ae&&M._cfg.version>i){Qo(r,f),u._memoizedTables={};var $=q(R);W.del.forEach(function(te){$[te]=N[te]}),ps(r,[r.Transaction.prototype]),Xo(r,[r.Transaction.prototype],s($),$),u.schema=$;var B=xe(ae);B&&Zr();var U,G=ge.follow(function(){if(U=ae(u),U&&B){var te=Xn.bind(null,null);U.then(te,te)}});return U&&typeof U.then=="function"?ge.resolve(U):G.then(function(){return U})}}),h.push(function(N){var R=M._cfg.dbschema;ch(R,N),ps(r,[r.Transaction.prototype]),Xo(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),u.schema=r._dbSchema}),h.push(function(N){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===M._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(R){return R!=="$meta"})):N.objectStore("$meta").put(M._cfg.version,"version"))})});function S(){return h.length?ge.resolve(h.shift()(u.idbtrans)).then(S):ge.resolve()}return S().then(function(){Ec(w,f)})}function ys(r,i){var u={del:[],add:[],change:[]},f;for(f in r)i[f]||u.del.push(f);for(f in i){var h=r[f],v=i[f];if(!h)u.add.push([f,v]);else{var w={name:f,def:v,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(v.primKey.keyPath||"")||h.primKey.auto!==v.primKey.auto)w.recreate=!0,u.change.push(w);else{var C=h.idxByName,S=v.idxByName,M=void 0;for(M in C)S[M]||w.del.push(M);for(M in S){var N=C[M],R=S[M];N?N.src!==R.src&&w.change.push(R):w.add.push(R)}(w.del.length>0||w.add.length>0||w.change.length>0)&&u.change.push(w)}}}return u}function gs(r,i,u,f){var h=r.db.createObjectStore(i,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(v){return Vo(h,v)}),h}function Ec(r,i){s(r).forEach(function(u){i.db.objectStoreNames.contains(u)||(vn&&console.debug("Dexie: Creating missing table",u),gs(i,u,r[u].primKey,r[u].indexes))})}function ch(r,i){[].slice.call(i.db.objectStoreNames).forEach(function(u){return r[u]==null&&i.db.deleteObjectStore(u)})}function Vo(r,i){r.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function Jo(r,i,u){var f={},h=J(i.objectStoreNames,0);return h.forEach(function(v){for(var w=u.objectStore(v),C=w.keyPath,S=ds(Dc(C),C||"",!0,!1,!!w.autoIncrement,C&&typeof C!="string",!0),M=[],N=0;N<w.indexNames.length;++N){var R=w.index(w.indexNames[N]);C=R.keyPath;var W=ds(R.name,C,!!R.unique,!!R.multiEntry,!1,C&&typeof C!="string",!1);M.push(W)}f[v]=hs(v,S,M)}),f}function lh(r,i,u){r.verno=i.version/10;var f=r._dbSchema=Jo(r,i,u);r._storeNames=J(i.objectStoreNames,0),Xo(r,[r._allTables],s(f),f)}function fh(r,i){var u=Jo(r,r.idbdb,i),f=ys(u,r._dbSchema);return!(f.add.length||f.change.some(function(h){return h.add.length||h.change.length}))}function ea(r,i,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var v=f[h],w=u.objectStore(v);r._hasGetAll="getAll"in w;for(var C=0;C<w.indexNames.length;++C){var S=w.indexNames[C],M=w.index(S).keyPath,N=typeof M=="string"?M:"["+J(M).join("+")+"]";if(i[v]){var R=i[v].idxByName[N];R&&(R.name=S,delete i[v].idxByName[N],i[v].idxByName[S]=R)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Cc(r){return r.split(",").map(function(i,u){var f,h=i.split(":"),v=(f=h[1])===null||f===void 0?void 0:f.trim();i=h[0].trim();var w=i.replace(/([&*]|\+\+)/g,""),C=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return ds(w,C||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),c(C),u===0,v)})}var dh=(function(){function r(){}return r.prototype._createTableSchema=function(i,u,f){return hs(i,u,f)},r.prototype._parseIndexSyntax=function(i){return Cc(i)},r.prototype._parseStoresSpec=function(i,u){var f=this;s(i).forEach(function(h){if(i[h]!==null){var v=f._parseIndexSyntax(i[h]),w=v.shift();if(!w)throw new Ee.Schema("Invalid schema for table "+h+": "+i[h]);if(w.unique=!0,w.multi)throw new Ee.Schema("Primary key cannot be multiEntry*");v.forEach(function(S){if(S.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!S.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")});var C=f._createTableSchema(h,w,v);u[h]=C}})},r.prototype.stores=function(i){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,i):i;var f=u._versions,h={},v={};return f.forEach(function(w){l(h,w._cfg.storesSource),v=w._cfg.dbschema={},w._parseStoresSpec(h,v)}),u._dbSchema=v,ps(u,[u._allTables,u,u.Transaction.prototype]),Xo(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],s(v),v),u._storeNames=s(v),this},r.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Ga(this._cfg.contentUpgrade||qe,i),this},r})();function hh(r){return Si(dh.prototype,function(u){this.db=r,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function vs(r,i){var u=r._dbNamesDB;return u||(u=r._dbNamesDB=new Pn(Uo,{addons:[],indexedDB:r,IDBKeyRange:i}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function _s(r){return r&&typeof r.databases=="function"}function mh(r){var i=r.indexedDB,u=r.IDBKeyRange;return _s(i)?Promise.resolve(i.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Uo})}):vs(i,u).toCollection().primaryKeys()}function ph(r,i){var u=r.indexedDB,f=r.IDBKeyRange;!_s(u)&&i!==Uo&&vs(u,f).put({name:i}).catch(qe)}function yh(r,i){var u=r.indexedDB,f=r.IDBKeyRange;!_s(u)&&i!==Uo&&vs(u,f).delete(i).catch(qe)}function bs(r){return Qn(function(){return Ce.letThrough=!0,r()})}function gh(){var r=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!r||!indexedDB.databases)return Promise.resolve();var i;return new Promise(function(u){var f=function(){return indexedDB.databases().finally(u)};i=setInterval(f,100),f()}).finally(function(){return clearInterval(i)})}var ws;function Ds(r){return!("from"in r)}var yt=function(r,i){if(this)l(this,arguments.length?{d:1,from:r,to:arguments.length>1?i:r}:{d:0});else{var u=new yt;return r&&"d"in r&&l(u,r),u}};b(yt.prototype,(ws={add:function(r){return Ri(this,r),this},addKey:function(r){return Oi(this,r,r),this},addKeys:function(r){var i=this;return r.forEach(function(u){return Oi(i,u,u)}),this},hasKey:function(r){var i=ta(this).next(r).value;return i&&ze(i.from,r)<=0&&ze(i.to,r)>=0}},ws[F]=function(){return ta(this)},ws));function Oi(r,i,u){var f=ze(i,u);if(!isNaN(f)){if(f>0)throw RangeError();if(Ds(r))return l(r,{from:i,to:u,d:1});var h=r.l,v=r.r;if(ze(u,r.from)<0)return h?Oi(h,i,u):r.l={from:i,to:u,d:1,l:null,r:null},Tc(r);if(ze(i,r.to)>0)return v?Oi(v,i,u):r.r={from:i,to:u,d:1,l:null,r:null},Tc(r);ze(i,r.from)<0&&(r.from=i,r.l=null,r.d=v?v.d+1:1),ze(u,r.to)>0&&(r.to=u,r.r=null,r.d=r.l?r.l.d+1:1);var w=!r.r;h&&!r.l&&Ri(r,h),v&&w&&Ri(r,v)}}function Ri(r,i){function u(f,h){var v=h.from,w=h.to,C=h.l,S=h.r;Oi(f,v,w),C&&u(f,C),S&&u(f,S)}Ds(i)||u(r,i)}function Sc(r,i){var u=ta(i),f=u.next();if(f.done)return!1;for(var h=f.value,v=ta(r),w=v.next(h.from),C=w.value;!f.done&&!w.done;){if(ze(C.from,h.to)<=0&&ze(C.to,h.from)>=0)return!0;ze(h.from,C.from)<0?h=(f=u.next(C.from)).value:C=(w=v.next(h.from)).value}return!1}function ta(r){var i=Ds(r)?null:{s:0,n:r};return{next:function(u){for(var f=arguments.length>0;i;)switch(i.s){case 0:if(i.s=1,f)for(;i.n.l&&ze(u,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!f||ze(u,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function Tc(r){var i,u,f=(((i=r.r)===null||i===void 0?void 0:i.d)||0)-(((u=r.l)===null||u===void 0?void 0:u.d)||0),h=f>1?"r":f<-1?"l":"";if(h){var v=h==="r"?"l":"r",w=n({},r),C=r[h];r.from=C.from,r.to=C.to,r[h]=C[h],w[h]=C[v],r[v]=w,w.d=kc(w)}r.d=kc(r)}function kc(r){var i=r.r,u=r.l;return(i?u?Math.max(i.d,u.d):i.d:u?u.d:0)+1}function na(r,i){return s(i).forEach(function(u){r[u]?Ri(r[u],i[u]):r[u]=Y(i[u])}),r}function xs(r,i){return r.all||i.all||Object.keys(r).some(function(u){return i[u]&&Sc(i[u],r[u])})}var Sr={},Es={},Cs=!1;function ra(r,i){na(Es,r),Cs||(Cs=!0,setTimeout(function(){Cs=!1;var u=Es;Es={},Ss(u,!1)},0))}function Ss(r,i){i===void 0&&(i=!1);var u=new Set;if(r.all)for(var f=0,h=Object.values(Sr);f<h.length;f++){var v=h[f];Ic(v,r,u,i)}else for(var w in r){var C=/^idb\:\/\/(.*)\/(.*)\//.exec(w);if(C){var S=C[1],M=C[2],v=Sr["idb://".concat(S,"/").concat(M)];v&&Ic(v,r,u,i)}}u.forEach(function(N){return N()})}function Ic(r,i,u,f){for(var h=[],v=0,w=Object.entries(r.queries.query);v<w.length;v++){for(var C=w[v],S=C[0],M=C[1],N=[],R=0,W=M;R<W.length;R++){var ae=W[R];xs(i,ae.obsSet)?ae.subscribers.forEach(function(G){return u.add(G)}):f&&N.push(ae)}f&&h.push([S,N])}if(f)for(var $=0,B=h;$<B.length;$++){var U=B[$],S=U[0],N=U[1];r.queries.query[S]=N}}function vh(r){var i=r._state,u=r._deps.indexedDB;if(i.isBeingOpened||r.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?at(i.dbOpenError):r});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var f=i.openCanceller,h=Math.round(r.verno*10),v=!1;function w(){if(i.openCanceller!==f)throw new Ee.DatabaseClosed("db.open() was cancelled")}var C=i.dbReadyResolve,S=null,M=!1,N=function(){return new ge(function(R,W){if(w(),!u)throw new Ee.MissingAPI;var ae=r.name,$=i.autoSchema||!h?u.open(ae):u.open(ae,h);if(!$)throw new Ee.MissingAPI;$.onerror=_n(W),$.onblocked=Je(r._fireOnBlocked),$.onupgradeneeded=Je(function(B){if(S=$.transaction,i.autoSchema&&!r._options.allowEmptyDB){$.onerror=Ti,S.abort(),$.result.close();var U=u.deleteDatabase(ae);U.onsuccess=U.onerror=Je(function(){W(new Ee.NoSuchDatabase("Database ".concat(ae," doesnt exist")))})}else{S.onerror=_n(W);var G=B.oldVersion>Math.pow(2,62)?0:B.oldVersion;M=G<1,r.idbdb=$.result,v&&ah(r,S),oh(r,G/10,S,W)}},W),$.onsuccess=Je(function(){S=null;var B=r.idbdb=$.result,U=J(B.objectStoreNames);if(U.length>0)try{var G=B.transaction(Vd(U),"readonly");if(i.autoSchema)lh(r,B,G);else if(ea(r,r._dbSchema,G),!fh(r,G)&&!v)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),B.close(),h=B.version+1,v=!0,R(N());Qo(r,G)}catch{}Wr.push(r),B.onversionchange=Je(function(te){i.vcFired=!0,r.on("versionchange").fire(te)}),B.onclose=Je(function(){r.close({disableAutoOpen:!1})}),M&&ph(r._deps,ae),R()},W)}).catch(function(R){switch(R?.name){case"UnknownError":if(i.PR1398_maxLoop>0)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(h>0)return h=0,N();break}return ge.reject(R)})};return ge.race([f,(typeof navigator>"u"?ge.resolve():gh()).then(N)]).then(function(){return w(),i.onReadyBeingFired=[],ge.resolve(bs(function(){return r.on.ready.fire(r.vip)})).then(function R(){if(i.onReadyBeingFired.length>0){var W=i.onReadyBeingFired.reduce(Ga,qe);return i.onReadyBeingFired=[],ge.resolve(bs(function(){return W(r.vip)})).then(R)}})}).finally(function(){i.openCanceller===f&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(R){i.dbOpenError=R;try{S&&S.abort()}catch{}return f===i.openCanceller&&r._close(),at(R)}).finally(function(){i.openComplete=!0,C()}).then(function(){if(M){var R={};r.tables.forEach(function(W){W.schema.indexes.forEach(function(ae){ae.name&&(R["idb://".concat(r.name,"/").concat(W.name,"/").concat(ae.name)]=new yt(-1/0,[[[]]]))}),R["idb://".concat(r.name,"/").concat(W.name,"/")]=R["idb://".concat(r.name,"/").concat(W.name,"/:dels")]=new yt(-1/0,[[[]]])}),er(ki).fire(R),Ss(R,!0)}return r})}function Ts(r){var i=function(w){return r.next(w)},u=function(w){return r.throw(w)},f=v(i),h=v(u);function v(w){return function(C){var S=w(C),M=S.value;return S.done?M:!M||typeof M.then!="function"?c(M)?Promise.all(M).then(f,h):f(M):M.then(f,h)}}return v(i)()}function _h(r,i,u){var f=arguments.length;if(f<2)throw new Ee.InvalidArgument("Too few arguments");for(var h=new Array(f-1);--f;)h[f-1]=arguments[f];u=h.pop();var v=Q(h);return[r,v,u]}function Mc(r,i,u,f,h){return ge.resolve().then(function(){var v=Ce.transless||Ce,w=r._createTransaction(i,u,r._dbSchema,f);w.explicit=!0;var C={trans:w,transless:v};if(f)w.idbtrans=f.idbtrans;else try{w.create(),w.idbtrans._explicit=!0,r._state.PR1398_maxLoop=3}catch(R){return R.name===ct.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),r.close({disableAutoOpen:!1}),r.open().then(function(){return Mc(r,i,u,null,h)})):at(R)}var S=xe(h);S&&Zr();var M,N=ge.follow(function(){if(M=h.call(w,w),M)if(S){var R=Xn.bind(null,null);M.then(R,R)}else typeof M.next=="function"&&typeof M.throw=="function"&&(M=Ts(M))},C);return(M&&typeof M.then=="function"?ge.resolve(M).then(function(R){return w.active?R:at(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):N.then(function(){return M})).then(function(R){return f&&w._resolve(),w._completion.then(function(){return R})}).catch(function(R){return w._reject(R),at(R)})})}function ia(r,i,u){for(var f=c(r)?r.slice():[r],h=0;h<u;++h)f.push(i);return f}function bh(r){return n(n({},r),{table:function(i){var u=r.table(i),f=u.schema,h={},v=[];function w(B,U,G){var te=Mi(B),ne=h[te]=h[te]||[],re=B==null?0:typeof B=="string"?1:B.length,V=U>0,he=n(n({},G),{name:V?"".concat(te,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:V,keyTail:U,keyLength:re,extractKey:ms(B),unique:!V&&G.unique});if(ne.push(he),he.isPrimaryKey||v.push(he),re>1){var ve=re===2?B[0]:B.slice(0,re-1);w(ve,U+1,G)}return ne.sort(function(me,ke){return me.keyTail-ke.keyTail}),he}var C=w(f.primaryKey.keyPath,0,f.primaryKey);h[":id"]=[C];for(var S=0,M=f.indexes;S<M.length;S++){var N=M[S];w(N.keyPath,0,N)}function R(B){var U=h[Mi(B)];return U&&U[0]}function W(B,U){return{type:B.type===1?2:B.type,lower:ia(B.lower,B.lowerOpen?r.MAX_KEY:r.MIN_KEY,U),lowerOpen:!0,upper:ia(B.upper,B.upperOpen?r.MIN_KEY:r.MAX_KEY,U),upperOpen:!0}}function ae(B){var U=B.query.index;return U.isVirtual?n(n({},B),{query:{index:U.lowLevelIndex,range:W(B.query.range,U.keyTail)}}):B}var $=n(n({},u),{schema:n(n({},f),{primaryKey:C,indexes:v,getIndexByKeyPath:R}),count:function(B){return u.count(ae(B))},query:function(B){return u.query(ae(B))},openCursor:function(B){var U=B.query.index,G=U.keyTail,te=U.isVirtual,ne=U.keyLength;if(!te)return u.openCursor(B);function re(V){function he(me){me!=null?V.continue(ia(me,B.reverse?r.MAX_KEY:r.MIN_KEY,G)):B.unique?V.continue(V.key.slice(0,ne).concat(B.reverse?r.MIN_KEY:r.MAX_KEY,G)):V.continue()}var ve=Object.create(V,{continue:{value:he},continuePrimaryKey:{value:function(me,ke){V.continuePrimaryKey(ia(me,r.MAX_KEY,G),ke)}},primaryKey:{get:function(){return V.primaryKey}},key:{get:function(){var me=V.key;return ne===1?me[0]:me.slice(0,ne)}},value:{get:function(){return V.value}}});return ve}return u.openCursor(ae(B)).then(function(V){return V&&re(V)})}});return $}})}var wh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:bh};function ks(r,i,u,f){return u=u||{},f=f||"",s(r).forEach(function(h){if(!g(i,h))u[f+h]=void 0;else{var v=r[h],w=i[h];if(typeof v=="object"&&typeof w=="object"&&v&&w){var C=P(v),S=P(w);C!==S?u[f+h]=i[h]:C==="Object"?ks(v,w,u,f+h+"."):v!==w&&(u[f+h]=i[h])}else v!==w&&(u[f+h]=i[h])}}),s(i).forEach(function(h){g(r,h)||(u[f+h]=i[h])}),u}function Is(r,i){return i.type==="delete"?i.keys:i.keys||i.values.map(r.extractKey)}var Dh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return n(n({},r),{table:function(i){var u=r.table(i),f=u.schema.primaryKey,h=n(n({},u),{mutate:function(v){var w=Ce.trans,C=w.table(i).hook,S=C.deleting,M=C.creating,N=C.updating;switch(v.type){case"add":if(M.fire===qe)break;return w._promise("readwrite",function(){return R(v)},!0);case"put":if(M.fire===qe&&N.fire===qe)break;return w._promise("readwrite",function(){return R(v)},!0);case"delete":if(S.fire===qe)break;return w._promise("readwrite",function(){return R(v)},!0);case"deleteRange":if(S.fire===qe)break;return w._promise("readwrite",function(){return W(v)},!0)}return u.mutate(v);function R($){var B=Ce.trans,U=$.keys||Is(f,$);if(!U)throw new Error("Keys missing");return $=$.type==="add"||$.type==="put"?n(n({},$),{keys:U}):n({},$),$.type!=="delete"&&($.values=o([],$.values,!0)),$.keys&&($.keys=o([],$.keys,!0)),xh(u,$,U).then(function(G){var te=U.map(function(ne,re){var V=G[re],he={onerror:null,onsuccess:null};if($.type==="delete")S.fire.call(he,ne,V,B);else if($.type==="add"||V===void 0){var ve=M.fire.call(he,ne,$.values[re],B);ne==null&&ve!=null&&(ne=ve,$.keys[re]=ne,f.outbound||De($.values[re],f.keyPath,ne))}else{var me=ks(V,$.values[re]),ke=N.fire.call(he,me,ne,V,B);if(ke){var je=$.values[re];Object.keys(ke).forEach(function(_e){g(je,_e)?je[_e]=ke[_e]:De(je,_e,ke[_e])})}}return he});return u.mutate($).then(function(ne){for(var re=ne.failures,V=ne.results,he=ne.numFailures,ve=ne.lastResult,me=0;me<U.length;++me){var ke=V?V[me]:U[me],je=te[me];ke==null?je.onerror&&je.onerror(re[me]):je.onsuccess&&je.onsuccess($.type==="put"&&G[me]?$.values[me]:ke)}return{failures:re,results:V,numFailures:he,lastResult:ve}}).catch(function(ne){return te.forEach(function(re){return re.onerror&&re.onerror(ne)}),Promise.reject(ne)})})}function W($){return ae($.trans,$.range,1e4)}function ae($,B,U){return u.query({trans:$,values:!1,query:{index:f,range:B},limit:U}).then(function(G){var te=G.result;return R({type:"delete",keys:te,trans:$}).then(function(ne){return ne.numFailures>0?Promise.reject(ne.failures[0]):te.length<U?{failures:[],numFailures:0,lastResult:void 0}:ae($,n(n({},B),{lower:te[te.length-1],lowerOpen:!0}),U)})})}}});return h}})}};function xh(r,i,u){return i.type==="add"?Promise.resolve([]):r.getMany({trans:i.trans,keys:u,cache:"immutable"})}function Oc(r,i,u){try{if(!i||i.keys.length<r.length)return null;for(var f=[],h=0,v=0;h<i.keys.length&&v<r.length;++h)ze(i.keys[h],r[v])===0&&(f.push(u?E(i.values[h]):i.values[h]),++v);return f.length===r.length?f:null}catch{return null}}var Eh={stack:"dbcore",level:-1,create:function(r){return{table:function(i){var u=r.table(i);return n(n({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=Oc(f.keys,f.trans._cache,f.cache==="clone");return h?ge.resolve(h):u.getMany(f).then(function(v){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?E(v):v},v})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function Rc(r,i){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function Pc(r,i){switch(r){case"query":return i.values&&!i.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ch={stack:"dbcore",level:0,name:"Observability",create:function(r){var i=r.schema.name,u=new yt(r.MIN_KEY,r.MAX_KEY);return n(n({},r),{transaction:function(f,h,v){if(Ce.subscr&&h!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return r.transaction(f,h,v)},table:function(f){var h=r.table(f),v=h.schema,w=v.primaryKey,C=v.indexes,S=w.extractKey,M=w.outbound,N=w.autoIncrement&&C.filter(function($){return $.compound&&$.keyPath.includes(w.keyPath)}),R=n(n({},h),{mutate:function($){var B,U,G=$.trans,te=$.mutatedParts||($.mutatedParts={}),ne=function(Me){var Ke="idb://".concat(i,"/").concat(f,"/").concat(Me);return te[Ke]||(te[Ke]=new yt)},re=ne(""),V=ne(":dels"),he=$.type,ve=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[Is(w,$).filter(function(Me){return Me}),$.values]:[],me=ve[0],ke=ve[1],je=$.trans._cache;if(c(me)){re.addKeys(me);var _e=he==="delete"||me.length===ke.length?Oc(me,je):null;_e||V.addKeys(me),(_e||ke)&&Sh(ne,v,_e,ke)}else if(me){var $e={from:(B=me.lower)!==null&&B!==void 0?B:r.MIN_KEY,to:(U=me.upper)!==null&&U!==void 0?U:r.MAX_KEY};V.add($e),re.add($e)}else re.add(u),V.add(u),v.indexes.forEach(function(Me){return ne(Me.name).add(u)});return h.mutate($).then(function(Me){return me&&($.type==="add"||$.type==="put")&&(re.addKeys(Me.results),N&&N.forEach(function(Ke){for(var Te=$.values.map(function(Lt){return Ke.extractKey(Lt)}),it=Ke.keyPath.findIndex(function(Lt){return Lt===w.keyPath}),gt=0,bn=Me.results.length;gt<bn;++gt)Te[gt][it]=Me.results[gt];ne(Ke.name).addKeys(Te)})),G.mutatedParts=na(G.mutatedParts||{},te),Me})}}),W=function($){var B,U,G=$.query,te=G.index,ne=G.range;return[te,new yt((B=ne.lower)!==null&&B!==void 0?B:r.MIN_KEY,(U=ne.upper)!==null&&U!==void 0?U:r.MAX_KEY)]},ae={get:function($){return[w,new yt($.key)]},getMany:function($){return[w,new yt().addKeys($.keys)]},count:W,query:W,openCursor:W};return s(ae).forEach(function($){R[$]=function(B){var U=Ce.subscr,G=!!U,te=Rc(Ce,h)&&Pc($,B),ne=te?B.obsSet={}:U;if(G){var re=function(_e){var $e="idb://".concat(i,"/").concat(f,"/").concat(_e);return ne[$e]||(ne[$e]=new yt)},V=re(""),he=re(":dels"),ve=ae[$](B),me=ve[0],ke=ve[1];if($==="query"&&me.isPrimaryKey&&!B.values?he.add(ke):re(me.name||"").add(ke),!me.isPrimaryKey)if($==="count")he.add(u);else{var je=$==="query"&&M&&B.values&&h.query(n(n({},B),{values:!1}));return h[$].apply(this,arguments).then(function(_e){if($==="query"){if(M&&B.values)return je.then(function(Te){var it=Te.result;return V.addKeys(it),_e});var $e=B.values?_e.result.map(S):_e.result;B.values?V.addKeys($e):he.addKeys($e)}else if($==="openCursor"){var Me=_e,Ke=B.values;return Me&&Object.create(Me,{key:{get:function(){return he.addKey(Me.primaryKey),Me.key}},primaryKey:{get:function(){var Te=Me.primaryKey;return he.addKey(Te),Te}},value:{get:function(){return Ke&&V.addKey(Me.primaryKey),Me.value}}})}return _e})}}return h[$].apply(this,arguments)}}),R}})}};function Sh(r,i,u,f){function h(v){var w=r(v.name||"");function C(M){return M!=null?v.extractKey(M):null}var S=function(M){return v.multiEntry&&c(M)?M.forEach(function(N){return w.addKey(N)}):w.addKey(M)};(u||f).forEach(function(M,N){var R=u&&C(u[N]),W=f&&C(f[N]);ze(R,W)!==0&&(R!=null&&S(R),W!=null&&S(W))})}i.indexes.forEach(h)}function Ac(r,i,u){if(u.numFailures===0)return i;if(i.type==="deleteRange")return null;var f=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;if(u.numFailures===f)return null;var h=n({},i);return c(h.keys)&&(h.keys=h.keys.filter(function(v,w){return!(w in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(v,w){return!(w in u.failures)})),h}function Th(r,i){return i.lower===void 0?!0:i.lowerOpen?ze(r,i.lower)>0:ze(r,i.lower)>=0}function kh(r,i){return i.upper===void 0?!0:i.upperOpen?ze(r,i.upper)<0:ze(r,i.upper)<=0}function Ms(r,i){return Th(r,i)&&kh(r,i)}function $c(r,i,u,f,h,v){if(!u||u.length===0)return r;var w=i.query.index,C=w.multiEntry,S=i.query.range,M=f.schema.primaryKey,N=M.extractKey,R=w.extractKey,W=(w.lowLevelIndex||w).extractKey,ae=u.reduce(function($,B){var U=$,G=[];if(B.type==="add"||B.type==="put")for(var te=new yt,ne=B.values.length-1;ne>=0;--ne){var re=B.values[ne],V=N(re);if(!te.hasKey(V)){var he=R(re);(C&&c(he)?he.some(function(_e){return Ms(_e,S)}):Ms(he,S))&&(te.addKey(V),G.push(re))}}switch(B.type){case"add":{var ve=new yt().addKeys(i.values?$.map(function(_e){return N(_e)}):$);U=$.concat(i.values?G.filter(function(_e){var $e=N(_e);return ve.hasKey($e)?!1:(ve.addKey($e),!0)}):G.map(function(_e){return N(_e)}).filter(function(_e){return ve.hasKey(_e)?!1:(ve.addKey(_e),!0)}));break}case"put":{var me=new yt().addKeys(B.values.map(function(_e){return N(_e)}));U=$.filter(function(_e){return!me.hasKey(i.values?N(_e):_e)}).concat(i.values?G:G.map(function(_e){return N(_e)}));break}case"delete":var ke=new yt().addKeys(B.keys);U=$.filter(function(_e){return!ke.hasKey(i.values?N(_e):_e)});break;case"deleteRange":var je=B.range;U=$.filter(function(_e){return!Ms(N(_e),je)});break}return U},r);return ae===r?r:(ae.sort(function($,B){return ze(W($),W(B))||ze(N($),N(B))}),i.limit&&i.limit<1/0&&(ae.length>i.limit?ae.length=i.limit:r.length===i.limit&&ae.length<i.limit&&(h.dirty=!0)),v?Object.freeze(ae):ae)}function Nc(r,i){return ze(r.lower,i.lower)===0&&ze(r.upper,i.upper)===0&&!!r.lowerOpen==!!i.lowerOpen&&!!r.upperOpen==!!i.upperOpen}function Ih(r,i,u,f){if(r===void 0)return i!==void 0?-1:0;if(i===void 0)return 1;var h=ze(r,i);if(h===0){if(u&&f)return 0;if(u)return 1;if(f)return-1}return h}function Mh(r,i,u,f){if(r===void 0)return i!==void 0?1:0;if(i===void 0)return-1;var h=ze(r,i);if(h===0){if(u&&f)return 0;if(u)return-1;if(f)return 1}return h}function Oh(r,i){return Ih(r.lower,i.lower,r.lowerOpen,i.lowerOpen)<=0&&Mh(r.upper,i.upper,r.upperOpen,i.upperOpen)>=0}function Rh(r,i,u,f){var h=Sr["idb://".concat(r,"/").concat(i)];if(!h)return[];var v=h.queries[u];if(!v)return[null,!1,h,null];var w=f.query?f.query.index.name:null,C=v[w||""];if(!C)return[null,!1,h,null];switch(u){case"query":var S=C.find(function(R){return R.req.limit===f.limit&&R.req.values===f.values&&Nc(R.req.query.range,f.query.range)});if(S)return[S,!0,h,C];var M=C.find(function(R){var W="limit"in R.req?R.req.limit:1/0;return W>=f.limit&&(f.values?R.req.values:!0)&&Oh(R.req.query.range,f.query.range)});return[M,!1,h,C];case"count":var N=C.find(function(R){return Nc(R.req.query.range,f.query.range)});return[N,!!N,h,C]}}function Ph(r,i,u,f){r.subscribers.add(u),f.addEventListener("abort",function(){r.subscribers.delete(u),r.subscribers.size===0&&Ah(r,i)})}function Ah(r,i){setTimeout(function(){r.subscribers.size===0&&ee(i,r)},3e3)}var $h={stack:"dbcore",level:0,name:"Cache",create:function(r){var i=r.schema.name,u=n(n({},r),{transaction:function(f,h,v){var w=r.transaction(f,h,v);if(h==="readwrite"){var C=new AbortController,S=C.signal,M=function(N){return function(){if(C.abort(),h==="readwrite"){for(var R=new Set,W=0,ae=f;W<ae.length;W++){var $=ae[W],B=Sr["idb://".concat(i,"/").concat($)];if(B){var U=r.table($),G=B.optimisticOps.filter(function(Ke){return Ke.trans===w});if(w._explicit&&N&&w.mutatedParts)for(var te=0,ne=Object.values(B.queries.query);te<ne.length;te++)for(var re=ne[te],V=0,he=re.slice();V<he.length;V++){var ve=he[V];xs(ve.obsSet,w.mutatedParts)&&(ee(re,ve),ve.subscribers.forEach(function(Ke){return R.add(Ke)}))}else if(G.length>0){B.optimisticOps=B.optimisticOps.filter(function(Ke){return Ke.trans!==w});for(var me=0,ke=Object.values(B.queries.query);me<ke.length;me++)for(var re=ke[me],je=0,_e=re.slice();je<_e.length;je++){var ve=_e[je];if(ve.res!=null&&w.mutatedParts)if(N&&!ve.dirty){var $e=Object.isFrozen(ve.res),Me=$c(ve.res,ve.req,G,U,ve,$e);ve.dirty?(ee(re,ve),ve.subscribers.forEach(function(it){return R.add(it)})):Me!==ve.res&&(ve.res=Me,ve.promise=ge.resolve({result:Me}))}else ve.dirty&&ee(re,ve),ve.subscribers.forEach(function(it){return R.add(it)})}}}}R.forEach(function(Ke){return Ke()})}}};w.addEventListener("abort",M(!1),{signal:S}),w.addEventListener("error",M(!1),{signal:S}),w.addEventListener("complete",M(!0),{signal:S})}return w},table:function(f){var h=r.table(f),v=h.schema.primaryKey,w=n(n({},h),{mutate:function(C){var S=Ce.trans;if(v.outbound||S.db._options.cache==="disabled"||S.explicit||S.idbtrans.mode!=="readwrite")return h.mutate(C);var M=Sr["idb://".concat(i,"/").concat(f)];if(!M)return h.mutate(C);var N=h.mutate(C);return(C.type==="add"||C.type==="put")&&(C.values.length>=50||Is(v,C).some(function(R){return R==null}))?N.then(function(R){var W=n(n({},C),{values:C.values.map(function($,B){var U;if(R.failures[B])return $;var G=!((U=v.keyPath)===null||U===void 0)&&U.includes(".")?E($):n({},$);return De(G,v.keyPath,R.results[B]),G})}),ae=Ac(M,W,R);M.optimisticOps.push(ae),queueMicrotask(function(){return C.mutatedParts&&ra(C.mutatedParts)})}):(M.optimisticOps.push(C),C.mutatedParts&&ra(C.mutatedParts),N.then(function(R){if(R.numFailures>0){ee(M.optimisticOps,C);var W=Ac(M,C,R);W&&M.optimisticOps.push(W),C.mutatedParts&&ra(C.mutatedParts)}}),N.catch(function(){ee(M.optimisticOps,C),C.mutatedParts&&ra(C.mutatedParts)})),N},query:function(C){var S;if(!Rc(Ce,h)||!Pc("query",C))return h.query(C);var M=((S=Ce.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",N=Ce,R=N.requery,W=N.signal,ae=Rh(i,f,"query",C),$=ae[0],B=ae[1],U=ae[2],G=ae[3];if($&&B)$.obsSet=C.obsSet;else{var te=h.query(C).then(function(ne){var re=ne.result;if($&&($.res=re),M){for(var V=0,he=re.length;V<he;++V)Object.freeze(re[V]);Object.freeze(re)}else ne.result=E(re);return ne}).catch(function(ne){return G&&$&&ee(G,$),Promise.reject(ne)});$={obsSet:C.obsSet,promise:te,subscribers:new Set,type:"query",req:C,dirty:!1},G?G.push($):(G=[$],U||(U=Sr["idb://".concat(i,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),U.queries.query[C.query.index.name||""]=G)}return Ph($,G,R,W),$.promise.then(function(ne){return{result:$c(ne.result,C,U?.optimisticOps,h,$,M)}})}});return w}});return u}};function oa(r,i){return new Proxy(r,{get:function(u,f,h){return f==="db"?i:Reflect.get(u,f,h)}})}var Pn=(function(){function r(i,u){var f=this;this._middlewares={},this.verno=0;var h=r.dependencies;this._options=u=n({addons:r.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var v=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:qe,dbReadyPromise:null,cancelOpen:qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};w.dbReadyPromise=new ge(function(S){w.dbReadyResolve=S}),w.openCanceller=new ge(function(S,M){w.cancelOpen=M}),this._state=w,this.name=i,this.on=Ci(this,"populate","blocked","versionchange","close",{ready:[Ga,qe]}),this.once=function(S,M){var N=function(){for(var R=[],W=0;W<arguments.length;W++)R[W]=arguments[W];f.on(S).unsubscribe(N),M.apply(f,R)};return f.on(S,N)},this.on.ready.subscribe=oe(this.on.ready.subscribe,function(S){return function(M,N){r.vip(function(){var R=f._state;if(R.openComplete)R.dbOpenError||ge.resolve().then(M),N&&S(M);else if(R.onReadyBeingFired)R.onReadyBeingFired.push(M),N&&S(M);else{S(M);var W=f;N||S(function ae(){W.on.ready.unsubscribe(M),W.on.ready.unsubscribe(ae)})}})}}),this.Collection=Kd(this),this.Table=Yd(this),this.Transaction=Xd(this),this.Version=hh(this),this.WhereClause=Gd(this),this.on("versionchange",function(S){S.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(S){!S.newVersion||S.newVersion<S.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(S.oldVersion/10))}),this._maxKey=Ii(u.IDBKeyRange),this._createTransaction=function(S,M,N,R){return new f.Transaction(S,M,N,f._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(S){f.on("blocked").fire(S),Wr.filter(function(M){return M.name===f.name&&M!==f&&!M._state.vcFired}).map(function(M){return M.on("versionchange").fire(S)})},this.use(Eh),this.use($h),this.use(Ch),this.use(wh),this.use(Dh);var C=new Proxy(this,{get:function(S,M,N){if(M==="_vip")return!0;if(M==="table")return function(W){return oa(f.table(W),C)};var R=Reflect.get(S,M,N);return R instanceof yc?oa(R,C):M==="tables"?R.map(function(W){return oa(W,C)}):M==="_createTransaction"?function(){var W=R.apply(this,arguments);return oa(W,C)}:R}});this.vip=C,v.forEach(function(S){return S(f)})}return r.prototype.version=function(i){if(isNaN(i)||i<.1)throw new Ee.Type("Given version is not a positive number");if(i=Math.round(i*10)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var u=this._versions,f=u.filter(function(h){return h._cfg.version===i})[0];return f||(f=new this.Version(i),u.push(f),u.sort(ih),f.stores({}),this._state.autoSchema=!1,f)},r.prototype._whenReady=function(i){var u=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?i():new ge(function(f,h){if(u._state.openComplete)return h(new Ee.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new Ee.DatabaseClosed);return}u.open().catch(qe)}u._state.dbReadyPromise.then(f,h)}).then(i)},r.prototype.use=function(i){var u=i.stack,f=i.create,h=i.level,v=i.name;v&&this.unuse({stack:u,name:v});var w=this._middlewares[u]||(this._middlewares[u]=[]);return w.push({stack:u,create:f,level:h??10,name:v}),w.sort(function(C,S){return C.level-S.level}),this},r.prototype.unuse=function(i){var u=i.stack,f=i.name,h=i.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(v){return h?v.create!==h:f?v.name!==f:!1})),this},r.prototype.open=function(){var i=this;return xr(Gn,function(){return vh(i)})},r.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,u=Wr.indexOf(this);if(u>=0&&Wr.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new ge(function(f){i.dbReadyResolve=f}),i.openCanceller=new ge(function(f,h){i.cancelOpen=h}))},r.prototype.close=function(i){var u=i===void 0?{disableAutoOpen:!0}:i,f=u.disableAutoOpen,h=this._state;f?(h.isBeingOpened&&h.cancelOpen(new Ee.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new Ee.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},r.prototype.delete=function(i){var u=this;i===void 0&&(i={disableAutoOpen:!0});var f=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new ge(function(v,w){var C=function(){u.close(i);var S=u._deps.indexedDB.deleteDatabase(u.name);S.onsuccess=Je(function(){yh(u._deps,u.name),v()}),S.onerror=_n(w),S.onblocked=u._fireOnBlocked};if(f)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(C):C()})},r.prototype.backendDB=function(){return this.idbdb},r.prototype.isOpen=function(){return this.idbdb!==null},r.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},r.prototype.hasFailed=function(){return this._state.dbOpenError!==null},r.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(r.prototype,"tables",{get:function(){var i=this;return s(this._allTables).map(function(u){return i._allTables[u]})},enumerable:!1,configurable:!0}),r.prototype.transaction=function(){var i=_h.apply(this,arguments);return this._transaction.apply(this,i)},r.prototype._transaction=function(i,u,f){var h=this,v=Ce.trans;(!v||v.db!==this||i.indexOf("!")!==-1)&&(v=null);var w=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");var C,S;try{if(S=u.map(function(N){var R=N instanceof h.Table?N.name:N;if(typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),i=="r"||i===ss)C=ss;else if(i=="rw"||i==us)C=us;else throw new Ee.InvalidArgument("Invalid transaction mode: "+i);if(v){if(v.mode===ss&&C===us)if(w)v=null;else throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v&&S.forEach(function(N){if(v&&v.storeNames.indexOf(N)===-1)if(w)v=null;else throw new Ee.SubTransaction("Table "+N+" not included in parent transaction.")}),w&&v&&!v.active&&(v=null)}}catch(N){return v?v._promise(null,function(R,W){W(N)}):at(N)}var M=Mc.bind(null,this,C,S,v,f);return v?v._promise(C,M,"lock"):Ce.trans?xr(Ce.transless,function(){return h._whenReady(M)}):this._whenReady(M)},r.prototype.table=function(i){if(!g(this._allTables,i))throw new Ee.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},r})(),Nh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jh=(function(){function r(i){this._subscribe=i}return r.prototype.subscribe=function(i,u,f){return this._subscribe(!i||typeof i=="function"?{next:i,error:u,complete:f}:i)},r.prototype[Nh]=function(){return this},r})(),aa;try{aa={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{aa={indexedDB:null,IDBKeyRange:null}}function jc(r){var i=!1,u,f=new jh(function(h){var v=xe(r);function w(G){var te=Kr();try{v&&Zr();var ne=Qn(r,G);return v&&(ne=ne.finally(Xn)),ne}finally{te&&Ur()}}var C=!1,S,M={},N={},R={get closed(){return C},unsubscribe:function(){C||(C=!0,S&&S.abort(),W&&er.storagemutated.unsubscribe(B))}};h.start&&h.start(R);var W=!1,ae=function(){return is(U)};function $(){return xs(N,M)}var B=function(G){na(M,G),$()&&ae()},U=function(){if(!(C||!aa.indexedDB)){M={};var G={};S&&S.abort(),S=new AbortController;var te={subscr:G,signal:S.signal,requery:ae,querier:r,trans:null},ne=w(te);Promise.resolve(ne).then(function(re){i=!0,u=re,!(C||te.signal.aborted)&&(M={},N=G,!d(N)&&!W&&(er(ki,B),W=!0),is(function(){return!C&&h.next&&h.next(re)}))},function(re){i=!1,["DatabaseClosedError","AbortError"].includes(re?.name)||C||is(function(){C||h.error&&h.error(re)})})}};return setTimeout(ae,0),R});return f.hasValue=function(){return i},f.getValue=function(){return u},f}var Tr=Pn;b(Tr,n(n({},vr),{delete:function(r){var i=new Tr(r,{addons:[]});return i.delete()},exists:function(r){return new Tr(r,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return mh(Tr.dependencies).then(r)}catch{return at(new Ee.MissingAPI)}},defineClass:function(){function r(i){l(this,i)}return r},ignoreTransaction:function(r){return Ce.trans?xr(Ce.transless,r):r()},vip:bs,async:function(r){return function(){try{var i=Ts(r.apply(this,arguments));return!i||typeof i.then!="function"?ge.resolve(i):i}catch(u){return at(u)}}},spawn:function(r,i,u){try{var f=Ts(r.apply(u,i||[]));return!f||typeof f.then!="function"?ge.resolve(f):f}catch(h){return at(h)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(r,i){var u=ge.resolve(typeof r=="function"?Tr.ignoreTransaction(r):r).timeout(i||6e4);return Ce.trans?Ce.trans.waitFor(u):u},Promise:ge,debug:{get:function(){return vn},set:function(r){ec(r)}},derive:O,extend:l,props:b,override:oe,Events:Ci,on:er,liveQuery:jc,extendObservabilitySet:na,getByKeyPath:we,setByKeyPath:De,delByKeyPath:be,shallowClone:q,deepClone:E,getObjectDiff:ks,cmp:ze,asap:le,minKey:as,addons:[],connections:Wr,errnames:ct,dependencies:aa,cache:Sr,semVer:cc,version:cc.split(".").map(function(r){return parseInt(r)}).reduce(function(r,i,u){return r+i/Math.pow(10,u*2)})})),Tr.maxKey=Ii(Tr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(er(ki,function(r){if(!tr){var i;i=new CustomEvent(fs,{detail:r}),tr=!0,dispatchEvent(i),tr=!1}}),addEventListener(fs,function(r){var i=r.detail;tr||Os(i)}));function Os(r){var i=tr;try{tr=!0,er.storagemutated.fire(r),Ss(r,!0)}finally{tr=i}}var tr=!1,nr,Rs=function(){};typeof BroadcastChannel<"u"&&(Rs=function(){nr=new BroadcastChannel(fs),nr.onmessage=function(r){return r.data&&Os(r.data)}},Rs(),typeof nr.unref=="function"&&nr.unref(),er(ki,function(r){tr||nr.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!Pn.disableBfCache&&r.persisted){vn&&console.debug("Dexie: handling persisted pagehide"),nr?.close();for(var i=0,u=Wr;i<u.length;i++){var f=u[i];f.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(r){!Pn.disableBfCache&&r.persisted&&(vn&&console.debug("Dexie: handling persisted pageshow"),Rs(),Os({all:new yt(-1/0,[[]])}))}));function Bh(r){return new Ei({add:r})}function Lh(r){return new Ei({remove:r})}function Yh(r,i){return new Ei({replacePrefix:[r,i]})}ge.rejectionMapper=_i,ec(vn);var zh=Object.freeze({__proto__:null,Dexie:Pn,liveQuery:jc,Entity:dc,cmp:ze,PropModification:Ei,replacePrefix:Yh,add:Bh,remove:Lh,default:Pn,RangeSet:yt,mergeRanges:Ri,rangesOverlap:Sc});return n(Pn,zh,{default:Pn}),Pn})});function As(t){if(!t)return{};let e={},n=(o,a)=>{if(!(!o||typeof o!="object"))for(let s in o)Object.hasOwn(o,s)&&a[s]===void 0&&(a[s]=o[s])};return n(t,e),n(t.item,e),n(t.reference,e),e}var Wc=Yt(Qt());var{Fragment:Ys,jsx:ce,jsxs:Le}=Spicetify.ReactJSX;var da={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},Zm=t=>{let{path:e,size:n}=da[t],o=a=>{let s=(0,Wc.c)(4),{size:c,fill:l}=a,y=c===void 0?n:c,m=l===void 0?"currentColor":l,g;s[0]===Symbol.for("react.memo_cache_sentinel")?(g=ce("path",{d:e}),s[0]=g):g=s[0];let b;return s[1]!==m||s[2]!==y?(b=ce("svg",{fill:m,height:y,role:"img",viewBox:`0 0 ${n} ${n}`,width:y,children:g}),s[1]=m,s[2]=y,s[3]=b):b=s[3],b};return o.defaultProps={size:n,fill:"currentColor"},o},{raw:Wm,react:qm,html:Hm}=Object.keys(da).reduce((t,e)=>(t.raw[e]=da[e].path,t.react[e]=Zm(e),t.html[e]=`<path d="${da[e].path}"/>`,t),{raw:{},react:{},html:{}}),wt={React:qm,HTML:Hm,RAW:Wm};var Qc=Yt(Qt());Gt();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:b0,createPortal:w0,createRoot:qc,findDOMNode:D0,flushSync:x0,hydrate:E0,hydrateRoot:C0,render:S0,unmountComponentAtNode:T0,unstable_batchedUpdates:k0,unstable_renderSubtreeIntoContainer:I0,version:M0}=Spicetify.ReactDOM,O0=Spicetify.ReactDOM;var Hc=new CSSStyleSheet;Hc.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var Gc=Hc;document.adoptedStyleSheets.push(Gc);var ji=null,zs="popup-modal-container",Fs=()=>{let t=document.getElementById(zs);ji&&(ji.unmount(),ji=null),t&&t.remove(),document.body.style.overflow="auto"},Gm=st(t=>{let e=(0,Qc.c)(44),{title:n,content:o,isLarge:a,buttons:s,icon:c,template:l,onClose:y}=t,m=Ht(null),g,b;e[0]!==y?(g=()=>{document.body.style.overflow="hidden";let pe=we=>{we.key==="Escape"&&(we.preventDefault(),y())};return document.addEventListener("keydown",pe),()=>{document.removeEventListener("keydown",pe)}},b=[y],e[0]=y,e[1]=g,e[2]=b):(g=e[1],b=e[2]),An(g,b);let D;e[3]!==y?(D=()=>{y()},e[3]=y,e[4]=D):D=e[4];let T=D,O;e[5]!==T?(O=pe=>{pe.target===m.current&&T()},e[5]=T,e[6]=O):O=e[6];let A=O,j;e[7]!==o?(j=()=>$s(o)?o:typeof o=="function"?ce(o,{}):o,e[7]=o,e[8]=j):j=e[8];let H=j;if(l===!0){let pe=`modal__container${a?" modal__container--large":""}`,we;e[9]!==c?(we=c&&ce("div",{className:"modal__icon",children:c}),e[9]=c,e[10]=we):we=e[10];let De;e[11]!==n?(De=n&&ce("h1",{className:"modal__title",children:n}),e[11]=n,e[12]=De):De=e[12];let be;e[13]!==we||e[14]!==De?(be=Le("div",{className:"modal__titleContainer",children:[we,De]}),e[13]=we,e[14]=De,e[15]=be):be=e[15];let q;e[16]===Symbol.for("react.memo_cache_sentinel")?(q=ce(wt.React.close,{size:18}),e[16]=q):q=e[16];let X;e[17]!==T?(X=ce(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:ce("button",{className:"modal__button modal__button--close",onClick:T,children:q})}),e[17]=T,e[18]=X):X=e[18];let Q;e[19]!==s||e[20]!==X?(Q=Le("div",{className:"modal__buttonContainer",children:[s,X]}),e[19]=s,e[20]=X,e[21]=Q):Q=e[21];let ye;e[22]!==Q||e[23]!==be?(ye=Le("div",{className:"modal__header",children:[be,Q]}),e[22]=Q,e[23]=be,e[24]=ye):ye=e[24];let x;e[25]!==H?(x=H(),e[25]=H,e[26]=x):x=e[26];let Y;e[27]!==x?(Y=ce("div",{className:"modal__content",children:x}),e[27]=x,e[28]=Y):Y=e[28];let d;e[29]!==ye||e[30]!==Y||e[31]!==pe?(d=Le("div",{className:pe,children:[ye,Y]}),e[29]=ye,e[30]=Y,e[31]=pe,e[32]=d):d=e[32];let p;return e[33]!==A||e[34]!==d?(p=ce("div",{className:"modal",onClick:A,ref:m,children:d}),e[33]=A,e[34]=d,e[35]=p):p=e[35],p}let J=`modal__container${a?" modal__container--large":""}`,oe;e[36]!==H?(oe=H(),e[36]=H,e[37]=oe):oe=e[37];let ie;e[38]!==J||e[39]!==oe?(ie=ce("div",{className:J,children:oe}),e[38]=J,e[39]=oe,e[40]=ie):ie=e[40];let le;return e[41]!==A||e[42]!==ie?(le=ce("div",{className:"modal",onClick:A,ref:m,children:ie}),e[41]=A,e[42]=ie,e[43]=le):le=e[43],le}),kr=t=>{document.getElementById(zs)&&Fs();let e=document.createElement("div");e.id=zs,document.body.appendChild(e),ji=qc(e),ji.render(ce(Gm,{...t,onClose:Fs}))};kr.hide=Fs;var gr=Yt(Qt());var z=Yt(Xc()),Jt=z.default.BigInt(0),to=z.default.BigInt(1),Nu=z.default.BigInt(2),Qm=z.default.BigInt(10),Xm=z.default.BigInt(24),Vm=z.default.BigInt(60),Jm=z.default.BigInt(1e3),bo=z.default.BigInt(1e6),Gi=z.default.BigInt(1e9),Rl=z.default.multiply(z.default.BigInt(3600),Gi),ep=z.default.multiply(Vm,Gi),cr=z.default.multiply(Rl,Xm);function Nn(t){return typeof t=="bigint"?z.default.BigInt(t.toString(10)):t}function Pl(t){return z.default.equal(z.default.remainder(t,Nu),Jt)}function Ir(t){return z.default.lessThan(t,Jt)?z.default.unaryMinus(t):t}function pa(t,e){return z.default.lessThan(t,e)?-1:z.default.greaterThan(t,e)?1:0}function zi(t,e){return{quotient:z.default.divide(t,e),remainder:z.default.remainder(t,e)}}var Vc,Jc,Oe="slot-epochNanoSeconds",Re="slot-iso-date",Xe="slot-iso-date-time",nt="slot-time",se="slot-calendar",Al="slot-date-brand",$l="slot-year-month-brand",Nl="slot-month-day-brand",We="slot-time-zone",Ct="slot-years",St="slot-months",zt="slot-weeks",Tt="slot-days",kt="slot-hours",It="slot-minutes",Mt="slot-seconds",Ot="slot-milliseconds",Rt="slot-microseconds",Ft="slot-nanoseconds",jl="date",Bl="ym",Ll="md",Yl="time",zl="datetime",Fl="instant",Yr="original",ti="timezone-canonical",Qs="timezone-original",Fi="calendar-id",Kl="locale",Xs="options",Ul=new WeakMap,Vs=Symbol.for("@@Temporal__GetSlots");(Vc=globalThis)[Vs]||(Vc[Vs]=function(t){return Ul.get(t)});var Oa=globalThis[Vs],Js=Symbol.for("@@Temporal__CreateSlots");(Jc=globalThis)[Js]||(Jc[Js]=function(t){Ul.set(t,Object.create(null))});var qn=globalThis[Js];function jt(t,...e){if(!t||typeof t!="object")return!1;let n=Oa(t);return!!n&&e.every(o=>o in n)}function _(t,e){let n=Oa(t)?.[e];if(n===void 0)throw new TypeError(`Missing internal slot ${e}`);return n}function Be(t,e,n){let o=Oa(t);if(o===void 0)throw new TypeError("Missing slots for the given container");if(o[e])throw new TypeError(`${e} already has set`);o[e]=n}var eu={};function Hn(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});let n=Object.getOwnPropertyNames(t);for(let a=0;a<n.length;a++){let s=n[a],c=Object.getOwnPropertyDescriptor(t,s);c.configurable&&c.enumerable&&(c.enumerable=!1,Object.defineProperty(t,s,c))}let o=Object.getOwnPropertyNames(t.prototype);for(let a=0;a<o.length;a++){let s=o[a],c=Object.getOwnPropertyDescriptor(t.prototype,s);c.configurable&&c.enumerable&&(c.enumerable=!1,Object.defineProperty(t.prototype,s,c))}tu(e,t),tu(`${e}.prototype`,t.prototype)}function tu(t,e){let n=`%${t}%`;if(eu[n]!==void 0)throw new Error(`intrinsic ${t} already exists`);eu[n]=e}function pt(t){return eu[t]}function ri(t,e){let n=t;if(n===0)return{div:n,mod:n};let o=Math.sign(n);n=Math.abs(n);let a=Math.trunc(1+Math.log10(n));if(e>=a)return{div:0*o,mod:o*n};if(e===0)return{div:o*n,mod:0*o};let s=n.toPrecision(a);return{div:o*Number.parseInt(s.slice(0,a-e),10),mod:o*Number.parseInt(s.slice(a-e),10)}}function Zs(t,e,n){let o=t,a=n;if(o===0)return a;let s=Math.sign(o)||Math.sign(a);o=Math.abs(o),a=Math.abs(a);let c=o.toPrecision(Math.trunc(1+Math.log10(o)));if(a===0)return s*Number.parseInt(c+"0".repeat(e),10);let l=c+a.toPrecision(Math.trunc(1+Math.log10(a))).padStart(e,"0");return s*Number.parseInt(l,10)}function Ra(t,e){let n=e==="negative";switch(t){case"ceil":return n?"zero":"infinity";case"floor":return n?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return n?"half-zero":"half-infinity";case"halfFloor":return n?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function Pa(t,e,n,o,a){return a==="zero"?t:a==="infinity"?e:n<0?t:n>0?e:a==="half-zero"?t:a==="half-infinity"?e:o?t:e}var Ge=class t{constructor(e){this.totalNs=Nn(e),this.sec=z.default.toNumber(z.default.divide(this.totalNs,Gi)),this.subsec=z.default.toNumber(z.default.remainder(this.totalNs,Gi))}static validateNew(e,n){if(z.default.greaterThan(Ir(e),t.MAX))throw new RangeError(`${n} of duration time units cannot exceed ${t.MAX} s`);return new t(e)}static fromEpochNsDiff(e,n){let o=z.default.subtract(Nn(e),Nn(n));return new t(o)}static fromComponents(e,n,o,a,s,c){let l=z.default.add(z.default.add(z.default.add(z.default.add(z.default.add(z.default.BigInt(c),z.default.multiply(z.default.BigInt(s),Jm)),z.default.multiply(z.default.BigInt(a),bo)),z.default.multiply(z.default.BigInt(o),Gi)),z.default.multiply(z.default.BigInt(n),ep)),z.default.multiply(z.default.BigInt(e),Rl));return t.validateNew(l,"total")}abs(){return new t(Ir(this.totalNs))}add(e){return t.validateNew(z.default.add(this.totalNs,e.totalNs),"sum")}add24HourDays(e){return t.validateNew(z.default.add(this.totalNs,z.default.multiply(z.default.BigInt(e),cr)),"sum")}addToEpochNs(e){return z.default.add(Nn(e),this.totalNs)}cmp(e){return pa(this.totalNs,e.totalNs)}divmod(e){let{quotient:n,remainder:o}=zi(this.totalNs,z.default.BigInt(e));return{quotient:z.default.toNumber(n),remainder:new t(o)}}fdiv(e){let n=Nn(e),o=z.default.BigInt(n),{quotient:a,remainder:s}=zi(this.totalNs,o),c=[],l,y=(z.default.lessThan(this.totalNs,Jt)?-1:1)*Math.sign(z.default.toNumber(n));for(;!z.default.equal(s,Jt)&&c.length<50;)s=z.default.multiply(s,Qm),{quotient:l,remainder:s}=zi(s,o),c.push(Math.abs(z.default.toNumber(l)));return y*+(Ir(a).toString()+"."+c.join(""))}isZero(){return z.default.equal(this.totalNs,Jt)}round(e,n){let o=Nn(e);if(z.default.equal(o,to))return this;let{quotient:a,remainder:s}=zi(this.totalNs,o),c=z.default.lessThan(this.totalNs,Jt)?"negative":"positive",l=z.default.multiply(Ir(a),o),y=z.default.add(l,o),m=pa(Ir(z.default.multiply(s,Nu)),o),g=Ra(n,c),b=z.default.equal(Ir(this.totalNs),l)?l:Pa(l,y,m,Pl(a),g),D=c==="positive"?b:z.default.unaryMinus(b);return t.validateNew(D,"rounding")}sign(){return this.cmp(new t(Jt))}subtract(e){return t.validateNew(z.default.subtract(this.totalNs,e.totalNs),"difference")}};Ge.MAX=z.default.BigInt("9007199254740991999999999"),Ge.ZERO=new Ge(Jt);var el=/[A-Za-z._][A-Za-z._0-9+-]*/,wo=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${el.source})(?:\\/(?:${el.source}))*)`),Zl=/(?:[+-]\d{6}|\d{4})/,ya=/(?:0[1-9]|1[0-2])/,nu=/(?:0[1-9]|[12]\d|3[01])/,tp=new RegExp(`(${Zl.source})(?:-(${ya.source})-(${nu.source})|(${ya.source})(${nu.source}))`),Wl=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,ql=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,Hl=new RegExp(`([zZ])|${ql.source}?`),si=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,np=new RegExp([`^${tp.source}`,`(?:(?:[tT]|\\s+)${Wl.source}(?:${Hl.source})?)?`,`(?:\\[!?(${wo.source})\\])?`,`((?:${si.source})*)$`].join("")),rp=new RegExp([`^[tT]?${Wl.source}`,`(?:${Hl.source})?`,`(?:\\[!?${wo.source}\\])?`,`((?:${si.source})*)$`].join("")),ip=new RegExp(`^(${Zl.source})-?(${ya.source})(?:\\[!?${wo.source}\\])?((?:${si.source})*)$`),op=new RegExp(`^(?:--)?(${ya.source})-?(${nu.source})(?:\\[!?${wo.source}\\])?((?:${si.source})*)$`),Ws=/(\d+)(?:[.,](\d{1,9}))?/,ap=new RegExp(`(?:${Ws.source}H)?(?:${Ws.source}M)?(?:${Ws.source}S)?`),sp=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${ap.source})?$`,"i"),lr=864e5,ga=1e6*lr,up=6e10,Gl=1e8*lr,ui=yn(Gl),no=z.default.unaryMinus(ui),cp=z.default.add(z.default.subtract(no,cr),to),lp=z.default.subtract(z.default.add(ui,cr),to),fp=146097*lr,tl=-271821,nl=275760,Qi=Date.UTC(1847,0,1),dp=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],hp=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function rt(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Aa(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(t)}function $a(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(t)}function Ae(t){let e=Aa(t);if(e===0)return 0;if(Number.isNaN(e)||e===1/0||e===-1/0)throw new RangeError("invalid number value");let n=Math.trunc(e);return n===0?0:n}function rl(t,e){let n=Ae(t);if(n<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function mn(t){let e=Aa(t);if(Number.isNaN(e))throw new RangeError("not a number");if(e===1/0||e===-1/0)throw new RangeError("infinity is out of range");if(!(function(n){if(typeof n!="number"||Number.isNaN(n)||n===1/0||n===-1/0)return!1;let o=Math.abs(n);return Math.floor(o)===o})(e))throw new RangeError(`unsupported fractional value ${t}`);return e===0?0:e}function ro(t,e){return String(t).padStart(e,"0")}function ut(t){if(typeof t!="string")throw new TypeError(`expected a string, not ${String(t)}`);return t}function ru(t,e){if(rt(t)){let n=t?.toString();if(typeof n=="string"||typeof n=="number")return n;throw new TypeError("Cannot convert object to primitive value")}return t}var iu=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],mp={era:$a,eraYear:Ae,year:Ae,month:rl,monthCode:function(t){let e=ut(ru(t));if(e.length<3||e.length>4||e[0]!=="M"||"0123456789".indexOf(e[1])===-1||"0123456789".indexOf(e[2])===-1||e[1]+e[2]==="00"&&e[3]!=="L"||e[3]!=="L"&&e[3]!==void 0)throw new RangeError(`bad month code ${e}; must match M01-M99 or M00L-M99L`);return e},day:rl,hour:Ae,minute:Ae,second:Ae,millisecond:Ae,microsecond:Ae,nanosecond:Ae,offset:function(t){let e=ut(ru(t));return gi(e),e},timeZone:$t},pp={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},ci=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],il=Object.fromEntries(ci.map(t=>[t[0],t[1]])),yp=Object.fromEntries(ci.map(([t,e])=>[e,t])),Xi=ci.map(([,t])=>t),li={day:ga,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},va=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],gp=Intl.DateTimeFormat,ol=new Map;function Ql(t){let e=uo(t),n=ol.get(e);return n===void 0&&(n=new gp("en-us",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),ol.set(e,n)),n}function dt(t){return jt(t,Oe)&&!jt(t,We,se)}function et(t){return jt(t,Ct,St,Tt,kt,It,Mt,Ot,Rt,Ft)}function tt(t){return jt(t,Al)}function ot(t){return jt(t,nt)}function Qe(t){return jt(t,Xe)}function ht(t){return jt(t,$l)}function Vt(t){return jt(t,Nl)}function Ye(t){return jt(t,Oe,We,se)}function K(t,e){if(!e(t))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function mi(t){if(jt(t,se)||jt(t,We))throw new TypeError("with() does not support a calendar or timeZone property");if(ot(t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Do(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${t}]`}function Na(t){let e,n,o=!1;for(si.lastIndex=0;n=si.exec(t);){let{1:a,2:s,3:c}=n;if(s==="u-ca"){if(e===void 0)e=c,o=a==="!";else if(a==="!"||o)throw new RangeError(`Invalid annotations in ${t}: more than one u-ca present with critical flag`)}else if(a==="!")throw new RangeError(`Unrecognized annotation: !${s}=${c}`)}return e}function Mn(t){let e=np.exec(t);if(!e)throw new RangeError(`invalid RFC 9557 string: ${t}`);let n=Na(e[16]),o=e[1];if(o==="-000000")throw new RangeError(`invalid RFC 9557 string: ${t}`);let a=+o,s=+(e[2]??e[4]??1),c=+(e[3]??e[5]??1),l=e[6]!==void 0,y=+(e[6]??0),m=+(e[7]??e[10]??0),g=+(e[8]??e[11]??0);g===60&&(g=59);let b=(e[9]??e[12]??"")+"000000000",D=+b.slice(0,3),T=+b.slice(3,6),O=+b.slice(6,9),A,j=!1;e[13]?(A=void 0,j=!0):e[14]&&(A=e[14]);let H=e[15];return Fu(a,s,c,y,m,g,D,T,O),{year:a,month:s,day:c,time:l?{hour:y,minute:m,second:g,millisecond:D,microsecond:T,nanosecond:O}:"start-of-day",tzAnnotation:H,offset:A,z:j,calendar:n}}function Xl(t){let e=rp.exec(t),n,o,a,s,c,l,y;if(e){y=Na(e[10]),n=+(e[1]??0),o=+(e[2]??e[5]??0),a=+(e[3]??e[6]??0),a===60&&(a=59);let m=(e[4]??e[7]??"")+"000000000";if(s=+m.slice(0,3),c=+m.slice(3,6),l=+m.slice(6,9),e[8])throw new RangeError("Z designator not supported for PlainTime")}else{let m,g;if({time:m,z:g,calendar:y}=Mn(t),m==="start-of-day")throw new RangeError(`time is missing in string: ${t}`);if(g)throw new RangeError("Z designator not supported for PlainTime");({hour:n,minute:o,second:a,millisecond:s,microsecond:c,nanosecond:l}=m)}if(Ya(n,o,a,s,c,l),/[tT ][0-9][0-9]/.test(t))return{hour:n,minute:o,second:a,millisecond:s,microsecond:c,nanosecond:l,calendar:y};try{let{month:m,day:g}=Bu(t);Ar(1972,m,g)}catch{try{let{year:m,month:g}=ju(t);Ar(m,g,1)}catch{return{hour:n,minute:o,second:a,millisecond:s,microsecond:c,nanosecond:l,calendar:y}}}throw new RangeError(`invalid RFC 9557 time-only string ${t}; may need a T prefix`)}function ju(t){let e=ip.exec(t),n,o,a,s;if(e){a=Na(e[3]);let c=e[1];if(c==="-000000")throw new RangeError(`invalid RFC 9557 string: ${t}`);if(n=+c,o=+e[2],s=1,a!==void 0&&a!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let c;if({year:n,month:o,calendar:a,day:s,z:c}=Mn(t),c)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:o,calendar:a,referenceISODay:s}}function Bu(t){let e=op.exec(t),n,o,a,s;if(e){if(a=Na(e[3]),n=+e[1],o=+e[2],a!==void 0&&a!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let c;if({month:n,day:o,calendar:a,year:s,z:c}=Mn(t),c)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:o,calendar:a,referenceISOYear:s}}var Vl=new RegExp(`^${wo.source}$`,"i"),Jl=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function ef(t){let e=_p.test(t)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${e}: ${t}`)}function ur(t){return Vl.test(t)||ef(t),Jl.test(t)?{offsetMinutes:gi(t)/6e10}:{tzName:t}}function Vi(t,e,n,o){let a=t,s=e,c=n;switch(o){case"reject":Ar(a,s,c);break;case"constrain":({year:a,month:s,day:c}=vf(a,s,c))}return{year:a,month:s,day:c}}function ja(t,e,n,o,a,s,c){let l=t,y=e,m=n,g=o,b=a,D=s;switch(c){case"reject":Ya(l,y,m,g,b,D);break;case"constrain":l=Pt(l,0,23),y=Pt(y,0,59),m=Pt(m,0,59),g=Pt(g,0,999),b=Pt(b,0,999),D=Pt(D,0,999)}return{hour:l,minute:y,second:m,millisecond:g,microsecond:b,nanosecond:D}}function tf(t){if(!rt(t))throw new TypeError("invalid duration-like");let e={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0},n=!1;for(let o=0;o<va.length;o++){let a=va[o],s=t[a];s!==void 0&&(n=!0,e[a]=mn(s))}if(!n)throw new TypeError("invalid duration-like");return e}function _t({years:t,months:e,weeks:n,days:o},a,s,c){return{years:t,months:c??e,weeks:s??n,days:a??o}}function Ze(t,e){return{isoDate:t,time:e}}function Ue(t){return Kn(t,"overflow",["constrain","reject"],"constrain")}function Ji(t){return Kn(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function gn(t,e){return Kn(t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function ma(t,e){return Kn(t,"offset",["prefer","use","ignore","reject"],e)}function xo(t){return Kn(t,"calendarName",["auto","always","never","critical"],"auto")}function pi(t){let e=t.roundingIncrement;if(e===void 0)return 1;let n=Ae(e);if(n<1||n>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return n}function yi(t,e,n){let o=n?e:e-1;if(t>o)throw new RangeError(`roundingIncrement must be at least 1 and less than ${o}, not ${t}`);if(e%t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function Eo(t){let e=t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if($a(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}let n=Math.floor(e);if(!Number.isFinite(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return n}function Co(t,e){switch(t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}var Zn=Symbol("~required~");function Ut(t,e,n,o,a=[]){let s=[];for(let m=0;m<ci.length;m++){let g=ci[m],b=g[1],D=g[2];n!=="datetime"&&n!==D||s.push(b)}s=s.concat(a);let c=o;c===Zn?c=void 0:c!==void 0&&s.push(c);let l=[];l=l.concat(s);for(let m=0;m<s.length;m++){let g=s[m],b=yp[g];b!==void 0&&l.push(b)}let y=Kn(t,e,l,c);if(y===void 0&&o===Zn)throw new RangeError(`${e} is required`);return y&&y in il?il[y]:y}function qs(t){let e=t.relativeTo;if(e===void 0)return{};let n,o,a,s,c,l="option",y=!1;if(rt(e)){if(Ye(e))return{zonedRelativeTo:e};if(tt(e))return{plainRelativeTo:e};if(Qe(e))return{plainRelativeTo:At(_(e,Xe).isoDate,_(e,se))};a=Mo(e);let m=rn(a,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:n,time:o}=To(a,m,"constrain")),{offset:c,timeZone:s}=m,c===void 0&&(l="wall")}else{let m,g,b,D,T;if({year:b,month:D,day:T,time:o,calendar:a,tzAnnotation:m,offset:c,z:g}=Mn(ut(e)),m)s=$t(m),g?l="exact":c||(l="wall"),y=!0;else if(g)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");a||(a="iso8601"),a=Bt(a),n={year:b,month:D,day:T}}return s===void 0?{plainRelativeTo:At(n,a)}:{zonedRelativeTo:vt(_a(n,o,l,l==="option"?gi(c):0,s,"compatible","reject",y),s,a)}}function jn(t){return _(t,Ct)!==0?"year":_(t,St)!==0?"month":_(t,zt)!==0?"week":_(t,Tt)!==0?"day":_(t,kt)!==0?"hour":_(t,It)!==0?"minute":_(t,Mt)!==0?"second":_(t,Ot)!==0?"millisecond":_(t,Rt)!==0?"microsecond":"nanosecond"}function zn(t,e){return Xi.indexOf(t)>Xi.indexOf(e)?e:t}function xn(t){return t==="year"||t==="month"||t==="week"}function Bn(t){return xn(t)||t==="day"?"date":"time"}function hr(t){return pt("%calendarImpl%")(t)}function So(t){return pt("%calendarImpl%")(_(t,se))}function Nt(t,e,n="date"){let o=Object.create(null),a=hr(t).isoToDate(e,{year:!0,monthCode:!0,day:!0});return o.monthCode=a.monthCode,n!=="month-day"&&n!=="date"||(o.day=a.day),n!=="year-month"&&n!=="date"||(o.year=a.year),o}function rn(t,e,n,o,a){let s=hr(t).extraFields(n),c=n.concat(o,s),l=Object.create(null),y=!1;c.sort();for(let m=0;m<c.length;m++){let g=c[m],b=e[g];if(b!==void 0)y=!0,l[g]=(0,mp[g])(b);else if(a!=="partial"){if(a.includes(g))throw new TypeError(`required property '${g}' missing or undefined`);l[g]=pp[g]}}if(a==="partial"&&!y)throw new TypeError("no supported properties found");return l}function ou(t,e="complete"){let n=["hour","microsecond","millisecond","minute","nanosecond","second"],o=!1,a=Object.create(null);for(let s=0;s<n.length;s++){let c=n[s],l=t[c];l!==void 0?(a[c]=Ae(l),o=!0):e==="complete"&&(a[c]=0)}if(!o)throw new TypeError("invalid time-like");return a}function Ki(t,e){if(rt(t)){if(tt(t))return Ue(Se(e)),At(_(t,Re),_(t,se));if(Ye(t)){let y=ln(_(t,We),_(t,Oe));return Ue(Se(e)),At(y.isoDate,_(t,se))}if(Qe(t))return Ue(Se(e)),At(_(t,Xe).isoDate,_(t,se));let l=Mo(t);return At(fr(l,rn(l,t,["year","month","monthCode","day"],[],[]),Ue(Se(e))),l)}let{year:n,month:o,day:a,calendar:s,z:c}=Mn(ut(t));if(c)throw new RangeError("Z designator not supported for PlainDate");return s||(s="iso8601"),s=Bt(s),Ue(Se(e)),At({year:n,month:o,day:a},s)}function To(t,e,n){return Ze(fr(t,e,n),ja(e.hour,e.minute,e.second,e.millisecond,e.microsecond,e.nanosecond,n))}function Ui(t,e){let n,o,a;if(rt(t)){if(Qe(t))return Ue(Se(e)),sn(_(t,Xe),_(t,se));if(Ye(t)){let l=ln(_(t,We),_(t,Oe));return Ue(Se(e)),sn(l,_(t,se))}if(tt(t))return Ue(Se(e)),sn(Ze(_(t,Re),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),_(t,se));a=Mo(t);let s=rn(a,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),c=Ue(Se(e));({isoDate:n,time:o}=To(a,s,c))}else{let s,c,l,y;if({year:c,month:l,day:y,time:o,calendar:a,z:s}=Mn(ut(t)),s)throw new RangeError("Z designator not supported for PlainDateTime");o==="start-of-day"&&(o={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Fu(c,l,y,o.hour,o.minute,o.second,o.millisecond,o.microsecond,o.nanosecond),a||(a="iso8601"),a=Bt(a),Ue(Se(e)),n={year:c,month:l,day:y}}return sn(Ze(n,o),a)}function cn(t){let e=pt("%Temporal.Duration%");if(et(t))return new e(_(t,Ct),_(t,St),_(t,zt),_(t,Tt),_(t,kt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Ft));if(!rt(t))return(function(a){let{years:s,months:c,weeks:l,days:y,hours:m,minutes:g,seconds:b,milliseconds:D,microseconds:T,nanoseconds:O}=(function(A){let j=sp.exec(A);if(!j)throw new RangeError(`invalid duration: ${A}`);if(j.every((E,I)=>I<2||E===void 0))throw new RangeError(`invalid duration: ${A}`);let H=j[1]==="-"?-1:1,J=j[2]===void 0?0:Ae(j[2])*H,oe=j[3]===void 0?0:Ae(j[3])*H,ie=j[4]===void 0?0:Ae(j[4])*H,le=j[5]===void 0?0:Ae(j[5])*H,pe=j[6]===void 0?0:Ae(j[6])*H,we=j[7],De=j[8],be=j[9],q=j[10],X=j[11],Q=0,ye=0,x=0;if(we!==void 0){if(De??be??q??X)throw new RangeError("only the smallest unit can be fractional");x=3600*Ae((we+"000000000").slice(0,9))*H}else if(Q=De===void 0?0:Ae(De)*H,be!==void 0){if(q??X)throw new RangeError("only the smallest unit can be fractional");x=60*Ae((be+"000000000").slice(0,9))*H}else ye=q===void 0?0:Ae(q)*H,X!==void 0&&(x=Ae((X+"000000000").slice(0,9))*H);let Y=x%1e3,d=Math.trunc(x/1e3)%1e3,p=Math.trunc(x/1e6)%1e3;return ye+=Math.trunc(x/1e9)%60,Q+=Math.trunc(x/6e10),za(J,oe,ie,le,pe,Q,ye,p,d,Y),{years:J,months:oe,weeks:ie,days:le,hours:pe,minutes:Q,seconds:ye,milliseconds:p,microseconds:d,nanoseconds:Y}})(a);return new(pt("%Temporal.Duration%"))(s,c,l,y,m,g,b,D,T,O)})(ut(t));let n={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0},o=tf(t);for(let a=0;a<va.length;a++){let s=va[a],c=o[s];c!==void 0&&(n[s]=c)}return new e(n.years,n.months,n.weeks,n.days,n.hours,n.minutes,n.seconds,n.milliseconds,n.microseconds,n.nanoseconds)}function Zi(t){let e;if(rt(t)){if(dt(t)||Ye(t))return pn(_(t,Oe));e=ru(t)}else e=t;let{year:n,month:o,day:a,time:s,offset:c,z:l}=(function(A){let j=Mn(A);if(!j.z&&!j.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return j})(ut(e)),{hour:y=0,minute:m=0,second:g=0,millisecond:b=0,microsecond:D=0,nanosecond:T=0}=s==="start-of-day"?{}:s,O=so(n,o,a,y,m,g,b,D,T-(l?0:gi(c)));return ai(O.isoDate),pn(mt(O))}function al(t,e){if(rt(t)){if(Vt(t))return Ue(Se(e)),ii(_(t,Re),_(t,se));let l;return jt(t,se)?l=_(t,se):(l=t.calendar,l===void 0&&(l="iso8601"),l=Io(l)),ii(ba(l,rn(l,t,["year","month","monthCode","day"],[],[]),Ue(Se(e))),l)}let{month:n,day:o,referenceISOYear:a,calendar:s}=Bu(ut(t));if(s===void 0&&(s="iso8601"),s=Bt(s),Ue(Se(e)),s==="iso8601")return ii({year:1972,month:n,day:o},s);let c={year:a,month:n,day:o};return zr(c),c=ba(s,Nt(s,c,"month-day"),"constrain"),ii(c,s)}function ar(t,e){let n;if(rt(t)){if(ot(t))return Ue(Se(e)),Ln(_(t,nt));if(Qe(t))return Ue(Se(e)),Ln(_(t,Xe).time);if(Ye(t)){let m=ln(_(t,We),_(t,Oe));return Ue(Se(e)),Ln(m.time)}let{hour:o,minute:a,second:s,millisecond:c,microsecond:l,nanosecond:y}=ou(t);n=ja(o,a,s,c,l,y,Ue(Se(e)))}else n=Xl(ut(t)),Ue(Se(e));return Ln(n)}function nf(t){return t===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:_(ar(t),nt)}function Wi(t,e){if(rt(t)){if(ht(t))return Ue(Se(e)),oi(_(t,Re),_(t,se));let l=Mo(t);return oi(io(l,rn(l,t,["year","month","monthCode"],[],[]),Ue(Se(e))),l)}let{year:n,month:o,referenceISODay:a,calendar:s}=ju(ut(t));s===void 0&&(s="iso8601"),s=Bt(s),Ue(Se(e));let c={year:n,month:o,day:a};return Ku(c),c=io(s,Nt(s,c,"year-month"),"constrain"),oi(c,s)}function _a(t,e,n,o,a,s,c,l){if(e==="start-of-day")return ir(a,t);let y=Ze(t,e);if(n==="wall"||c==="ignore")return bt(a,y,s);if(n==="exact"||c==="use"){let b=so(t.year,t.month,t.day,e.hour,e.minute,e.second,e.millisecond,e.microsecond,e.nanosecond-o);ai(b.isoDate);let D=mt(b);return kn(D),D}ai(t);let m=mt(y),g=oo(a,y);for(let b=0;b<g.length;b++){let D=g[b],T=z.default.toNumber(z.default.subtract(m,D)),O=sr(T,6e10,"halfExpand");if(T===o||l&&O===o)return D}if(c==="reject"){let b=au(o),D=ao(y,"iso8601","auto");throw new RangeError(`Offset ${b} is invalid for ${D} in ${a}`)}return df(g,a,y,s)}function qi(t,e){let n,o,a,s,c,l,y,m=!1,g="option";if(rt(t)){if(Ye(t)){let A=Se(e);return Ji(A),ma(A,"reject"),Ue(A),vt(_(t,Oe),_(t,We),_(t,se))}c=Mo(t);let D=rn(c,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:s,timeZone:a}=D),s===void 0&&(g="wall");let T=Se(e);l=Ji(T),y=ma(T,"reject");let O=Ue(T);({isoDate:n,time:o}=To(c,D,O))}else{let D,T,O,A,j;({year:O,month:A,day:j,time:o,tzAnnotation:D,offset:s,z:T,calendar:c}=(function(J){let oe=Mn(J);if(!oe.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return oe})(ut(t))),a=$t(D),T?g="exact":s||(g="wall"),c||(c="iso8601"),c=Bt(c),m=!0;let H=Se(e);l=Ji(H),y=ma(H,"reject"),Ue(H),n={year:O,month:A,day:j}}let b=0;return g==="option"&&(b=gi(s)),vt(_a(n,o,g,b,a,l,y,m),a,c)}function rf(t,e,n){zr(e),qn(t),Be(t,Re,e),Be(t,se,n),Be(t,Al,!0)}function At(t,e){let n=pt("%Temporal.PlainDate%"),o=Object.create(n.prototype);return rf(o,t,e),o}function of(t,e,n){$r(e),qn(t),Be(t,Xe,e),Be(t,se,n)}function sn(t,e){let n=pt("%Temporal.PlainDateTime%"),o=Object.create(n.prototype);return of(o,t,e),o}function af(t,e,n){zr(e),qn(t),Be(t,Re,e),Be(t,se,n),Be(t,Nl,!0)}function ii(t,e){let n=pt("%Temporal.PlainMonthDay%"),o=Object.create(n.prototype);return af(o,t,e),o}function sf(t,e){qn(t),Be(t,nt,e)}function Ln(t){let e=pt("%Temporal.PlainTime%"),n=Object.create(e.prototype);return sf(n,t),n}function uf(t,e,n){Ku(e),qn(t),Be(t,Re,e),Be(t,se,n),Be(t,$l,!0)}function oi(t,e){let n=pt("%Temporal.PlainYearMonth%"),o=Object.create(n.prototype);return uf(o,t,e),o}function cf(t,e){kn(e),qn(t),Be(t,Oe,e)}function pn(t){let e=pt("%Temporal.Instant%"),n=Object.create(e.prototype);return cf(n,t),n}function lf(t,e,n,o){kn(e),qn(t),Be(t,Oe,e),Be(t,We,n),Be(t,se,o)}function vt(t,e,n="iso8601"){let o=pt("%Temporal.ZonedDateTime%"),a=Object.create(o.prototype);return lf(a,t,e,n),a}function sl(t){return iu.filter(e=>t[e]!==void 0)}function Pr(t,e,n){let o=sl(n),a=hr(t).fieldKeysToIgnore(o),s=Object.create(null),c=sl(e);for(let l=0;l<iu.length;l++){let y,m=iu[l];c.includes(m)&&!a.includes(m)&&(y=e[m]),o.includes(m)&&(y=n[m]),y!==void 0&&(s[m]=y)}return s}function tn(t,e,n,o){let a=hr(t).dateAdd(e,n,o);return zr(a),a}function ko(t,e,n,o){return hr(t).dateUntil(e,n,o)}function Io(t){if(rt(t)&&jt(t,se))return _(t,se);let e=ut(t);try{return Bt(e)}catch{}let n;try{({calendar:n}=Mn(e))}catch{try{({calendar:n}=Xl(e))}catch{try{({calendar:n}=ju(e))}catch{({calendar:n}=Bu(e))}}}return n||(n="iso8601"),Bt(n)}function Mo(t){if(jt(t,se))return _(t,se);let{calendar:e}=t;return e===void 0?"iso8601":Io(e)}function Tn(t,e){return Bt(t)===Bt(e)}function fr(t,e,n){let o=hr(t);o.resolveFields(e,"date");let a=o.dateToISO(e,n);return zr(a),a}function io(t,e,n){let o=hr(t);o.resolveFields(e,"year-month"),e.day=1;let a=o.dateToISO(e,n);return Ku(a),a}function ba(t,e,n){let o=hr(t);o.resolveFields(e,"month-day");let a=o.monthDayToISOReferenceDate(e,n);return zr(a),a}function $t(t){if(rt(t)&&Ye(t))return _(t,We);let e=ut(t);if(e==="UTC")return"UTC";let{tzName:n,offsetMinutes:o}=(function(s){let{tzAnnotation:c,offset:l,z:y}=(function(m){if(Vl.test(m))return{tzAnnotation:m,offset:void 0,z:!1};try{let{tzAnnotation:g,offset:b,z:D}=Mn(m);if(D||g||b)return{tzAnnotation:g,offset:b,z:D}}catch{}ef(m)})(s);return c?ur(c):y?ur("UTC"):l?ur(l):void 0})(e);if(o!==void 0)return Lu(o);let a=wa(n);if(!a)throw new RangeError(`Unrecognized time zone ${n}`);return a.identifier}function ff(t,e){if(t===e)return!0;let n=ur(t).offsetMinutes,o=ur(e).offsetMinutes;if(n===void 0&&o===void 0){let a=wa(e);if(!a)return!1;let s=wa(t);return!!s&&s.primaryIdentifier===a.primaryIdentifier}return n===o}function Yn(t,e){let n=ur(t).offsetMinutes;return n!==void 0?6e10*n:su(t,e)}function au(t){let e=t<0?"-":"+",n=Math.abs(t),o=Math.floor(n/36e11),a=Math.floor(n/6e10)%60,s=Math.floor(n/1e9)%60,c=n%1e9;return`${e}${Ba(o,a,s,c,s===0&&c===0?"minute":"auto")}`}function ln(t,e){let n=Yn(t,e),{isoDate:{year:o,month:a,day:s},time:{hour:c,minute:l,second:y,millisecond:m,microsecond:g,nanosecond:b}}=pf(e);return so(o,a,s,c,l,y,m,g,b+n)}function bt(t,e,n){return df(oo(t,e),t,e,n)}function df(t,e,n,o){let a=t.length;if(a===1)return t[0];if(a)switch(o){case"compatible":case"earlier":return t[0];case"later":return t[a-1];case"reject":throw new RangeError("multiple instants found")}if(o==="reject")throw new RangeError("multiple instants found");let s=mt(n),c=z.default.subtract(s,cr);kn(c);let l=Yn(e,c),y=z.default.add(s,cr);kn(y);let m=Yn(e,y)-l;switch(o){case"earlier":{let g=Ge.fromComponents(0,0,0,0,0,-m),b=fi(n.time,g);return oo(e,Ze(Zt(n.isoDate.year,n.isoDate.month,n.isoDate.day+b.deltaDays),b))[0]}case"compatible":case"later":{let g=Ge.fromComponents(0,0,0,0,0,m),b=fi(n.time,g),D=oo(e,Ze(Zt(n.isoDate.year,n.isoDate.month,n.isoDate.day+b.deltaDays),b));return D[D.length-1]}}}function oo(t,e){if(t==="UTC")return ai(e.isoDate),[mt(e)];let n=ur(t).offsetMinutes;if(n!==void 0){let o=so(e.isoDate.year,e.isoDate.month,e.isoDate.day,e.time.hour,e.time.minute-n,e.time.second,e.time.millisecond,e.time.microsecond,e.time.nanosecond);ai(o.isoDate);let a=mt(o);return kn(a),[a]}return ai(e.isoDate),(function(o,a){let s=mt(a),c=z.default.subtract(s,cr);z.default.lessThan(c,no)&&(c=s);let l=z.default.add(s,cr);z.default.greaterThan(l,ui)&&(l=s);let y=su(o,c),m=su(o,l);return(y===m?[y]:[y,m]).map(b=>{let D=z.default.subtract(s,z.default.BigInt(b)),T=(function(O,A){let{epochMilliseconds:j,time:{millisecond:H,microsecond:J,nanosecond:oe}}=pf(A),{year:ie,month:le,day:pe,hour:we,minute:De,second:be}=yf(O,j);return so(ie,le,pe,we,De,be,H,J,oe)})(o,D);if(di(a,T)===0)return kn(D),D}).filter(b=>b!==void 0)})(t,e)}function ir(t,e){let n=Ze(e,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),o=oo(t,n);if(o.length)return o[0];let a=mt(n),s=z.default.subtract(a,cr);return kn(s),zu(t,s)}function Oo(t){let e;return e=t<0||t>9999?(t<0?"-":"+")+ro(Math.abs(t),6):ro(t,4),e}function nn(t){return ro(t,2)}function hf(t,e){let n;if(e==="auto"){if(t===0)return"";n=ro(t,9).replace(/0+$/,"")}else{if(e===0)return"";n=ro(t,9).slice(0,e)}return`.${n}`}function Ba(t,e,n,o,a){let s=`${nn(t)}:${nn(e)}`;return a==="minute"||(s+=`:${nn(n)}`,s+=hf(o,a)),s}function ul(t,e,n){let o=e;o===void 0&&(o="UTC");let a=_(t,Oe),s=ao(ln(o,a),"iso8601",n,"never"),c="Z";return e!==void 0&&(c=mf(Yn(o,a))),`${s}${c}`}function ha(t,e){let n=_(t,Ct),o=_(t,St),a=_(t,zt),s=_(t,Tt),c=_(t,kt),l=_(t,It),y=xa(t),m="";n!==0&&(m+=`${Math.abs(n)}Y`),o!==0&&(m+=`${Math.abs(o)}M`),a!==0&&(m+=`${Math.abs(a)}W`),s!==0&&(m+=`${Math.abs(s)}D`);let g="";c!==0&&(g+=`${Math.abs(c)}H`),l!==0&&(g+=`${Math.abs(l)}M`);let b=Ge.fromComponents(0,0,_(t,Mt),_(t,Ot),_(t,Rt),_(t,Ft));b.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(jn(t))&&e==="auto"||(g+=`${Math.abs(b.sec)}${hf(Math.abs(b.subsec),e)}S`);let D=`${y<0?"-":""}P${m}`;return g&&(D=`${D}T${g}`),D}function cl(t,e="auto"){let{year:n,month:o,day:a}=_(t,Re);return`${Oo(n)}-${nn(o)}-${nn(a)}${Do(_(t,se),e)}`}function ll({hour:t,minute:e,second:n,millisecond:o,microsecond:a,nanosecond:s},c){return Ba(t,e,n,1e6*o+1e3*a+s,c)}function ao(t,e,n,o="auto"){let{isoDate:{year:a,month:s,day:c},time:{hour:l,minute:y,second:m,millisecond:g,microsecond:b,nanosecond:D}}=t;return`${Oo(a)}-${nn(s)}-${nn(c)}T${Ba(l,y,m,1e6*g+1e3*b+D,n)}${Do(e,o)}`}function fl(t,e="auto"){let{year:n,month:o,day:a}=_(t,Re),s=`${nn(o)}-${nn(a)}`,c=_(t,se);e!=="always"&&e!=="critical"&&c==="iso8601"||(s=`${Oo(n)}-${s}`);let l=Do(c,e);return l&&(s+=l),s}function dl(t,e="auto"){let{year:n,month:o,day:a}=_(t,Re),s=`${Oo(n)}-${nn(o)}`,c=_(t,se);e!=="always"&&e!=="critical"&&c==="iso8601"||(s+=`-${nn(a)}`);let l=Do(c,e);return l&&(s+=l),s}function hl(t,e,n="auto",o="auto",a="auto",s=void 0){let c=_(t,Oe);if(s){let{unit:g,increment:b,roundingMode:D}=s;c=fu(c,b,g,D)}let l=_(t,We),y=Yn(l,c),m=ao(ln(l,c),"iso8601",e,"never");return a!=="never"&&(m+=mf(y)),o!=="never"&&(m+=`[${o==="critical"?"!":""}${l}]`),m+=Do(_(t,se),n),m}function ml(t){return Jl.test(t)}function gi(t){let e=bp.exec(t);if(!e)throw new RangeError(`invalid time zone offset: ${t}; must match \xB1HH:MM[:SS.SSSSSSSSS]`);return(e[1]==="-"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}var Bi,vp=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function wa(t){if(Bi===void 0){let s=Intl.supportedValuesOf?.("timeZone");if(s){Bi=new Map;for(let c=0;c<s.length;c++){let l=s[c];Bi.set(uo(l),l)}}else Bi=null}let e=uo(t),n=Bi?.get(e);if(n)return{identifier:n,primaryIdentifier:n};try{n=Ql(t).resolvedOptions().timeZone}catch{return}if(e==="antarctica/south_pole"&&(n="Antarctica/McMurdo"),hp.has(t))throw new RangeError(`${t} is a legacy time zone identifier from ICU. Use ${n} instead`);let o=[...e].map((s,c)=>c===0||vp[e[c-1]]?s.toUpperCase():s).join("").split("/");if(o.length===1)return e==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:n}:{identifier:e.length<=3||/[-0-9]/.test(e)?e.toUpperCase():o[0],primaryIdentifier:n};if(o[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(o[1])?o[1]:o[1].toUpperCase()}`,primaryIdentifier:n};if(o[0]==="Us")return{identifier:`US/${o[1]}`,primaryIdentifier:n};let a=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return o[1]=a.get(o[1])??o[1],o.length>2&&(o[2]=a.get(o[2])??o[2]),{identifier:o.join("/"),primaryIdentifier:n}}function Or(t,e){let{year:n,month:o,day:a,hour:s,minute:c,second:l}=yf(t,e),y=e%1e3;return y<0&&(y+=1e3),1e6*(Yu({isoDate:{year:n,month:o,day:a},time:{hour:s,minute:c,second:l,millisecond:y}})-e)}function su(t,e){return Or(t,fn(e,"floor"))}function Lu(t){let e=t<0?"-":"+",n=Math.abs(t);return`${e}${Ba(Math.floor(n/60),n%60,0,0,"minute")}`}function mf(t){return Lu(sr(t,up,"halfExpand")/6e10)}function Yu({isoDate:{year:t,month:e,day:n},time:{hour:o,minute:a,second:s,millisecond:c}}){let l=t%400,y=(t-l)/400,m=new Date;return m.setUTCHours(o,a,s,c),m.setUTCFullYear(l,e-1,n),m.getTime()+fp*y}function mt(t){let e=Yu(t),n=1e3*t.time.microsecond+t.time.nanosecond;return z.default.add(yn(e),z.default.BigInt(n))}function pf(t){let e=fn(t,"trunc"),n=z.default.toNumber(z.default.remainder(t,bo));n<0&&(n+=1e6,e-=1);let o=Math.floor(n/1e3)%1e3,a=n%1e3,s=new Date(e);return{epochMilliseconds:e,isoDate:{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate()},time:{hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),microsecond:o,nanosecond:a}}}function zu(t,e){if(t==="UTC")return null;let n=fn(e,"floor");if(n<Qi)return zu(t,yn(Qi));let o=Date.now(),a=Math.max(n,o)+366*lr*3,s=n,c=Or(t,s),l=s,y=c;for(;c===y&&s<a;){if(l=s+2*lr*7,l>Gl)return null;y=Or(t,l),c===y&&(s=l)}return c===y?null:yn(Sf(m=>Or(t,m),s,l,c,y))}function uu(t,e){if(t==="UTC")return null;let n=fn(e,"ceil"),o=Date.now(),a=o+366*lr*3;if(n>a){let m=uu(t,yn(a));if(m===null||z.default.lessThan(m,yn(o)))return m}if(t==="Africa/Casablanca"||t==="Africa/El_Aaiun"){let m=Date.UTC(2088,0,1);if(m<n)return uu(t,yn(m))}let s=n-1;if(s<Qi)return null;let c=Or(t,s),l=s,y=c;for(;c===y&&s>Qi;){if(l=s-2*lr*7,l<Qi)return null;y=Or(t,l),c===y&&(s=l)}return c===y?null:yn(Sf(m=>Or(t,m),l,s,y,c))}function yf(t,e){return(function(n){let o=n.split(/[^\w]+/);if(o.length!==7)throw new RangeError(`expected 7 parts in "${n}`);let a=+o[0],s=+o[1],c=+o[2],l=o[3];if(l[0]==="b"||l[0]==="B")c=1-c;else if(l[0]!=="a"&&l[0]!=="A")throw new RangeError(`Unknown era ${l} in "${n}`);let y=o[4]==="24"?0:+o[4],m=+o[5],g=+o[6];if(!(Number.isFinite(c)&&Number.isFinite(a)&&Number.isFinite(s)&&Number.isFinite(y)&&Number.isFinite(m)&&Number.isFinite(g)))throw new RangeError(`Invalid number in "${n}`);return{year:c,month:a,day:s,hour:y,minute:m,second:g}})(Ql(t).format(e))}function Da(t){return t!==void 0&&!(t%4!=0||t%100==0&&t%400!=0)}function Rr(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Da(t)?"leapyear":"standard"][e-1]}function xa(t){let e=[_(t,Ct),_(t,St),_(t,zt),_(t,Tt),_(t,kt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Ft)];for(let n=0;n<e.length;n++){let o=e[n];if(o!==0)return o<0?-1:1}return 0}function La(t){let e=["years","months","weeks","days"];for(let n=0;n<e.length;n++){let o=t[e[n]];if(o!==0)return o<0?-1:1}return 0}function gf(t){let e=La(t.date);return e!==0?e:t.time.sign()}function Mr(t,e){let n=t,o=e;if(!Number.isFinite(n)||!Number.isFinite(o))throw new RangeError("infinity is out of range");return o-=1,n+=Math.floor(o/12),o%=12,o<0&&(o+=12),o+=1,{year:n,month:o}}function Zt(t,e,n){let o=t,a=e,s=n;if(!Number.isFinite(s))throw new RangeError("infinity is out of range");({year:o,month:a}=Mr(o,a));let c=146097;if(Math.abs(s)>c){let m=Math.trunc(s/c);o+=400*m,s-=m*c}let l=0,y=a>2?o:o-1;for(;l=Da(y)?366:365,s<-l;)o-=1,y-=1,s+=l;for(y+=1;l=Da(y)?366:365,s>l;)o+=1,y+=1,s-=l;for(;s<1;)({year:o,month:a}=Mr(o,a-1)),s+=Rr(o,a);for(;s>Rr(o,a);)s-=Rr(o,a),{year:o,month:a}=Mr(o,a+1);return{year:o,month:a,day:s}}function so(t,e,n,o,a,s,c,l,y){let m=or(o,a,s,c,l,y);return Ze(Zt(t,e,n+m.deltaDays),m)}function or(t,e,n,o,a,s){let c,l=t,y=e,m=n,g=o,b=a,D=s;({div:c,mod:D}=ri(D,3)),b+=c,D<0&&(b-=1,D+=1e3),{div:c,mod:b}=ri(b,3),g+=c,b<0&&(g-=1,b+=1e3),m+=Math.trunc(g/1e3),g%=1e3,g<0&&(m-=1,g+=1e3),y+=Math.trunc(m/60),m%=60,m<0&&(y-=1,m+=60),l+=Math.trunc(y/60),y%=60,y<0&&(l-=1,y+=60);let T=Math.trunc(l/24);return l%=24,l<0&&(T-=1,l+=24),T+=0,l+=0,y+=0,m+=0,g+=0,b+=0,D+=0,{deltaDays:T,hour:l,minute:y,second:m,millisecond:g,microsecond:b,nanosecond:D}}function pl(t,e){let n=_t(t,0);if(La(n)===0)return t.days;let o=_(e,Re),a=tn(_(e,se),o,n,"constrain"),s=Nr(o.year,o.month-1,o.day),c=Nr(a.year,a.month-1,a.day)-s;return t.days+c}function Wt(t){return new(pt("%Temporal.Duration%"))(-_(t,Ct),-_(t,St),-_(t,zt),-_(t,Tt),-_(t,kt),-_(t,It),-_(t,Mt),-_(t,Ot),-_(t,Rt),-_(t,Ft))}function Pt(t,e,n){return Math.min(n,Math.max(e,t))}function vf(t,e,n){let o=Pt(e,1,12);return{year:t,month:o,day:Pt(n,1,Rr(t,o))}}function ft(t,e,n){if(t<e||t>n)throw new RangeError(`value out of range: ${e} <= ${t} <= ${n}`)}function Ar(t,e,n){ft(e,1,12),ft(n,1,Rr(t,e))}function zr(t){$r(Ze(t,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function Ya(t,e,n,o,a,s){ft(t,0,23),ft(e,0,59),ft(n,0,59),ft(o,0,999),ft(a,0,999),ft(s,0,999)}function Fu(t,e,n,o,a,s,c,l,y){Ar(t,e,n),Ya(o,a,s,c,l,y)}function $r(t){let e=mt(t);(z.default.lessThan(e,cp)||z.default.greaterThan(e,lp))&&kn(e)}function cu(t){mt(t)}function kn(t){if(z.default.lessThan(t,no)||z.default.greaterThan(t,ui))throw new RangeError("date/time value is outside of supported range")}function Ku({year:t,month:e}){ft(t,tl,nl),t===tl?ft(e,4,12):t===nl&&ft(e,1,9)}function za(t,e,n,o,a,s,c,l,y,m){let g=0,b=[t,e,n,o,a,s,c,l,y,m];for(let H=0;H<b.length;H++){let J=b[H];if(J===1/0||J===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(J!==0){let oe=J<0?-1:1;if(g!==0&&oe!==g)throw new RangeError("mixed-sign values not allowed as duration fields");g=oe}}if(Math.abs(t)>=2**32||Math.abs(e)>=2**32||Math.abs(n)>=2**32)throw new RangeError("years, months, and weeks must be < 2\xB3\xB2");let D=ri(l,3),T=ri(y,6),O=ri(m,9),A=ri(1e6*D.mod+1e3*T.mod+O.mod,9).div,j=86400*o+3600*a+60*s+c+D.div+T.div+O.div+A;if(!Number.isSafeInteger(j))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function ni(t){return{date:{years:_(t,Ct),months:_(t,St),weeks:_(t,zt),days:_(t,Tt)},time:Ge.fromComponents(_(t,kt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Ft))}}function Cn(t){let e=Ge.fromComponents(_(t,kt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Ft)).add24HourDays(_(t,Tt));return{date:{years:_(t,Ct),months:_(t,St),weeks:_(t,zt),days:0},time:e}}function _f(t){let e=Cn(t),n=Math.trunc(e.time.sec/86400);return za(e.date.years,e.date.months,e.date.weeks,n,0,0,0,0,0,0),{...e.date,days:n}}function un(t,e){let n=t.time.sign(),o=t.time.abs().subsec,a=0,s=0,c=t.time.abs().sec,l=0,y=0,m=0;switch(e){case"year":case"month":case"week":case"day":a=Math.trunc(o/1e3),o%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60,y=Math.trunc(l/60),l%=60,m=Math.trunc(y/24),y%=24;break;case"hour":a=Math.trunc(o/1e3),o%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60,y=Math.trunc(l/60),l%=60;break;case"minute":a=Math.trunc(o/1e3),o%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60;break;case"second":a=Math.trunc(o/1e3),o%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3;break;case"millisecond":a=Math.trunc(o/1e3),o%=1e3,s=Zs(c,3,Math.trunc(a/1e3)),a%=1e3,c=0;break;case"microsecond":a=Zs(c,6,Math.trunc(o/1e3)),o%=1e3,c=0;break;case"nanosecond":o=Zs(c,9,o),c=0}return new(pt("%Temporal.Duration%"))(t.date.years,t.date.months,t.date.weeks,t.date.days+n*m,n*y,n*l,n*c,n*s,n*a,n*o)}function Fn(t,e){return La(t),e.sign(),{date:t,time:e}}function Nr(t,e,n){return Yu({isoDate:{year:t,month:e+1,day:n},time:{hour:0,minute:0,second:0,millisecond:0}})/lr}function ai({year:t,month:e,day:n}){if(Math.abs(Nr(t,e-1,n))>1e8)throw new RangeError("date/time value is outside the supported range")}function Uu(t,e){let n=e.hour-t.hour,o=e.minute-t.minute,a=e.second-t.second,s=e.millisecond-t.millisecond,c=e.microsecond-t.microsecond,l=e.nanosecond-t.nanosecond;return Ge.fromComponents(n,o,a,s,c,l)}function Zu(t,e,n,o,a){let s=Ge.fromEpochNsDiff(e,t);return s=Ea(s,n,o,a),Fn({years:0,months:0,weeks:0,days:0},s)}function bf(t,e,n,o){cu(t),cu(e);let a=Uu(t.time,e.time),s=a.sign(),c=In(t.isoDate,e.isoDate),l=e.isoDate;c===s&&(l=Zt(l.year,l.month,l.day+s),a=a.add24HourDays(-s));let y=zn("day",o),m=ko(n,t.isoDate,l,y);return o!==y&&(a=a.add24HourDays(m.days),m.days=0),Fn(m,a)}function wf(t,e,n,o,a){let s=z.default.subtract(e,t);if(z.default.equal(s,Jt))return{date:{years:0,months:0,weeks:0,days:0},time:Ge.ZERO};let c=z.default.lessThan(s,Jt)?-1:1,l=ln(n,t),y=ln(n,e),m,g=0,b=c===1?2:1,D=Uu(l.time,y.time);for(D.sign()===-c&&g++;g<=b;g++){m=Ze(Zt(y.isoDate.year,y.isoDate.month,y.isoDate.day-g*c),l.time);let O=bt(n,m,"compatible");if(D=Ge.fromEpochNsDiff(e,O),D.sign()!==-c)break}let T=zn("day",a);return Fn(ko(o,l.isoDate,m.isoDate,T),D)}function Df(t,e,n,o,a,s,c,l,y){let m,g,b,D,T=e;switch(l){case"year":{let Q=sr(T.date.years,c,"trunc");m=Q,g=Q+c*t,b={years:m,months:0,weeks:0,days:0},D={...b,years:g};break}case"month":{let Q=sr(T.date.months,c,"trunc");m=Q,g=Q+c*t,b=_t(T.date,0,0,m),D=_t(T.date,0,0,g);break}case"week":{let Q=_t(T.date,0,0),ye=tn(s,o.isoDate,Q,"constrain"),x=ko(s,ye,Zt(ye.year,ye.month,ye.day+T.date.days),"week"),Y=sr(T.date.weeks+x.weeks,c,"trunc");m=Y,g=Y+c*t,b=_t(T.date,0,m),D=_t(T.date,0,g);break}case"day":{let Q=sr(T.date.days,c,"trunc");m=Q,g=Q+c*t,b=_t(T.date,m),D=_t(T.date,g);break}}let O=tn(s,o.isoDate,b,"constrain"),A=tn(s,o.isoDate,D,"constrain"),j,H,J=Ze(O,o.time),oe=Ze(A,o.time);a?(j=bt(a,J,"compatible"),H=bt(a,oe,"compatible")):(j=mt(J),H=mt(oe));let ie=Ge.fromEpochNsDiff(n,j),le=Ge.fromEpochNsDiff(H,j),pe=Ra(y,t<0?"negative":"positive"),we=ie.add(ie).abs().subtract(le.abs()).sign(),De=Math.abs(m)/c%2==0,be=ie.isZero()?Math.abs(m):ie.cmp(le)?Pa(Math.abs(m),Math.abs(g),we,De,pe):Math.abs(g),q=new Ge(z.default.add(z.default.multiply(le.totalNs,z.default.BigInt(m)),z.default.multiply(ie.totalNs,z.default.BigInt(c*t)))).fdiv(le.totalNs),X=be===Math.abs(g);return T={date:X?D:b,time:Ge.ZERO},{nudgeResult:{duration:T,nudgedEpochNs:X?H:j,didExpandCalendarUnit:X},total:q}}function Fa(t,e,n,o,a,s,c,l,y){let m=t,g=xn(l)||o&&l==="day",b=gf(m)<0?-1:1,D;return g?{nudgeResult:D}=Df(b,m,e,n,o,a,c,l,y):D=o?(function(T,O,A,j,H,J,oe,ie){let le=O,pe=tn(H,A.isoDate,le.date,"constrain"),we=Ze(pe,A.time),De=Ze(Zt(pe.year,pe.month,pe.day+T),A.time),be=bt(j,we,"compatible"),q=bt(j,De,"compatible"),X=Ge.fromEpochNsDiff(q,be);if(X.sign()!==T)throw new RangeError("time zone returned inconsistent Instants");let Q=z.default.BigInt(li[oe]*J),ye=le.time.round(Q,ie),x=ye.subtract(X),Y=x.sign()!==-T,d,p;return Y?(d=T,ye=x.round(Q,ie),p=ye.addToEpochNs(q)):(d=0,p=ye.addToEpochNs(be)),{duration:Fn(_t(le.date,le.date.days+d),ye),nudgedEpochNs:p,didExpandCalendarUnit:Y}})(b,m,n,o,a,c,l,y):(function(T,O,A,j,H,J){let oe=T,ie=oe.time.add24HourDays(oe.date.days),le=ie.round(z.default.BigInt(j*li[H]),J),pe=le.subtract(ie),{quotient:we}=ie.divmod(ga),{quotient:De}=le.divmod(ga),be=Math.sign(De-we)===ie.sign(),q=pe.addToEpochNs(O),X=0,Q=le;return Bn(A)==="date"&&(X=De,Q=le.add(Ge.fromComponents(24*-De,0,0,0,0,0))),{duration:{date:_t(oe.date,X),time:Q},nudgedEpochNs:q,didExpandCalendarUnit:be}})(m,e,s,c,l,y),m=D.duration,D.didExpandCalendarUnit&&l!=="week"&&(m=(function(T,O,A,j,H,J,oe,ie){let le=O;if(ie===oe)return le;let pe=Xi.indexOf(oe);for(let we=Xi.indexOf(ie)-1;we>=pe;we--){let De=Xi[we];if(De==="week"&&oe!=="week")continue;let be;switch(De){case"year":be={years:le.date.years+T,months:0,weeks:0,days:0};break;case"month":{let Q=le.date.months+T;be=_t(le.date,0,0,Q);break}case"week":{let Q=le.date.weeks+T;be=_t(le.date,0,Q);break}}let q=Ze(tn(J,j.isoDate,be,"constrain"),j.time),X;if(X=H?bt(H,q,"compatible"):mt(q),pa(A,X)===-T)break;le={date:be,time:Ge.ZERO}}return le})(b,m,D.nudgedEpochNs,n,o,a,s,zn(l,"day"))),m}function yl(t,e,n,o,a,s){return xn(s)||o&&s==="day"?Df(gf(t)<0?-1:1,t,e,n,o,a,1,s,"trunc").total:eo(t.time.add24HourDays(t.date.days),s)}function xf(t,e,n,o,a,s,c){if(di(t,e)==0)return{date:{years:0,months:0,weeks:0,days:0},time:Ge.ZERO};$r(t),$r(e);let l=bf(t,e,n,o);return s==="nanosecond"&&a===1?l:Fa(l,mt(e),t,null,n,o,a,s,c)}function Ef(t,e,n,o,a,s,c,l){if(Bn(a)==="time")return Zu(t,e,s,c,l);let y=wf(t,e,n,o,a);return c==="nanosecond"&&s===1?y:Fa(y,e,ln(n,t),n,o,a,s,c,l)}function vi(t,e,n,o,a,s){let c=ci.reduce((T,O)=>{let A=O[0],j=O[1],H=O[2];return n!=="datetime"&&H!==n||o.includes(j)||T.push(j,A),T},[]),l=Ut(e,"largestUnit",n,"auto");if(o.includes(l))throw new RangeError(`largestUnit must be one of ${c.join(", ")}, not ${l}`);let y=pi(e),m=gn(e,"trunc");t==="since"&&(m=(function(T){switch(T){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return T}})(m));let g=Ut(e,"smallestUnit",n,a);if(o.includes(g))throw new RangeError(`smallestUnit must be one of ${c.join(", ")}, not ${g}`);let b=zn(s,g);if(l==="auto"&&(l=b),zn(l,g)!==l)throw new RangeError(`largestUnit ${l} cannot be smaller than smallestUnit ${g}`);let D={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];return D!==void 0&&yi(y,D,!1),{largestUnit:l,roundingIncrement:y,roundingMode:m,smallestUnit:g}}function gl(t,e,n,o){let a=Zi(n),s=vi(t,Se(o),"time",[],"nanosecond","second"),c=un(Zu(_(e,Oe),_(a,Oe),s.roundingIncrement,s.smallestUnit,s.roundingMode),s.largestUnit);return t==="since"&&(c=Wt(c)),c}function vl(t,e,n,o){let a=Ki(n),s=_(e,se),c=_(a,se);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vi(t,Se(o),"date",[],"day","day"),y=pt("%Temporal.Duration%"),m=_(e,Re),g=_(a,Re);if(In(m,g)===0)return new y;let b={date:ko(s,m,g,l.largestUnit),time:Ge.ZERO};if(l.smallestUnit!=="day"||l.roundingIncrement!==1){let T=Ze(m,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});b=Fa(b,mt(Ze(g,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),T,null,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode)}let D=un(b,"day");return t==="since"&&(D=Wt(D)),D}function _l(t,e,n,o){let a=Ui(n),s=_(e,se),c=_(a,se);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vi(t,Se(o),"datetime",[],"nanosecond","day"),y=pt("%Temporal.Duration%"),m=_(e,Xe),g=_(a,Xe);if(di(m,g)===0)return new y;let b=un(xf(m,g,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode),l.largestUnit);return t==="since"&&(b=Wt(b)),b}function bl(t,e,n,o){let a=ar(n),s=vi(t,Se(o),"time",[],"nanosecond","hour"),c=Uu(_(e,nt),_(a,nt));c=Ea(c,s.roundingIncrement,s.smallestUnit,s.roundingMode);let l=un(Fn({years:0,months:0,weeks:0,days:0},c),s.largestUnit);return t==="since"&&(l=Wt(l)),l}function wl(t,e,n,o){let a=Wi(n),s=_(e,se),c=_(a,se);if(!Tn(s,c))throw new RangeError(`cannot compute difference between months of ${s} and ${c} calendars`);let l=vi(t,Se(o),"date",["week","day"],"month","year"),y=pt("%Temporal.Duration%");if(In(_(e,Re),_(a,Re))==0)return new y;let m=Nt(s,_(e,Re),"year-month");m.day=1;let g=fr(s,m,"constrain"),b=Nt(s,_(a,Re),"year-month");b.day=1;let D=fr(s,b,"constrain"),T={date:_t(ko(s,g,D,l.largestUnit),0,0),time:Ge.ZERO};if(l.smallestUnit!=="month"||l.roundingIncrement!==1){let A=Ze(g,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});T=Fa(T,mt(Ze(D,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),A,null,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode)}let O=un(T,"day");return t==="since"&&(O=Wt(O)),O}function Dl(t,e,n,o){let a=qi(n),s=_(e,se),c=_(a,se);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vi(t,Se(o),"datetime",[],"nanosecond","hour"),y=_(e,Oe),m=_(a,Oe),g=pt("%Temporal.Duration%"),b;if(Bn(l.largestUnit)!=="date")b=un(Zu(y,m,l.roundingIncrement,l.smallestUnit,l.roundingMode),l.largestUnit);else{let D=_(e,We);if(!ff(D,_(a,We)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(z.default.equal(y,m))return new g;b=un(Ef(y,m,D,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode),"hour")}return t==="since"&&(b=Wt(b)),b}function fi({hour:t,minute:e,second:n,millisecond:o,microsecond:a,nanosecond:s},c){let l=n,y=s;return l+=c.sec,y+=c.subsec,or(t,e,l,o,a,y)}function lu(t,e){let n=e.addToEpochNs(t);return kn(n),n}function Hi(t,e,n,o,a="constrain"){if(La(o.date)===0)return lu(t,o.time);let s=ln(e,t);return lu(bt(e,Ze(tn(n,s.isoDate,o.date,a),s.time),"compatible"),o.time)}function xl(t,e,n){let o=cn(n);t==="subtract"&&(o=Wt(o));let a=zn(jn(e),jn(o));if(xn(a))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");let s=Cn(e),c=Cn(o);return un(Fn({years:0,months:0,weeks:0,days:0},s.time.add(c.time)),a)}function El(t,e,n){let o=cn(n);t==="subtract"&&(o=Wt(o));let a=jn(o);if(Bn(a)==="date")throw new RangeError(`Duration field ${a} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);let s=Cn(o);return pn(lu(_(e,Oe),s.time))}function Cl(t,e,n,o){let a=_(e,se),s=cn(n);t==="subtract"&&(s=Wt(s));let c=_f(s),l=Ue(Se(o));return At(tn(a,_(e,Re),c,l),a)}function Sl(t,e,n,o){let a=cn(n);t==="subtract"&&(a=Wt(a));let s=Ue(Se(o)),c=_(e,se),l=Cn(a),y=_(e,Xe),m=fi(y.time,l.time),g=_t(l.date,m.deltaDays);return za(g.years,g.months,g.weeks,g.days,0,0,0,0,0,0),sn(Ze(tn(c,y.isoDate,g,s),m),c)}function Tl(t,e,n){let o=cn(n);t==="subtract"&&(o=Wt(o));let a=Cn(o),{hour:s,minute:c,second:l,millisecond:y,microsecond:m,nanosecond:g}=fi(_(e,nt),a.time);return Ln(ja(s,c,l,y,m,g,"reject"))}function kl(t,e,n,o){let a=cn(n);t==="subtract"&&(a=Wt(a));let s=Ue(Se(o)),c=xa(a),l=_(e,se),y=Nt(l,_(e,Re),"year-month");y.day=1;let m=fr(l,y,"constrain");if(c<0){let b=tn(l,m,{months:1},"constrain");m=Zt(b.year,b.month,b.day-1)}let g=_f(a);return zr(m),oi(io(l,Nt(l,tn(l,m,g,s),"year-month"),s),l)}function Il(t,e,n,o){let a=cn(n);t==="subtract"&&(a=Wt(a));let s=Ue(Se(o)),c=_(e,We),l=_(e,se),y=ni(a);return vt(Hi(_(e,Oe),c,l,y,s),c,l)}function sr(t,e,n){let o=Math.trunc(t/e),a=t%e,s=t<0?"negative":"positive",c=Math.abs(o),l=c+1,y=Kt(Math.abs(2*a)-e),m=c%2==0,g=Ra(n,s),b=a===0?c:Pa(c,l,y,m,g);return e*(s==="positive"?b:-b)}function fu(t,e,n,o){let a=li[n]*e;return(function(s,c,l){let y=Nn(s),m=Nn(c),g=z.default.divide(y,m),b=z.default.remainder(y,m),D=Ra(l,"positive"),T,O;z.default.lessThan(y,Jt)?(T=z.default.subtract(g,to),O=g):(T=g,O=z.default.add(g,to));let A=pa(Ir(z.default.multiply(b,Nu)),m)*(z.default.lessThan(y,Jt)?-1:1)+0,j=z.default.equal(b,Jt)?g:Pa(T,O,A,Pl(T),D);return z.default.multiply(j,m)})(t,z.default.BigInt(a),o)}function du(t,e,n,o){cu(t);let{year:a,month:s,day:c}=t.isoDate,l=hu(t.time,e,n,o);return Ze(Zt(a,s,c+l.deltaDays),l)}function hu({hour:t,minute:e,second:n,millisecond:o,microsecond:a,nanosecond:s},c,l,y){let m;switch(l){case"day":case"hour":m=1e3*(1e3*(1e3*(60*(60*t+e)+n)+o)+a)+s;break;case"minute":m=1e3*(1e3*(1e3*(60*e+n)+o)+a)+s;break;case"second":m=1e3*(1e3*(1e3*n+o)+a)+s;break;case"millisecond":m=1e3*(1e3*o+a)+s;break;case"microsecond":m=1e3*a+s;break;case"nanosecond":m=s}let g=li[l],b=sr(m,g*c,y)/g;switch(l){case"day":return{deltaDays:b,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return or(b,0,0,0,0,0);case"minute":return or(t,b,0,0,0,0);case"second":return or(t,e,b,0,0,0);case"millisecond":return or(t,e,n,b,0,0);case"microsecond":return or(t,e,n,o,b,0);case"nanosecond":return or(t,e,n,o,a,b);default:throw new Error(`Invalid unit ${l}`)}}function Ea(t,e,n,o){let a=li[n];return t.round(z.default.BigInt(a*e),o)}function eo(t,e){let n=li[e];return t.fdiv(z.default.BigInt(n))}function In(t,e){return t.year!==e.year?Kt(t.year-e.year):t.month!==e.month?Kt(t.month-e.month):t.day!==e.day?Kt(t.day-e.day):0}function mu(t,e){return t.hour!==e.hour?Kt(t.hour-e.hour):t.minute!==e.minute?Kt(t.minute-e.minute):t.second!==e.second?Kt(t.second-e.second):t.millisecond!==e.millisecond?Kt(t.millisecond-e.millisecond):t.microsecond!==e.microsecond?Kt(t.microsecond-e.microsecond):t.nanosecond!==e.nanosecond?Kt(t.nanosecond-e.nanosecond):0}function di(t,e){let n=In(t.isoDate,e.isoDate);return n!==0?n:mu(t.time,e.time)}function Cf(t){let e=Ca(t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function fn(t,e){let n=Nn(t),{quotient:o,remainder:a}=zi(n,bo),s=z.default.toNumber(o);return e==="floor"&&z.default.toNumber(a)<0&&(s-=1),e==="ceil"&&z.default.toNumber(a)>0&&(s+=1),s}function yn(t){if(!Number.isInteger(t))throw new RangeError("epoch milliseconds must be an integer");return z.default.multiply(z.default.BigInt(t),bo)}function Ca(t){let e=t;if(typeof t=="object"){let n=t[Symbol.toPrimitive];n&&typeof n=="function"&&(e=n.call(t,"number"))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?z.default.BigInt(e.toString(10)):z.default.BigInt(e)}var pu=(()=>{let t=z.default.BigInt(Date.now()%1e6);return()=>{let e=Date.now(),n=z.default.BigInt(e),o=z.default.add(yn(e),t);return t=z.default.remainder(n,bo),z.default.greaterThan(o,ui)?ui:z.default.lessThan(o,no)?no:o}})();function Li(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Kt(t){return t<0?-1:t>0?1:t}function Se(t){if(t===void 0)return Object.create(null);if(rt(t)&&t!==null)return t;throw new TypeError("Options parameter must be an object, not "+(t===null?"null":typeof t))}function jr(t,e){let n=Object.create(null);return n[t]=e,n}function Kn(t,e,n,o){let a=t[e];if(a!==void 0){if(a=$a(a),!n.includes(a))throw new RangeError(`${e} must be one of ${n.join(", ")}, not ${a}`);return a}if(o===Zn)throw new RangeError(`${e} option is required`);return o}function Bt(t){let e=uo(t);if(!dp.includes(uo(e)))throw new RangeError(`invalid calendar identifier ${e}`);switch(e){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return e}function uo(t){let e="";for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);e+=o>=65&&o<=90?String.fromCharCode(o+32):String.fromCharCode(o)}return e}function mr(t){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${t==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${t}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}var _p=new RegExp(`^${ql.source}$`),bp=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function Sf(t,e,n,o=t(e),a=t(n)){let s=e,c=n,l=o,y=a;for(;c-s>1;){let m=Math.trunc((s+c)/2),g=t(m);g===l?(s=m,l=g):g===y&&(c=m,y=g)}return c}function Tf(t){return[...t]}function kf(t,e){if(t!=="gregory"&&t!=="iso8601")return;let n=Ro[t],o=e.year,{dayOfWeek:a,dayOfYear:s,daysInYear:c}=n.isoToDate(e,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),l=n.getFirstDayOfWeek(),y=n.getMinimalDaysInFirstWeek(),m=(a+7-l)%7,g=(a-s+7001-l)%7,b=Math.floor((s-1+g)/7);if(7-g>=y&&++b,b==0)b=(function(D,T,O,A){let j=(A-D-O+1)%7;j<0&&(j+=7);let H=Math.floor((O+j-1)/7);return 7-j>=T&&++H,H})(l,y,s+n.isoToDate(n.dateAdd(e,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,a),o--;else if(s>=c-5){let D=(m+c-s)%7;D<0&&(D+=7),6-D>=y&&s+7-m>c&&(b=1,o++)}return{week:b,year:o}}function Ml(t,e,n,o,a){if(e!==a.year){if(t*(e-a.year)>0)return!0}else if(n!==a.month){if(t*(n-a.month)>0)return!0}else if(o!==a.day&&t*(o-a.day)>0)return!0;return!1}var Ro={};function Br(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);let e=+t.slice(1);if(Number.isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function Sn(t,e=!1){return`M${`${t}`.padStart(2,"0")}${e?"L":""}`}function Wu(t,e=void 0,n=12){let{month:o,monthCode:a}=t;if(a===void 0){if(o===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ft(o,1,n),e==="constrain"&&(o=Pt(o,1,n)),a=Sn(o)}else{let s=Br(a);if(a!==Sn(s))throw new RangeError(`Invalid month code: ${a}`);if(o!==void 0&&o!==s)throw new RangeError(`monthCode ${a} and month ${o} must match if both are present`);if(o=s,o<1||o>n)throw new RangeError(`Invalid monthCode: ${a}`)}return{...t,month:o,monthCode:a}}Ro.iso8601={resolveFields(t,e){if((e==="date"||e==="year-month")&&t.year===void 0)throw new TypeError("year is required");if((e==="date"||e==="month-day")&&t.day===void 0)throw new TypeError("day is required");Object.assign(t,Wu(t))},dateToISO:(t,e)=>Vi(t.year,t.month,t.day,e),monthDayToISOReferenceDate(t,e){let{month:n,day:o}=Vi(t.year??1972,t.month,t.day,e);return{month:n,day:o,year:1972}},extraFields:()=>[],fieldKeysToIgnore(t){let e=new Set;for(let n=0;n<t.length;n++){let o=t[n];e.add(o),o==="month"?e.add("monthCode"):o==="monthCode"&&e.add("month")}return Tf(e)},dateAdd(t,{years:e=0,months:n=0,weeks:o=0,days:a=0},s){let{year:c,month:l,day:y}=t;return c+=e,l+=n,{year:c,month:l}=Mr(c,l),{year:c,month:l,day:y}=Vi(c,l,y,s),y+=a+7*o,Zt(c,l,y)},dateUntil(t,e,n){let o=-In(t,e);if(o===0)return{years:0,months:0,weeks:0,days:0};let a,s=0,c=0;if(n==="year"||n==="month"){let g=e.year-t.year;for(g!==0&&(g-=o);!Ml(o,t.year+g,t.month,t.day,e);)s=g,g+=o;let b=o;for(a=Mr(t.year+s,t.month+b);!Ml(o,a.year,a.month,t.day,e);)c=b,b+=o,a=Mr(a.year,a.month+o);n==="month"&&(c+=12*s,s=0)}a=Mr(t.year+s,t.month+c);let l=vf(a.year,a.month,t.day),y=0,m=Nr(e.year,e.month-1,e.day)-Nr(l.year,l.month-1,l.day);return n==="week"&&(y=Math.trunc(m/7),m%=7),{years:s,months:c,weeks:y,days:m}},isoToDate({year:t,month:e,day:n},o){let a={era:void 0,eraYear:void 0,year:t,month:e,day:n,daysInWeek:7,monthsInYear:12};if(o.monthCode&&(a.monthCode=Sn(e)),o.dayOfWeek){let s=e+(e<3?10:-2),c=t-(e<3?1:0),l=Math.floor(c/100),y=c-100*l,m=(n+Math.floor(2.6*s-.2)+(y+Math.floor(y/4))+(Math.floor(l/4)-2*l))%7;a.dayOfWeek=m+(m<=0?7:0)}if(o.dayOfYear){let s=n;for(let c=e-1;c>0;c--)s+=Rr(t,c);a.dayOfYear=s}return o.weekOfYear&&(a.weekOfYear=kf("iso8601",{year:t,month:e,day:n})),o.daysInMonth&&(a.daysInMonth=Rr(t,e)),(o.daysInYear||o.inLeapYear)&&(a.inLeapYear=Da(t),a.daysInYear=a.inLeapYear?366:365),a},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};var Xt=class t{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,e!==void 0){let n=0;for(let o of e.map.entries()){if(++n>t.MAX_CACHE_ENTRIES)break;this.map.set(...o)}}}get(e){let n=this.map.get(e);return n&&(this.hits++,this.report()),this.calls++,n}set(e,n){this.map.set(e,n),this.misses++,this.report()}report(){}setObject(e){if(t.objectMap.get(e))throw new RangeError("object already cached");t.objectMap.set(e,this),this.report()}static getCacheForObject(e){let n=t.objectMap.get(e);return n||(n=new t,t.objectMap.set(e,n)),n}};function If({isoYear:t,isoMonth:e,isoDay:n}){return`${Oo(t)}-${nn(e)}-${nn(n)}T00:00Z`}function Hs(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}Xt.objectMap=new WeakMap,Xt.MAX_CACHE_ENTRIES=1e3;var Wn=class{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(e){let n=this.getFormatter(),o=new Date(e);if(e==="-271821-04-19T00:00Z"){let a=n.resolvedOptions();n=new Intl.DateTimeFormat(a.locale,{...a,timeZone:"Etc/GMT+1"}),o=new Date("-271821-04-20T00:00Z")}try{return n.formatToParts(o)}catch{throw new RangeError(`Invalid ISO date: ${e}`)}}isoToCalendarDate(e,n){let{year:o,month:a,day:s}=e,c=JSON.stringify({func:"isoToCalendarDate",isoYear:o,isoMonth:a,isoDay:s,id:this.id}),l=n.get(c);if(l)return l;let y=If({isoYear:o,isoMonth:a,isoDay:s}),m=this.getCalendarParts(y),g={};for(let D=0;D<m.length;D++){let{type:T,value:O}=m[D];if(T!=="year"&&T!=="relatedYear"||(this.hasEra?g.eraYear=+O:g.year=+O),T==="month"){let A=/^([0-9]*)(.*?)$/.exec(O);if(!A||A.length!=3||!A[1]&&!A[2])throw new RangeError(`Unexpected month: ${O}`);if(g.month=A[1]?+A[1]:1,g.month<1)throw new RangeError(`Invalid month ${O} from ${y}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(g.month>13)throw new RangeError(`Invalid month ${O} from ${y}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);A[2]&&(g.monthExtra=A[2])}T==="day"&&(g.day=+O),this.hasEra&&T==="era"&&O!=null&&O!==""&&(g.era=O.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&g.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){let D=this.eras.find(T=>g.era===T.genericName);D&&(g.era=D.code)}if(this.reviseIntlEra){let{era:D,eraYear:T}=this.reviseIntlEra(g,e);g.era=D,g.eraYear=T}this.checkIcuBugs&&this.checkIcuBugs(e);let b=this.adjustCalendarDate(g,n,"constrain",!0);if(b.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(b.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(b.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return n.set(c,b),["constrain","reject"].forEach(D=>{let T=JSON.stringify({func:"calendarToIsoDate",year:b.year,month:b.month,day:b.day,overflow:D,id:this.id});n.set(T,e)}),b}validateCalendarDate(e){let{month:n,year:o,day:a,eraYear:s,monthCode:c,monthExtra:l}=e;if(l!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(o===void 0&&s===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&c===void 0)throw new TypeError("month or monthCode is required");if(a===void 0)throw new RangeError("Missing day");if(c!==void 0){if(typeof c!="string")throw new RangeError("monthCode must be a string, not "+typeof c);if(!/^M([01]?\d)(L?)$/.test(c))throw new RangeError(`Invalid monthCode: ${c}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(e,n=void 0,o="constrain",a=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let s=e;this.validateCalendarDate(s);let c=this.monthsInYear(s,n),{month:l,monthCode:y}=s;return{month:l,monthCode:y}=Wu(s,o,c),{...s,month:l,monthCode:y}}regulateMonthDayNaive(e,n,o){let a=this.monthsInYear(e,o),{month:s,day:c}=e;return n==="reject"?(ft(s,1,a),ft(c,1,this.maximumMonthLength(e))):(s=Pt(s,1,a),c=Pt(c,1,this.maximumMonthLength({...e,month:s}))),{...e,month:s,day:c}}calendarToIsoDate(e,n="constrain",o){let a=e,s=this.adjustCalendarDate(e,o,n,!1);s=this.regulateMonthDayNaive(s,n,o);let{year:c,month:l,day:y}=s,m=JSON.stringify({func:"calendarToIsoDate",year:c,month:l,day:y,overflow:n,id:this.id}),g,b=o.get(m);if(b||a.year!==void 0&&a.month!==void 0&&a.day!==void 0&&(a.year!==s.year||a.month!==s.month||a.day!==s.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:a.year,month:a.month,day:a.day,overflow:n,id:this.id}),b=o.get(g),b))return b;let D=this.estimateIsoDate({year:c,month:l,day:y}),T=J=>{let oe=this.addDaysIso(D,J);if(s.day>this.minimumMonthLength(s)){let ie=this.isoToCalendarDate(oe,o);for(;ie.month!==l||ie.year!==c;){if(n==="reject")throw new RangeError(`day ${y} does not exist in month ${l} of year ${c}`);oe=this.addDaysIso(oe,-1),ie=this.isoToCalendarDate(oe,o)}}return oe},O=0,A=this.isoToCalendarDate(D,o),j=Hs(s,A);if(j.years!==0||j.months!==0||j.days!==0){let J=365*j.years+30*j.months+j.days;D=this.addDaysIso(D,J),A=this.isoToCalendarDate(D,o),j=Hs(s,A),j.years===0&&j.months===0?D=T(j.days):O=this.compareCalendarDates(s,A)}let H=8;for(;O;){D=this.addDaysIso(D,O*H);let J=A;A=this.isoToCalendarDate(D,o);let oe=O;if(O=this.compareCalendarDates(s,A),O){if(j=Hs(s,A),j.years===0&&j.months===0)D=T(j.days),O=0;else if(oe&&O!==oe)if(H>1)H/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...a})}`);this.compareCalendarDates(A,J)>0&&(D=this.addDaysIso(D,-1)),O=0}}}if(o.set(m,D),g&&o.set(g,D),s.year===void 0||s.month===void 0||s.day===void 0||s.monthCode===void 0||this.hasEra&&(s.era===void 0||s.eraYear===void 0))throw new RangeError("Unexpected missing property");return D}compareCalendarDates(e,n){return e.year!==n.year?Kt(e.year-n.year):e.month!==n.month?Kt(e.month-n.month):e.day!==n.day?Kt(e.day-n.day):0}regulateDate(e,n="constrain",o){let a=this.calendarToIsoDate(e,n,o);return this.isoToCalendarDate(a,o)}addDaysIso(e,n){return Zt(e.year,e.month,e.day+n)}addDaysCalendar(e,n,o){let a=this.calendarToIsoDate(e,"constrain",o),s=this.addDaysIso(a,n);return this.isoToCalendarDate(s,o)}addMonthsCalendar(e,n,o,a){let s=e,{day:c}=s;for(let l=0,y=Math.abs(n);l<y;l++){let{month:m}=s,g=s,b=n<0?-Math.max(c,this.daysInPreviousMonth(s,a)):this.daysInMonth(s,a),D=this.calendarToIsoDate(s,"constrain",a),T=this.addDaysIso(D,b);if(s=this.isoToCalendarDate(T,a),n>0){let O=this.monthsInYear(g,a);for(;s.month-1!=m%O;)T=this.addDaysIso(T,-1),s=this.isoToCalendarDate(T,a)}s.day!==c&&(s=this.regulateDate({...s,day:c},"constrain",a))}if(o==="reject"&&s.day!==c)throw new RangeError(`Day ${c} does not exist in resulting calendar month`);return s}addCalendar(e,{years:n=0,months:o=0,weeks:a=0,days:s=0},c,l){let{year:y,day:m,monthCode:g}=e,b=this.adjustCalendarDate({year:y+n,monthCode:g,day:m},l),D=this.addMonthsCalendar(b,o,c,l),T=s+7*a;return this.addDaysCalendar(D,T,l)}untilCalendar(e,n,o,a){let s=0,c=0,l=0,y=0;switch(o){case"day":s=this.calendarDaysUntil(e,n,a);break;case"week":{let m=this.calendarDaysUntil(e,n,a);s=m%7,c=(m-s)/7;break}case"month":case"year":{let m=this.compareCalendarDates(n,e);if(!m)return{years:0,months:0,weeks:0,days:0};let g=n.year-e.year,b=n.day-e.day;if(o==="year"&&g){let O=0;n.monthCode>e.monthCode&&(O=1),n.monthCode<e.monthCode&&(O=-1),O||(O=Math.sign(b)),y=O*m<0?g-m:g}let D,T=y?this.addCalendar(e,{years:y},"constrain",a):e;do l+=m,D=T,T=this.addMonthsCalendar(D,m,"constrain",a),T.day!==e.day&&(T=this.regulateDate({...T,day:e.day},"constrain",a));while(this.compareCalendarDates(n,T)*m>=0);l-=m,s=this.calendarDaysUntil(D,n,a);break}}return{years:y,months:l,weeks:c,days:s}}daysInMonth(e,n){let{day:o}=e,a=this.maximumMonthLength(e),s=this.minimumMonthLength(e);if(s===a)return s;let c=o<=a-s?a:s,l=this.calendarToIsoDate(e,"constrain",n),y=this.addDaysIso(l,c),m=this.isoToCalendarDate(y,n),g=this.addDaysIso(y,-m.day);return this.isoToCalendarDate(g,n).day}daysInPreviousMonth(e,n){let{day:o,month:a,year:s}=e,c={year:a>1?s:s-1,month:a,day:1},l=a>1?a-1:this.monthsInYear(c,n);c={...c,month:l};let y=this.minimumMonthLength(c),m=this.maximumMonthLength(c);if(y===m)return m;let g=this.calendarToIsoDate(e,"constrain",n),b=this.addDaysIso(g,-o);return this.isoToCalendarDate(b,n).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,n,o){let a=this.calendarToIsoDate(e,"constrain",o),s=this.calendarToIsoDate(n,"constrain",o);return Nr(s.year,s.month-1,s.day)-Nr(a.year,a.month-1,a.day)}monthDaySearchStartYear(e,n){return 1972}monthDayFromFields(e,n,o){let a,s,c,l,y,{era:m,eraYear:g,year:b,month:D,monthCode:T,day:O}=e;if(D!==void 0&&b===void 0&&(!this.hasEra||m===void 0||g===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(T===void 0||b!==void 0||this.hasEra&&g!==void 0)&&({monthCode:T,day:O}=this.isoToCalendarDate(this.calendarToIsoDate(e,n,o),o));let A={year:this.monthDaySearchStartYear(T,O),month:12,day:31},j=this.isoToCalendarDate(A,o),H=j.monthCode>T||j.monthCode===T&&j.day>=O?j.year:j.year-1;for(let J=0;J<20;J++){let oe=this.adjustCalendarDate({day:O,monthCode:T,year:H-J},o),ie=this.calendarToIsoDate(oe,"constrain",o),le=this.isoToCalendarDate(ie,o);if({year:a,month:s,day:c}=ie,le.monthCode===T&&le.day===O)return{month:s,day:c,year:a};if(n==="constrain"){let pe=this.maxLengthOfMonthCodeInAnyYear(le.monthCode);if(le.monthCode===T&&le.day===pe&&O>pe)return{month:s,day:c,year:a};(l===void 0||le.monthCode===l.monthCode&&le.day>l.day)&&(l=le,y=ie)}}if(n==="constrain"&&y!==void 0)return y;throw new RangeError(`No recent ${this.id} year with monthCode ${T} and day ${O}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}},yu=class extends Wn{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(e){let{year:n}=e;return(7*n+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,n){let{month:o,year:a}=e,s=this.getMonthCode(a,o),c=Object.entries(this.months).find(y=>y[1].monthCode===s);if(c===void 0)throw new RangeError(`unmatched Hebrew month: ${o}`);let l=c[1].days;return typeof l=="number"?l:l[n]}maxLengthOfMonthCodeInAnyYear(e){return["M04","M06","M08","M10","M12"].includes(e)?29:30}estimateIsoDate(e){let{year:n}=e;return{year:n-3760,month:1,day:1}}getMonthCode(e,n){return this.inLeapYear({year:e})?n===6?Sn(5,!0):Sn(n<6?n:n-1):Sn(n)}adjustCalendarDate(e,n,o="constrain",a=!1){let{year:s,month:c,monthCode:l,day:y,monthExtra:m}=e;if(s===void 0)throw new TypeError("Missing property: year");if(a){if(m){let g=this.months[m];if(!g)throw new RangeError(`Unrecognized month from formatToParts: ${m}`);c=this.inLeapYear({year:s})?g.leap:g.regular}return l=this.getMonthCode(s,c),{year:s,month:c,day:y,monthCode:l}}if(this.validateCalendarDate(e),c===void 0)if(l.endsWith("L")){if(l!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${l}`);if(c=6,!this.inLeapYear({year:s})){if(o==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${s} which is not a leap year`);c=6,l="M06"}}else{c=Br(l),this.inLeapYear({year:s})&&c>=6&&c++;let g=this.monthsInYear({year:s});if(c<1||c>g)throw new RangeError(`Invalid monthCode: ${l}`)}else if(o==="reject"?(ft(c,1,this.monthsInYear({year:s})),ft(y,1,this.maximumMonthLength({year:s,month:c}))):(c=Pt(c,1,this.monthsInYear({year:s})),y=Pt(y,1,this.maximumMonthLength({year:s,month:c}))),l===void 0)l=this.getMonthCode(s,c);else if(this.getMonthCode(s,c)!==l)throw new RangeError(`monthCode ${l} doesn't correspond to month ${c} in Hebrew year ${s}`);return{...e,day:y,month:c,monthCode:l,year:s}}},dr=class extends Wn{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(e,n){let o={year:e.year,month:1,monthCode:"M01",day:1},a={year:e.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(o,a,n)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(e){let{year:n}=this.adjustCalendarDate(e);return{year:Math.floor(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}},gu=class extends dr{constructor(){super(...arguments),this.id="islamic"}},vu=class extends dr{constructor(){super(...arguments),this.id="islamic-umalqura"}},_u=class extends dr{constructor(){super(...arguments),this.id="islamic-tbla"}},bu=class extends dr{constructor(){super(...arguments),this.id="islamic-civil"}},wu=class extends dr{constructor(){super(...arguments),this.id="islamic-rgsa"}},Du=class extends dr{constructor(){super(...arguments),this.id="islamicc"}},xu=class extends Wn{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(e,n){return this.daysInMonth({year:e.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===12?29:n<=6?31:30}maximumMonthLength(e){let{month:n}=e;return n===12?30:n<=6?31:30}maxLengthOfMonthCodeInAnyYear(e){return Br(e)<=6?31:30}estimateIsoDate(e){let{year:n}=this.adjustCalendarDate(e);return{year:n+621,month:1,day:1}}},Eu=class extends Wn{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return qu(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}maxLengthOfMonthCodeInAnyYear(e){let n=Br(e),o=this.months[n];return o=o.leap??o,o.length}getMonthInfo(e){let{month:n}=e,o=this.months[n];if(o===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(e)&&o.leap&&(o=o.leap),o}estimateIsoDate(e){let n=this.adjustCalendarDate(e),o=this.getMonthInfo(n);return Zt(n.year+78+(o.nextYear?1:0),o.month,o.day+n.day-1)}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}};function qu(t){return t%4==0&&(t%100!=0||t%400==0)}var Sa=class extends Wn{constructor(e,n){super(),this.calendarType="solar",this.id=e,this.isoEpoch=n}inLeapYear(e){let{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return qu(n)}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}maxLengthOfMonthCodeInAnyYear(e){return[31,29,31,30,31,30,31,31,30,31,30,31][Br(e)-1]}estimateIsoDate(e){let n=this.adjustCalendarDate(e);return Vi(n.year+this.isoEpoch.year,n.month+this.isoEpoch.month,n.day+this.isoEpoch.day,"constrain")}},Ta=class extends Wn{constructor(e,n){super(),this.hasEra=!0,this.calendarType="solar",this.id=e;let{eras:o,anchorEra:a}=(function(s){let c,l=s;if(l.length===0)throw new RangeError("Invalid era data: eras are required");if(l.length===1&&l[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(l.length===1&&!l[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(l.filter(m=>m.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");l.forEach(m=>{if(m.isAnchor||!m.anchorEpoch&&!m.reverseOf){if(c)throw new RangeError("Invalid era data: cannot have multiple anchor eras");c=m,m.anchorEpoch={year:m.hasYearZero?0:1}}else if(!m.code)throw new RangeError("If era name is blank, it must be the anchor era")}),l=l.filter(m=>m.code),l.forEach(m=>{let{reverseOf:g}=m;if(g){let b=l.find(D=>D.code===g);if(b===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${g}`);m.reverseOf=b,m.anchorEpoch=b.anchorEpoch,m.isoEpoch=b.isoEpoch}m.anchorEpoch.month===void 0&&(m.anchorEpoch.month=1),m.anchorEpoch.day===void 0&&(m.anchorEpoch.day=1)}),l.sort((m,g)=>{if(m.reverseOf)return 1;if(g.reverseOf)return-1;if(!m.isoEpoch||!g.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return g.isoEpoch.year-m.isoEpoch.year});let y=l[l.length-1].reverseOf;if(y&&y!==l[l.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return l.forEach((m,g)=>{m.genericName="era"+(l.length-1-g)}),{eras:l,anchorEra:c||l[0]}})(n);this.anchorEra=a,this.eras=o}inLeapYear(e){let{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return qu(n)}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}maxLengthOfMonthCodeInAnyYear(e){return[31,29,31,30,31,30,31,31,30,31,30,31][Br(e)-1]}completeEraYear(e){let n=(l,y,m)=>{let g=e[l];if(g!=null&&g!=y&&!(m||[]).includes(g)){let b=m?.[0];throw new RangeError(`Input ${l} ${g} doesn't match calculated value ${b?`${y} (also called ${b})`:y}`)}},o=l=>{let y,m={...e,year:l},g=this.eras.find((b,D)=>{if(D===this.eras.length-1){if(b.reverseOf){if(l>0)throw new RangeError(`Signed year ${l} is invalid for era ${b.code}`);return y=b.anchorEpoch.year-l,!0}return y=l-b.anchorEpoch.year+(b.hasYearZero?0:1),!0}return this.compareCalendarDates(m,b.anchorEpoch)>=0&&(y=l-b.anchorEpoch.year+(b.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${l} was not matched by any era`);return{eraYear:y,era:g.code,eraNames:g.names}},{year:a,eraYear:s,era:c}=e;if(a!=null){let l=o(a);({eraYear:s,era:c}=l),n("era",c,l?.eraNames),n("eraYear",s)}else{if(s==null)throw new RangeError("Either year or eraYear and era are required");{if(c===void 0)throw new RangeError("era and eraYear must be provided together");let l=this.eras.find(({code:y,names:m=[]})=>y===c||m.includes(c));if(!l)throw new RangeError(`Era ${c} (ISO year ${s}) was not matched by any era`);a=l.reverseOf?l.anchorEpoch.year-s:s+l.anchorEpoch.year-(l.hasYearZero?0:1),n("year",a),{eraYear:s,era:c}=o(a)}}return{...e,year:a,eraYear:s,era:c}}adjustCalendarDate(e,n,o="constrain"){let a=e,{month:s,monthCode:c}=a;return s===void 0&&(a={...a,month:Br(c)}),this.validateCalendarDate(a),a=this.completeEraYear(a),super.adjustCalendarDate(a,n,o)}estimateIsoDate(e){let n=this.adjustCalendarDate(e),{year:o,month:a,day:s}=n,{anchorEra:c}=this;return Vi(o+c.isoEpoch.year-(c.hasYearZero?0:1),a,s,"constrain")}},co=class extends Ta{constructor(e,n){super(e,n)}isoToCalendarDate(e){let{year:n,month:o,day:a}=e,s=Sn(o),c=n-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:c,month:o,monthCode:s,day:a})}},En={inLeapYear(t){let{year:e}=t;return(e+1)%4==0},monthsInYear:()=>13,minimumMonthLength(t){let{month:e}=t;return e===13?this.inLeapYear(t)?6:5:30},maximumMonthLength(t){return this.minimumMonthLength(t)},maxLengthOfMonthCodeInAnyYear:t=>t==="M13"?6:30},Cu=class extends Sa{constructor(e,n){super(e,n),this.inLeapYear=En.inLeapYear,this.monthsInYear=En.monthsInYear,this.minimumMonthLength=En.minimumMonthLength,this.maximumMonthLength=En.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=En.maxLengthOfMonthCodeInAnyYear}},ka=class extends Ta{constructor(e,n){super(e,n),this.inLeapYear=En.inLeapYear,this.monthsInYear=En.monthsInYear,this.minimumMonthLength=En.minimumMonthLength,this.maximumMonthLength=En.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=En.maxLengthOfMonthCodeInAnyYear}},Su=class extends Cu{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}},Tu=class extends ka{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}},ku=class extends ka{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}},Iu=class extends co{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}},Mu=class extends Sa{constructor(){super("buddhist",{year:-543,month:1,day:1})}},Ou=class extends co{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(e){let{era:n,eraYear:o}=e;return n==="b"&&(n="gregory-inverse"),n==="a"&&(n="gregory"),{era:n,eraYear:o}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}},Ru=class extends co{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(e,n){let{era:o,eraYear:a}=e,{year:s}=n;return this.eras.find(c=>c.code===o)?{era:o,eraYear:a}:s<1?{era:"japanese-inverse",eraYear:1-s}:{era:"japanese",eraYear:s}}},Ia=class extends Wn{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(e,n){let o=this.getMonthList(e.year,n);return Object.entries(o).length===13}monthsInYear(e,n){return this.inLeapYear(e,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(e){return["M01L","M09L","M10L","M11L","M12L"].includes(e)?29:30}monthDaySearchStartYear(e,n){let o={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[e]??[1972,1972];return n<30?o[0]:o[1]}getMonthList(e,n){if(e===void 0)throw new TypeError("Missing year");let o=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),a=n.get(o);if(a)return a;let s=this.getFormatter(),c=(j,H)=>{let J=If({isoYear:j,isoMonth:2,isoDay:1}),oe=new Date(J);oe.setUTCDate(H+1);let ie=s.formatToParts(oe),le=ie.find(be=>be.type==="month").value,pe=+ie.find(be=>be.type==="day").value,we=ie.find(be=>be.type==="relatedYear"),De;if(we===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return De=+we.value,{calendarMonthString:le,calendarDay:pe,calendarYearToVerify:De}},l=17,{calendarMonthString:y,calendarDay:m,calendarYearToVerify:g}=c(e,l);y!=="1"&&(l+=29,{calendarMonthString:y,calendarDay:m}=c(e,l)),l-=m-5;let b={},D,T,O=1,A=!1;do({calendarMonthString:y,calendarDay:m,calendarYearToVerify:g}=c(e,l)),D&&(b[T].daysInMonth=D+30-m),g!==e?A=!0:(b[y]={monthIndex:O++},l+=30),D=m,T=y;while(!A);return b[T].daysInMonth=D+30-m,n.set(o,b),b}estimateIsoDate(e){let{year:n,month:o}=e;return{year:n,month:o>=12?12:o+1,day:1}}adjustCalendarDate(e,n,o="constrain",a=!1){let{year:s,month:c,monthExtra:l,day:y,monthCode:m}=e;if(s===void 0)throw new TypeError("Missing property: year");if(a){if(l&&l!=="bis")throw new RangeError(`Unexpected leap month suffix: ${l}`);let g=Sn(c,l!==void 0),b=`${c}${l||""}`,D=this.getMonthList(s,n)[b];if(D===void 0)throw new RangeError(`Unmatched month ${b} in Chinese year ${s}`);return c=D.monthIndex,{year:s,month:c,day:y,monthCode:g}}if(this.validateCalendarDate(e),c===void 0){let g=this.getMonthList(s,n),b=m.replace(/^M|L$/g,T=>T==="L"?"bis":"");b[0]==="0"&&(b=b.slice(1));let D=g[b];if(c=D&&D.monthIndex,c===void 0&&m.endsWith("L")&&m!="M13L"&&o==="constrain"){let T=+m.replace(/^M0?|L$/g,"");D=g[T],D&&(c=D.monthIndex,m=Sn(T))}if(c===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${s}`)}else if(m===void 0){let g=this.getMonthList(s,n),b=Object.entries(g),D=b.length;o==="reject"?(ft(c,1,D),ft(y,1,this.maximumMonthLength())):(c=Pt(c,1,D),y=Pt(y,1,this.maximumMonthLength()));let T=b.find(O=>O[1].monthIndex===c);if(T===void 0)throw new RangeError(`Invalid month ${c} in Chinese year ${s}`);m=Sn(+T[0].replace("bis",""),T[0].indexOf("bis")!==-1)}else{let g=this.getMonthList(s,n),b=m.replace(/^M|L$/g,T=>T==="L"?"bis":"");b[0]==="0"&&(b=b.slice(1));let D=g[b];if(!D)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${s}`);if(c!==D.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${c} in Chinese year ${s}`)}return{...e,year:s,month:c,monthCode:m,day:y}}},Pu=class extends Ia{constructor(){super(...arguments),this.id="chinese"}},Au=class extends Ia{constructor(){super(...arguments),this.id="dangi"}},$u=class{constructor(e){this.helper=e}extraFields(e){return this.helper.hasEra&&e.includes("year")?["era","eraYear"]:[]}resolveFields(e){if(this.helper.calendarType!=="lunisolar"){let n=new Xt;Wu(e,void 0,this.helper.monthsInYear({year:e.year??1972},n))}}dateToISO(e,n){let o=new Xt,a=this.helper.calendarToIsoDate(e,n,o);return o.setObject(a),a}monthDayToISOReferenceDate(e,n){let o=new Xt,a=this.helper.monthDayFromFields(e,n,o);return o.setObject(a),a}fieldKeysToIgnore(e){let n=new Set;for(let o=0;o<e.length;o++){let a=e[o];switch(n.add(a),a){case"era":n.add("eraYear"),n.add("year");break;case"eraYear":n.add("era"),n.add("year");break;case"year":n.add("era"),n.add("eraYear");break;case"month":n.add("monthCode"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"monthCode":n.add("month"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"))}}return Tf(n)}dateAdd(e,{years:n,months:o,weeks:a,days:s},c){let l=Xt.getCacheForObject(e),y=this.helper.isoToCalendarDate(e,l),m=this.helper.addCalendar(y,{years:n,months:o,weeks:a,days:s},c,l),g=this.helper.calendarToIsoDate(m,"constrain",l);return Xt.getCacheForObject(g)||new Xt(l).setObject(g),g}dateUntil(e,n,o){let a=Xt.getCacheForObject(e),s=Xt.getCacheForObject(n),c=this.helper.isoToCalendarDate(e,a),l=this.helper.isoToCalendarDate(n,s);return this.helper.untilCalendar(c,l,o,a)}isoToDate(e,n){let o=Xt.getCacheForObject(e),a=this.helper.isoToCalendarDate(e,o);if(n.dayOfWeek&&(a.dayOfWeek=Ro.iso8601.isoToDate(e,{dayOfWeek:!0}).dayOfWeek),n.dayOfYear){let s=this.helper.startOfCalendarYear(a),c=this.helper.calendarDaysUntil(s,a,o);a.dayOfYear=c+1}if(n.weekOfYear&&(a.weekOfYear=kf(this.helper.id,e)),a.daysInWeek=7,n.daysInMonth&&(a.daysInMonth=this.helper.daysInMonth(a,o)),n.daysInYear){let s=this.helper.startOfCalendarYear(a),c=this.helper.addCalendar(s,{years:1},"constrain",o);a.daysInYear=this.helper.calendarDaysUntil(s,c,o)}return n.monthsInYear&&(a.monthsInYear=this.helper.monthsInYear(a,o)),n.inLeapYear&&(a.inLeapYear=this.helper.inLeapYear(a,o)),a}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}};for(let t of[yu,xu,ku,Su,Tu,Pu,Au,Iu,Eu,Mu,Ou,Ru,gu,vu,_u,bu,wu,Du]){let e=new t;Ro[e.id]=new $u(e)}tu("calendarImpl",function(t){return Ro[t]});var lo=Intl.DateTimeFormat;function Vr(t,e){let n=_(t,e);return typeof n=="function"&&(n=new lo(_(t,Kl),n(_(t,Xs))),(function(o,a,s){let c=Oa(o);if(c===void 0)throw new TypeError("Missing slots for the given container");if(c[a]===void 0)throw new TypeError(`tried to reset ${a} which was not set`);c[a]=s})(t,e,n)),n}function Yi(t){return jt(t,Yr)}var Lr=class{constructor(e=void 0,n=void 0){(function(o,a,s){let c=s!==void 0,l;if(c){let b=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];l=(function(T){if(T==null)throw new TypeError(`Expected object not ${T}`);return Object(T)})(s);let D=Object.create(null);for(let T=0;T<b.length;T++){let O=b[T];Object.prototype.hasOwnProperty.call(l,O)&&(D[O]=l[O])}l=D}else l=Object.create(null);let y=new lo(a,l),m=y.resolvedOptions();if(qn(o),c){let b=Object.assign(Object.create(null),m);for(let D in b)Object.prototype.hasOwnProperty.call(l,D)||delete b[D];b.hour12=l.hour12,b.hourCycle=l.hourCycle,Be(o,Xs,b)}else Be(o,Xs,l);Be(o,Kl,m.locale),Be(o,Yr,y),Be(o,ti,m.timeZone),Be(o,Fi,m.calendar),Be(o,jl,Ip),Be(o,Bl,Tp),Be(o,Ll,kp),Be(o,Yl,Sp),Be(o,zl,Mp),Be(o,Fl,Op);let g=c?l.timeZone:void 0;if(g===void 0)Be(o,Qs,m.timeZone);else{let b=$a(g);if(b.startsWith("\u2212"))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");Be(o,Qs,$t(b))}})(this,e,n)}get format(){K(this,Yi);let e=Dp.bind(this);return Object.defineProperties(e,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),e}formatRange(e,n){return K(this,Yi),Ep.call(this,e,n)}formatToParts(e,...n){return K(this,Yi),xp.call(this,e,...n)}formatRangeToParts(e,n){return K(this,Yi),Cp.call(this,e,n)}resolvedOptions(){return K(this,Yi),wp.call(this)}};"formatToParts"in lo.prototype||delete Lr.prototype.formatToParts,"formatRangeToParts"in lo.prototype||delete Lr.prototype.formatRangeToParts;var en=function(t=void 0,e=void 0){return new Lr(t,e)};function wp(){let t=_(this,Yr).resolvedOptions();return t.timeZone=_(this,Qs),t}function Dp(t,...e){let n,o,a=hi(t,this);return a.formatter?(n=a.formatter,o=[fn(a.epochNs,"floor")]):(n=_(this,Yr),o=[t,...e]),n.format(...o)}function xp(t,...e){let n,o,a=hi(t,this);return a.formatter?(n=a.formatter,o=[fn(a.epochNs,"floor")]):(n=_(this,Yr),o=[t,...e]),n.formatToParts(...o)}function Ep(t,e){if(t===void 0||e===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");let n=Ma(t),o=Ma(e),a,s=[n,o];if(Un(n)!==Un(o))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if(Un(n)){if(!Mf(n,o))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");let{epochNs:c,formatter:l}=hi(n,this),{epochNs:y,formatter:m}=hi(o,this);l&&(a=l,s=[fn(c,"floor"),fn(y,"floor")])}return a||(a=_(this,Yr)),a.formatRange(...s)}function Cp(t,e){if(t===void 0||e===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");let n=Ma(t),o=Ma(e),a,s=[n,o];if(Un(n)!==Un(o))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if(Un(n)){if(!Mf(n,o))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");let{epochNs:c,formatter:l}=hi(n,this),{epochNs:y,formatter:m}=hi(o,this);l&&(a=l,s=[fn(c,"floor"),fn(y,"floor")])}return a||(a=_(this,Yr)),a.formatRangeToParts(...s)}function Po(t={},e={}){let n=Object.assign({},t),o=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let a=0;a<o.length;a++){let s=o[a];n[s]=s in e?e[s]:n[s],n[s]!==!1&&n[s]!==void 0||delete n[s]}return n}function Sp(t){let e=Po(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(e.timeStyle!=="long"&&e.timeStyle!=="full"||(delete e.timeStyle,Object.assign(e,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!Ua(e)){if(Ao(t))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(t)}]`);Object.assign(e,{hour:"numeric",minute:"numeric",second:"numeric"})}return e}function Tp(t){let e={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},n=Po(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){let o=n.dateStyle;delete n.dateStyle,Object.assign(n,e[o])}if(!("year"in n||"month"in n||"era"in n)){if(Ao(t))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(t)}]`);Object.assign(n,{year:"numeric",month:"numeric"})}return n}function kp(t){let e={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},n=Po(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){let o=n.dateStyle;delete n.dateStyle,Object.assign(n,e[o])}if(!("month"in n)&&!("day"in n)){if(Ao(t))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(t)}]`);Object.assign(n,{month:"numeric",day:"numeric"})}return n}function Ip(t){let e=Po(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!Ka(e)){if(Ao(t))throw new TypeError(`cannot format PlainDate with options [${Object.keys(t)}]`);Object.assign(e,{year:"numeric",month:"numeric",day:"numeric"})}return e}function Mp(t){let e=Po(t,{timeZoneName:!1});if((e.timeStyle==="long"||e.timeStyle==="full")&&(delete e.timeStyle,Object.assign(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}),e.dateStyle)&&(Object.assign(e,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[e.dateStyle]),delete e.dateStyle),!Ua(e)&&!Ka(e)){if(Ao(t))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(t)}]`);Object.assign(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return e}function Op(t){let e=t;return Ua(e)||Ka(e)||(e=Object.assign({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Ka(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t||"era"in t}function Ua(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t||"fractionalSecondDigits"in t}function Ao(t){return Ka(t)||Ua(t)||"dateStyle"in t||"timeStyle"in t||"timeZoneName"in t}function Un(t){return tt(t)||ot(t)||Qe(t)||Ye(t)||ht(t)||Vt(t)||dt(t)}function Ma(t){return Un(t)?t:Aa(t)}function Mf(t,e){return!(!Un(t)||!Un(e)||ot(t)&&!ot(e)||tt(t)&&!tt(e)||Qe(t)&&!Qe(e)||Ye(t)&&!Ye(e)||ht(t)&&!ht(e)||Vt(t)&&!Vt(e)||dt(t)&&!dt(e))}function hi(t,e){if(ot(t)){let n={isoDate:{year:1970,month:1,day:1},time:_(t,nt)};return{epochNs:bt(_(e,ti),n,"compatible"),formatter:Vr(e,Yl)}}if(ht(t)){let n=_(t,se),o=_(e,Fi);if(n!==o)throw new RangeError(`cannot format PlainYearMonth with calendar ${n} in locale with calendar ${o}`);let a=Ze(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:bt(_(e,ti),a,"compatible"),formatter:Vr(e,Bl)}}if(Vt(t)){let n=_(t,se),o=_(e,Fi);if(n!==o)throw new RangeError(`cannot format PlainMonthDay with calendar ${n} in locale with calendar ${o}`);let a=Ze(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:bt(_(e,ti),a,"compatible"),formatter:Vr(e,Ll)}}if(tt(t)){let n=_(t,se),o=_(e,Fi);if(n!=="iso8601"&&n!==o)throw new RangeError(`cannot format PlainDate with calendar ${n} in locale with calendar ${o}`);let a=Ze(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:bt(_(e,ti),a,"compatible"),formatter:Vr(e,jl)}}if(Qe(t)){let n=_(t,se),o=_(e,Fi);if(n!=="iso8601"&&n!==o)throw new RangeError(`cannot format PlainDateTime with calendar ${n} in locale with calendar ${o}`);let a=_(t,Xe);return{epochNs:bt(_(e,ti),a,"compatible"),formatter:Vr(e,zl)}}if(Ye(t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return dt(t)?{epochNs:_(t,Oe),formatter:Vr(e,Fl)}:{}}function Of(t){let e=Object.create(null);return e.years=_(t,Ct),e.months=_(t,St),e.weeks=_(t,zt),e.days=_(t,Tt),e.hours=_(t,kt),e.minutes=_(t,It),e.seconds=_(t,Mt),e.milliseconds=_(t,Ot),e.microseconds=_(t,Rt),e.nanoseconds=_(t,Ft),e}Lr.prototype.constructor=en,Object.defineProperty(en,"prototype",{value:Lr.prototype,writable:!1,enumerable:!1,configurable:!1}),en.supportedLocalesOf=lo.supportedLocalesOf,Hn(en,"Intl.DateTimeFormat");var{format:Rp,formatToParts:Pp}=Intl.DurationFormat?.prototype??Object.create(null);function Hu(t){Intl.DurationFormat.prototype.resolvedOptions.call(this);let e=Of(cn(t));return Rp.call(this,e)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=Hu,Intl.DurationFormat.prototype.formatToParts=function(t){Intl.DurationFormat.prototype.resolvedOptions.call(this);let e=Of(cn(t));return Pp.call(this,e)});var Y0=Object.freeze({__proto__:null,DateTimeFormat:en,ModifiedIntlDurationFormatPrototypeFormat:Hu}),fo=class{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");cf(this,Ca(e))}get epochMilliseconds(){return K(this,dt),fn(_(this,Oe),"floor")}get epochNanoseconds(){return K(this,dt),Cf(z.default.BigInt(_(this,Oe)))}add(e){return K(this,dt),El("add",this,e)}subtract(e){return K(this,dt),El("subtract",this,e)}until(e,n=void 0){return K(this,dt),gl("until",this,e,n)}since(e,n=void 0){return K(this,dt),gl("since",this,e,n)}round(e){if(K(this,dt),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?jr("smallestUnit",e):Se(e),o=pi(n),a=gn(n,"halfExpand"),s=Ut(n,"smallestUnit","time",Zn);return yi(o,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[s],!0),pn(fu(_(this,Oe),o,s,a))}equals(e){K(this,dt);let n=Zi(e),o=_(this,Oe),a=_(n,Oe);return z.default.equal(z.default.BigInt(o),z.default.BigInt(a))}toString(e=void 0){K(this,dt);let n=Se(e),o=Eo(n),a=gn(n,"trunc"),s=Ut(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let c=n.timeZone;c!==void 0&&(c=$t(c));let{precision:l,unit:y,increment:m}=Co(s,o);return ul(pn(fu(_(this,Oe),m,y,a)),c,l)}toJSON(){return K(this,dt),ul(this,void 0,"auto")}toLocaleString(e=void 0,n=void 0){return K(this,dt),new en(e,n).format(this)}valueOf(){mr("Instant")}toZonedDateTimeISO(e){K(this,dt);let n=$t(e);return vt(_(this,Oe),n,"iso8601")}static fromEpochMilliseconds(e){return pn(yn(Aa(e)))}static fromEpochNanoseconds(e){return pn(Ca(e))}static from(e){return Zi(e)}static compare(e,n){let o=Zi(e),a=Zi(n),s=_(o,Oe),c=_(a,Oe);return z.default.lessThan(s,c)?-1:z.default.greaterThan(s,c)?1:0}};Hn(fo,"Temporal.Instant");var ho=class{constructor(e,n,o,a="iso8601"){let s=Ae(e),c=Ae(n),l=Ae(o),y=Bt(a===void 0?"iso8601":ut(a));Ar(s,c,l),rf(this,{year:s,month:c,day:l},y)}get calendarId(){return K(this,tt),_(this,se)}get era(){return Dt(this,"era")}get eraYear(){return Dt(this,"eraYear")}get year(){return Dt(this,"year")}get month(){return Dt(this,"month")}get monthCode(){return Dt(this,"monthCode")}get day(){return Dt(this,"day")}get dayOfWeek(){return Dt(this,"dayOfWeek")}get dayOfYear(){return Dt(this,"dayOfYear")}get weekOfYear(){return Dt(this,"weekOfYear")?.week}get yearOfWeek(){return Dt(this,"weekOfYear")?.year}get daysInWeek(){return Dt(this,"daysInWeek")}get daysInMonth(){return Dt(this,"daysInMonth")}get daysInYear(){return Dt(this,"daysInYear")}get monthsInYear(){return Dt(this,"monthsInYear")}get inLeapYear(){return Dt(this,"inLeapYear")}with(e,n=void 0){if(K(this,tt),!rt(e))throw new TypeError("invalid argument");mi(e);let o=_(this,se),a=Nt(o,_(this,Re));return a=Pr(o,a,rn(o,e,["year","month","monthCode","day"],[],"partial")),At(fr(o,a,Ue(Se(n))),o)}withCalendar(e){K(this,tt);let n=Io(e);return At(_(this,Re),n)}add(e,n=void 0){return K(this,tt),Cl("add",this,e,n)}subtract(e,n=void 0){return K(this,tt),Cl("subtract",this,e,n)}until(e,n=void 0){return K(this,tt),vl("until",this,e,n)}since(e,n=void 0){return K(this,tt),vl("since",this,e,n)}equals(e){K(this,tt);let n=Ki(e);return In(_(this,Re),_(n,Re))===0&&Tn(_(this,se),_(n,se))}toString(e=void 0){return K(this,tt),cl(this,xo(Se(e)))}toJSON(){return K(this,tt),cl(this)}toLocaleString(e=void 0,n=void 0){return K(this,tt),new en(e,n).format(this)}valueOf(){mr("PlainDate")}toPlainDateTime(e=void 0){K(this,tt);let n=nf(e);return sn(Ze(_(this,Re),n),_(this,se))}toZonedDateTime(e){let n,o;if(K(this,tt),rt(e)){let c=e.timeZone;c===void 0?n=$t(e):(n=$t(c),o=e.plainTime)}else n=$t(e);let a=_(this,Re),s;return o===void 0?s=ir(n,a):(o=ar(o),s=bt(n,Ze(a,_(o,nt)),"compatible")),vt(s,n,_(this,se))}toPlainYearMonth(){K(this,tt);let e=_(this,se);return oi(io(e,Nt(e,_(this,Re)),"constrain"),e)}toPlainMonthDay(){K(this,tt);let e=_(this,se);return ii(ba(e,Nt(e,_(this,Re)),"constrain"),e)}static from(e,n=void 0){return Ki(e,n)}static compare(e,n){let o=Ki(e),a=Ki(n);return In(_(o,Re),_(a,Re))}};function Dt(t,e){K(t,tt);let n=_(t,Re);return So(t).isoToDate(n,{[e]:!0})[e]}Hn(ho,"Temporal.PlainDate");var mo=class{constructor(e,n,o,a=0,s=0,c=0,l=0,y=0,m=0,g="iso8601"){let b=Ae(e),D=Ae(n),T=Ae(o),O=a===void 0?0:Ae(a),A=s===void 0?0:Ae(s),j=c===void 0?0:Ae(c),H=l===void 0?0:Ae(l),J=y===void 0?0:Ae(y),oe=m===void 0?0:Ae(m),ie=Bt(g===void 0?"iso8601":ut(g));Fu(b,D,T,O,A,j,H,J,oe),of(this,{isoDate:{year:b,month:D,day:T},time:{hour:O,minute:A,second:j,millisecond:H,microsecond:J,nanosecond:oe}},ie)}get calendarId(){return K(this,Qe),_(this,se)}get year(){return xt(this,"year")}get month(){return xt(this,"month")}get monthCode(){return xt(this,"monthCode")}get day(){return xt(this,"day")}get hour(){return Jr(this,"hour")}get minute(){return Jr(this,"minute")}get second(){return Jr(this,"second")}get millisecond(){return Jr(this,"millisecond")}get microsecond(){return Jr(this,"microsecond")}get nanosecond(){return Jr(this,"nanosecond")}get era(){return xt(this,"era")}get eraYear(){return xt(this,"eraYear")}get dayOfWeek(){return xt(this,"dayOfWeek")}get dayOfYear(){return xt(this,"dayOfYear")}get weekOfYear(){return xt(this,"weekOfYear")?.week}get yearOfWeek(){return xt(this,"weekOfYear")?.year}get daysInWeek(){return xt(this,"daysInWeek")}get daysInYear(){return xt(this,"daysInYear")}get daysInMonth(){return xt(this,"daysInMonth")}get monthsInYear(){return xt(this,"monthsInYear")}get inLeapYear(){return xt(this,"inLeapYear")}with(e,n=void 0){if(K(this,Qe),!rt(e))throw new TypeError("invalid argument");mi(e);let o=_(this,se),a=_(this,Xe),s={...Nt(o,a.isoDate),...a.time};return s=Pr(o,s,rn(o,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),sn(To(o,s,Ue(Se(n))),o)}withPlainTime(e=void 0){K(this,Qe);let n=nf(e);return sn(Ze(_(this,Xe).isoDate,n),_(this,se))}withCalendar(e){K(this,Qe);let n=Io(e);return sn(_(this,Xe),n)}add(e,n=void 0){return K(this,Qe),Sl("add",this,e,n)}subtract(e,n=void 0){return K(this,Qe),Sl("subtract",this,e,n)}until(e,n=void 0){return K(this,Qe),_l("until",this,e,n)}since(e,n=void 0){return K(this,Qe),_l("since",this,e,n)}round(e){if(K(this,Qe),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?jr("smallestUnit",e):Se(e),o=pi(n),a=gn(n,"halfExpand"),s=Ut(n,"smallestUnit","time",Zn,["day"]),c={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s];yi(o,c,c===1);let l=_(this,Xe);return sn(o===1&&s==="nanosecond"?l:du(l,o,s,a),_(this,se))}equals(e){K(this,Qe);let n=Ui(e);return di(_(this,Xe),_(n,Xe))===0&&Tn(_(this,se),_(n,se))}toString(e=void 0){K(this,Qe);let n=Se(e),o=xo(n),a=Eo(n),s=gn(n,"trunc"),c=Ut(n,"smallestUnit","time",void 0);if(c==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:l,unit:y,increment:m}=Co(c,a),g=du(_(this,Xe),m,y,s);return $r(g),ao(g,_(this,se),l,o)}toJSON(){return K(this,Qe),ao(_(this,Xe),_(this,se),"auto")}toLocaleString(e=void 0,n=void 0){return K(this,Qe),new en(e,n).format(this)}valueOf(){mr("PlainDateTime")}toZonedDateTime(e,n=void 0){K(this,Qe);let o=$t(e),a=Ji(Se(n));return vt(bt(o,_(this,Xe),a),o,_(this,se))}toPlainDate(){return K(this,Qe),At(_(this,Xe).isoDate,_(this,se))}toPlainTime(){return K(this,Qe),Ln(_(this,Xe).time)}static from(e,n=void 0){return Ui(e,n)}static compare(e,n){let o=Ui(e),a=Ui(n);return di(_(o,Xe),_(a,Xe))}};function xt(t,e){K(t,Qe);let n=_(t,Xe).isoDate;return So(t).isoToDate(n,{[e]:!0})[e]}function Jr(t,e){return K(t,Qe),_(t,Xe).time[e]}Hn(mo,"Temporal.PlainDateTime");var po=class t{constructor(e=0,n=0,o=0,a=0,s=0,c=0,l=0,y=0,m=0,g=0){let b=e===void 0?0:mn(e),D=n===void 0?0:mn(n),T=o===void 0?0:mn(o),O=a===void 0?0:mn(a),A=s===void 0?0:mn(s),j=c===void 0?0:mn(c),H=l===void 0?0:mn(l),J=y===void 0?0:mn(y),oe=m===void 0?0:mn(m),ie=g===void 0?0:mn(g);za(b,D,T,O,A,j,H,J,oe,ie),qn(this),Be(this,Ct,b),Be(this,St,D),Be(this,zt,T),Be(this,Tt,O),Be(this,kt,A),Be(this,It,j),Be(this,Mt,H),Be(this,Ot,J),Be(this,Rt,oe),Be(this,Ft,ie)}get years(){return K(this,et),_(this,Ct)}get months(){return K(this,et),_(this,St)}get weeks(){return K(this,et),_(this,zt)}get days(){return K(this,et),_(this,Tt)}get hours(){return K(this,et),_(this,kt)}get minutes(){return K(this,et),_(this,It)}get seconds(){return K(this,et),_(this,Mt)}get milliseconds(){return K(this,et),_(this,Ot)}get microseconds(){return K(this,et),_(this,Rt)}get nanoseconds(){return K(this,et),_(this,Ft)}get sign(){return K(this,et),xa(this)}get blank(){return K(this,et),xa(this)===0}with(e){K(this,et);let n=tf(e),{years:o=_(this,Ct),months:a=_(this,St),weeks:s=_(this,zt),days:c=_(this,Tt),hours:l=_(this,kt),minutes:y=_(this,It),seconds:m=_(this,Mt),milliseconds:g=_(this,Ot),microseconds:b=_(this,Rt),nanoseconds:D=_(this,Ft)}=n;return new t(o,a,s,c,l,y,m,g,b,D)}negated(){return K(this,et),Wt(this)}abs(){return K(this,et),new t(Math.abs(_(this,Ct)),Math.abs(_(this,St)),Math.abs(_(this,zt)),Math.abs(_(this,Tt)),Math.abs(_(this,kt)),Math.abs(_(this,It)),Math.abs(_(this,Mt)),Math.abs(_(this,Ot)),Math.abs(_(this,Rt)),Math.abs(_(this,Ft)))}add(e){return K(this,et),xl("add",this,e)}subtract(e){return K(this,et),xl("subtract",this,e)}round(e){if(K(this,et),e===void 0)throw new TypeError("options parameter is required");let n=jn(this),o=typeof e=="string"?jr("smallestUnit",e):Se(e),a=Ut(o,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:s,zonedRelativeTo:c}=qs(o),l=pi(o),y=gn(o,"halfExpand"),m=Ut(o,"smallestUnit","datetime",void 0),g=!0;m||(g=!1,m="nanosecond");let b=zn(n,m),D=!0;if(a||(D=!1,a=b),a==="auto"&&(a=b),!g&&!D)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(zn(a,m)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${m}`);let T={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[m];if(T!==void 0&&yi(l,T,!1),l>1&&Bn(m)==="date"&&a!==m)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(c){let A=ni(this),j=_(c,We),H=_(c,se),J=_(c,Oe);return A=Ef(J,Hi(J,j,H,A),j,H,a,l,m,y),Bn(a)==="date"&&(a="hour"),un(A,a)}if(s){let A=Cn(this),j=fi({deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},A.time),H=_(s,Re),J=_(s,se),oe=tn(J,H,_t(A.date,j.deltaDays),"constrain");return A=xf(Ze(H,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Ze(oe,j),J,a,l,m,y),un(A,a)}if(xn(n))throw new RangeError(`a starting point is required for ${n}s balancing`);if(xn(a))throw new RangeError(`a starting point is required for ${a}s balancing`);let O=Cn(this);if(m==="day"){let{quotient:A,remainder:j}=O.time.divmod(ga),H=O.date.days+A+eo(j,"day");H=sr(H,l,y),O=Fn({years:0,months:0,weeks:0,days:H},Ge.ZERO)}else O=Fn({years:0,months:0,weeks:0,days:0},Ea(O.time,l,m,y));return un(O,a)}total(e){if(K(this,et),e===void 0)throw new TypeError("options argument is required");let n=typeof e=="string"?jr("unit",e):Se(e),{plainRelativeTo:o,zonedRelativeTo:a}=qs(n),s=Ut(n,"unit","datetime",Zn);if(a){let l=ni(this),y=_(a,We),m=_(a,se),g=_(a,Oe);return(function(b,D,T,O,A){return Bn(A)==="time"?eo(Ge.fromEpochNsDiff(D,b),A):yl(wf(b,D,T,O,A),D,ln(T,b),T,O,A)})(g,Hi(g,y,m,l),y,m,s)}if(o){let l=Cn(this),y=fi({deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},l.time),m=_(o,Re),g=_(o,se),b=tn(g,m,_t(l.date,y.deltaDays),"constrain");return(function(D,T,O,A){if(di(D,T)==0)return 0;$r(D),$r(T);let j=bf(D,T,O,A);return A==="nanosecond"?z.default.toNumber(j.time.totalNs):yl(j,mt(T),D,null,O,A)})(Ze(m,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Ze(b,y),g,s)}let c=jn(this);if(xn(c))throw new RangeError(`a starting point is required for ${c}s total`);if(xn(s))throw new RangeError(`a starting point is required for ${s}s total`);return eo(Cn(this).time,s)}toString(e=void 0){K(this,et);let n=Se(e),o=Eo(n),a=gn(n,"trunc"),s=Ut(n,"smallestUnit","time",void 0);if(s==="hour"||s==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');let{precision:c,unit:l,increment:y}=Co(s,o);if(l==="nanosecond"&&y===1)return ha(this,c);let m=jn(this),g=ni(this),b=Ea(g.time,y,l,a);return g=Fn(g.date,b),ha(un(g,zn(m,"second")),c)}toJSON(){return K(this,et),ha(this,"auto")}toLocaleString(e=void 0,n=void 0){if(K(this,et),typeof Intl.DurationFormat=="function"){let o=new Intl.DurationFormat(e,n);return Hu.call(o,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),ha(this,"auto")}valueOf(){mr("Duration")}static from(e){return cn(e)}static compare(e,n,o=void 0){let a=cn(e),s=cn(n),c=Se(o),{plainRelativeTo:l,zonedRelativeTo:y}=qs(c);if(_(a,Ct)===_(s,Ct)&&_(a,St)===_(s,St)&&_(a,zt)===_(s,zt)&&_(a,Tt)===_(s,Tt)&&_(a,kt)===_(s,kt)&&_(a,It)===_(s,It)&&_(a,Mt)===_(s,Mt)&&_(a,Ot)===_(s,Ot)&&_(a,Rt)===_(s,Rt)&&_(a,Ft)===_(s,Ft))return 0;let m=jn(a),g=jn(s),b=ni(a),D=ni(s);if(y&&(Bn(m)==="date"||Bn(g)==="date")){let H=_(y,We),J=_(y,se),oe=_(y,Oe),ie=Hi(oe,H,J,b),le=Hi(oe,H,J,D);return Kt(z.default.toNumber(z.default.subtract(ie,le)))}let T=b.date.days,O=D.date.days;if(xn(m)||xn(g)){if(!l)throw new RangeError("A starting point is required for years, months, or weeks comparison");T=pl(b.date,l),O=pl(D.date,l)}let A=b.time.add24HourDays(T),j=D.time.add24HourDays(O);return A.cmp(j)}};Hn(po,"Temporal.Duration");var yo=class{constructor(e,n,o="iso8601",a=1972){let s=Ae(e),c=Ae(n),l=Bt(o===void 0?"iso8601":ut(o)),y=Ae(a);Ar(y,s,c),af(this,{year:y,month:s,day:c},l)}get monthCode(){return Ol(this,"monthCode")}get day(){return Ol(this,"day")}get calendarId(){return K(this,Vt),_(this,se)}with(e,n=void 0){if(K(this,Vt),!rt(e))throw new TypeError("invalid argument");mi(e);let o=_(this,se),a=Nt(o,_(this,Re),"month-day");return a=Pr(o,a,rn(o,e,["year","month","monthCode","day"],[],"partial")),ii(ba(o,a,Ue(Se(n))),o)}equals(e){K(this,Vt);let n=al(e);return In(_(this,Re),_(n,Re))===0&&Tn(_(this,se),_(n,se))}toString(e=void 0){return K(this,Vt),fl(this,xo(Se(e)))}toJSON(){return K(this,Vt),fl(this)}toLocaleString(e=void 0,n=void 0){return K(this,Vt),new en(e,n).format(this)}valueOf(){mr("PlainMonthDay")}toPlainDate(e){if(K(this,Vt),!rt(e))throw new TypeError("argument should be an object");let n=_(this,se);return At(fr(n,Pr(n,Nt(n,_(this,Re),"month-day"),rn(n,e,["year"],[],[])),"constrain"),n)}static from(e,n=void 0){return al(e,n)}};function Ol(t,e){K(t,Vt);let n=_(t,Re);return So(t).isoToDate(n,{[e]:!0})[e]}function Gs(t){return ln(t,pu())}Hn(yo,"Temporal.PlainMonthDay");var Rf={instant:()=>pn(pu()),plainDateTimeISO:(t=Li())=>sn(Gs($t(t)),"iso8601"),plainDateISO:(t=Li())=>At(Gs($t(t)).isoDate,"iso8601"),plainTimeISO:(t=Li())=>Ln(Gs($t(t)).time),timeZoneId:()=>Li(),zonedDateTimeISO:(t=Li())=>{let e=$t(t);return vt(pu(),e,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Rf,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});var go=class t{constructor(e=0,n=0,o=0,a=0,s=0,c=0){let l=e===void 0?0:Ae(e),y=n===void 0?0:Ae(n),m=o===void 0?0:Ae(o),g=a===void 0?0:Ae(a),b=s===void 0?0:Ae(s),D=c===void 0?0:Ae(c);Ya(l,y,m,g,b,D),sf(this,{hour:l,minute:y,second:m,millisecond:g,microsecond:b,nanosecond:D})}get hour(){return K(this,ot),_(this,nt).hour}get minute(){return K(this,ot),_(this,nt).minute}get second(){return K(this,ot),_(this,nt).second}get millisecond(){return K(this,ot),_(this,nt).millisecond}get microsecond(){return K(this,ot),_(this,nt).microsecond}get nanosecond(){return K(this,ot),_(this,nt).nanosecond}with(e,n=void 0){if(K(this,ot),!rt(e))throw new TypeError("invalid argument");mi(e);let o=ou(e,"partial"),a=ou(this),{hour:s,minute:c,second:l,millisecond:y,microsecond:m,nanosecond:g}=Object.assign(a,o),b=Ue(Se(n));return{hour:s,minute:c,second:l,millisecond:y,microsecond:m,nanosecond:g}=ja(s,c,l,y,m,g,b),new t(s,c,l,y,m,g)}add(e){return K(this,ot),Tl("add",this,e)}subtract(e){return K(this,ot),Tl("subtract",this,e)}until(e,n=void 0){return K(this,ot),bl("until",this,e,n)}since(e,n=void 0){return K(this,ot),bl("since",this,e,n)}round(e){if(K(this,ot),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?jr("smallestUnit",e):Se(e),o=pi(n),a=gn(n,"halfExpand"),s=Ut(n,"smallestUnit","time",Zn);return yi(o,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s],!1),Ln(hu(_(this,nt),o,s,a))}equals(e){K(this,ot);let n=ar(e);return mu(_(this,nt),_(n,nt))===0}toString(e=void 0){K(this,ot);let n=Se(e),o=Eo(n),a=gn(n,"trunc"),s=Ut(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:c,unit:l,increment:y}=Co(s,o);return ll(hu(_(this,nt),y,l,a),c)}toJSON(){return K(this,ot),ll(_(this,nt),"auto")}toLocaleString(e=void 0,n=void 0){return K(this,ot),new en(e,n).format(this)}valueOf(){mr("PlainTime")}static from(e,n=void 0){return ar(e,n)}static compare(e,n){let o=ar(e),a=ar(n);return mu(_(o,nt),_(a,nt))}};Hn(go,"Temporal.PlainTime");var vo=class{constructor(e,n,o="iso8601",a=1){let s=Ae(e),c=Ae(n),l=Bt(o===void 0?"iso8601":ut(o)),y=Ae(a);Ar(s,c,y),uf(this,{year:s,month:c,day:y},l)}get year(){return $n(this,"year")}get month(){return $n(this,"month")}get monthCode(){return $n(this,"monthCode")}get calendarId(){return K(this,ht),_(this,se)}get era(){return $n(this,"era")}get eraYear(){return $n(this,"eraYear")}get daysInMonth(){return $n(this,"daysInMonth")}get daysInYear(){return $n(this,"daysInYear")}get monthsInYear(){return $n(this,"monthsInYear")}get inLeapYear(){return $n(this,"inLeapYear")}with(e,n=void 0){if(K(this,ht),!rt(e))throw new TypeError("invalid argument");mi(e);let o=_(this,se),a=Nt(o,_(this,Re),"year-month");return a=Pr(o,a,rn(o,e,["year","month","monthCode"],[],"partial")),oi(io(o,a,Ue(Se(n))),o)}add(e,n=void 0){return K(this,ht),kl("add",this,e,n)}subtract(e,n=void 0){return K(this,ht),kl("subtract",this,e,n)}until(e,n=void 0){return K(this,ht),wl("until",this,e,n)}since(e,n=void 0){return K(this,ht),wl("since",this,e,n)}equals(e){K(this,ht);let n=Wi(e);return In(_(this,Re),_(n,Re))===0&&Tn(_(this,se),_(n,se))}toString(e=void 0){return K(this,ht),dl(this,xo(Se(e)))}toJSON(){return K(this,ht),dl(this)}toLocaleString(e=void 0,n=void 0){return K(this,ht),new en(e,n).format(this)}valueOf(){mr("PlainYearMonth")}toPlainDate(e){if(K(this,ht),!rt(e))throw new TypeError("argument should be an object");let n=_(this,se);return At(fr(n,Pr(n,Nt(n,_(this,Re),"year-month"),rn(n,e,["day"],[],[])),"constrain"),n)}static from(e,n=void 0){return Wi(e,n)}static compare(e,n){let o=Wi(e),a=Wi(n);return In(_(o,Re),_(a,Re))}};function $n(t,e){K(t,ht);let n=_(t,Re);return So(t).isoToDate(n,{[e]:!0})[e]}Hn(vo,"Temporal.PlainYearMonth");var Ap=en.prototype.resolvedOptions,_o=class{constructor(e,n,o="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");let a=Ca(e),s=ut(n),{tzName:c,offsetMinutes:l}=ur(s);if(l===void 0){let y=wa(c);if(!y)throw new RangeError(`unknown time zone ${c}`);s=y.identifier}else s=Lu(l);lf(this,a,s,Bt(o===void 0?"iso8601":ut(o)))}get calendarId(){return K(this,Ye),_(this,se)}get timeZoneId(){return K(this,Ye),_(this,We)}get year(){return Et(this,"year")}get month(){return Et(this,"month")}get monthCode(){return Et(this,"monthCode")}get day(){return Et(this,"day")}get hour(){return ei(this,"hour")}get minute(){return ei(this,"minute")}get second(){return ei(this,"second")}get millisecond(){return ei(this,"millisecond")}get microsecond(){return ei(this,"microsecond")}get nanosecond(){return ei(this,"nanosecond")}get era(){return Et(this,"era")}get eraYear(){return Et(this,"eraYear")}get epochMilliseconds(){return K(this,Ye),fn(_(this,Oe),"floor")}get epochNanoseconds(){return K(this,Ye),Cf(_(this,Oe))}get dayOfWeek(){return Et(this,"dayOfWeek")}get dayOfYear(){return Et(this,"dayOfYear")}get weekOfYear(){return Et(this,"weekOfYear")?.week}get yearOfWeek(){return Et(this,"weekOfYear")?.year}get hoursInDay(){K(this,Ye);let e=_(this,We),n=Dn(this).isoDate,o=Zt(n.year,n.month,n.day+1),a=ir(e,n),s=ir(e,o);return eo(Ge.fromEpochNsDiff(s,a),"hour")}get daysInWeek(){return Et(this,"daysInWeek")}get daysInMonth(){return Et(this,"daysInMonth")}get daysInYear(){return Et(this,"daysInYear")}get monthsInYear(){return Et(this,"monthsInYear")}get inLeapYear(){return Et(this,"inLeapYear")}get offset(){return K(this,Ye),au(Yn(_(this,We),_(this,Oe)))}get offsetNanoseconds(){return K(this,Ye),Yn(_(this,We),_(this,Oe))}with(e,n=void 0){if(K(this,Ye),!rt(e))throw new TypeError("invalid zoned-date-time-like");mi(e);let o=_(this,se),a=_(this,We),s=Yn(a,_(this,Oe)),c=Dn(this),l={...Nt(o,c.isoDate),...c.time,offset:au(s)};l=Pr(o,l,rn(o,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));let y=Se(n),m=Ji(y),g=ma(y,"prefer"),b=To(o,l,Ue(y)),D=gi(l.offset);return vt(_a(b.isoDate,b.time,"option",D,a,m,g,!1),a,o)}withPlainTime(e=void 0){K(this,Ye);let n=_(this,We),o=_(this,se),a=Dn(this).isoDate,s;return s=e===void 0?ir(n,a):bt(n,Ze(a,_(ar(e),nt)),"compatible"),vt(s,n,o)}withTimeZone(e){K(this,Ye);let n=$t(e);return vt(_(this,Oe),n,_(this,se))}withCalendar(e){K(this,Ye);let n=Io(e);return vt(_(this,Oe),_(this,We),n)}add(e,n=void 0){return K(this,Ye),Il("add",this,e,n)}subtract(e,n=void 0){return K(this,Ye),Il("subtract",this,e,n)}until(e,n=void 0){return K(this,Ye),Dl("until",this,e,n)}since(e,n=void 0){return K(this,Ye),Dl("since",this,e,n)}round(e){if(K(this,Ye),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?jr("smallestUnit",e):Se(e),o=pi(n),a=gn(n,"halfExpand"),s=Ut(n,"smallestUnit","time",Zn,["day"]),c={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s];if(yi(o,c,c===1),s==="nanosecond"&&o===1)return vt(_(this,Oe),_(this,We),_(this,se));let l=_(this,We),y=_(this,Oe),m=Dn(this),g;if(s==="day"){let b=m.isoDate,D=Zt(b.year,b.month,b.day+1),T=ir(l,b),O=ir(l,D),A=z.default.subtract(O,T);g=Ge.fromEpochNsDiff(y,T).round(A,a).addToEpochNs(T)}else{let b=du(m,o,s,a),D=Yn(l,y);g=_a(b.isoDate,b.time,"option",D,l,"compatible","prefer",!1)}return vt(g,l,_(this,se))}equals(e){K(this,Ye);let n=qi(e),o=_(this,Oe),a=_(n,Oe);return!!z.default.equal(z.default.BigInt(o),z.default.BigInt(a))&&!!ff(_(this,We),_(n,We))&&Tn(_(this,se),_(n,se))}toString(e=void 0){K(this,Ye);let n=Se(e),o=xo(n),a=Eo(n),s=(function(D){return Kn(D,"offset",["auto","never"],"auto")})(n),c=gn(n,"trunc"),l=Ut(n,"smallestUnit","time",void 0);if(l==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let y=(function(D){return Kn(D,"timeZoneName",["auto","never","critical"],"auto")})(n),{precision:m,unit:g,increment:b}=Co(l,a);return hl(this,m,o,y,s,{unit:g,increment:b,roundingMode:c})}toLocaleString(e=void 0,n=void 0){K(this,Ye);let o=Se(n),a=Object.create(null);if((function(y,m,g,b){if(m==null)return;let D=Reflect.ownKeys(m);for(let T=0;T<D.length;T++){let O=D[T];if(!g.some(A=>Object.is(A,O))&&Object.prototype.propertyIsEnumerable.call(m,O)){let A=m[O];y[O]=A}}})(a,o,["timeZone"]),o.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(a.year===void 0&&a.month===void 0&&a.day===void 0&&a.era===void 0&&a.weekday===void 0&&a.dateStyle===void 0&&a.hour===void 0&&a.minute===void 0&&a.second===void 0&&a.fractionalSecondDigits===void 0&&a.timeStyle===void 0&&a.dayPeriod===void 0&&a.timeZoneName===void 0&&(a.timeZoneName="short"),a.timeZone=_(this,We),ml(a.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");let s=new en(e,a),c=Ap.call(s).calendar,l=_(this,se);if(l!=="iso8601"&&c!=="iso8601"&&!Tn(c,l))throw new RangeError(`cannot format ZonedDateTime with calendar ${l} in locale with calendar ${c}`);return s.format(pn(_(this,Oe)))}toJSON(){return K(this,Ye),hl(this,"auto")}valueOf(){mr("ZonedDateTime")}startOfDay(){K(this,Ye);let e=_(this,We);return vt(ir(e,Dn(this).isoDate),e,_(this,se))}getTimeZoneTransition(e){K(this,Ye);let n=_(this,We);if(e===void 0)throw new TypeError("options parameter is required");let o=Kn(typeof e=="string"?jr("direction",e):Se(e),"direction",["next","previous"],Zn);if(o===void 0)throw new TypeError("direction option is required");if(ml(n)||n==="UTC")return null;let a=_(this,Oe),s=o==="next"?zu(n,a):uu(n,a);return s===null?null:vt(s,n,_(this,se))}toInstant(){return K(this,Ye),pn(_(this,Oe))}toPlainDate(){return K(this,Ye),At(Dn(this).isoDate,_(this,se))}toPlainTime(){return K(this,Ye),Ln(Dn(this).time)}toPlainDateTime(){return K(this,Ye),sn(Dn(this),_(this,se))}static from(e,n=void 0){return qi(e,n)}static compare(e,n){let o=qi(e),a=qi(n),s=_(o,Oe),c=_(a,Oe);return z.default.lessThan(z.default.BigInt(s),z.default.BigInt(c))?-1:z.default.greaterThan(z.default.BigInt(s),z.default.BigInt(c))?1:0}};function Dn(t){return ln(_(t,We),_(t,Oe))}function Et(t,e){K(t,Ye);let n=Dn(t).isoDate;return So(t).isoToDate(n,{[e]:!0})[e]}function ei(t,e){return K(t,Ye),Dn(t).time[e]}Hn(_o,"Temporal.ZonedDateTime");var Gu=Object.freeze({__proto__:null,Duration:po,Instant:fo,Now:Rf,PlainDate:ho,PlainDateTime:mo,PlainMonthDay:yo,PlainTime:go,PlainYearMonth:vo,ZonedDateTime:_o}),z0=class{toTemporalInstant(){return pn(yn(Date.prototype.valueOf.call(this)))}}.prototype.toTemporalInstant,$p=[fo,ho,mo,po,yo,go,vo,_o];for(let t of $p){let e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}var Za=Yt(Pf(),1),Af=Symbol.for("Dexie"),$o=globalThis[Af]||(globalThis[Af]=Za.default);if(Za.default.semVer!==$o.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Za.default.semVer} and ${$o.semVer}`);var{liveQuery:U0,mergeRanges:Z0,rangesOverlap:W0,RangeSet:q0,cmp:H0,Entity:G0,PropModification:Q0,replacePrefix:X0,add:V0,remove:J0,DexieYProvider:ey}=$o;Gt();var Np=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function $f(){return(await Np.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var jp=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Nf(t){return{items:(await jp.getContents(t,{offset:0,limit:-1})).items}}async function jf(t){let e=new Map,n=50,o=[...new Set(t)];for(let a=0;a<o.length;a+=n){let c=o.slice(a,a+n).map(async l=>{let m=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:l,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(m)for(let g of m){let b=g?.track?.uri;b&&e.set(b,g.track)}});await Promise.allSettled(c)}return e}async function Bf(t){let e=new Map,n=[...new Set(t.map(c=>Spicetify.URI.fromString(c).id).filter(c=>!!c))],o=async c=>{for(let y=0;y<c.length;y+=50){let g=`https://api.spotify.com/v1/tracks?ids=${c.slice(y,y+50).join(",")}`;try{(await Spicetify.CosmosAsync.get(g))?.tracks?.forEach(D=>{D?.uri&&e.set(D.uri,D)})}catch{}}},a=async c=>{for(let y=0;y<c.length;y+=50){let m=c.slice(y,y+50);await Promise.allSettled(m.map(async g=>{let b=`spotify:track:${g}`;if(!e.has(b))try{let D=Spicetify.URI.idToHex(g),O=await(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/track/${D}`).send()).body;O&&e.set(b,O)}catch{}}))}};await o(n);let s=n.filter(c=>!e.has(`spotify:track:${c}`));return s.length>0&&await a(s),e}var zf=Yt(Qt());Gt();var Lf=new CSSStyleSheet;Lf.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Yf=Lf;document.adoptedStyleSheets.push(Yf);var Wa=st(t=>{let e=(0,zf.c)(43),{value:n,options:o,onChange:a,disabled:s}=t,c=Ns(),l=Ht(null),y=`--dropdown-anchor-${c.replace(/:/g,"id")}`,m,g,b,D,T,O,A,j,H;if(e[0]!==y||e[1]!==s||e[2]!==a||e[3]!==o||e[4]!==c||e[5]!==n){let ie=ye=>{a?.(ye.value),l.current?.hidePopover()},le;e[15]!==o||e[16]!==n?(le=o.find(ye=>ye.value===n)?.label||"Select...",e[15]=o,e[16]=n,e[17]=le):le=e[17];let pe=le;A="dropdown",j=s;let we;e[18]!==y?(we={anchorName:y},e[18]=y,e[19]=we):we=e[19];let De;e[20]!==pe?(De=ce("div",{className:"dropdown__text",children:pe}),e[20]=pe,e[21]=De):De=e[21];let be;e[22]===Symbol.for("react.memo_cache_sentinel")?(be=ce("div",{className:"dropdown__arrow",children:ce(wt.React.dropdown,{size:12})}),e[22]=be):be=e[22],e[23]!==c||e[24]!==we||e[25]!==De?(H=Le("button",{className:"dropdown__button",popoverTarget:c,popoverTargetAction:"toggle",style:we,children:[De,be]}),e[23]=c,e[24]=we,e[25]=De,e[26]=H):H=e[26],m="dropdown__menu",g=c,b="auto",D=l;let q=`calc(anchor(${y} bottom) + 4px)`,X=`anchor(${y} left)`,Q=`anchor-size(${y} width)`;e[27]!==q||e[28]!==X||e[29]!==Q?(T={top:q,left:X,width:Q},e[27]=q,e[28]=X,e[29]=Q,e[30]=T):T=e[30],O=o.map(ye=>ce("div",{className:`dropdown__option${n===ye.value?" dropdown__option--selected":""}`,onClick:()=>ie(ye),onKeyDown:x=>x.key==="Enter"&&ie(ye),role:"option",tabIndex:0,children:ye.label},ye.value)),e[0]=y,e[1]=s,e[2]=a,e[3]=o,e[4]=c,e[5]=n,e[6]=m,e[7]=g,e[8]=b,e[9]=D,e[10]=T,e[11]=O,e[12]=A,e[13]=j,e[14]=H}else m=e[6],g=e[7],b=e[8],D=e[9],T=e[10],O=e[11],A=e[12],j=e[13],H=e[14];let J;e[31]!==m||e[32]!==g||e[33]!==b||e[34]!==D||e[35]!==T||e[36]!==O?(J=ce("div",{className:m,id:g,popover:b,ref:D,style:T,children:O}),e[31]=m,e[32]=g,e[33]=b,e[34]=D,e[35]=T,e[36]=O,e[37]=J):J=e[37];let oe;return e[38]!==J||e[39]!==A||e[40]!==j||e[41]!==H?(oe=Le("div",{className:A,disabled:j,children:[H,J]}),e[38]=J,e[39]=A,e[40]=j,e[41]=H,e[42]=oe):oe=e[42],oe});var sd=Yt(Qt());Gt();var Ff=new CSSStyleSheet;Ff.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var Kf=Ff;var td=Yt(Qt());Gt();var Wf=Yt(Qt());Gt();var Uf=new CSSStyleSheet;Uf.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var Zf=Uf;document.adoptedStyleSheets.push(Zf);var qf=st(t=>{let e=(0,Wf.c)(7),{value:n,onChange:o,placeholder:a,disabled:s}=t,c=s===void 0?!1:s,l;e[0]!==o?(l=g=>{o(g.target.value)},e[0]=o,e[1]=l):l=e[1];let y=l,m;return e[2]!==c||e[3]!==y||e[4]!==a||e[5]!==n?(m=ce("input",{className:"input",disabled:c,onChange:y,placeholder:a,type:"text",value:n}),e[2]=c,e[3]=y,e[4]=a,e[5]=n,e[6]=m):m=e[6],m});var Qf=Yt(Qt());Gt();var Hf=new CSSStyleSheet;Hf.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Gf=Hf;document.adoptedStyleSheets.push(Gf);var qa=st(t=>{let e=(0,Qf.c)(28),{value:n,min:o,max:a,step:s,defaultValue:c,onChange:l,onRelease:y,disabled:m}=t,g=o===void 0?0:o,b=a===void 0?100:a,D=s===void 0?1:s,T=Ht(null),O=Ht(!1),A=n!==void 0?n:c,j=b>g&&A!==void 0?(A-g)/(b-g)*100:0,H;e[0]!==m||e[1]!==b||e[2]!==g||e[3]!==l||e[4]!==D?(H=d=>{if(!T.current||m)return;let p=T.current.getBoundingClientRect(),E=d.clientX,k=Math.max(0,Math.min(E-p.left,p.width))/p.width*(b-g)+g;k=Math.round(k/D)*D,k=Math.max(g,Math.min(k,b)),l(k)},e[0]=m,e[1]=b,e[2]=g,e[3]=l,e[4]=D,e[5]=H):H=e[5];let J=H,oe;e[6]!==m||e[7]!==J?(oe=d=>{m||!T.current||(O.current=!0,T.current.setPointerCapture(d.pointerId),J(d.nativeEvent))},e[6]=m,e[7]=J,e[8]=oe):oe=e[8];let ie=oe,le;e[9]!==J?(le=d=>{O.current&&J(d.nativeEvent)},e[9]=J,e[10]=le):le=e[10];let pe=le,we;e[11]!==y?(we=d=>{!O.current||!T.current||(O.current=!1,T.current.releasePointerCapture(d.pointerId),y?.())},e[11]=y,e[12]=we):we=e[12];let De=we,be=`${j}%`,q;e[13]!==be?(q=ce("div",{className:"slider__fill",style:{width:be}}),e[13]=be,e[14]=q):q=e[14];let X=`${j}%`,Q;e[15]!==X?(Q=ce("div",{className:"slider__thumb",style:{left:X}}),e[15]=X,e[16]=Q):Q=e[16];let ye;e[17]!==Q||e[18]!==q?(ye=Le("div",{className:"slider__track",children:[q,Q]}),e[17]=Q,e[18]=q,e[19]=ye):ye=e[19];let x;e[20]!==ie||e[21]!==pe||e[22]!==De||e[23]!==ye?(x=ce("div",{className:"slider-container",onPointerCancel:De,onPointerDown:ie,onPointerMove:pe,onPointerUp:De,ref:T,children:ye}),e[20]=ie,e[21]=pe,e[22]=De,e[23]=ye,e[24]=x):x=e[24];let Y;return e[25]!==m||e[26]!==x?(Y=ce("div",{className:"slider",disabled:m,children:x}),e[25]=m,e[26]=x,e[27]=Y):Y=e[27],Y});var Jf=Yt(Qt());Gt();var Xf=new CSSStyleSheet;Xf.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var Vf=Xf;document.adoptedStyleSheets.push(Vf);var ed=st(t=>{let e=(0,Jf.c)(10),{value:n,onChange:o,disabled:a}=t,s;e[0]!==a||e[1]!==o||e[2]!==n?(s=()=>{a||o(!n)},e[0]=a,e[1]=o,e[2]=n,e[3]=s):s=e[3];let c=s,l=`toggle__slider${n?" toggle__slider--enabled":""}${a?" toggle__slider--disabled":""}`,y;e[4]!==l?(y=ce("span",{className:"toggle__background",children:ce("span",{className:l})}),e[4]=l,e[5]=y):y=e[5];let m;return e[6]!==a||e[7]!==c||e[8]!==y?(m=ce("button",{className:"toggle",disabled:a,onClick:c,role:"switch",children:y}),e[6]=a,e[7]=c,e[8]=y,e[9]=m):m=e[9],m});var nd=st(t=>{let e=(0,td.c)(23),{option:n,value:o,onChange:a,disabled:s}=t;switch(n.type){case"toggle":{let c=o,l;return e[0]!==s||e[1]!==a||e[2]!==c?(l=ce(ed,{disabled:s,onChange:a,value:c}),e[0]=s,e[1]=a,e[2]=c,e[3]=l):l=e[3],l}case"input":{let c=o,l;return e[4]!==s||e[5]!==a||e[6]!==n.placeholder||e[7]!==c?(l=ce(qf,{disabled:s,onChange:a,placeholder:n.placeholder,value:c}),e[4]=s,e[5]=a,e[6]=n.placeholder,e[7]=c,e[8]=l):l=e[8],l}case"dropdown":{let c;e[9]!==n.options?(c=n.options||[],e[9]=n.options,e[10]=c):c=e[10];let l=o,y;return e[11]!==s||e[12]!==a||e[13]!==c||e[14]!==l?(y=ce(Wa,{disabled:s,onChange:a,options:c,value:l}),e[11]=s,e[12]=a,e[13]=c,e[14]=l,e[15]=y):y=e[15],y}case"slider":{let c=o,l;return e[16]!==s||e[17]!==a||e[18]!==n.max||e[19]!==n.min||e[20]!==n.step||e[21]!==c?(l=ce(qa,{disabled:s,max:n.max,min:n.min,onChange:a,step:n.step,value:c}),e[16]=s,e[17]=a,e[18]=n.max,e[19]=n.min,e[20]=n.step,e[21]=c,e[22]=l):l=e[22],l}default:return console.warn(`Unknown option type for option "${n.name||"N/A"}"`),null}});var rd=Yt(Qt());Gt();var id=st(t=>{let e=(0,rd.c)(6),{name:n,popupModal:o}=t,a;e[0]!==o||e[1]!==n?(a=()=>kr({title:n,content:ce(o,{}),isLarge:!1}),e[0]=o,e[1]=n,e[2]=a):a=e[2];let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=ce(wt.React.editButton,{size:16}),e[3]=s):s=e[3];let c;return e[4]!==a?(c=ce("button",{className:"popup-button",onClick:a,children:s}),e[4]=a,e[5]=c):c=e[5],c});var od=Yt(Qt());Gt();var ad=st(t=>{let e=(0,od.c)(3),{tippy:n}=t,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=ce("div",{className:"info-tippy",children:ce(wt.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),e[0]=o):o=e[0];let a;return e[1]!==n?(a=ce(Spicetify.ReactComponent.TooltipWrapper,{label:n,placement:"top",showDelay:0,children:o}),e[1]=n,e[2]=a):a=e[2],a});document.adoptedStyleSheets.push(Kf);var ud=st(t=>{let e=(0,sd.c)(21),{name:n,desc:o,tippy:a,popupModal:s,option:c,value:l,onChange:y,disabled:m}=t,g;e[0]!==o?(g=ce("div",{className:"option__desc",children:o}),e[0]=o,e[1]=g):g=e[1];let b;e[2]!==a?(b=a&&ce(ad,{tippy:a}),e[2]=a,e[3]=b):b=e[3];let D;e[4]!==g||e[5]!==b?(D=Le("div",{className:"option__content",children:[g,b]}),e[4]=g,e[5]=b,e[6]=D):D=e[6];let T;e[7]!==n||e[8]!==s?(T=s&&ce(id,{name:n,popupModal:s}),e[7]=n,e[8]=s,e[9]=T):T=e[9];let O;e[10]!==m||e[11]!==y||e[12]!==c||e[13]!==l?(O=c&&ce(nd,{disabled:m,onChange:y||Bp,option:c,value:l}),e[10]=m,e[11]=y,e[12]=c,e[13]=l,e[14]=O):O=e[14];let A;e[15]!==T||e[16]!==O?(A=Le("div",{className:"option__control",children:[T,O]}),e[15]=T,e[16]=O,e[17]=A):A=e[17];let j;return e[18]!==D||e[19]!==A?(j=Le("div",{className:"option__row",children:[D,A]}),e[18]=D,e[19]=A,e[20]=j):j=e[20],j});function Bp(){}var cd=()=>{let t=globalThis.webpackChunkclient_web.push([[Symbol()],{},o=>o]),e=/"data-encore-id":(?:\w+\.)+([A-Z]\w*)\b/,n={};for(let[o,a]of Object.entries(t.m)){if(typeof a!="function")continue;let s=t(o);if(!(!s||typeof s!="object"))for(let c of Object.values(s)){let l=typeof c=="function"?c:c?.render;if(!l)continue;let y=l.toString().match(e);y?.[1]&&!n[y[1]]&&(n[y[1]]=c)}}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(n).length} components.`),globalThis.UI=n};var fd=Yt(Qt());Gt();var On=Spicetify.Platform.PlayerAPI,ld={subscribe:t=>{let e=()=>t();return On._events.addListener("update",e,{}),()=>{On._events.removeListener("update",e,{})}},getSnapshot:()=>On._state},dd=(t,e)=>{let n=(0,fd.c)(22),o=Ai(ld.subscribe,ld.getSnapshot),a=o.item?.uri===t,s=o.isPaused,c=a&&!s,[l,y]=an(0),[m,g]=an(e),b=Ht(!1),D=Ht(0),T,O;n[0]!==a||n[1]!==s||n[2]!==o.duration||n[3]!==o.positionAsOfTimestamp||n[4]!==e?(T=()=>{if(!a){y(0),g(e);return}if(g(o.duration),b.current)return;if(s){y(o.positionAsOfTimestamp);return}let pe=setInterval(()=>{let we=Date.now(),De=On._state.positionAsOfTimestamp,be=On._state.timestamp,q=we-be+De;y(Math.min(q,o.duration))},100);return()=>clearInterval(pe)},O=[a,s,o.duration,o.positionAsOfTimestamp,e],n[0]=a,n[1]=s,n[2]=o.duration,n[3]=o.positionAsOfTimestamp,n[4]=e,n[5]=T,n[6]=O):(T=n[5],O=n[6]),An(T,O);let A;n[7]!==a||n[8]!==s||n[9]!==t?(A=()=>{a?s?On.resume({}):On.pause({}):On.play({uri:t},{})},n[7]=a,n[8]=s,n[9]=t,n[10]=A):A=n[10];let j=A,H;n[11]===Symbol.for("react.memo_cache_sentinel")?(H=pe=>{b.current=!0,y(pe),D.current=pe},n[11]=H):H=n[11];let J=H,oe;n[12]!==a||n[13]!==t?(oe=()=>{b.current=!1,a?On.seekTo(D.current):On.play({uri:t},{})},n[12]=a,n[13]=t,n[14]=oe):oe=n[14];let ie=oe,le;return n[15]!==m||n[16]!==ie||n[17]!==a||n[18]!==c||n[19]!==l||n[20]!==j?(le={position:l,duration:m,isPlaying:c,isActiveTrack:a,togglePlay:j,handleSliderChange:J,handleSliderRelease:ie},n[15]=m,n[16]=ie,n[17]=a,n[18]=c,n[19]=l,n[20]=j,n[21]=le):le=n[21],le};cd();var Vu=class{starts=new Map;start(e){this.starts.set(e,performance.now())}end(e){let n=this.starts.get(e);if(n){let o=performance.now()-n;console.debug(`[Debug] ${e}: ${o.toFixed(2)}ms`),this.starts.delete(e)}}},yr=new Vu,yd=["exact","isrc","probable","likely","possible","maybe"],Ju=class extends $o{constructor(){super("findDupeTracks"),this.version(.2).stores({tracks:"&trackUri, trackName, trackDuration, trackPlayCount, trackIsrc, albumUri, albumReleaseDate, lastUpdated, ignoreDuplicates"}).upgrade(e=>e.table("tracks").clear())}},hd=new Ju,Ha={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0,maybe:!1},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0,maybe:!0},defaultNormaliseWords:["live","remix","mix","acoustic","inst","instrumental","radio","version","ver","edit","mono","stereo","deluxe","demo","rehearsal","intro","outro","remaster","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],customNormaliseWords:[]},md="findDupeTracks:settings",pr={listeners:new Set,snapshot:(()=>{try{let t=localStorage.getItem(md);return t?{...Ha,...JSON.parse(t)}:Ha}catch{return Ha}})(),subscribe(t){return pr.listeners.add(t),()=>pr.listeners.delete(t)},getSnapshot(){return pr.snapshot},update(t){pr.snapshot=t,localStorage.setItem(md,JSON.stringify(t)),pr.listeners.forEach(e=>{e()})}},gd=()=>Ai(pr.subscribe,pr.getSnapshot),Lp=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Yp=(t,e)=>t.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(e,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),zp=(t,e)=>{let n=t.replace(/\s+/g,""),o=e.replace(/\s+/g,"");if(n===o)return 1;if(n.length<2||o.length<2)return 0;let a=new Map;for(let c=0;c<n.length-1;c++){let l=n.substring(c,c+2);a.set(l,(a.get(l)||0)+1)}let s=0;for(let c=0;c<o.length-1;c++){let l=o.substring(c,c+2),y=a.get(l)||0;y>0&&(a.set(l,y-1),s++)}return 2*s/(n.length+o.length-2)};function Fp(){let t=(0,gr.c)(6),e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];let[n,o]=an(e),[a,s]=an(!0),c,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let m=!0;return(async()=>{yr.start("Fetch: All Playlists");let b=await $f();if(!m)return;let D=b.filter(Kp);o(D),m&&(s(!1),yr.end("Fetch: All Playlists"))})(),()=>{m=!1}},l=[],t[1]=c,t[2]=l):(c=t[1],l=t[2]),An(c,l);let y;return t[3]!==a||t[4]!==n?(y={playlists:n,loading:a},t[3]=a,t[4]=n,t[5]=y):y=t[5],y}function Kp(t){return t.type==="playlist"&&t.canAddTo}function Up(t,e){let n=(0,gr.c)(8),o;n[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],n[0]=o):o=n[0];let[a,s]=an(o),[c,l]=an(!1),y,m;n[1]!==t||n[2]!==e?(y=()=>{if(!t){s([]);return}let b=new AbortController;return l(!0),(async()=>{yr.start("LOAD ALL DATA");let{items:T}=await Nf(t);if(b.signal.aborted)return;let O=T,A=O.map(Qp),j=await hd.tracks.bulkGet(A),H=new Map(j.filter(Gp).map(Hp)),J=Gu.Now.instant(),oe=[],ie=[],le=new RegExp(`\\b(${[...e.defaultNormaliseWords,...e.customNormaliseWords].map(Lp).join("|")})\\b`,"gi");for(let Y of O){let d=H.get(Y.uri),p=!1;if(!d)p=!0;else if(d.trackPlayCount===null||d.trackDuration===null||d.trackIsrc===null||d.albumReleaseDate===null)p=!0;else if(d.lastUpdated)try{let I=Gu.Instant.from(d.lastUpdated);J.since(I).total("days")>=30&&(p=!0)}catch{p=!0}else p=!0;p&&oe.push(Y),ie.push({...Y,playCount:d?.trackPlayCount??null,duration:d?.trackDuration??null,isrc:d?.trackIsrc??null,releaseDate:d?.albumReleaseDate??null,normalisedName:Y.name.toLowerCase().trim(),normalisedFuzzy:Yp(Y.name,le)})}if(b.signal.aborted)return;if(s(ie),oe.length===0){l(!1),yr.end("LOAD ALL DATA");return}let pe=oe.filter(Y=>{let d=H.get(Y.uri);return!d||d.trackDuration===null||d.trackPlayCount===null}),we=oe.filter(Y=>{let d=H.get(Y.uri);return!d||d.trackIsrc===null||d.albumReleaseDate===null}),[De,be]=await Promise.allSettled([pe.length>0?jf(pe.map(qp)):Promise.resolve(new Map),we.length>0?Bf(we.map(Wp)):Promise.resolve(new Map)]);if(b.signal.aborted)return;let q=De.status==="fulfilled"?De.value:null,X=be.status==="fulfilled"?be.value:null,Q=[],ye=J.toString(),x=[...ie];oe.forEach(Y=>{let d=H.get(Y.uri),p=q?.get(Y.uri),E=X?.get(Y.uri),k=p?.duration?.totalMilliseconds??null??d?.trackDuration??null,F=(p?.playcount?Number(p.playcount):null)??d?.trackPlayCount??null,L=null;E&&(L=E?.external_ids?.isrc??E?.external_id?.find(Zp)?.id??null);let ee=L??d?.trackIsrc??null,Z=null;if(E){let de=E?.album?.date;typeof de=="string"?Z=de:de?.year&&(Z=`${de.year}`,de.month&&(Z=Z+`-${String(de.month).padStart(2,"0")}`),de.day&&(Z=Z+`-${String(de.day).padStart(2,"0")}`))}let fe=Z??d?.albumReleaseDate??null;Q.push({trackUri:Y.uri,trackName:Y.name,trackDuration:k,trackPlayCount:F,trackIsrc:ee,albumUri:Y.album.uri,albumReleaseDate:fe,lastUpdated:ye});let xe=x.findIndex(de=>de.uid===Y.uid);xe!==-1&&(x[xe]={...x[xe],playCount:F,duration:k,isrc:ee,releaseDate:fe})}),await hd.tracks.bulkPut(Q),b.signal.aborted||(s(x),yr.end("LOAD ALL DATA")),b.signal.aborted||l(!1)})(),()=>b.abort()},m=[t,e],n[1]=t,n[2]=e,n[3]=y,n[4]=m):(y=n[3],m=n[4]),An(y,m);let g;return n[5]!==c||n[6]!==a?(g={tracks:a,loading:c,setTracks:s},n[5]=c,n[6]=a,n[7]=g):g=n[7],g}function Zp(t){return t?.type==="isrc"}function Wp(t){return t.uri}function qp(t){return t.album.uri}function Hp(t){return[t.trackUri,t]}function Gp(t){return!!t}function Qp(t){return t.uri}function Xp(t,e){let n=(0,gr.c)(4),o;e:{yr.start("Dupe Algorithm: Compute");let a;if(n[0]!==e||n[1]!==t){if(a={exact:[],isrc:[],probable:[],likely:[],possible:[],maybe:[]},t.length<2){yr.end("Dupe Algorithm: Compute"),o=a;break e}let{groupSettings:s}=e,c=[...t],l=new Set,y=(D,T)=>{if(D.length<2)return;let O=D.sort(s0);a[T].push({mainTrack:O[0],duplicates:O.slice(1)}),D.forEach(A=>{l.add(A.uid)})},m=()=>{c=c.filter(D=>!l.has(D.uid)),l.clear()};if(s.exact){let D=Object.groupBy(c,a0);for(let T in D){let O=D[T];O&&y(O,"exact")}m()}if(s.isrc){let D=Object.groupBy(c,o0);for(let T in D){let O=D[T];T&&O&&y(O,"isrc")}m()}let g=r0,b=n0;if(s.probable){let D=Object.groupBy(c,t0);for(let T in D){let O=D[T];if(!O||O.length<2)continue;let A=new Set;for(let j of O){if(A.has(j.uid))continue;let H=O.filter(J=>j.uid===J.uid||!A.has(J.uid)&&g(j,J));H.length>1&&(y(H,"probable"),H.forEach(J=>{A.add(J.uid)}))}}m()}if(s.likely){let D=Object.groupBy(c,e0);for(let T in D){let O=D[T];if(!O||O.length<2)continue;let A=new Set;for(let j of O){if(A.has(j.uid))continue;let H=O.filter(J=>j.uid===J.uid||!A.has(J.uid)&&b(j,J));H.length>1&&(y(H,"likely"),H.forEach(J=>{A.add(J.uid)}))}}m()}if(s.possible){let D=Object.groupBy(c,Jp);for(let T in D){let O=D[T];if(!O||O.length<2)continue;let A=new Set;for(let j of O){if(A.has(j.uid))continue;let H=O.filter(J=>j.uid===J.uid||!A.has(J.uid)&&b(j,J));H.length>1&&(y(H,"possible"),H.forEach(J=>{A.add(J.uid)}))}}m()}if(s.maybe){c.sort(Vp);for(let D=0;D<c.length;D++){let T=c[D];if(l.has(T.uid))continue;let O=[T];for(let A=D+1;A<Math.min(D+30,c.length);A++){let j=c[A];if(!l.has(j.uid)){if(T.normalisedFuzzy[0]!==j.normalisedFuzzy[0])break;zp(T.normalisedFuzzy,j.normalisedFuzzy)>=.8&&O.push(j)}}O.length>1&&y(O,"maybe")}}n[0]=e,n[1]=t,n[2]=a,n[3]=o}else a=n[2],o=n[3];yr.end("Dupe Algorithm: Compute"),o=a}return o}function Vp(t,e){return t.normalisedFuzzy.localeCompare(e.normalisedFuzzy)}function Jp(t){return t.normalisedFuzzy}function e0(t){return t.normalisedName}function t0(t){return t.normalisedName}function n0(t,e){return t.duration==null||e.duration==null?!1:Math.abs(t.duration-e.duration)<=5e3}function r0(t,e){let n=new Set(t.artists.map(i0));return e.artists.some(o=>n.has(o.name.toLowerCase()))}function i0(t){return t.name.toLowerCase()}function o0(t){return t.isrc||""}function a0(t){return t.uri}function s0(t,e){let n=(e.playCount??0)-(t.playCount??0);if(n!==0)return n;let o=t.releaseDate??"9999",a=e.releaseDate??"9999";return o.localeCompare(a)}var u0=()=>{let t=(0,gr.c)(7),e=gd(),n;t[0]!==e?(n=(l,y,m)=>{let g={...e,[l]:{...e[l],[y]:m}};pr.update(g)},t[0]=e,t[1]=n):n=t[1];let o=n,a;t[2]!==e||t[3]!==o?(a=(l,y,m)=>Le("section",{className:"duplicate-settings__section",children:[ce("h3",{className:"duplicate-settings__section-title",children:l}),ce("div",{className:"duplicate-settings__options",children:yd.map(g=>ce(ud,{desc:m[g],name:`${y}-${g}`,onChange:b=>o(y,g,!!b),option:{type:"toggle",name:g,desc:m[g],defaultVal:Ha[y][g]},value:e[y][g]},g))})]}),t[2]=e,t[3]=o,t[4]=a):a=t[4];let s=a,c;return t[5]!==s?(c=Le("div",{className:"duplicate-settings",children:[s("Display Groups","groupSettings",{exact:"Exact Duplicates",isrc:"ISRC Match",probable:"Same Title & Artist",likely:"Same Title & Duration",possible:"Similar Title & Duration",maybe:"Fuzzy Matches"}),s("Confirm Delete","confirmSettings",{exact:"Exact",isrc:"ISRC",probable:"Probable",likely:"Likely",possible:"Possible",maybe:"Maybe"})]}),t[5]=s,t[6]=c):c=t[6],c},c0=t=>{let e=(0,gr.c)(19),{uri:n,duration:o}=t,{position:a,duration:s,isPlaying:c,togglePlay:l,handleSliderChange:y,handleSliderRelease:m}=dd(n,o??0),g=f0,b;e[0]!==c?(b=c?ce(wt.React.pause,{}):ce(wt.React.play,{}),e[0]=c,e[1]=b):b=e[1];let D;e[2]!==b||e[3]!==l?(D=ce("button",{className:"duplicate-group__playback-button",onClick:l,children:b}),e[2]=b,e[3]=l,e[4]=D):D=e[4];let T=g(a),O;e[5]!==T?(O=ce("span",{className:"slider-time",children:T}),e[5]=T,e[6]=O):O=e[6];let A=s||0,j=a||0,H;e[7]!==y||e[8]!==m||e[9]!==A||e[10]!==j?(H=ce(qa,{max:A,min:0,onChange:y,onRelease:m,step:1,value:j}),e[7]=y,e[8]=m,e[9]=A,e[10]=j,e[11]=H):H=e[11];let J=g(s),oe;e[12]!==J?(oe=ce("span",{className:"slider-time",children:J}),e[12]=J,e[13]=oe):oe=e[13];let ie;return e[14]!==D||e[15]!==O||e[16]!==H||e[17]!==oe?(ie=Le("div",{className:"duplicate-group__playback-controls",children:[D,O,H,oe]}),e[14]=D,e[15]=O,e[16]=H,e[17]=oe,e[18]=ie):ie=e[18],ie},pd=t=>{let e=(0,gr.c)(42),{track:n,category:o,onDelete:a,isSource:s}=t,c=`duplicate-group__duplicate-item duplicate-group__item--${o}`,l;e[0]!==s?(l=s&&ce("strong",{children:"Source: "}),e[0]=s,e[1]=l):l=e[1];let y;e[2]!==l||e[3]!==n.name?(y=Le("span",{className:"duplicate-group__duplicate-name",children:[l,n.name]}),e[2]=l,e[3]=n.name,e[4]=y):y=e[4];let m;e[5]!==n.artists?(m=n.artists.map(d0).join(", "),e[5]=n.artists,e[6]=m):m=e[6];let g;e[7]!==m?(g=Le("span",{className:"track-details__artists",children:["Artists: ",m]}),e[7]=m,e[8]=g):g=e[8];let b;e[9]!==n.album.name?(b=Le("span",{className:"track-details__album",children:["Album: ",n.album.name]}),e[9]=n.album.name,e[10]=b):b=e[10];let D;e[11]!==g||e[12]!==b?(D=Le("div",{className:"track-details__line",children:[g,b]}),e[11]=g,e[12]=b,e[13]=D):D=e[13];let T;e[14]!==n.playCount?(T=n.playCount?.toLocaleString()??"N/A",e[14]=n.playCount,e[15]=T):T=e[15];let O;e[16]!==T?(O=Le("span",{className:"track-details__playcount",children:["Plays: ",T]}),e[16]=T,e[17]=O):O=e[17];let A=n.releaseDate??"Unknown",j;e[18]!==A?(j=Le("span",{className:"track-details__date",children:["Released: ",A]}),e[18]=A,e[19]=j):j=e[19];let H;e[20]!==j||e[21]!==O?(H=Le("div",{className:"track-details__line",children:[O,j]}),e[20]=j,e[21]=O,e[22]=H):H=e[22];let J;e[23]!==H||e[24]!==D?(J=Le("div",{className:"track-details",children:[D,H]}),e[23]=H,e[24]=D,e[25]=J):J=e[25];let oe;e[26]!==J||e[27]!==y?(oe=Le("div",{className:"duplicate-group__duplicate-content",children:[y,J]}),e[26]=J,e[27]=y,e[28]=oe):oe=e[28];let ie;e[29]!==a||e[30]!==n?(ie=ce("button",{className:"duplicate-group__delete-button",onClick:()=>a(n),children:"Delete"}),e[29]=a,e[30]=n,e[31]=ie):ie=e[31];let le;e[32]!==oe||e[33]!==ie?(le=Le("div",{className:"duplicate-group__duplicate-info",children:[oe,ie]}),e[32]=oe,e[33]=ie,e[34]=le):le=e[34];let pe;e[35]!==n.duration||e[36]!==n.uri?(pe=ce("div",{className:"duplicate-group__actions",children:ce(c0,{duration:n.duration,uri:n.uri})}),e[35]=n.duration,e[36]=n.uri,e[37]=pe):pe=e[37];let we;return e[38]!==c||e[39]!==le||e[40]!==pe?(we=Le("div",{className:c,children:[le,pe]}),e[38]=c,e[39]=le,e[40]=pe,e[41]=we):we=e[41],we},l0=t=>{let e=(0,gr.c)(14),{title:n,category:o,groups:a,onDelete:s}=t,c;e[0]!==n?(c=ce("div",{className:"duplicate-group__heading-title",children:n}),e[0]=n,e[1]=c):c=e[1];let l;e[2]!==a.length?(l=Le("div",{className:"duplicate-group__heading-length",children:[a.length," found"]}),e[2]=a.length,e[3]=l):l=e[3];let y;e[4]!==c||e[5]!==l?(y=Le("div",{className:"duplicate-group__heading",children:[c,l]}),e[4]=c,e[5]=l,e[6]=y):y=e[6];let m;e[7]!==o||e[8]!==a||e[9]!==s?(m=a.length>0&&ce("div",{className:"duplicate-group__list",children:a.map(b=>Le("div",{className:`duplicate-group__item duplicate-group__item--${o}`,children:[ce(pd,{category:o,isSource:!0,onDelete:D=>s(o,D),track:b.mainTrack}),ce("div",{className:"duplicate-group__duplicates-list",children:b.duplicates.map(D=>ce(pd,{category:o,onDelete:T=>s(o,T),track:D},D.uid))})]},b.mainTrack.uid))}),e[7]=o,e[8]=a,e[9]=s,e[10]=m):m=e[10];let g;return e[11]!==y||e[12]!==m?(g=Le("div",{className:"duplicate-group",children:[y,m]}),e[11]=y,e[12]=m,e[13]=g):g=e[13],g};function vd({selectedPlaylist:t}){let[e,n]=an("finder"),[o,a]=an(t?.uri),[s,c]=an(null),l=gd(),{playlists:y,loading:m}=Fp(),g=js(()=>y.find(ie=>ie.uri===o)??(o?{uri:o,name:"Selected Playlist",type:"playlist"}:void 0),[y,o]),{tracks:b,loading:D,setTracks:T}=Up(o,l),O=Xp(b,l),A=Ht(performance.now());A.current=performance.now(),An(()=>{let ie=performance.now()-A.current;ie>10&&console.debug(`[DEBUG] Render:React took ${ie.toFixed(2)}ms to render`)});let j=async ie=>{g&&(await Spicetify.Platform.PlaylistAPI.remove(g.uri,[{uid:ie.uid}]),T(le=>le.filter(pe=>pe.uid!==ie.uid)))},H=(ie,le)=>{l.confirmSettings[ie]?c({track:le,category:ie}):j(le)},J=()=>{s&&j(s.track),c(null)},oe={exact:"Exact URI Matches",isrc:"Same ISRC",probable:"Same Title + Shared Artist",likely:"Same Title + Duration (\xB15s)",possible:"Similar Title + Duration (\xB15s)",maybe:"Maybe Duplicates (Fuzzy)"};return Le(Ys,{children:[ce(Spicetify.ReactComponent.ConfirmDialog,{cancelText:"Cancel",confirmText:"Remove",descriptionText:s?`Are you sure you want to remove "${s.track.name}"? This cannot be undone.`:"",isOpen:s!==null,onClose:()=>c(null),onConfirm:J,onOutside:()=>c(null),titleText:"Remove Track"}),Le("div",{className:"find-duplicates",children:[Le("div",{className:"modal__header",children:[ce("h1",{className:"modal__title",children:e==="finder"?"Playlist Duplicate Finder":"Settings"}),Le("div",{className:"modal__buttonContainer",children:[ce("button",{className:"modal__button",onClick:()=>n(ie=>ie==="finder"?"settings":"finder"),children:ce(wt.React.settings,{})}),ce("button",{className:"modal__button",onClick:()=>kr.hide(),children:ce(wt.React.close,{size:18})})]})]}),ce("div",{className:"find-duplicates__content",children:e==="settings"?ce(u0,{}):Le(Ys,{children:[Le("div",{className:"find-duplicates__header",children:[ce("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),ce(Wa,{disabled:m||D,onChange:a,options:y.map(ie=>({value:ie.uri,label:ie.name})),value:o??""})]}),D?ce("div",{className:"find-duplicates__loading",children:ce(UI.ProgressDots,{size:"medium"})}):yd.map(ie=>l.groupSettings[ie]?ce(l0,{category:ie,groups:O[ie],onDelete:H,title:oe[ie]},ie):null)]})})]})]})}function f0(t){if(t==null||t<0)return"--:--";let e=Math.floor(t/1e3);return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}function d0(t){return t.name}var _d=new CSSStyleSheet;_d.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-main-elevated);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-button);display:flex;flex-direction:column;gap:var(--fdp-gap);overflow:hidden;animation:fdp-fade-in .2s ease-out both}.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius)}.find-duplicates__header-label{font-weight:600;color:var(--fdp-text)}.find-duplicates__loading{display:flex;align-items:center;justify-content:center;height:16700000px}.find-duplicates__content{display:flex;flex-direction:column;gap:8px;padding:0 32px;overflow:scroll}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg)}.duplicate-group__heading{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fdp-text)}.duplicate-group__heading-length{padding:2px 8px;font-size:12px;color:var(--fdp-subtext);border:1px solid var(--fdp-border);border-radius:999px}.duplicate-group__list{display:flex;flex-direction:column;gap:10px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;border:1px solid var(--fdp-border);border-left:3px solid;border-radius:var(--fdp-radius);transition:background-color .12s ease,border-color .12s ease}.duplicate-group__item:hover{background:rgba(var(--spice-rgb-selected-row),.05);border-color:var(--fdp-border-strong)}.duplicate-group__item--exact{border-left-color:#e53935}.duplicate-group__item--isrc{border-left-color:#fb8c00}.duplicate-group__item--probable{border-left-color:#fdd835}.duplicate-group__item--likely{border-left-color:#43a047}.duplicate-group__item--possible{border-left-color:#1e88e5}.duplicate-group__item--maybe{border-left-color:#306}.duplicate-group__duplicate-info{display:flex;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex-direction:column;gap:6px;min-width:0}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:600;color:var(--fdp-text);white-space:nowrap}.track-details{font-size:.9rem;color:var(--fdp-subtext)}.track-details__line{display:flex;flex-wrap:wrap;gap:10px}.duplicate-group__playback-controls{display:flex;gap:10px;align-items:center}.duplicate-group__playback-button{width:32px;height:32px;color:var(--fdp-text);cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%}.duplicate-group__playback-button:hover{background:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}.slider-time{min-width:38px;font-size:12px;color:var(--fdp-subtext);text-align:center}.duplicate-group__delete-button{padding:6px 12px;font-size:.85rem;font-weight:600;color:#fff;cursor:pointer;background:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:999px}.duplicate-group__delete-button:hover{filter:brightness(1.05)}.duplicate-settings__section{margin-bottom:24px}.duplicate-settings__section-title{padding-bottom:6px;margin-bottom:12px;font-weight:600;border-bottom:1px solid var(--fdp-border)}.duplicate-settings__options{display:flex;flex-direction:column;gap:10px}.find-duplicates :is(button,[role=button],input,select):focus-visible{outline:none;border-color:var(--fdp-accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--fdp-accent),transparent 60%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(3px)}to{opacity:1;transform:none}}");var bd=_d;document.adoptedStyleSheets.push(bd);var h0=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:wt.HTML.duplicate,onClick:async(t,e,n)=>{let o=As(t.props),a=o.uri,s=o.name,c=Spicetify.URI.from(a)?.type,l={uri:a,name:s||(await Spicetify.Platform.PlaylistAPI.getMetadata(a,{}))?.name||"",type:c||""};kr({title:"Find Duplicates",content:ce(vd,{selectedPlaylist:l}),isLarge:!0,template:!1})},divider:"after",shouldAdd:(t,e,n)=>{let o=As(t),a=Spicetify.URI.from(o.uri)?.type;return a===Spicetify.URI.Type.PLAYLIST||a===Spicetify.URI.Type.PLAYLIST_V2}});h0.register();
