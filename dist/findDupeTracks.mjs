await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Va=Object.create;var xn=Object.defineProperty;var es=Object.getOwnPropertyDescriptor;var ts=Object.getOwnPropertyNames;var ns=Object.getPrototypeOf,rs=Object.prototype.hasOwnProperty;var os=(l,n)=>()=>(l&&(n=l(l=0)),n);var is=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),as=(l,n)=>{for(var f in n)xn(l,f,{get:n[f],enumerable:!0})},ko=(l,n,f,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of ts(n))!rs.call(l,h)&&h!==f&&xn(l,h,{get:()=>n[h],enumerable:!(b=es(n,h))||b.enumerable});return l};var Be=(l,n,f)=>(f=l!=null?Va(ns(l)):{},ko(n||!l||!l.__esModule?xn(f,"default",{value:l,enumerable:!0}):f,l)),ss=l=>ko(xn({},"__esModule",{value:!0}),l);var So={};as(So,{Children:()=>us,Component:()=>cs,Fragment:()=>ls,Profiler:()=>fs,PureComponent:()=>ps,StrictMode:()=>ds,Suspense:()=>hs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>ms,act:()=>ys,cloneElement:()=>vs,createContext:()=>gs,createElement:()=>bs,createFactory:()=>_s,createRef:()=>ws,default:()=>Ks,forwardRef:()=>xs,isValidElement:()=>xr,lazy:()=>ks,memo:()=>Se,startTransition:()=>Ss,unstable_act:()=>Cs,useCallback:()=>Ps,useContext:()=>Os,useDebugValue:()=>Es,useDeferredValue:()=>Rs,useEffect:()=>Fe,useId:()=>kr,useImperativeHandle:()=>As,useInsertionEffect:()=>Ts,useLayoutEffect:()=>js,useMemo:()=>Ds,useReducer:()=>Ns,useRef:()=>Re,useState:()=>je,useSyncExternalStore:()=>zt,useTransition:()=>Is,version:()=>Ms});var us,cs,ls,fs,ps,ds,hs,ms,ys,vs,gs,bs,_s,ws,xs,xr,ks,Se,Ss,Cs,Ps,Os,Es,Rs,Fe,kr,As,Ts,js,Ds,Ns,Re,je,zt,Is,Ms,Ks,De=os(()=>{({Children:us,Component:cs,Fragment:ls,Profiler:fs,PureComponent:ps,StrictMode:ds,Suspense:hs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ms,act:ys,cloneElement:vs,createContext:gs,createElement:bs,createFactory:_s,createRef:ws,forwardRef:xs,isValidElement:xr,lazy:ks,memo:Se,startTransition:Ss,unstable_act:Cs,useCallback:Ps,useContext:Os,useDebugValue:Es,useDeferredValue:Rs,useEffect:Fe,useId:kr,useImperativeHandle:As,useInsertionEffect:Ts,useLayoutEffect:js,useMemo:Ds,useReducer:Ns,useRef:Re,useState:je,useSyncExternalStore:zt,useTransition:Is,version:Ms}=Spicetify.React),Ks=Spicetify.React});var Me=is((Wu,Ao)=>{"use no memo";"use strict";var Bs=Object.create,Cn=Object.defineProperty,Fs=Object.getOwnPropertyDescriptor,$s=Object.getOwnPropertyNames,Ls=Object.getPrototypeOf,qs=Object.prototype.hasOwnProperty,zs=(l,n)=>{for(var f in n)Cn(l,f,{get:n[f],enumerable:!0})},Eo=(l,n,f,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of $s(n))!qs.call(l,h)&&h!==f&&Cn(l,h,{get:()=>n[h],enumerable:!(b=Fs(n,h))||b.enumerable});return l},Us=(l,n,f)=>(f=l!=null?Bs(Ls(l)):{},Eo(n||!l||!l.__esModule?Cn(f,"default",{value:l,enumerable:!0}):f,l)),Hs=l=>Eo(Cn({},"__esModule",{value:!0}),l),Ro={};zs(Ro,{$dispatcherGuard:()=>Ys,$makeReadOnly:()=>Xs,$reset:()=>Qs,$structuralCheck:()=>nu,c:()=>Ws,clearRenderCounterRegistry:()=>Js,renderCounterRegistry:()=>Ht,useRenderCounter:()=>tu});Ao.exports=Hs(Ro);var Et=Us((De(),ss(So))),{useRef:Zs,useEffect:Gs,isValidElement:Pt}=Et,Co,Sr=(Co=Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Co:Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cr=Symbol.for("react.memo_cache_sentinel"),Po,Ws=typeof((Po=Et.__COMPILER_RUNTIME)==null?void 0:Po.c)=="function"?Et.__COMPILER_RUNTIME.c:function(n){return Et.useMemo(()=>{let f=new Array(n);for(let b=0;b<n;b++)f[b]=Cr;return f[Cr]=!0,f},[])},Sn={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(l=>{Sn[l]=()=>{throw new Error(`[React] Unexpected React hook call (${l}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var Ut=null;Sn.useMemoCache=l=>{if(Ut==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return Ut.useMemoCache(l)};function kn(l){return Sr.ReactCurrentDispatcher.current=l,Sr.ReactCurrentDispatcher.current}var Ot=[];function Ys(l){let n=Sr.ReactCurrentDispatcher.current;if(l===0){if(Ot.push(n),Ot.length===1&&(Ut=n),n===Sn)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");kn(Sn)}else if(l===1){let f=Ot.pop();if(f==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Ot.length===0&&(Ut=null),kn(f)}else if(l===2)Ot.push(n),kn(Ut);else if(l===3){let f=Ot.pop();if(f==null)throw new Error("React Compiler internal error: unexpected null in guard stack");kn(f)}else throw new Error("React Compiler internal error: unreachable block"+l)}function Qs(l){for(let n=0;n<l.length;n++)l[n]=Cr}function Xs(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Ht=new Map;function Js(){for(let l of Ht.values())l.forEach(n=>{n.count=0})}function Vs(l,n){let f=Ht.get(l);f==null&&(f=new Set,Ht.set(l,f)),f.add(n)}function eu(l,n){let f=Ht.get(l);f?.delete(n)}function tu(l){let n=Zs(null);n.current!=null&&(n.current.count+=1),Gs(()=>{if(n.current==null){let f={count:0};Vs(l,f),n.current=f}return()=>{n.current!==null&&eu(l,n.current)}})}var Oo=new Set;function nu(l,n,f,b,h,E){function y(_,k,A,P){let I=`${b}:${E} [${h}] ${f}${A} changed from ${_} to ${k} at depth ${P}`;Oo.has(I)||(Oo.add(I),console.error(I))}let O=2;function w(_,k,A,P){if(!(P>O)){if(_===k)return;if(typeof _!=typeof k)y(`type ${typeof _}`,`type ${typeof k}`,A,P);else if(typeof _=="object"){let I=Array.isArray(_),L=Array.isArray(k);if(_===null&&k!==null)y("null",`type ${typeof k}`,A,P);else if(k===null)y(`type ${typeof _}`,"null",A,P);else if(_ instanceof Map)if(!(k instanceof Map))y("Map instance","other value",A,P);else if(_.size!==k.size)y(`Map instance with size ${_.size}`,`Map instance with size ${k.size}`,A,P);else for(let[M,B]of _)k.has(M)?w(B,k.get(M),`${A}.get(${M})`,P+1):y(`Map instance with key ${M}`,`Map instance without key ${M}`,A,P);else if(k instanceof Map)y("other value","Map instance",A,P);else if(_ instanceof Set)if(!(k instanceof Set))y("Set instance","other value",A,P);else if(_.size!==k.size)y(`Set instance with size ${_.size}`,`Set instance with size ${k.size}`,A,P);else for(let M of k)_.has(M)||y(`Set instance without element ${M}`,`Set instance with element ${M}`,A,P);else if(k instanceof Set)y("other value","Set instance",A,P);else if(I||L)if(I!==L)y(`type ${I?"array":"object"}`,`type ${L?"array":"object"}`,A,P);else if(_.length!==k.length)y(`array with length ${_.length}`,`array with length ${k.length}`,A,P);else for(let M=0;M<_.length;M++)w(_[M],k[M],`${A}[${M}]`,P+1);else if(Pt(_)||Pt(k))Pt(_)!==Pt(k)?y(`type ${Pt(_)?"React element":"object"}`,`type ${Pt(k)?"React element":"object"}`,A,P):_.type!==k.type?y(`React element of type ${_.type}`,`React element of type ${k.type}`,A,P):w(_.props,k.props,`[props of ${A}]`,P+1);else{for(let M in k)M in _||y(`object without key ${M}`,`object with key ${M}`,A,P);for(let M in _)M in k?w(_[M],k[M],`${A}.${M}`,P+1):y(`object with key ${M}`,`object without key ${M}`,A,P)}}else{if(typeof _=="function")return;isNaN(_)||isNaN(k)?isNaN(_)!==isNaN(k)&&y(`${isNaN(_)?"NaN":"non-NaN value"}`,`${isNaN(k)?"NaN":"non-NaN value"}`,A,P):_!==k&&y(_,k,A,P)}}}w(l,n,"",0)}});function wr(l){if(!l)return{};let n={},f=(b,h)=>{if(!(!b||typeof b!="object"))for(let E in b)Object.hasOwn(b,E)&&h[E]===void 0&&(h[E]=b[E])};return f(l,n),f(l.item,n),f(l.reference,n),n}var To=Be(Me());var{Fragment:Pr,jsx:F,jsxs:ue}=Spicetify.ReactJSX;var Pn={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},ru=l=>{let{path:n,size:f}=Pn[l],b=h=>{let E=(0,To.c)(4),{size:y,fill:O}=h,w=y===void 0?f:y,_=O===void 0?"currentColor":O,k;E[0]===Symbol.for("react.memo_cache_sentinel")?(k=F("path",{d:n}),E[0]=k):k=E[0];let A;return E[1]!==_||E[2]!==w?(A=F("svg",{fill:_,height:w,role:"img",viewBox:`0 0 ${f} ${f}`,width:w,children:k}),E[1]=_,E[2]=w,E[3]=A):A=E[3],A};return b.defaultProps={size:f,fill:"currentColor"},b},{raw:ou,react:iu,html:au}=Object.keys(Pn).reduce((l,n)=>(l.raw[n]=Pn[n].path,l.react[n]=ru(n),l.html[n]=`<path d="${Pn[n].path}"/>`,l),{raw:{},react:{},html:{}}),Ae={React:iu,HTML:au,RAW:ou};var No=Be(Me());De();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Ju,createPortal:Vu,createRoot:On,findDOMNode:ec,flushSync:tc,hydrate:nc,hydrateRoot:rc,render:oc,unmountComponentAtNode:ic,unstable_batchedUpdates:ac,unstable_renderSubtreeIntoContainer:sc,version:uc}=Spicetify.ReactDOM,cc=Spicetify.ReactDOM;var jo=new CSSStyleSheet;jo.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var Do=jo;document.adoptedStyleSheets.push(Do);var Zt=null,Or="popup-modal-container",Er=()=>{let l=document.getElementById(Or);Zt&&(Zt.unmount(),Zt=null),l&&l.remove(),document.body.style.overflow="auto"},su=Se(l=>{let n=(0,No.c)(44),{title:f,content:b,isLarge:h,buttons:E,icon:y,template:O,onClose:w}=l,_=Re(null),k,A;n[0]!==w?(k=()=>{document.body.style.overflow="hidden";let H=ae=>{ae.key==="Escape"&&(ae.preventDefault(),w())};return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},A=[w],n[0]=w,n[1]=k,n[2]=A):(k=n[1],A=n[2]),Fe(k,A);let P;n[3]!==w?(P=()=>{w()},n[3]=w,n[4]=P):P=n[4];let I=P,L;n[5]!==I?(L=H=>{H.target===_.current&&I()},n[5]=I,n[6]=L):L=n[6];let M=L,B;n[7]!==b?(B=()=>xr(b)?b:typeof b=="function"?F(b,{}):b,n[7]=b,n[8]=B):B=n[8];let D=B;if(O===!0){let H=`modal__container${h?" modal__container--large":""}`,ae;n[9]!==y?(ae=y&&F("div",{className:"modal__icon",children:y}),n[9]=y,n[10]=ae):ae=n[10];let ne;n[11]!==f?(ne=f&&F("h1",{className:"modal__title",children:f}),n[11]=f,n[12]=ne):ne=n[12];let oe;n[13]!==ae||n[14]!==ne?(oe=ue("div",{className:"modal__titleContainer",children:[ae,ne]}),n[13]=ae,n[14]=ne,n[15]=oe):oe=n[15];let re;n[16]===Symbol.for("react.memo_cache_sentinel")?(re=F(Ae.React.close,{size:18}),n[16]=re):re=n[16];let de;n[17]!==I?(de=F(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:F("button",{className:"modal__button modal__button--close",onClick:I,children:re})}),n[17]=I,n[18]=de):de=n[18];let he;n[19]!==E||n[20]!==de?(he=ue("div",{className:"modal__buttonContainer",children:[E,de]}),n[19]=E,n[20]=de,n[21]=he):he=n[21];let ce;n[22]!==he||n[23]!==oe?(ce=ue("div",{className:"modal__header",children:[oe,he]}),n[22]=he,n[23]=oe,n[24]=ce):ce=n[24];let me;n[25]!==D?(me=D(),n[25]=D,n[26]=me):me=n[26];let be;n[27]!==me?(be=F("div",{className:"modal__content",children:me}),n[27]=me,n[28]=be):be=n[28];let le;n[29]!==ce||n[30]!==be||n[31]!==H?(le=ue("div",{className:H,children:[ce,be]}),n[29]=ce,n[30]=be,n[31]=H,n[32]=le):le=n[32];let ve;return n[33]!==M||n[34]!==le?(ve=F("div",{className:"modal",onClick:M,ref:_,children:le}),n[33]=M,n[34]=le,n[35]=ve):ve=n[35],ve}let $=`modal__container${h?" modal__container--large":""}`,Y;n[36]!==D?(Y=D(),n[36]=D,n[37]=Y):Y=n[37];let Q;n[38]!==$||n[39]!==Y?(Q=F("div",{className:$,children:Y}),n[38]=$,n[39]=Y,n[40]=Q):Q=n[40];let Z;return n[41]!==M||n[42]!==Q?(Z=F("div",{className:"modal",onClick:M,ref:_,children:Q}),n[41]=M,n[42]=Q,n[43]=Z):Z=n[43],Z}),ht=l=>{document.getElementById(Or)&&Er();let n=document.createElement("div");n.id=Or,document.body.appendChild(n),Zt=On(n),Zt.render(F(su,{...l,onClose:Er}))};ht.hide=Er;var rt=Be(Me());var uu=(l,...n)=>({$t:setTimeout(l,0,...n),[Symbol.dispose](){clearTimeout(this.t)}}),cu=Object.create,Mo=Object.defineProperty,lu=Object.getOwnPropertyDescriptor,fu=Object.getOwnPropertyNames,pu=Object.getPrototypeOf,du=Object.prototype.hasOwnProperty,hu=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),mu=(l,n,f,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of fu(n))!du.call(l,h)&&h!==f&&Mo(l,h,{get:()=>n[h],enumerable:!(b=lu(n,h))||b.enumerable});return l},yu=(l,n,f)=>(f=l!=null?cu(pu(l)):{},mu(n||!l||!l.__esModule?Mo(f,"default",{value:l,enumerable:!0}):f,l)),vu=hu((l,n)=>{(function(f,b){typeof l=="object"&&typeof n<"u"?n.exports=b():typeof define=="function"&&define.amd?define(b):(f=typeof globalThis<"u"?globalThis:f||self,f.Dexie=b())})(l,(function(){"use strict";var f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},f(t,e)};function b(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var h=function(){return h=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},h.apply(this,arguments)};function E(t,e,r){if(r||arguments.length===2)for(var o=0,i=e.length,a;o<i;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return t.concat(a||Array.prototype.slice.call(e))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,O=Object.keys,w=Array.isArray;typeof Promise<"u"&&!y.Promise&&(y.Promise=Promise);function _(t,e){return typeof e!="object"||O(e).forEach(function(r){t[r]=e[r]}),t}var k=Object.getPrototypeOf,A={}.hasOwnProperty;function P(t,e){return A.call(t,e)}function I(t,e){typeof e=="function"&&(e=e(k(t))),(typeof Reflect>"u"?O:Reflect.ownKeys)(e).forEach(function(r){M(t,r,e[r])})}var L=Object.defineProperty;function M(t,e,r,o){L(t,e,_(r&&P(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function B(t){return{from:function(e){return t.prototype=Object.create(e.prototype),M(t.prototype,"constructor",t),{extend:I.bind(null,t.prototype)}}}}var D=Object.getOwnPropertyDescriptor;function $(t,e){var r=D(t,e),o;return r||(o=k(t))&&$(o,e)}var Y=[].slice;function Q(t,e,r){return Y.call(t,e,r)}function Z(t,e){return e(t)}function H(t){if(!t)throw new Error("Assertion Failed")}function ae(t){y.setImmediate?uu(t):setTimeout(t,0)}function ne(t,e){return t.reduce(function(r,o,i){var a=e(o,i);return a&&(r[a[0]]=a[1]),r},{})}function oe(t,e){if(typeof e=="string"&&P(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var r=[],o=0,i=e.length;o<i;++o){var a=oe(t,e[o]);r.push(a)}return r}var s=e.indexOf(".");if(s!==-1){var u=t[e.substr(0,s)];return u==null?void 0:oe(u,e.substr(s+1))}}function re(t,e,r){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){H(typeof r!="string"&&"length"in r);for(var o=0,i=e.length;o<i;++o)re(t,e[o],r[o])}else{var a=e.indexOf(".");if(a!==-1){var s=e.substr(0,a),u=e.substr(a+1);if(u==="")r===void 0?w(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=r;else{var c=t[s];(!c||!P(t,s))&&(c=t[s]={}),re(c,u,r)}}else r===void 0?w(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function de(t,e){typeof e=="string"?re(t,e,void 0):"length"in e&&[].map.call(e,function(r){re(t,r,void 0)})}function he(t){var e={};for(var r in t)P(t,r)&&(e[r]=t[r]);return e}var ce=[].concat;function me(t){return ce.apply([],t)}var be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(me([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return y[t]}),le=new Set(be.map(function(t){return y[t]}));function ve(t){var e={};for(var r in t)if(P(t,r)){var o=t[r];e[r]=!o||typeof o!="object"||le.has(o.constructor)?o:ve(o)}return e}function ke(t){for(var e in t)if(P(t,e))return!1;return!0}var Ee=null;function we(t){Ee=new WeakMap;var e=mt(t);return Ee=null,e}function mt(t){if(!t||typeof t!="object")return t;var e=Ee.get(t);if(e)return e;if(w(t)){e=[],Ee.set(t,e);for(var r=0,o=t.length;r<o;++r)e.push(mt(t[r]))}else if(le.has(t.constructor))e=t;else{var i=k(t);e=i===Object.prototype?{}:Object.create(i),Ee.set(t,e);for(var a in t)P(t,a)&&(e[a]=mt(t[a]))}return e}var Ci={}.toString;function jn(t){return Ci.call(t).slice(8,-1)}var Dn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pi=typeof Dn=="symbol"?function(t){var e;return t!=null&&(e=t[Dn])&&e.apply(t)}:function(){return null};function ot(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),r>=0}var yt={};function Ze(t){var e,r,o,i;if(arguments.length===1){if(w(t))return t.slice();if(this===yt&&typeof t=="string")return[t];if(i=Pi(t)){for(r=[];o=i.next(),!o.done;)r.push(o.value);return r}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var Nn=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Oi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ir=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],In=Oi.concat(Ir),Ei={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vt(t,e){this.name=t,this.message=e}B(vt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Mr(t,e){return t+". Errors: "+Object.keys(e).map(function(r){return e[r].toString()}).filter(function(r,o,i){return i.indexOf(r)===o}).join(`
`)}function Gt(t,e,r,o){this.failures=e,this.failedKeys=o,this.successCount=r,this.message=Mr(t,e)}B(Gt).from(vt);function gt(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(r){return e[r]}),this.failuresByPos=e,this.message=Mr(t,this.failures)}B(gt).from(vt);var Mn=In.reduce(function(t,e){return t[e]=e+"Error",t},{}),Ri=vt,V=In.reduce(function(t,e){var r=e+"Error";function o(i,a){this.name=r,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Ei[e]||r,this.inner=null)}return B(o).from(Ri),t[e]=o,t},{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var Kr=Ir.reduce(function(t,e){return t[e+"Error"]=V[e],t},{});function Ai(t,e){if(!t||t instanceof vt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Kr[t.name])return t;var r=new Kr[t.name](e||t.message,t);return"stack"in t&&M(r,"stack",{get:function(){return this.inner.stack}}),r}var Wt=In.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=V[e]),t},{});Wt.ModifyError=Gt,Wt.DexieError=vt,Wt.BulkError=gt;function ye(){}function Rt(t){return t}function Ti(t,e){return t==null||t===Rt?e:function(r){return e(t(r))}}function it(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ji(t,e){return t===ye?e:function(){var r=t.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?it(o,this.onsuccess):o),i&&(this.onerror=this.onerror?it(i,this.onerror):i),a!==void 0?a:r}}function Di(t,e){return t===ye?e:function(){t.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?it(r,this.onsuccess):r),o&&(this.onerror=this.onerror?it(o,this.onerror):o)}}function Ni(t,e){return t===ye?e:function(r){var o=t.apply(this,arguments);_(r,o);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?it(i,this.onsuccess):i),a&&(this.onerror=this.onerror?it(a,this.onerror):a),o===void 0?s===void 0?void 0:s:_(o,s)}}function Ii(t,e){return t===ye?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Kn(t,e){return t===ye?e:function(){var r=t.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then(function(){return e.apply(o,a)})}return e.apply(this,arguments)}}var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Br(t,e){Le=t}var At={},Fr=100,Bn=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,k(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,k(e),t]})(),$r=Bn[0],Lr=Bn[1],Mi=Bn[2],Ki=Lr&&Lr.then,at=$r&&$r.constructor,Fn=!!Mi;function Bi(){queueMicrotask($i)}var Tt=function(t,e){jt.push([t,e]),Yt&&(Bi(),Yt=!1)},$n=!0,Yt=!0,st=[],Qt=[],Ln=Rt,Ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ye,pgp:!1,env:{},finalize:ye},X=Ye,jt=[],ut=0,Xt=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=X;if(typeof t!="function"){if(t!==At)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&zn(this,this._value);return}this._state=null,this._value=null,++e.ref,zr(this,t)}var qn={get:function(){var t=X,e=tn;function r(o,i){var a=this,s=!t.global&&(t!==X||e!==tn),u=s&&!Xe(),c=new U(function(p,v){Un(a,new qr(Zr(o,t,s,u),Zr(i,t,s,u),p,v,t))});return this._consoleTask&&(c._consoleTask=this._consoleTask),c}return r.prototype=At,r},set:function(t){M(this,"then",t&&t.prototype===At?qn:{get:function(){return t},set:qn.set})}};I(U.prototype,{then:qn,_then:function(t,e){Un(this,new qr(null,null,t,e,X))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],r=arguments[1];return typeof e=="function"?this.then(null,function(o){return o instanceof e?r(o):Jt(o)}):this.then(null,function(o){return o&&o.name===e?r(o):Jt(o)})},finally:function(t){return this.then(function(e){return U.resolve(t()).then(function(){return e})},function(e){return U.resolve(t()).then(function(){return Jt(e)})})},timeout:function(t,e){var r=this;return t<1/0?new U(function(o,i){var a=setTimeout(function(){return i(new V.Timeout(e))},t);r.then(o,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Ye.env=Hr();function qr(t,e,r,o,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=r,this.reject=o,this.psd=i}I(U,{all:function(){var t=Ze.apply(null,arguments).map(nn);return new U(function(e,r){t.length===0&&e([]);var o=t.length;t.forEach(function(i,a){return U.resolve(i).then(function(s){t[a]=s,--o||e(t)},r)})})},resolve:function(t){if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U(function(r,o){t.then(r,o)});var e=new U(At,!0,t);return e},reject:Jt,race:function(){var t=Ze.apply(null,arguments).map(nn);return new U(function(e,r){t.map(function(o){return U.resolve(o).then(e,r)})})},PSD:{get:function(){return X},set:function(t){return X=t}},totalEchoes:{get:function(){return tn}},newPSD:Qe,usePSD:ct,scheduler:{get:function(){return Tt},set:function(t){Tt=t}},rejectionMapper:{get:function(){return Ln},set:function(t){Ln=t}},follow:function(t,e){return new U(function(r,o){return Qe(function(i,a){var s=X;s.unhandleds=[],s.onunhandled=a,s.finalize=it(function(){var u=this;Li(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},s.finalize),t()},e,r,o)})}}),at&&(at.allSettled&&M(U,"allSettled",function(){var t=Ze.apply(null,arguments).map(nn);return new U(function(e){t.length===0&&e([]);var r=t.length,o=new Array(r);t.forEach(function(i,a){return U.resolve(i).then(function(s){return o[a]={status:"fulfilled",value:s}},function(s){return o[a]={status:"rejected",reason:s}}).then(function(){return--r||e(o)})})})}),at.any&&typeof AggregateError<"u"&&M(U,"any",function(){var t=Ze.apply(null,arguments).map(nn);return new U(function(e,r){t.length===0&&r(new AggregateError([]));var o=t.length,i=new Array(o);t.forEach(function(a,s){return U.resolve(a).then(function(u){return e(u)},function(u){i[s]=u,--o||r(new AggregateError(i))})})})}),at.withResolvers&&(U.withResolvers=at.withResolvers));function zr(t,e){try{e(function(r){if(t._state===null){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&bt();r&&typeof r.then=="function"?zr(t,function(i,a){r instanceof U?r._then(i,a):r.then(i,a)}):(t._state=!0,t._value=r,Ur(t)),o&&_t()}},zn.bind(null,t))}catch(r){zn(t,r)}}function zn(t,e){if(Qt.push(e),t._state===null){var r=t._lib&&bt();e=Ln(e),t._state=!1,t._value=e,qi(t),Ur(t),r&&_t()}}function Ur(t){var e=t._listeners;t._listeners=[];for(var r=0,o=e.length;r<o;++r)Un(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),ut===0&&(++ut,Tt(function(){--ut===0&&Hn()},[]))}function Un(t,e){if(t._state===null){t._listeners.push(e);return}var r=t._state?e.onFulfilled:e.onRejected;if(r===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++ut,Tt(Fi,[r,t,e])}function Fi(t,e,r){try{var o,i=e._value;!e._state&&Qt.length&&(Qt=[]),o=Le&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),!e._state&&Qt.indexOf(i)===-1&&zi(e),r.resolve(o)}catch(a){r.reject(a)}finally{--ut===0&&Hn(),--r.psd.ref||r.psd.finalize()}}function $i(){ct(Ye,function(){bt()&&_t()})}function bt(){var t=$n;return $n=!1,Yt=!1,t}function _t(){var t,e,r;do for(;jt.length>0;)for(t=jt,jt=[],r=t.length,e=0;e<r;++e){var o=t[e];o[0].apply(null,o[1])}while(jt.length>0);$n=!0,Yt=!0}function Hn(){var t=st;st=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var e=Xt.slice(0),r=e.length;r;)e[--r]()}function Li(t){function e(){t(),Xt.splice(Xt.indexOf(e),1)}Xt.push(e),++ut,Tt(function(){--ut===0&&Hn()},[])}function qi(t){st.some(function(e){return e._value===t._value})||st.push(t)}function zi(t){for(var e=st.length;e;)if(st[--e]._value===t._value){st.splice(e,1);return}}function Jt(t){return new U(At,!1,t)}function ge(t,e){var r=X;return function(){var o=bt(),i=X;try{return Je(r,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{Je(i,!1),o&&_t()}}}var Ce={awaits:0,echoes:0,id:0},Ui=0,Vt=[],en=0,tn=0,Hi=0;function Qe(t,e,r,o){var i=X,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Hi,Ye.env,a.env=Fn?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},e&&_(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ct(a,t,r,o);return a.ref===0&&a.finalize(),s}function wt(){return Ce.id||(Ce.id=++Ui),++Ce.awaits,Ce.echoes+=Fr,Ce.id}function Xe(){return Ce.awaits?(--Ce.awaits===0&&(Ce.id=0),Ce.echoes=Ce.awaits*Fr,!0):!1}(""+Ki).indexOf("[native code]")===-1&&(wt=Xe=ye);function nn(t){return Ce.echoes&&t&&t.constructor===at?(wt(),t.then(function(e){return Xe(),e},function(e){return Xe(),xe(e)})):t}function Zi(t){++tn,(!Ce.echoes||--Ce.echoes===0)&&(Ce.echoes=Ce.awaits=Ce.id=0),Vt.push(X),Je(t,!0)}function Gi(){var t=Vt[Vt.length-1];Vt.pop(),Je(t,!1)}function Je(t,e){var r=X;if((e?Ce.echoes&&(!en++||t!==X):en&&(!--en||t!==X))&&queueMicrotask(e?Zi.bind(null,t):Gi),t!==X&&(X=t,r===Ye&&(Ye.env=Hr()),Fn)){var o=Ye.env.Promise,i=t.env;(r.global||t.global)&&(Object.defineProperty(y,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))}}function Hr(){var t=y.Promise;return Fn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function ct(t,e,r,o,i){var a=X;try{return Je(t,!0),e(r,o,i)}finally{Je(a,!1)}}function Zr(t,e,r,o){return typeof t!="function"?t:function(){var i=X;r&&wt(),Je(e,!0);try{return t.apply(this,arguments)}finally{Je(i,!1),o&&queueMicrotask(Xe)}}}function Zn(t){Promise===at&&Ce.echoes===0?en===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var xe=U.reject;function Gn(t,e,r,o){if(!t.idbdb||!t._state.openComplete&&!X.letThrough&&!t._vip){if(t._state.openComplete)return xe(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return xe(new V.DatabaseClosed);t.open().catch(ye)}return t._state.dbReadyPromise.then(function(){return Gn(t,e,r,o)})}else{var i=t._createTransaction(e,r,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===Mn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Gn(t,e,r,o)})):xe(a)}return i._promise(e,function(a,s){return Qe(function(){return X.trans=i,o(a,s,i)})}).then(function(a){if(e==="readwrite")try{i.idbtrans.commit()}catch{}return e==="readonly"?a:i._completion.then(function(){return a})})}}var Gr="4.2.1",lt="\uFFFF",Wn=-1/0,Ge="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wr="String expected.",xt=[],rn="__dbnames",Yn="readonly",Qn="readwrite";function ft(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Yr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function on(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=we(e),delete e[t]),e}:function(e){return e}}function Qr(){throw V.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function fe(t,e){try{var r=Xr(t),o=Xr(e);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Yi(Jr(t),Jr(e));case"Array":return Wi(t,e)}}catch{}return NaN}function Wi(t,e){for(var r=t.length,o=e.length,i=r<o?r:o,a=0;a<i;++a){var s=fe(t[a],e[a]);if(s!==0)return s}return r===o?0:r<o?-1:1}function Yi(t,e){for(var r=t.length,o=e.length,i=r<o?r:o,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return r===o?0:r<o?-1:1}function Xr(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var r=jn(t);return r==="ArrayBuffer"?"binary":r}function Jr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function an(t,e,r){var o=t.schema.yProps;return o?(e&&r.numFailures>0&&(e=e.filter(function(i,a){return!r.failures[a]})),Promise.all(o.map(function(i){var a=i.updatesTable;return e?t.db.table(a).where("k").anyOf(e).delete():t.db.table(a).clear()})).then(function(){return r})):r}var Dt=(function(){function t(e){this["@@propmod"]=e}return t.prototype.execute=function(e){var r,o=this["@@propmod"];if(o.add!==void 0){var i=o.add;if(w(i))return E(E([],w(e)?e:[],!0),i,!0).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(o.remove!==void 0){var a=o.remove;if(w(a))return w(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var s=(r=o.replacePrefix)===null||r===void 0?void 0:r[0];return s&&typeof e=="string"&&e.startsWith(s)?o.replacePrefix[1]+e.substring(s.length):e},t})();function Vr(t,e){for(var r=O(e),o=r.length,i=!1,a=0;a<o;++a){var s=r[a],u=e[s],c=oe(t,s);u instanceof Dt?(re(t,s,u.execute(c)),i=!0):c!==u&&(re(t,s,u),i=!0)}return i}var eo=(function(){function t(){}return t.prototype._trans=function(e,r,o){var i=this._tx||X.trans,a=this.name,s=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function u(v,d,S){if(!S.schema[a])throw new V.NotFound("Table "+a+" not part of transaction");return r(S.idbtrans,S)}var c=bt();try{var p=i&&i.db._novip===this.db._novip?i===X.trans?i._promise(e,u,o):Qe(function(){return i._promise(e,u,o)},{trans:i,transless:X.transless||X}):Gn(this.db,e,[this.name],u);return s&&(p._consoleTask=s,p=p.catch(function(v){return console.trace(v),xe(v)})),p}finally{c&&_t()}},t.prototype.get=function(e,r){var o=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?xe(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return o.core.get({trans:i,key:e}).then(function(a){return o.hook.reading.fire(a)})}).then(r)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(w(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=O(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&r.every(function(S){return v.keyPath.indexOf(S)>=0})){for(var d=0;d<r.length;++d)if(r.indexOf(v.keyPath[d])===-1)return!1;return!0}return!1}).sort(function(v,d){return v.keyPath.length-d.keyPath.length})[0];if(o&&this.db._maxKey!==lt){var i=o.keyPath.slice(0,r.length);return this.where(i).equals(i.map(function(v){return e[v]}))}!o&&Le&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName;function s(v,d){return fe(v,d)===0}var u=r.reduce(function(v,d){var S=v[0],K=v[1],m=a[d],g=e[d];return[S||m,S||!m?ft(K,m&&m.multi?function(x){var C=oe(x,d);return w(C)&&C.some(function(j){return s(g,j)})}:function(x){return s(g,oe(x,d))}):K]},[null,null]),c=u[0],p=u[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(p):o?this.filter(p):this.where(r).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,w(e)?"[".concat(e.join("+"),"]"):e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){var r=this,o=r.db,i=r.name;this.schema.mappedClass=e,e.prototype instanceof Qr&&(e=(function(c){b(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),p.prototype.table=function(){return i},p})(e));for(var a=new Set,s=e.prototype;s;s=k(s))Object.getOwnPropertyNames(s).forEach(function(c){return a.add(c)});var u=function(c){if(!c)return c;var p=Object.create(e.prototype);for(var v in c)if(!a.has(v))try{p[v]=c[v]}catch{}return p};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},t.prototype.defineClass=function(){function e(r){_(this,r)}return this.mapToClass(e)},t.prototype.add=function(e,r){var o=this,i=this.schema.primKey,a=i.auto,s=i.keyPath,u=e;return s&&a&&(u=on(s)(e)),this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"add",keys:r!=null?[r]:null,values:[u]})}).then(function(c){return c.numFailures?U.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{re(e,s,c)}catch{}return c})},t.prototype.upsert=function(e,r){var o=this,i=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return o.core.get({trans:a,key:e}).then(function(s){var u=s??{};return Vr(u,r),i&&re(u,i,e),o.core.mutate({trans:a,type:"put",values:[u],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[r]}}).then(function(c){return c.numFailures?U.reject(c.failures[0]):!!s})})})},t.prototype.update=function(e,r){if(typeof e=="object"&&!w(e)){var o=oe(e,this.schema.primKey.keyPath);return o===void 0?xe(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(r)}else return this.where(":id").equals(e).modify(r)},t.prototype.put=function(e,r){var o=this,i=this.schema.primKey,a=i.auto,s=i.keyPath,u=e;return s&&a&&(u=on(s)(e)),this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"put",values:[u],keys:r!=null?[r]:null})}).then(function(c){return c.numFailures?U.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{re(e,s,c)}catch{}return c})},t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:[e]}).then(function(i){return an(r,[e],i)}).then(function(i){return i.numFailures?U.reject(i.failures[0]):void 0})})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:Yr}).then(function(o){return an(e,null,o)})}).then(function(r){return r.numFailures?U.reject(r.failures[0]):void 0})},t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(o){return r.core.getMany({keys:e,trans:o}).then(function(i){return i.map(function(a){return r.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,r,o){var i=this,a=Array.isArray(r)?r:void 0;o=o||(a?void 0:r);var s=o?o.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,p=c.auto,v=c.keyPath;if(v&&a)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var d=e.length,S=v&&p?e.map(on(v)):e;return i.core.mutate({trans:u,type:"add",keys:a,values:S,wantResults:s}).then(function(K){var m=K.numFailures,g=K.results,x=K.lastResult,C=K.failures,j=s?g:x;if(m===0)return j;throw new gt("".concat(i.name,".bulkAdd(): ").concat(m," of ").concat(d," operations failed"),C)})})},t.prototype.bulkPut=function(e,r,o){var i=this,a=Array.isArray(r)?r:void 0;o=o||(a?void 0:r);var s=o?o.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,p=c.auto,v=c.keyPath;if(v&&a)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var d=e.length,S=v&&p?e.map(on(v)):e;return i.core.mutate({trans:u,type:"put",keys:a,values:S,wantResults:s}).then(function(K){var m=K.numFailures,g=K.results,x=K.lastResult,C=K.failures,j=s?g:x;if(m===0)return j;throw new gt("".concat(i.name,".bulkPut(): ").concat(m," of ").concat(d," operations failed"),C)})})},t.prototype.bulkUpdate=function(e){var r=this,o=this.core,i=e.map(function(u){return u.key}),a=e.map(function(u){return u.changes}),s=[];return this._trans("readwrite",function(u){return o.getMany({trans:u,keys:i,cache:"clone"}).then(function(c){var p=[],v=[];e.forEach(function(S,K){var m=S.key,g=S.changes,x=c[K];if(x){for(var C=0,j=Object.keys(g);C<j.length;C++){var T=j[C],N=g[T];if(T===r.schema.primKey.keyPath){if(fe(N,m)!==0)throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else re(x,T,N)}s.push(K),p.push(m),v.push(x)}});var d=p.length;return o.mutate({trans:u,type:"put",keys:p,values:v,updates:{keys:i,changeSpecs:a}}).then(function(S){var K=S.numFailures,m=S.failures;if(K===0)return d;for(var g=0,x=Object.keys(m);g<x.length;g++){var C=x[g],j=s[Number(C)];if(j!=null){var T=m[C];delete m[C],m[j]=T}}throw new gt("".concat(r.name,".bulkUpdate(): ").concat(K," of ").concat(d," operations failed"),m)})})})},t.prototype.bulkDelete=function(e){var r=this,o=e.length;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:e}).then(function(a){return an(r,e,a)})}).then(function(i){var a=i.numFailures,s=i.lastResult,u=i.failures;if(a===0)return s;throw new gt("".concat(r.name,".bulkDelete(): ").concat(a," of ").concat(o," operations failed"),u)})},t})();function Nt(t){var e={},r=function(u,c){if(c){for(var p=arguments.length,v=new Array(p-1);--p;)v[p-1]=arguments[p];return e[u].subscribe.apply(null,v),t}else if(typeof u=="string")return e[u]};r.addEventType=a;for(var o=1,i=arguments.length;o<i;++o)a(arguments[o]);return r;function a(u,c,p){if(typeof u=="object")return s(u);c||(c=Ii),p||(p=ye);var v={subscribers:[],fire:p,subscribe:function(d){v.subscribers.indexOf(d)===-1&&(v.subscribers.push(d),v.fire=c(v.fire,d))},unsubscribe:function(d){v.subscribers=v.subscribers.filter(function(S){return S!==d}),v.fire=v.subscribers.reduce(c,p)}};return e[u]=r[u]=v,v}function s(u){O(u).forEach(function(c){var p=u[c];if(w(p))a(c,u[c][0],u[c][1]);else if(p==="asap")var v=a(c,Rt,function(){for(var d=arguments.length,S=new Array(d);d--;)S[d]=arguments[d];v.subscribers.forEach(function(K){ae(function(){K.apply(null,S)})})});else throw new V.InvalidArgument("Invalid event config")})}}function It(t,e){return B(e).from({prototype:t}),e}function Qi(t){return It(eo.prototype,function(e,r,o){this.db=t,this._tx=o,this.name=e,this.schema=r,this.hook=t._allTables[e]?t._allTables[e].hook:Nt(null,{creating:[ji,ye],reading:[Ti,Rt],updating:[Ni,ye],deleting:[Di,ye]})})}function kt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Xn(t,e){t.filter=ft(t.filter,e)}function Jn(t,e,r){var o=t.replayFilter;t.replayFilter=o?function(){return ft(o(),e())}:e,t.justLimit=r&&!o}function Xi(t,e){t.isMatch=ft(t.isMatch,e)}function sn(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new V.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function to(t,e,r){var o=sn(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function un(t,e,r,o){var i=t.replayFilter?ft(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},s=function(u,c,p){if(!i||i(c,p,function(S){return c.stop(S)},function(S){return c.fail(S)})){var v=c.primaryKey,d=""+v;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(v)),P(a,d)||(a[d]=!0,e(u,c,p))}};return Promise.all([t.or._iterate(s,r),no(to(t,o,r),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}else return no(to(t,o,r),ft(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function no(t,e,r,o){var i=o?function(s,u,c){return r(o(s),u,c)}:r,a=ge(i);return t.then(function(s){if(s)return s.start(function(){var u=function(){return s.continue()};(!e||e(s,function(c){return u=c},function(c){s.stop(c),u=ye},function(c){s.fail(c),u=ye}))&&a(s.value,s,function(c){return u=c}),u()})})}var Ji=(function(){function t(){}return t.prototype._read=function(e,r){var o=this._ctx;return o.error?o.table._trans(null,xe.bind(null,o.error)):o.table._trans("readonly",e).then(r)},t.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,xe.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=ft(r.algorithm,e)},t.prototype._iterate=function(e,r){return un(this._ctx,e,r,this._ctx.table.core)},t.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&_(o,e),r._ctx=o,r},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var r=this._ctx;return this._read(function(o){return un(r,e,o,r.table.core)})},t.prototype.count=function(e){var r=this;return this._read(function(o){var i=r._ctx,a=i.table.core;if(kt(i,!0))return a.count({trans:o,query:{index:sn(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var s=0;return un(i,function(){return++s,!1},o,a).then(function(){return s})}).then(e)},t.prototype.sortBy=function(e,r){var o=e.split(".").reverse(),i=o[0],a=o.length-1;function s(p,v){return v?s(p[o[v]],v-1):p[i]}var u=this._ctx.dir==="next"?1:-1;function c(p,v){var d=s(p,a),S=s(v,a);return fe(d,S)*u}return this.toArray(function(p){return p.sort(c)}).then(r)},t.prototype.toArray=function(e){var r=this;return this._read(function(o){var i=r._ctx;if(i.dir==="next"&&kt(i,!0)&&i.limit>0){var a=i.valueMapper,s=sn(i,i.table.core.schema);return i.table.core.query({trans:o,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(function(c){var p=c.result;return a?p.map(a):p})}else{var u=[];return un(i,function(c){return u.push(c)},o,i.table.core).then(function(){return u})}},e)},t.prototype.offset=function(e){var r=this._ctx;return e<=0?this:(r.offset+=e,kt(r)?Jn(r,function(){var o=e;return function(i,a){return o===0?!0:o===1?(--o,!1):(a(function(){i.advance(o),o=0}),!1)}}):Jn(r,function(){var o=e;return function(){return--o<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Jn(this._ctx,function(){var r=e;return function(o,i,a){return--r<=0&&i(a),r>=0}},!0),this},t.prototype.until=function(e,r){return Xn(this._ctx,function(o,i,a){return e(o.value)?(i(a),r):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Xn(this._ctx,function(r){return e(r.value)}),Xi(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,a){o.push(a.key)}).then(function(){return o}).then(e)},t.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&kt(r,!0)&&r.limit>0)return this._read(function(i){var a=sn(r,r.table.core.schema);return r.table.core.query({trans:i,values:!1,limit:r.limit,query:{index:a,range:r.range}})}).then(function(i){var a=i.result;return a}).then(e);r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,a){o.push(a.primaryKey)}).then(function(){return o}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var o={};return Xn(this._ctx,function(i){var a=i.primaryKey.toString(),s=P(o,a);return o[a]=!0,!s}),this},t.prototype.modify=function(e){var r=this,o=this._ctx;return this._write(function(i){var a;typeof e=="function"?a=e:a=function(C){return Vr(C,e)};var s=o.table.core,u=s.schema.primaryKey,c=u.outbound,p=u.extractKey,v=200,d=r.db._options.modifyChunkSize;d&&(typeof d=="object"?v=d[s.name]||d["*"]||200:v=d);var S=[],K=0,m=[],g=function(C,j){var T=j.failures,N=j.numFailures;K+=C-N;for(var R=0,q=O(T);R<q.length;R++){var G=q[R];S.push(T[G])}},x=e===ro;return r.clone().primaryKeys().then(function(C){var j=kt(o)&&o.limit===1/0&&(typeof e!="function"||x)&&{index:o.index,range:o.range},T=function(N){var R=Math.min(v,C.length-N),q=C.slice(N,N+R);return(x?Promise.resolve([]):s.getMany({trans:i,keys:q,cache:"immutable"})).then(function(G){var z=[],ee=[],se=c?[]:null,W=x?q:[];if(!x)for(var ie=0;ie<R;++ie){var te=G[ie],pe={value:we(te),primKey:C[N+ie]};a.call(pe,pe.value,pe)!==!1&&(pe.value==null?W.push(C[N+ie]):!c&&fe(p(te),p(pe.value))!==0?(W.push(C[N+ie]),z.push(pe.value)):(ee.push(pe.value),c&&se.push(C[N+ie])))}return Promise.resolve(z.length>0&&s.mutate({trans:i,type:"add",values:z}).then(function(J){for(var _e in J.failures)W.splice(parseInt(_e),1);g(z.length,J)})).then(function(){return(ee.length>0||j&&typeof e=="object")&&s.mutate({trans:i,type:"put",keys:se,values:ee,criteria:j,changeSpec:typeof e!="function"&&e,isAdditionalChunk:N>0}).then(function(J){return g(ee.length,J)})}).then(function(){return(W.length>0||j&&x)&&s.mutate({trans:i,type:"delete",keys:W,criteria:j,isAdditionalChunk:N>0}).then(function(J){return an(o.table,W,J)}).then(function(J){return g(W.length,J)})}).then(function(){return C.length>N+R&&T(N+v)})})};return T(0).then(function(){if(S.length>0)throw new Gt("Error modifying one or more objects",S,K,m);return C.length})})})},t.prototype.delete=function(){var e=this._ctx,r=e.range;return kt(e)&&!e.table.schema.yProps&&(e.isPrimKey||r.type===3)?this._write(function(o){var i=e.table.core.schema.primaryKey,a=r;return e.table.core.count({trans:o,query:{index:i,range:a}}).then(function(s){return e.table.core.mutate({trans:o,type:"deleteRange",range:a}).then(function(u){var c=u.failures,p=u.numFailures;if(p)throw new Gt("Could not delete some values",Object.keys(c).map(function(v){return c[v]}),s-p);return s-p})})}):this.modify(ro)},t})(),ro=function(t,e){return e.value=null};function Vi(t){return It(Ji.prototype,function(e,r){this.db=t;var o=Yr,i=null;if(r)try{o=r()}catch(c){i=c}var a=e._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:a.or,valueMapper:u!==Rt?u:null}})}function ea(t,e){return t<e?-1:t===e?0:1}function ta(t,e){return t>e?-1:t===e?0:1}function Ie(t,e,r){var o=t instanceof io?new t.Collection(t):t;return o._ctx.error=r?new r(e):new TypeError(e),o}function St(t){return new t.Collection(t,function(){return oo("")}).limit(0)}function na(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function ra(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function oa(t,e,r,o,i,a){for(var s=Math.min(t.length,o.length),u=-1,c=0;c<s;++c){var p=e[c];if(p!==o[c])return i(t[c],r[c])<0?t.substr(0,c)+r[c]+r.substr(c+1):i(t[c],o[c])<0?t.substr(0,c)+o[c]+r.substr(c+1):u>=0?t.substr(0,u)+e[u]+r.substr(u+1):null;i(t[c],p)<0&&(u=c)}return s<o.length&&a==="next"?t+r.substr(t.length):s<t.length&&a==="prev"?t.substr(0,r.length):u<0?null:t.substr(0,u)+o[u]+r.substr(u+1)}function cn(t,e,r,o){var i,a,s,u,c,p,v,d=r.length;if(!r.every(function(g){return typeof g=="string"}))return Ie(t,Wr);function S(g){i=na(g),a=ra(g),s=g==="next"?ea:ta;var x=r.map(function(C){return{lower:a(C),upper:i(C)}}).sort(function(C,j){return s(C.lower,j.lower)});u=x.map(function(C){return C.upper}),c=x.map(function(C){return C.lower}),p=g,v=g==="next"?"":o}S("next");var K=new t.Collection(t,function(){return Ve(u[0],c[d-1]+o)});K._ondirectionchange=function(g){S(g)};var m=0;return K._addAlgorithm(function(g,x,C){var j=g.key;if(typeof j!="string")return!1;var T=a(j);if(e(T,c,m))return!0;for(var N=null,R=m;R<d;++R){var q=oa(j,T,u[R],c[R],s,p);q===null&&N===null?m=R+1:(N===null||s(N,q)>0)&&(N=q)}return x(N!==null?function(){g.continue(N+v)}:C),!1}),K}function Ve(t,e,r,o){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:o}}function oo(t){return{type:1,lower:t,upper:t}}var io=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,r,o,i){o=o!==!1,i=i===!0;try{return this._cmp(e,r)>0||this._cmp(e,r)===0&&(o||i)&&!(o&&i)?St(this):new this.Collection(this,function(){return Ve(e,r,!o,!i)})}catch{return Ie(this,Ge)}},t.prototype.equals=function(e){return e==null?Ie(this,Ge):new this.Collection(this,function(){return oo(e)})},t.prototype.above=function(e){return e==null?Ie(this,Ge):new this.Collection(this,function(){return Ve(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?Ie(this,Ge):new this.Collection(this,function(){return Ve(e,void 0,!1)})},t.prototype.below=function(e){return e==null?Ie(this,Ge):new this.Collection(this,function(){return Ve(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?Ie(this,Ge):new this.Collection(this,function(){return Ve(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?Ie(this,Wr):this.between(e,e+lt,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):cn(this,function(r,o){return r.indexOf(o[0])===0},[e],lt)},t.prototype.equalsIgnoreCase=function(e){return cn(this,function(r,o){return r===o[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Ze.apply(yt,arguments);return e.length===0?St(this):cn(this,function(r,o){return o.indexOf(r)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ze.apply(yt,arguments);return e.length===0?St(this):cn(this,function(r,o){return o.some(function(i){return r.indexOf(i)===0})},e,lt)},t.prototype.anyOf=function(){var e=this,r=Ze.apply(yt,arguments),o=this._cmp;try{r.sort(o)}catch{return Ie(this,Ge)}if(r.length===0)return St(this);var i=new this.Collection(this,function(){return Ve(r[0],r[r.length-1])});i._ondirectionchange=function(s){o=s==="next"?e._ascending:e._descending,r.sort(o)};var a=0;return i._addAlgorithm(function(s,u,c){for(var p=s.key;o(p,r[a])>0;)if(++a,a===r.length)return u(c),!1;return o(p,r[a])===0?!0:(u(function(){s.continue(r[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Wn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Ze.apply(yt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ie(this,Ge)}var r=e.reduce(function(o,i){return o?o.concat([[o[o.length-1][1],i]]):[[Wn,i]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,r){var o=this,i=this._cmp,a=this._ascending,s=this._descending,u=this._min,c=this._max;if(e.length===0)return St(this);if(!e.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&a(R[0],R[1])<=0}))return Ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var p=!r||r.includeLowers!==!1,v=r&&r.includeUppers===!0;function d(R,q){for(var G=0,z=R.length;G<z;++G){var ee=R[G];if(i(q[0],ee[1])<0&&i(q[1],ee[0])>0){ee[0]=u(ee[0],q[0]),ee[1]=c(ee[1],q[1]);break}}return G===z&&R.push(q),R}var S=a;function K(R,q){return S(R[0],q[0])}var m;try{m=e.reduce(d,[]),m.sort(K)}catch{return Ie(this,Ge)}var g=0,x=v?function(R){return a(R,m[g][1])>0}:function(R){return a(R,m[g][1])>=0},C=p?function(R){return s(R,m[g][0])>0}:function(R){return s(R,m[g][0])>=0};function j(R){return!x(R)&&!C(R)}var T=x,N=new this.Collection(this,function(){return Ve(m[0][0],m[m.length-1][1],!p,!v)});return N._ondirectionchange=function(R){R==="next"?(T=x,S=a):(T=C,S=s),m.sort(K)},N._addAlgorithm(function(R,q,G){for(var z=R.key;T(z);)if(++g,g===m.length)return q(G),!1;return j(z)?!0:(o._cmp(z,m[g][1])===0||o._cmp(z,m[g][0])===0||q(function(){S===a?R.continue(m[g][0]):R.continue(m[g][1])}),!1)}),N},t.prototype.startsWithAnyOf=function(){var e=Ze.apply(yt,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?St(this):this.inAnyRange(e.map(function(r){return[r,r+lt]})):Ie(this,"startsWithAnyOf() only works with strings")},t})();function ia(t){return It(io.prototype,function(e,r,o){if(this.db=t,this._ctx={table:e,index:r===":id"?null:r,or:o},this._cmp=this._ascending=fe,this._descending=function(i,a){return fe(a,i)},this._max=function(i,a){return fe(i,a)>0?i:a},this._min=function(i,a){return fe(i,a)<0?i:a},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI})}function qe(t){return ge(function(e){return Mt(e),t(e.target.error),!1})}function Mt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Kt="storagemutated",Vn="x-storagemutated-1",et=Nt(null,Kt),aa=(function(){function t(){}return t.prototype._lock=function(){return H(!X.global),++this._reculock,this._reculock===1&&!X.global&&(X.lockOwnerFor=this),this},t.prototype._unlock=function(){if(H(!X.global),--this._reculock===0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ct(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&X.lockOwnerFor!==this},t.prototype.create=function(e){var r=this;if(!this.mode)return this;var o=this.db.idbdb,i=this.db._state.dbOpenError;if(H(!this.idbtrans),!e&&!o)switch(i&&i.name){case"DatabaseClosedError":throw new V.DatabaseClosed(i);case"MissingAPIError":throw new V.MissingAPI(i.message,i);default:throw new V.OpenFailed(i)}if(!this.active)throw new V.TransactionInactive;return H(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=ge(function(a){Mt(a),r._reject(e.error)}),e.onabort=ge(function(a){Mt(a),r.active&&r._reject(new V.Abort(e.error)),r.active=!1,r.on("abort").fire(a)}),e.oncomplete=ge(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&et.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,r,o){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return xe(new V.ReadOnly("Transaction is readonly"));if(!this.active)return xe(new V.TransactionInactive);if(this._locked())return new U(function(s,u){i._blockedFuncs.push([function(){i._promise(e,r,o).then(s,u)},X])});if(o)return Qe(function(){var s=new U(function(u,c){i._lock();var p=r(u,c,i);p&&p.then&&p.then(u,c)});return s.finally(function(){return i._unlock()}),s._lib=!0,s});var a=new U(function(s,u){var c=r(s,u,i);c&&c.then&&c.then(s,u)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var r=this._root(),o=U.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return o});else{r._waitingFor=o,r._waitingQueue=[];var i=r.idbtrans.objectStore(r.storeNames[0]);(function s(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var a=r._waitingFor;return new U(function(s,u){o.then(function(c){return r._waitingQueue.push(ge(s.bind(null,c)))},function(c){return r._waitingQueue.push(ge(u.bind(null,c)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},t.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(P(r,e))return r[e];var o=this.schema[e];if(!o)throw new V.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,o,this);return i.core=this.db.core.table(e),r[e]=i,i},t})();function sa(t){return It(aa.prototype,function(e,r,o,i,a){var s=this;e!=="readonly"&&r.forEach(function(u){var c,p=(c=o[u])===null||c===void 0?void 0:c.yProps;p&&(r=r.concat(p.map(function(v){return v.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Nt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(u,c){s._resolve=u,s._reject=c}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var c=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):c&&s.idbtrans&&s.idbtrans.abort(),xe(u)})})}function er(t,e,r,o,i,a,s,u){return{name:t,keyPath:e,unique:r,multi:o,auto:i,compound:a,src:(r&&!s?"&":"")+(o?"*":"")+(i?"++":"")+ao(e),type:u}}function ao(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function tr(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:ne(r,function(o){return[o.name,o]})}}function ua(t){return t.length===1?t[0]:t}var Bt=function(t){try{return t.only([[]]),Bt=function(){return[[]]},[[]]}catch{return Bt=function(){return lt},lt}};function nr(t){return t==null?function(){}:typeof t=="string"?ca(t):function(e){return oe(e,t)}}function ca(t){var e=t.split(".");return e.length===1?function(r){return r[t]}:function(r){return oe(r,t)}}function so(t){return[].slice.call(t)}var la=0;function Ft(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function fa(t,e,r){function o(d,S){var K=so(d.objectStoreNames);return{schema:{name:d.name,tables:K.map(function(m){return S.objectStore(m)}).map(function(m){var g=m.keyPath,x=m.autoIncrement,C=w(g),j=g==null,T={},N={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j,compound:C,keyPath:g,autoIncrement:x,unique:!0,extractKey:nr(g)},indexes:so(m.indexNames).map(function(R){return m.index(R)}).map(function(R){var q=R.name,G=R.unique,z=R.multiEntry,ee=R.keyPath,se=w(ee),W={name:q,compound:se,keyPath:ee,unique:G,multiEntry:z,extractKey:nr(ee)};return T[Ft(ee)]=W,W}),getIndexByKeyPath:function(R){return T[Ft(R)]}};return T[":id"]=N.primaryKey,g!=null&&(T[Ft(g)]=N.primaryKey),N})},hasGetAll:K.length>0&&"getAll"in S.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=d.lower,K=d.upper,m=d.lowerOpen,g=d.upperOpen,x=S===void 0?K===void 0?null:e.upperBound(K,!!g):K===void 0?e.lowerBound(S,!!m):e.bound(S,K,!!m,!!g);return x}function a(d){var S=d.name;function K(x){var C=x.trans,j=x.type,T=x.keys,N=x.values,R=x.range;return new Promise(function(q,G){q=ge(q);var z=C.objectStore(S),ee=z.keyPath==null,se=j==="put"||j==="add";if(!se&&j!=="delete"&&j!=="deleteRange")throw new Error("Invalid operation type: "+j);var W=(T||N||{length:1}).length;if(T&&N&&T.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(W===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});var ie,te=[],pe=[],J=0,_e=function(Ue){++J,Mt(Ue)};if(j==="deleteRange"){if(R.type===4)return q({numFailures:J,failures:pe,results:[],lastResult:void 0});R.type===3?te.push(ie=z.clear()):te.push(ie=z.delete(i(R)))}else{var Oe=se?ee?[N,T]:[N,null]:[T,null],ze=Oe[0],Te=Oe[1];if(se)for(var Ke=0;Ke<W;++Ke)te.push(ie=Te&&Te[Ke]!==void 0?z[j](ze[Ke],Te[Ke]):z[j](ze[Ke])),ie.onerror=_e;else for(var Ke=0;Ke<W;++Ke)te.push(ie=z[j](ze[Ke])),ie.onerror=_e}var nt=function(Ue){var qt=Ue.target.result;te.forEach(function($e,wn){return $e.error!=null&&(pe[wn]=$e.error)}),q({numFailures:J,failures:pe,results:j==="delete"?T:te.map(function($e){return $e.result}),lastResult:qt})};ie.onerror=function(Ue){_e(Ue),nt(Ue)},ie.onsuccess=nt})}function m(x){var C=x.trans,j=x.values,T=x.query,N=x.reverse,R=x.unique;return new Promise(function(q,G){q=ge(q);var z=T.index,ee=T.range,se=C.objectStore(S),W=z.isPrimaryKey?se:se.index(z.name),ie=N?R?"prevunique":"prev":R?"nextunique":"next",te=j||!("openKeyCursor"in W)?W.openCursor(i(ee),ie):W.openKeyCursor(i(ee),ie);te.onerror=qe(G),te.onsuccess=ge(function(pe){var J=te.result;if(!J){q(null);return}J.___id=++la,J.done=!1;var _e=J.continue.bind(J),Oe=J.continuePrimaryKey;Oe&&(Oe=Oe.bind(J));var ze=J.advance.bind(J),Te=function(){throw new Error("Cursor not started")},Ke=function(){throw new Error("Cursor not stopped")};J.trans=C,J.stop=J.continue=J.continuePrimaryKey=J.advance=Te,J.fail=ge(G),J.next=function(){var nt=this,Ue=1;return this.start(function(){return Ue--?nt.continue():nt.stop()}).then(function(){return nt})},J.start=function(nt){var Ue=new Promise(function($e,wn){$e=ge($e),te.onerror=qe(wn),J.fail=wn,J.stop=function(Ja){J.stop=J.continue=J.continuePrimaryKey=J.advance=Ke,$e(Ja)}}),qt=function(){if(te.result)try{nt()}catch($e){J.fail($e)}else J.done=!0,J.start=function(){throw new Error("Cursor behind last entry")},J.stop()};return te.onsuccess=ge(function($e){te.onsuccess=qt,qt()}),J.continue=_e,J.continuePrimaryKey=Oe,J.advance=ze,qt(),Ue},q(J)},G)})}function g(x){return function(C){return new Promise(function(j,T){j=ge(j);var N=C.trans,R=C.values,q=C.limit,G=C.query,z=q===1/0?void 0:q,ee=G.index,se=G.range,W=N.objectStore(S),ie=ee.isPrimaryKey?W:W.index(ee.name),te=i(se);if(q===0)return j({result:[]});if(x){var pe=R?ie.getAll(te,z):ie.getAllKeys(te,z);pe.onsuccess=function(ze){return j({result:ze.target.result})},pe.onerror=qe(T)}else{var J=0,_e=R||!("openKeyCursor"in ie)?ie.openCursor(te):ie.openKeyCursor(te),Oe=[];_e.onsuccess=function(ze){var Te=_e.result;if(!Te)return j({result:Oe});if(Oe.push(R?Te.value:Te.primaryKey),++J===q)return j({result:Oe});Te.continue()},_e.onerror=qe(T)}})}}return{name:S,schema:d,mutate:K,getMany:function(x){var C=x.trans,j=x.keys;return new Promise(function(T,N){T=ge(T);for(var R=C.objectStore(S),q=j.length,G=new Array(q),z=0,ee=0,se,W=function(J){var _e=J.target;(G[_e._pos]=_e.result)!=null,++ee===z&&T(G)},ie=qe(N),te=0;te<q;++te){var pe=j[te];pe!=null&&(se=R.get(j[te]),se._pos=te,se.onsuccess=W,se.onerror=ie,++z)}z===0&&T(G)})},get:function(x){var C=x.trans,j=x.key;return new Promise(function(T,N){T=ge(T);var R=C.objectStore(S),q=R.get(j);q.onsuccess=function(G){return T(G.target.result)},q.onerror=qe(N)})},query:g(c),openCursor:m,count:function(x){var C=x.query,j=x.trans,T=C.index,N=C.range;return new Promise(function(R,q){var G=j.objectStore(S),z=T.isPrimaryKey?G:G.index(T.name),ee=i(N),se=ee?z.count(ee):z.count();se.onsuccess=ge(function(W){return R(W.target.result)}),se.onerror=qe(q)})}}}var s=o(t,r),u=s.schema,c=s.hasGetAll,p=u.tables.map(function(d){return a(d)}),v={};return p.forEach(function(d){return v[d.name]=d}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(d){var S=v[d];if(!S)throw new Error("Table '".concat(d,"' not found"));return v[d]},MIN_KEY:-1/0,MAX_KEY:Bt(e),schema:u}}function pa(t,e){return e.reduce(function(r,o){var i=o.create;return h(h({},r),i(r))},t)}function da(t,e,r,o){var i=r.IDBKeyRange;r.indexedDB;var a=pa(fa(e,i,o),t.dbcore);return{dbcore:a}}function ln(t,e){var r=e.db,o=da(t._middlewares,r,t._deps,e);t.core=o.dbcore,t.tables.forEach(function(i){var a=i.name;t.core.schema.tables.some(function(s){return s.name===a})&&(i.core=t.core.table(a),t[a]instanceof t.Table&&(t[a].core=i.core))})}function fn(t,e,r,o){r.forEach(function(i){var a=o[i];e.forEach(function(s){var u=$(s,i);(!u||"value"in u&&u.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?M(s,i,{get:function(){return this.table(i)},set:function(c){L(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,a))})})}function rr(t,e){e.forEach(function(r){for(var o in r)r[o]instanceof t.Table&&delete r[o]})}function ha(t,e){return t._cfg.version-e._cfg.version}function ma(t,e,r,o){var i=t._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=tr("$meta",co("")[0],[]),t._storeNames.push("$meta"));var a=t._createTransaction("readwrite",t._storeNames,i);a.create(r),a._completion.catch(o);var s=a._reject.bind(a),u=X.transless||X;Qe(function(){if(X.trans=a,X.transless=u,e===0)O(i).forEach(function(c){ir(r,c,i[c].primKey,i[c].indexes)}),ln(t,r),U.follow(function(){return t.on.populate.fire(a)}).catch(s);else return ln(t,r),va(t,a,e).then(function(c){return ga(t,c,a,r)}).catch(s)})}function ya(t,e){uo(t._dbSchema,e),e.db.version%10===0&&!e.objectStoreNames.contains("$meta")&&e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var r=dn(t,t.idbdb,e);hn(t,t._dbSchema,e);for(var o=or(r,t._dbSchema),i=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=e.objectStore(p.name);p.add.forEach(function(d){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(d.src)),pn(v,d)})},a=0,s=o.change;a<s.length;a++){var u=s[a],c=i(u);if(typeof c=="object")return c.value}}function va(t,e,r){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(o){return o??r}):U.resolve(r)}function ga(t,e,r,o){var i=[],a=t._versions,s=t._dbSchema=dn(t,t.idbdb,o),u=a.filter(function(p){return p._cfg.version>=e});if(u.length===0)return U.resolve();u.forEach(function(p){i.push(function(){var v=s,d=p._cfg.dbschema;hn(t,v,o),hn(t,d,o),s=t._dbSchema=d;var S=or(v,d);S.add.forEach(function(j){ir(o,j[0],j[1].primKey,j[1].indexes)}),S.change.forEach(function(j){if(j.recreate)throw new V.Upgrade("Not yet support for changing primary key");var T=o.objectStore(j.name);j.add.forEach(function(N){return pn(T,N)}),j.change.forEach(function(N){T.deleteIndex(N.name),pn(T,N)}),j.del.forEach(function(N){return T.deleteIndex(N)})});var K=p._cfg.contentUpgrade;if(K&&p._cfg.version>e){ln(t,o),r._memoizedTables={};var m=he(d);S.del.forEach(function(j){m[j]=v[j]}),rr(t,[t.Transaction.prototype]),fn(t,[t.Transaction.prototype],O(m),m),r.schema=m;var g=Nn(K);g&&wt();var x,C=U.follow(function(){if(x=K(r),x&&g){var j=Xe.bind(null,null);x.then(j,j)}});return x&&typeof x.then=="function"?U.resolve(x):C.then(function(){return x})}}),i.push(function(v){var d=p._cfg.dbschema;ba(d,v),rr(t,[t.Transaction.prototype]),fn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema}),i.push(function(v){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===p._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(d){return d!=="$meta"})):v.objectStore("$meta").put(p._cfg.version,"version"))})});function c(){return i.length?U.resolve(i.shift()(r.idbtrans)).then(c):U.resolve()}return c().then(function(){uo(s,o)})}function or(t,e){var r={del:[],add:[],change:[]},o;for(o in t)e[o]||r.del.push(o);for(o in e){var i=t[o],a=e[o];if(!i)r.add.push([o,a]);else{var s={name:o,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)s.recreate=!0,r.change.push(s);else{var u=i.idxByName,c=a.idxByName,p=void 0;for(p in u)c[p]||s.del.push(p);for(p in c){var v=u[p],d=c[p];v?v.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}}return r}function ir(t,e,r,o){var i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(a){return pn(i,a)}),i}function uo(t,e){O(t).forEach(function(r){e.db.objectStoreNames.contains(r)||(Le&&console.debug("Dexie: Creating missing table",r),ir(e,r,t[r].primKey,t[r].indexes))})}function ba(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(r){return t[r]==null&&e.db.deleteObjectStore(r)})}function pn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function dn(t,e,r){var o={},i=Q(e.objectStoreNames,0);return i.forEach(function(a){for(var s=r.objectStore(a),u=s.keyPath,c=er(ao(u),u||"",!0,!1,!!s.autoIncrement,u&&typeof u!="string",!0),p=[],v=0;v<s.indexNames.length;++v){var d=s.index(s.indexNames[v]);u=d.keyPath;var S=er(d.name,u,!!d.unique,!!d.multiEntry,!1,u&&typeof u!="string",!1);p.push(S)}o[a]=tr(a,c,p)}),o}function _a(t,e,r){t.verno=e.version/10;var o=t._dbSchema=dn(t,e,r);t._storeNames=Q(e.objectStoreNames,0),fn(t,[t._allTables],O(o),o)}function wa(t,e){var r=dn(t,t.idbdb,e),o=or(r,t._dbSchema);return!(o.add.length||o.change.some(function(i){return i.add.length||i.change.length}))}function hn(t,e,r){for(var o=r.db.objectStoreNames,i=0;i<o.length;++i){var a=o[i],s=r.objectStore(a);t._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c=s.indexNames[u],p=s.index(c).keyPath,v=typeof p=="string"?p:"["+Q(p).join("+")+"]";if(e[a]){var d=e[a].idxByName[v];d&&(d.name=c,delete e[a].idxByName[v],e[a].idxByName[c]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function co(t){return t.split(",").map(function(e,r){var o,i=e.split(":"),a=(o=i[1])===null||o===void 0?void 0:o.trim();e=i[0].trim();var s=e.replace(/([&*]|\+\+)/g,""),u=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return er(s,u||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),w(u),r===0,a)})}var xa=(function(){function t(){}return t.prototype._createTableSchema=function(e,r,o){return tr(e,r,o)},t.prototype._parseIndexSyntax=function(e){return co(e)},t.prototype._parseStoresSpec=function(e,r){var o=this;O(e).forEach(function(i){if(e[i]!==null){var a=o._parseIndexSyntax(e[i]),s=a.shift();if(!s)throw new V.Schema("Invalid schema for table "+i+": "+e[i]);if(s.unique=!0,s.multi)throw new V.Schema("Primary key cannot be multiEntry*");a.forEach(function(c){if(c.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")});var u=o._createTableSchema(i,s,a);r[i]=u}})},t.prototype.stores=function(e){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,e):e;var o=r._versions,i={},a={};return o.forEach(function(s){_(i,s._cfg.storesSource),a=s._cfg.dbschema={},s._parseStoresSpec(i,a)}),r._dbSchema=a,rr(r,[r._allTables,r,r.Transaction.prototype]),fn(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],O(a),a),r._storeNames=O(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Kn(this._cfg.contentUpgrade||ye,e),this},t})();function ka(t){return It(xa.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ar(t,e){var r=t._dbNamesDB;return r||(r=t._dbNamesDB=new We(rn,{addons:[],indexedDB:t,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function sr(t){return t&&typeof t.databases=="function"}function Sa(t){var e=t.indexedDB,r=t.IDBKeyRange;return sr(e)?Promise.resolve(e.databases()).then(function(o){return o.map(function(i){return i.name}).filter(function(i){return i!==rn})}):ar(e,r).toCollection().primaryKeys()}function Ca(t,e){var r=t.indexedDB,o=t.IDBKeyRange;!sr(r)&&e!==rn&&ar(r,o).put({name:e}).catch(ye)}function Pa(t,e){var r=t.indexedDB,o=t.IDBKeyRange;!sr(r)&&e!==rn&&ar(r,o).delete(e).catch(ye)}function ur(t){return Qe(function(){return X.letThrough=!0,t()})}function Oa(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(r){var o=function(){return indexedDB.databases().finally(r)};e=setInterval(o,100),o()}).finally(function(){return clearInterval(e)})}var cr;function lr(t){return!("from"in t)}var Pe=function(t,e){if(this)_(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var r=new Pe;return t&&"d"in t&&_(r,t),r}};I(Pe.prototype,(cr={add:function(t){return Lt(this,t),this},addKey:function(t){return $t(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(r){return $t(e,r,r)}),this},hasKey:function(t){var e=mn(this).next(t).value;return e&&fe(e.from,t)<=0&&fe(e.to,t)>=0}},cr[Dn]=function(){return mn(this)},cr));function $t(t,e,r){var o=fe(e,r);if(!isNaN(o)){if(o>0)throw RangeError();if(lr(t))return _(t,{from:e,to:r,d:1});var i=t.l,a=t.r;if(fe(r,t.from)<0)return i?$t(i,e,r):t.l={from:e,to:r,d:1,l:null,r:null},fo(t);if(fe(e,t.to)>0)return a?$t(a,e,r):t.r={from:e,to:r,d:1,l:null,r:null},fo(t);fe(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),fe(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);var s=!t.r;i&&!t.l&&Lt(t,i),a&&s&&Lt(t,a)}}function Lt(t,e){function r(o,i){var a=i.from,s=i.to,u=i.l,c=i.r;$t(o,a,s),u&&r(o,u),c&&r(o,c)}lr(e)||r(t,e)}function lo(t,e){var r=mn(e),o=r.next();if(o.done)return!1;for(var i=o.value,a=mn(t),s=a.next(i.from),u=s.value;!o.done&&!s.done;){if(fe(u.from,i.to)<=0&&fe(u.to,i.from)>=0)return!0;fe(i.from,u.from)<0?i=(o=r.next(u.from)).value:u=(s=a.next(i.from)).value}return!1}function mn(t){var e=lr(t)?null:{s:0,n:t};return{next:function(r){for(var o=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&fe(r,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||fe(r,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function fo(t){var e,r,o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((r=t.l)===null||r===void 0?void 0:r.d)||0),i=o>1?"r":o<-1?"l":"";if(i){var a=i==="r"?"l":"r",s=h({},t),u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],s[i]=u[a],t[a]=s,s.d=po(s)}t.d=po(t)}function po(t){var e=t.r,r=t.l;return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}function yn(t,e){return O(e).forEach(function(r){t[r]?Lt(t[r],e[r]):t[r]=ve(e[r])}),t}function fr(t,e){return t.all||e.all||Object.keys(t).some(function(r){return e[r]&&lo(e[r],t[r])})}var pt={},pr={},dr=!1;function vn(t,e){yn(pr,t),dr||(dr=!0,setTimeout(function(){dr=!1;var r=pr;pr={},hr(r,!1)},0))}function hr(t,e){e===void 0&&(e=!1);var r=new Set;if(t.all)for(var o=0,i=Object.values(pt);o<i.length;o++){var a=i[o];ho(a,t,r,e)}else for(var s in t){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(u){var c=u[1],p=u[2],a=pt["idb://".concat(c,"/").concat(p)];a&&ho(a,t,r,e)}}r.forEach(function(v){return v()})}function ho(t,e,r,o){for(var i=[],a=0,s=Object.entries(t.queries.query);a<s.length;a++){for(var u=s[a],c=u[0],p=u[1],v=[],d=0,S=p;d<S.length;d++){var K=S[d];fr(e,K.obsSet)?K.subscribers.forEach(function(C){return r.add(C)}):o&&v.push(K)}o&&i.push([c,v])}if(o)for(var m=0,g=i;m<g.length;m++){var x=g[m],c=x[0],v=x[1];t.queries.query[c]=v}}function Ea(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?xe(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var o=e.openCanceller,i=Math.round(t.verno*10),a=!1;function s(){if(e.openCanceller!==o)throw new V.DatabaseClosed("db.open() was cancelled")}var u=e.dbReadyResolve,c=null,p=!1,v=function(){return new U(function(d,S){if(s(),!r)throw new V.MissingAPI;var K=t.name,m=e.autoSchema||!i?r.open(K):r.open(K,i);if(!m)throw new V.MissingAPI;m.onerror=qe(S),m.onblocked=ge(t._fireOnBlocked),m.onupgradeneeded=ge(function(g){if(c=m.transaction,e.autoSchema&&!t._options.allowEmptyDB){m.onerror=Mt,c.abort(),m.result.close();var x=r.deleteDatabase(K);x.onsuccess=x.onerror=ge(function(){S(new V.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{c.onerror=qe(S);var C=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;p=C<1,t.idbdb=m.result,a&&ya(t,c),ma(t,C/10,c,S)}},S),m.onsuccess=ge(function(){c=null;var g=t.idbdb=m.result,x=Q(g.objectStoreNames);if(x.length>0)try{var C=g.transaction(ua(x),"readonly");if(e.autoSchema)_a(t,g,C);else if(hn(t,t._dbSchema,C),!wa(t,C)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,a=!0,d(v());ln(t,C)}catch{}xt.push(t),g.onversionchange=ge(function(j){e.vcFired=!0,t.on("versionchange").fire(j)}),g.onclose=ge(function(){t.close({disableAutoOpen:!1})}),p&&Ca(t._deps,K),d()},S)}).catch(function(d){switch(d?.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(i>0)return i=0,v();break}return U.reject(d)})};return U.race([o,(typeof navigator>"u"?U.resolve():Oa()).then(v)]).then(function(){return s(),e.onReadyBeingFired=[],U.resolve(ur(function(){return t.on.ready.fire(t.vip)})).then(function d(){if(e.onReadyBeingFired.length>0){var S=e.onReadyBeingFired.reduce(Kn,ye);return e.onReadyBeingFired=[],U.resolve(ur(function(){return S(t.vip)})).then(d)}})}).finally(function(){e.openCanceller===o&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(d){e.dbOpenError=d;try{c&&c.abort()}catch{}return o===e.openCanceller&&t._close(),xe(d)}).finally(function(){e.openComplete=!0,u()}).then(function(){if(p){var d={};t.tables.forEach(function(S){S.schema.indexes.forEach(function(K){K.name&&(d["idb://".concat(t.name,"/").concat(S.name,"/").concat(K.name)]=new Pe(-1/0,[[[]]]))}),d["idb://".concat(t.name,"/").concat(S.name,"/")]=d["idb://".concat(t.name,"/").concat(S.name,"/:dels")]=new Pe(-1/0,[[[]]])}),et(Kt).fire(d),hr(d,!0)}return t})}function mr(t){var e=function(s){return t.next(s)},r=function(s){return t.throw(s)},o=a(e),i=a(r);function a(s){return function(u){var c=s(u),p=c.value;return c.done?p:!p||typeof p.then!="function"?w(p)?Promise.all(p).then(o,i):o(p):p.then(o,i)}}return a(e)()}function Ra(t,e,r){var o=arguments.length;if(o<2)throw new V.InvalidArgument("Too few arguments");for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];r=i.pop();var a=me(i);return[t,a,r]}function mo(t,e,r,o,i){return U.resolve().then(function(){var a=X.transless||X,s=t._createTransaction(e,r,t._dbSchema,o);s.explicit=!0;var u={trans:s,transless:a};if(o)s.idbtrans=o.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(d){return d.name===Mn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return mo(t,e,r,null,i)})):xe(d)}var c=Nn(i);c&&wt();var p,v=U.follow(function(){if(p=i.call(s,s),p)if(c){var d=Xe.bind(null,null);p.then(d,d)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=mr(p))},u);return(p&&typeof p.then=="function"?U.resolve(p).then(function(d){return s.active?d:xe(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):v.then(function(){return p})).then(function(d){return o&&s._resolve(),s._completion.then(function(){return d})}).catch(function(d){return s._reject(d),xe(d)})})}function gn(t,e,r){for(var o=w(t)?t.slice():[t],i=0;i<r;++i)o.push(e);return o}function Aa(t){return h(h({},t),{table:function(e){var r=t.table(e),o=r.schema,i={},a=[];function s(g,x,C){var j=Ft(g),T=i[j]=i[j]||[],N=g==null?0:typeof g=="string"?1:g.length,R=x>0,q=h(h({},C),{name:R?"".concat(j,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:R,keyTail:x,keyLength:N,extractKey:nr(g),unique:!R&&C.unique});if(T.push(q),q.isPrimaryKey||a.push(q),N>1){var G=N===2?g[0]:g.slice(0,N-1);s(G,x+1,C)}return T.sort(function(z,ee){return z.keyTail-ee.keyTail}),q}var u=s(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[u];for(var c=0,p=o.indexes;c<p.length;c++){var v=p[c];s(v.keyPath,0,v)}function d(g){var x=i[Ft(g)];return x&&x[0]}function S(g,x){return{type:g.type===1?2:g.type,lower:gn(g.lower,g.lowerOpen?t.MAX_KEY:t.MIN_KEY,x),lowerOpen:!0,upper:gn(g.upper,g.upperOpen?t.MIN_KEY:t.MAX_KEY,x),upperOpen:!0}}function K(g){var x=g.query.index;return x.isVirtual?h(h({},g),{query:{index:x.lowLevelIndex,range:S(g.query.range,x.keyTail)}}):g}var m=h(h({},r),{schema:h(h({},o),{primaryKey:u,indexes:a,getIndexByKeyPath:d}),count:function(g){return r.count(K(g))},query:function(g){return r.query(K(g))},openCursor:function(g){var x=g.query.index,C=x.keyTail,j=x.isVirtual,T=x.keyLength;if(!j)return r.openCursor(g);function N(R){function q(z){z!=null?R.continue(gn(z,g.reverse?t.MAX_KEY:t.MIN_KEY,C)):g.unique?R.continue(R.key.slice(0,T).concat(g.reverse?t.MIN_KEY:t.MAX_KEY,C)):R.continue()}var G=Object.create(R,{continue:{value:q},continuePrimaryKey:{value:function(z,ee){R.continuePrimaryKey(gn(z,t.MAX_KEY,C),ee)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var z=R.key;return T===1?z[0]:z.slice(0,T)}},value:{get:function(){return R.value}}});return G}return r.openCursor(K(g)).then(function(R){return R&&N(R)})}});return m}})}var Ta={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Aa};function yr(t,e,r,o){return r=r||{},o=o||"",O(t).forEach(function(i){if(!P(e,i))r[o+i]=void 0;else{var a=t[i],s=e[i];if(typeof a=="object"&&typeof s=="object"&&a&&s){var u=jn(a),c=jn(s);u!==c?r[o+i]=e[i]:u==="Object"?yr(a,s,r,o+i+"."):a!==s&&(r[o+i]=e[i])}else a!==s&&(r[o+i]=e[i])}}),O(e).forEach(function(i){P(t,i)||(r[o+i]=e[i])}),r}function vr(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ja={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return h(h({},t),{table:function(e){var r=t.table(e),o=r.schema.primaryKey,i=h(h({},r),{mutate:function(a){var s=X.trans,u=s.table(e).hook,c=u.deleting,p=u.creating,v=u.updating;switch(a.type){case"add":if(p.fire===ye)break;return s._promise("readwrite",function(){return d(a)},!0);case"put":if(p.fire===ye&&v.fire===ye)break;return s._promise("readwrite",function(){return d(a)},!0);case"delete":if(c.fire===ye)break;return s._promise("readwrite",function(){return d(a)},!0);case"deleteRange":if(c.fire===ye)break;return s._promise("readwrite",function(){return S(a)},!0)}return r.mutate(a);function d(m){var g=X.trans,x=m.keys||vr(o,m);if(!x)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?h(h({},m),{keys:x}):h({},m),m.type!=="delete"&&(m.values=E([],m.values,!0)),m.keys&&(m.keys=E([],m.keys,!0)),Da(r,m,x).then(function(C){var j=x.map(function(T,N){var R=C[N],q={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(q,T,R,g);else if(m.type==="add"||R===void 0){var G=p.fire.call(q,T,m.values[N],g);T==null&&G!=null&&(T=G,m.keys[N]=T,o.outbound||re(m.values[N],o.keyPath,T))}else{var z=yr(R,m.values[N]),ee=v.fire.call(q,z,T,R,g);if(ee){var se=m.values[N];Object.keys(ee).forEach(function(W){P(se,W)?se[W]=ee[W]:re(se,W,ee[W])})}}return q});return r.mutate(m).then(function(T){for(var N=T.failures,R=T.results,q=T.numFailures,G=T.lastResult,z=0;z<x.length;++z){var ee=R?R[z]:x[z],se=j[z];ee==null?se.onerror&&se.onerror(N[z]):se.onsuccess&&se.onsuccess(m.type==="put"&&C[z]?m.values[z]:ee)}return{failures:N,results:R,numFailures:q,lastResult:G}}).catch(function(T){return j.forEach(function(N){return N.onerror&&N.onerror(T)}),Promise.reject(T)})})}function S(m){return K(m.trans,m.range,1e4)}function K(m,g,x){return r.query({trans:m,values:!1,query:{index:o,range:g},limit:x}).then(function(C){var j=C.result;return d({type:"delete",keys:j,trans:m}).then(function(T){return T.numFailures>0?Promise.reject(T.failures[0]):j.length<x?{failures:[],numFailures:0,lastResult:void 0}:K(m,h(h({},g),{lower:j[j.length-1],lowerOpen:!0}),x)})})}}});return i}})}};function Da(t,e,r){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:r,cache:"immutable"})}function yo(t,e,r){try{if(!e||e.keys.length<t.length)return null;for(var o=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)fe(e.keys[i],t[a])===0&&(o.push(r?we(e.values[i]):e.values[i]),++a);return o.length===t.length?o:null}catch{return null}}var Na={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return h(h({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var i=yo(o.keys,o.trans._cache,o.cache==="clone");return i?U.resolve(i):r.getMany(o).then(function(a){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?we(a):a},a})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function vo(t,e){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!e.schema.primaryKey.outbound}function go(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ia={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,r=new Pe(t.MIN_KEY,t.MAX_KEY);return h(h({},t),{transaction:function(o,i,a){if(X.subscr&&i!=="readonly")throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(X.querier));return t.transaction(o,i,a)},table:function(o){var i=t.table(o),a=i.schema,s=a.primaryKey,u=a.indexes,c=s.extractKey,p=s.outbound,v=s.autoIncrement&&u.filter(function(m){return m.compound&&m.keyPath.includes(s.keyPath)}),d=h(h({},i),{mutate:function(m){var g,x,C=m.trans,j=m.mutatedParts||(m.mutatedParts={}),T=function(te){var pe="idb://".concat(e,"/").concat(o,"/").concat(te);return j[pe]||(j[pe]=new Pe)},N=T(""),R=T(":dels"),q=m.type,G=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[vr(s,m).filter(function(te){return te}),m.values]:[],z=G[0],ee=G[1],se=m.trans._cache;if(w(z)){N.addKeys(z);var W=q==="delete"||z.length===ee.length?yo(z,se):null;W||R.addKeys(z),(W||ee)&&Ma(T,a,W,ee)}else if(z){var ie={from:(g=z.lower)!==null&&g!==void 0?g:t.MIN_KEY,to:(x=z.upper)!==null&&x!==void 0?x:t.MAX_KEY};R.add(ie),N.add(ie)}else N.add(r),R.add(r),a.indexes.forEach(function(te){return T(te.name).add(r)});return i.mutate(m).then(function(te){return z&&(m.type==="add"||m.type==="put")&&(N.addKeys(te.results),v&&v.forEach(function(pe){for(var J=m.values.map(function(Te){return pe.extractKey(Te)}),_e=pe.keyPath.findIndex(function(Te){return Te===s.keyPath}),Oe=0,ze=te.results.length;Oe<ze;++Oe)J[Oe][_e]=te.results[Oe];T(pe.name).addKeys(J)})),C.mutatedParts=yn(C.mutatedParts||{},j),te})}}),S=function(m){var g,x,C=m.query,j=C.index,T=C.range;return[j,new Pe((g=T.lower)!==null&&g!==void 0?g:t.MIN_KEY,(x=T.upper)!==null&&x!==void 0?x:t.MAX_KEY)]},K={get:function(m){return[s,new Pe(m.key)]},getMany:function(m){return[s,new Pe().addKeys(m.keys)]},count:S,query:S,openCursor:S};return O(K).forEach(function(m){d[m]=function(g){var x=X.subscr,C=!!x,j=vo(X,i)&&go(m,g),T=j?g.obsSet={}:x;if(C){var N=function(W){var ie="idb://".concat(e,"/").concat(o,"/").concat(W);return T[ie]||(T[ie]=new Pe)},R=N(""),q=N(":dels"),G=K[m](g),z=G[0],ee=G[1];if(m==="query"&&z.isPrimaryKey&&!g.values?q.add(ee):N(z.name||"").add(ee),!z.isPrimaryKey)if(m==="count")q.add(r);else{var se=m==="query"&&p&&g.values&&i.query(h(h({},g),{values:!1}));return i[m].apply(this,arguments).then(function(W){if(m==="query"){if(p&&g.values)return se.then(function(J){var _e=J.result;return R.addKeys(_e),W});var ie=g.values?W.result.map(c):W.result;g.values?R.addKeys(ie):q.addKeys(ie)}else if(m==="openCursor"){var te=W,pe=g.values;return te&&Object.create(te,{key:{get:function(){return q.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var J=te.primaryKey;return q.addKey(J),J}},value:{get:function(){return pe&&R.addKey(te.primaryKey),te.value}}})}return W})}}return i[m].apply(this,arguments)}}),d}})}};function Ma(t,e,r,o){function i(a){var s=t(a.name||"");function u(p){return p!=null?a.extractKey(p):null}var c=function(p){return a.multiEntry&&w(p)?p.forEach(function(v){return s.addKey(v)}):s.addKey(p)};(r||o).forEach(function(p,v){var d=r&&u(r[v]),S=o&&u(o[v]);fe(d,S)!==0&&(d!=null&&c(d),S!=null&&c(S))})}e.indexes.forEach(i)}function bo(t,e,r){if(r.numFailures===0)return e;if(e.type==="deleteRange")return null;var o=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(r.numFailures===o)return null;var i=h({},e);return w(i.keys)&&(i.keys=i.keys.filter(function(a,s){return!(s in r.failures)})),"values"in i&&w(i.values)&&(i.values=i.values.filter(function(a,s){return!(s in r.failures)})),i}function Ka(t,e){return e.lower===void 0?!0:e.lowerOpen?fe(t,e.lower)>0:fe(t,e.lower)>=0}function Ba(t,e){return e.upper===void 0?!0:e.upperOpen?fe(t,e.upper)<0:fe(t,e.upper)<=0}function gr(t,e){return Ka(t,e)&&Ba(t,e)}function _o(t,e,r,o,i,a){if(!r||r.length===0)return t;var s=e.query.index,u=s.multiEntry,c=e.query.range,p=o.schema.primaryKey,v=p.extractKey,d=s.extractKey,S=(s.lowLevelIndex||s).extractKey,K=r.reduce(function(m,g){var x=m,C=[];if(g.type==="add"||g.type==="put")for(var j=new Pe,T=g.values.length-1;T>=0;--T){var N=g.values[T],R=v(N);if(!j.hasKey(R)){var q=d(N);(u&&w(q)?q.some(function(W){return gr(W,c)}):gr(q,c))&&(j.addKey(R),C.push(N))}}switch(g.type){case"add":{var G=new Pe().addKeys(e.values?m.map(function(W){return v(W)}):m);x=m.concat(e.values?C.filter(function(W){var ie=v(W);return G.hasKey(ie)?!1:(G.addKey(ie),!0)}):C.map(function(W){return v(W)}).filter(function(W){return G.hasKey(W)?!1:(G.addKey(W),!0)}));break}case"put":{var z=new Pe().addKeys(g.values.map(function(W){return v(W)}));x=m.filter(function(W){return!z.hasKey(e.values?v(W):W)}).concat(e.values?C:C.map(function(W){return v(W)}));break}case"delete":var ee=new Pe().addKeys(g.keys);x=m.filter(function(W){return!ee.hasKey(e.values?v(W):W)});break;case"deleteRange":var se=g.range;x=m.filter(function(W){return!gr(v(W),se)});break}return x},t);return K===t?t:(K.sort(function(m,g){return fe(S(m),S(g))||fe(v(m),v(g))}),e.limit&&e.limit<1/0&&(K.length>e.limit?K.length=e.limit:t.length===e.limit&&K.length<e.limit&&(i.dirty=!0)),a?Object.freeze(K):K)}function wo(t,e){return fe(t.lower,e.lower)===0&&fe(t.upper,e.upper)===0&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function Fa(t,e,r,o){if(t===void 0)return e!==void 0?-1:0;if(e===void 0)return 1;var i=fe(t,e);if(i===0){if(r&&o)return 0;if(r)return 1;if(o)return-1}return i}function $a(t,e,r,o){if(t===void 0)return e!==void 0?1:0;if(e===void 0)return-1;var i=fe(t,e);if(i===0){if(r&&o)return 0;if(r)return-1;if(o)return 1}return i}function La(t,e){return Fa(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&$a(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function qa(t,e,r,o){var i=pt["idb://".concat(t,"/").concat(e)];if(!i)return[];var a=i.queries[r];if(!a)return[null,!1,i,null];var s=o.query?o.query.index.name:null,u=a[s||""];if(!u)return[null,!1,i,null];switch(r){case"query":var c=u.find(function(d){return d.req.limit===o.limit&&d.req.values===o.values&&wo(d.req.query.range,o.query.range)});if(c)return[c,!0,i,u];var p=u.find(function(d){var S="limit"in d.req?d.req.limit:1/0;return S>=o.limit&&(o.values?d.req.values:!0)&&La(d.req.query.range,o.query.range)});return[p,!1,i,u];case"count":var v=u.find(function(d){return wo(d.req.query.range,o.query.range)});return[v,!!v,i,u]}}function za(t,e,r,o){t.subscribers.add(r),o.addEventListener("abort",function(){t.subscribers.delete(r),t.subscribers.size===0&&Ua(t,e)})}function Ua(t,e){setTimeout(function(){t.subscribers.size===0&&ot(e,t)},3e3)}var Ha={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,r=h(h({},t),{transaction:function(o,i,a){var s=t.transaction(o,i,a);if(i==="readwrite"){var u=new AbortController,c=u.signal,p=function(v){return function(){if(u.abort(),i==="readwrite"){for(var d=new Set,S=0,K=o;S<K.length;S++){var m=K[S],g=pt["idb://".concat(e,"/").concat(m)];if(g){var x=t.table(m),C=g.optimisticOps.filter(function(pe){return pe.trans===s});if(s._explicit&&v&&s.mutatedParts)for(var j=0,T=Object.values(g.queries.query);j<T.length;j++)for(var N=T[j],R=0,q=N.slice();R<q.length;R++){var G=q[R];fr(G.obsSet,s.mutatedParts)&&(ot(N,G),G.subscribers.forEach(function(pe){return d.add(pe)}))}else if(C.length>0){g.optimisticOps=g.optimisticOps.filter(function(pe){return pe.trans!==s});for(var z=0,ee=Object.values(g.queries.query);z<ee.length;z++)for(var N=ee[z],se=0,W=N.slice();se<W.length;se++){var G=W[se];if(G.res!=null&&s.mutatedParts)if(v&&!G.dirty){var ie=Object.isFrozen(G.res),te=_o(G.res,G.req,C,x,G,ie);G.dirty?(ot(N,G),G.subscribers.forEach(function(_e){return d.add(_e)})):te!==G.res&&(G.res=te,G.promise=U.resolve({result:te}))}else G.dirty&&ot(N,G),G.subscribers.forEach(function(_e){return d.add(_e)})}}}}d.forEach(function(pe){return pe()})}}};s.addEventListener("abort",p(!1),{signal:c}),s.addEventListener("error",p(!1),{signal:c}),s.addEventListener("complete",p(!0),{signal:c})}return s},table:function(o){var i=t.table(o),a=i.schema.primaryKey,s=h(h({},i),{mutate:function(u){var c=X.trans;if(a.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return i.mutate(u);var p=pt["idb://".concat(e,"/").concat(o)];if(!p)return i.mutate(u);var v=i.mutate(u);return(u.type==="add"||u.type==="put")&&(u.values.length>=50||vr(a,u).some(function(d){return d==null}))?v.then(function(d){var S=h(h({},u),{values:u.values.map(function(m,g){var x;if(d.failures[g])return m;var C=!((x=a.keyPath)===null||x===void 0)&&x.includes(".")?we(m):h({},m);return re(C,a.keyPath,d.results[g]),C})}),K=bo(p,S,d);p.optimisticOps.push(K),queueMicrotask(function(){return u.mutatedParts&&vn(u.mutatedParts)})}):(p.optimisticOps.push(u),u.mutatedParts&&vn(u.mutatedParts),v.then(function(d){if(d.numFailures>0){ot(p.optimisticOps,u);var S=bo(p,u,d);S&&p.optimisticOps.push(S),u.mutatedParts&&vn(u.mutatedParts)}}),v.catch(function(){ot(p.optimisticOps,u),u.mutatedParts&&vn(u.mutatedParts)})),v},query:function(u){var c;if(!vo(X,i)||!go("query",u))return i.query(u);var p=((c=X.trans)===null||c===void 0?void 0:c.db._options.cache)==="immutable",v=X,d=v.requery,S=v.signal,K=qa(e,o,"query",u),m=K[0],g=K[1],x=K[2],C=K[3];if(m&&g)m.obsSet=u.obsSet;else{var j=i.query(u).then(function(T){var N=T.result;if(m&&(m.res=N),p){for(var R=0,q=N.length;R<q;++R)Object.freeze(N[R]);Object.freeze(N)}else T.result=we(N);return T}).catch(function(T){return C&&m&&ot(C,m),Promise.reject(T)});m={obsSet:u.obsSet,promise:j,subscribers:new Set,type:"query",req:u,dirty:!1},C?C.push(m):(C=[m],x||(x=pt["idb://".concat(e,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),x.queries.query[u.query.index.name||""]=C)}return za(m,C,d,S),m.promise.then(function(T){return{result:_o(T.result,u,x?.optimisticOps,i,m,p)}})}});return s}});return r}};function bn(t,e){return new Proxy(t,{get:function(r,o,i){return o==="db"?e:Reflect.get(r,o,i)}})}var We=(function(){function t(e,r){var o=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=r=h({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ye,dbReadyPromise:null,cancelOpen:ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};s.dbReadyPromise=new U(function(c){s.dbReadyResolve=c}),s.openCanceller=new U(function(c,p){s.cancelOpen=p}),this._state=s,this.name=e,this.on=Nt(this,"populate","blocked","versionchange","close",{ready:[Kn,ye]}),this.once=function(c,p){var v=function(){for(var d=[],S=0;S<arguments.length;S++)d[S]=arguments[S];o.on(c).unsubscribe(v),p.apply(o,d)};return o.on(c,v)},this.on.ready.subscribe=Z(this.on.ready.subscribe,function(c){return function(p,v){t.vip(function(){var d=o._state;if(d.openComplete)d.dbOpenError||U.resolve().then(p),v&&c(p);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(p),v&&c(p);else{c(p);var S=o;v||c(function K(){S.on.ready.unsubscribe(p),S.on.ready.unsubscribe(K)})}})}}),this.Collection=Vi(this),this.Table=Qi(this),this.Transaction=sa(this),this.Version=ka(this),this.WhereClause=ia(this),this.on("versionchange",function(c){c.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(c.oldVersion/10))}),this._maxKey=Bt(r.IDBKeyRange),this._createTransaction=function(c,p,v,d){return new o.Transaction(c,p,v,o._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(c){o.on("blocked").fire(c),xt.filter(function(p){return p.name===o.name&&p!==o&&!p._state.vcFired}).map(function(p){return p.on("versionchange").fire(c)})},this.use(Na),this.use(Ha),this.use(Ia),this.use(Ta),this.use(ja);var u=new Proxy(this,{get:function(c,p,v){if(p==="_vip")return!0;if(p==="table")return function(S){return bn(o.table(S),u)};var d=Reflect.get(c,p,v);return d instanceof eo?bn(d,u):p==="tables"?d.map(function(S){return bn(S,u)}):p==="_createTransaction"?function(){var S=d.apply(this,arguments);return bn(S,u)}:d}});this.vip=u,a.forEach(function(c){return c(o)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new V.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,o=r.filter(function(i){return i._cfg.version===e})[0];return o||(o=new this.Version(e),r.push(o),r.sort(ha),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?e():new U(function(o,i){if(r._state.openComplete)return i(new V.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){i(new V.DatabaseClosed);return}r.open().catch(ye)}r._state.dbReadyPromise.then(o,i)}).then(e)},t.prototype.use=function(e){var r=e.stack,o=e.create,i=e.level,a=e.name;a&&this.unuse({stack:r,name:a});var s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:o,level:i??10,name:a}),s.sort(function(u,c){return u.level-c.level}),this},t.prototype.unuse=function(e){var r=e.stack,o=e.name,i=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(a){return i?a.create!==i:o?a.name!==o:!1})),this},t.prototype.open=function(){var e=this;return ct(Ye,function(){return Ea(e)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,r=xt.indexOf(this);if(r>=0&&xt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new U(function(o){e.dbReadyResolve=o}),e.openCanceller=new U(function(o,i){e.cancelOpen=i}))},t.prototype.close=function(e){var r=e===void 0?{disableAutoOpen:!0}:e,o=r.disableAutoOpen,i=this._state;o?(i.isBeingOpened&&i.cancelOpen(new V.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new V.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},t.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new U(function(a,s){var u=function(){r.close(e);var c=r._deps.indexedDB.deleteDatabase(r.name);c.onsuccess=ge(function(){Pa(r._deps,r.name),a()}),c.onerror=qe(s),c.onblocked=r._fireOnBlocked};if(o)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(u):u()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return O(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=Ra.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,r,o){var i=this,a=X.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var u,c;try{if(c=r.map(function(v){var d=v instanceof i.Table?v.name:v;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),e=="r"||e===Yn)u=Yn;else if(e=="rw"||e==Qn)u=Qn;else throw new V.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===Yn&&u===Qn)if(s)a=null;else throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&c.forEach(function(v){if(a&&a.storeNames.indexOf(v)===-1)if(s)a=null;else throw new V.SubTransaction("Table "+v+" not included in parent transaction.")}),s&&a&&!a.active&&(a=null)}}catch(v){return a?a._promise(null,function(d,S){S(v)}):xe(v)}var p=mo.bind(null,this,u,c,a,o);return a?a._promise(u,p,"lock"):X.trans?ct(X.transless,function(){return i._whenReady(p)}):this._whenReady(p)},t.prototype.table=function(e){if(!P(this._allTables,e))throw new V.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},t})(),Za=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ga=(function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,r,o){return this._subscribe(!e||typeof e=="function"?{next:e,error:r,complete:o}:e)},t.prototype[Za]=function(){return this},t})(),_n;try{_n={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{_n={indexedDB:null,IDBKeyRange:null}}function xo(t){var e=!1,r,o=new Ga(function(i){var a=Nn(t);function s(C){var j=bt();try{a&&wt();var T=Qe(t,C);return a&&(T=T.finally(Xe)),T}finally{j&&_t()}}var u=!1,c,p={},v={},d={get closed(){return u},unsubscribe:function(){u||(u=!0,c&&c.abort(),S&&et.storagemutated.unsubscribe(g))}};i.start&&i.start(d);var S=!1,K=function(){return Zn(x)};function m(){return fr(v,p)}var g=function(C){yn(p,C),m()&&K()},x=function(){if(!(u||!_n.indexedDB)){p={};var C={};c&&c.abort(),c=new AbortController;var j={subscr:C,signal:c.signal,requery:K,querier:t,trans:null},T=s(j);Promise.resolve(T).then(function(N){e=!0,r=N,!(u||j.signal.aborted)&&(p={},v=C,!ke(v)&&!S&&(et(Kt,g),S=!0),Zn(function(){return!u&&i.next&&i.next(N)}))},function(N){e=!1,["DatabaseClosedError","AbortError"].includes(N?.name)||u||Zn(function(){u||i.error&&i.error(N)})})}};return setTimeout(K,0),d});return o.hasValue=function(){return e},o.getValue=function(){return r},o}var dt=We;I(dt,h(h({},Wt),{delete:function(t){var e=new dt(t,{addons:[]});return e.delete()},exists:function(t){return new dt(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Sa(dt.dependencies).then(t)}catch{return xe(new V.MissingAPI)}},defineClass:function(){function t(e){_(this,e)}return t},ignoreTransaction:function(t){return X.trans?ct(X.transless,t):t()},vip:ur,async:function(t){return function(){try{var e=mr(t.apply(this,arguments));return!e||typeof e.then!="function"?U.resolve(e):e}catch(r){return xe(r)}}},spawn:function(t,e,r){try{var o=mr(t.apply(r,e||[]));return!o||typeof o.then!="function"?U.resolve(o):o}catch(i){return xe(i)}},currentTransaction:{get:function(){return X.trans||null}},waitFor:function(t,e){var r=U.resolve(typeof t=="function"?dt.ignoreTransaction(t):t).timeout(e||6e4);return X.trans?X.trans.waitFor(r):r},Promise:U,debug:{get:function(){return Le},set:function(t){Br(t)}},derive:B,extend:_,props:I,override:Z,Events:Nt,on:et,liveQuery:xo,extendObservabilitySet:yn,getByKeyPath:oe,setByKeyPath:re,delByKeyPath:de,shallowClone:he,deepClone:we,getObjectDiff:yr,cmp:fe,asap:ae,minKey:Wn,addons:[],connections:xt,errnames:Mn,dependencies:_n,cache:pt,semVer:Gr,version:Gr.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,r*2)})})),dt.maxKey=Bt(dt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(et(Kt,function(t){if(!tt){var e;e=new CustomEvent(Vn,{detail:t}),tt=!0,dispatchEvent(e),tt=!1}}),addEventListener(Vn,function(t){var e=t.detail;tt||br(e)}));function br(t){var e=tt;try{tt=!0,et.storagemutated.fire(t),hr(t,!0)}finally{tt=e}}var tt=!1,Ct,_r=function(){};typeof BroadcastChannel<"u"&&(_r=function(){Ct=new BroadcastChannel(Vn),Ct.onmessage=function(t){return t.data&&br(t.data)}},_r(),typeof Ct.unref=="function"&&Ct.unref(),et(Kt,function(t){tt||Ct.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!We.disableBfCache&&t.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),Ct?.close();for(var e=0,r=xt;e<r.length;e++){var o=r[e];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!We.disableBfCache&&t.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),_r(),br({all:new Pe(-1/0,[[]])}))}));function Wa(t){return new Dt({add:t})}function Ya(t){return new Dt({remove:t})}function Qa(t,e){return new Dt({replacePrefix:[t,e]})}U.rejectionMapper=Ai,Br(Le);var Xa=Object.freeze({__proto__:null,Dexie:We,liveQuery:xo,Entity:Qr,cmp:fe,PropModification:Dt,replacePrefix:Qa,add:Wa,remove:Ya,default:We,RangeSet:Pe,mergeRanges:Lt,rangesOverlap:lo});return h(We,Xa,{default:We}),We}))}),Rr=yu(vu(),1),Io=Symbol.for("Dexie"),En=globalThis[Io]||(globalThis[Io]=Rr.default);if(Rr.default.semVer!==En.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rr.default.semVer} and ${En.semVer}`);var{liveQuery:gc,mergeRanges:bc,rangesOverlap:_c,RangeSet:wc,cmp:xc,Entity:kc,PropModification:Sc,replacePrefix:Cc,add:Pc,remove:Oc,DexieYProvider:Ec}=En,Ar=En;De();var gu=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function Ko(){return(await gu.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var bu=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Bo(l){return{items:(await bu.getContents(l,{offset:0,limit:-1})).items}}async function Fo(l){let n=new Map,f=50,b=[...new Set(l)];for(let h=0;h<b.length;h+=f){let y=b.slice(h,h+f).map(async O=>{let _=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:O,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(_)for(let k of _){let A=k?.track?.uri;A&&n.set(A,k.track)}});await Promise.allSettled(y)}return n}async function $o(l){let n=new Map,f=[...new Set(l.map(y=>Spicetify.URI.fromString(y).id).filter(y=>!!y))],b=async y=>{for(let w=0;w<y.length;w+=50){let k=`https://api.spotify.com/v1/tracks?ids=${y.slice(w,w+50).join(",")}`;try{(await Spicetify.CosmosAsync.get(k))?.tracks?.forEach(P=>{P?.uri&&n.set(P.uri,P)})}catch{}}},h=async y=>{for(let w=0;w<y.length;w+=50){let _=y.slice(w,w+50);await Promise.allSettled(_.map(async k=>{let A=`spotify:track:${k}`;if(!n.has(A))try{let P=Spicetify.URI.idToHex(k),L=await(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/track/${P}`).send()).body;L&&n.set(A,L)}catch{}}))}};await b(f);let E=f.filter(y=>!n.has(`spotify:track:${y}`));return E.length>0&&await h(E),n}De();var Lo=webpackChunkclient_web.push([[Symbol()],{},l=>l]),_u=Object.entries(Lo.m),wu=_u.filter(([l,n])=>typeof n=="function"&&n.toString().includes("main-confirmDialog-container")),xu=wu.flatMap(([l])=>Object.values(Lo(l)))[0];Spicetify.ReactComponent.ConfirmDialog=xu;function qo({titleText:l,descriptionText:n,cancelText:f="Cancel",confirmText:b="Confirm",onConfirm:h,onClose:E,onOpen:y,onOutside:O,allowHTML:w,confirmLabel:_,shouldCloseOnEsc:k,shouldCloseOnOverlayClick:A,shouldFocusAfterRender:P,width:I}){let L=document.createElement("div");document.body.appendChild(L);let M=On(L),B=()=>{let[D,$]=je(!0),Y=Re(null);Fe(()=>{y?.()},[y]),Fe(()=>{if(D)return;let Z=()=>{M.unmount(),L.remove()},H=Y.current;if(H)return H.addEventListener("animationend",Z,{once:!0}),()=>{H.removeEventListener("animationend",Z)};Z()},[D]);let Q=Z=>()=>{Z?.(),$(!1)};return F(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:w,cancelText:f,confirmLabel:_,confirmText:b,descriptionText:n,isOpen:D,onClose:Q(E),onConfirm:Q(h),onOutside:Q(O),ref:Y,shouldCloseOnEsc:k,shouldCloseOnOverlayClick:A,shouldFocusAfterRender:P,titleText:l,width:I})};M.render(F(B,{}))}var Ho=Be(Me());De();var zo=new CSSStyleSheet;zo.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Uo=zo;document.adoptedStyleSheets.push(Uo);var Rn=Se(l=>{let n=(0,Ho.c)(43),{value:f,options:b,onChange:h,disabled:E}=l,y=kr(),O=Re(null),w=`--dropdown-anchor-${y.replace(/:/g,"id")}`,_,k,A,P,I,L,M,B,D;if(n[0]!==w||n[1]!==E||n[2]!==h||n[3]!==b||n[4]!==y||n[5]!==f){let Q=ce=>{h?.(ce.value),O.current?.hidePopover()},Z;n[15]!==b||n[16]!==f?(Z=b.find(ce=>ce.value===f)?.label||"Select...",n[15]=b,n[16]=f,n[17]=Z):Z=n[17];let H=Z;M="dropdown",B=E;let ae;n[18]!==w?(ae={anchorName:w},n[18]=w,n[19]=ae):ae=n[19];let ne;n[20]!==H?(ne=F("div",{className:"dropdown__text",children:H}),n[20]=H,n[21]=ne):ne=n[21];let oe;n[22]===Symbol.for("react.memo_cache_sentinel")?(oe=F("div",{className:"dropdown__arrow",children:F(Ae.React.dropdown,{size:12})}),n[22]=oe):oe=n[22],n[23]!==y||n[24]!==ae||n[25]!==ne?(D=ue("button",{className:"dropdown__button",popoverTarget:y,popoverTargetAction:"toggle",style:ae,children:[ne,oe]}),n[23]=y,n[24]=ae,n[25]=ne,n[26]=D):D=n[26],_="dropdown__menu",k=y,A="auto",P=O;let re=`calc(anchor(${w} bottom) + 4px)`,de=`anchor(${w} left)`,he=`anchor-size(${w} width)`;n[27]!==re||n[28]!==de||n[29]!==he?(I={top:re,left:de,width:he},n[27]=re,n[28]=de,n[29]=he,n[30]=I):I=n[30],L=b.map(ce=>F("div",{className:`dropdown__option${f===ce.value?" dropdown__option--selected":""}`,onClick:()=>Q(ce),onKeyDown:me=>me.key==="Enter"&&Q(ce),role:"option",tabIndex:0,children:ce.label},ce.value)),n[0]=w,n[1]=E,n[2]=h,n[3]=b,n[4]=y,n[5]=f,n[6]=_,n[7]=k,n[8]=A,n[9]=P,n[10]=I,n[11]=L,n[12]=M,n[13]=B,n[14]=D}else _=n[6],k=n[7],A=n[8],P=n[9],I=n[10],L=n[11],M=n[12],B=n[13],D=n[14];let $;n[31]!==_||n[32]!==k||n[33]!==A||n[34]!==P||n[35]!==I||n[36]!==L?($=F("div",{className:_,id:k,popover:A,ref:P,style:I,children:L}),n[31]=_,n[32]=k,n[33]=A,n[34]=P,n[35]=I,n[36]=L,n[37]=$):$=n[37];let Y;return n[38]!==$||n[39]!==M||n[40]!==B||n[41]!==D?(Y=ue("div",{className:M,disabled:B,children:[D,$]}),n[38]=$,n[39]=M,n[40]=B,n[41]=D,n[42]=Y):Y=n[42],Y});var fi=Be(Me());De();var Zo=new CSSStyleSheet;Zo.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var Go=Zo;var ii=Be(Me());De();var Qo=Be(Me());De();var Wo=new CSSStyleSheet;Wo.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var Yo=Wo;document.adoptedStyleSheets.push(Yo);var Xo=Se(l=>{let n=(0,Qo.c)(7),{value:f,onChange:b,placeholder:h,disabled:E}=l,y=E===void 0?!1:E,O;n[0]!==b?(O=k=>{b(k.target.value)},n[0]=b,n[1]=O):O=n[1];let w=O,_;return n[2]!==y||n[3]!==w||n[4]!==h||n[5]!==f?(_=F("input",{className:"input",disabled:y,onChange:w,placeholder:h,type:"text",value:f}),n[2]=y,n[3]=w,n[4]=h,n[5]=f,n[6]=_):_=n[6],_});var ei=Be(Me());De();var Jo=new CSSStyleSheet;Jo.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Vo=Jo;document.adoptedStyleSheets.push(Vo);var An=Se(l=>{let n=(0,ei.c)(28),{value:f,min:b,max:h,step:E,defaultValue:y,onChange:O,onRelease:w,disabled:_}=l,k=b===void 0?0:b,A=h===void 0?100:h,P=E===void 0?1:E,I=Re(null),L=Re(!1),M=f!==void 0?f:y,B=A>k&&M!==void 0?(M-k)/(A-k)*100:0,D;n[0]!==_||n[1]!==A||n[2]!==k||n[3]!==O||n[4]!==P?(D=le=>{if(!I.current||_)return;let ve=I.current.getBoundingClientRect(),ke=le.clientX,we=Math.max(0,Math.min(ke-ve.left,ve.width))/ve.width*(A-k)+k;we=Math.round(we/P)*P,we=Math.max(k,Math.min(we,A)),O(we)},n[0]=_,n[1]=A,n[2]=k,n[3]=O,n[4]=P,n[5]=D):D=n[5];let $=D,Y;n[6]!==_||n[7]!==$?(Y=le=>{_||!I.current||(L.current=!0,I.current.setPointerCapture(le.pointerId),$(le.nativeEvent))},n[6]=_,n[7]=$,n[8]=Y):Y=n[8];let Q=Y,Z;n[9]!==$?(Z=le=>{L.current&&$(le.nativeEvent)},n[9]=$,n[10]=Z):Z=n[10];let H=Z,ae;n[11]!==w?(ae=le=>{!L.current||!I.current||(L.current=!1,I.current.releasePointerCapture(le.pointerId),w?.())},n[11]=w,n[12]=ae):ae=n[12];let ne=ae,oe=`${B}%`,re;n[13]!==oe?(re=F("div",{className:"slider__fill",style:{width:oe}}),n[13]=oe,n[14]=re):re=n[14];let de=`${B}%`,he;n[15]!==de?(he=F("div",{className:"slider__thumb",style:{left:de}}),n[15]=de,n[16]=he):he=n[16];let ce;n[17]!==he||n[18]!==re?(ce=ue("div",{className:"slider__track",children:[re,he]}),n[17]=he,n[18]=re,n[19]=ce):ce=n[19];let me;n[20]!==Q||n[21]!==H||n[22]!==ne||n[23]!==ce?(me=F("div",{className:"slider-container",onPointerCancel:ne,onPointerDown:Q,onPointerMove:H,onPointerUp:ne,ref:I,children:ce}),n[20]=Q,n[21]=H,n[22]=ne,n[23]=ce,n[24]=me):me=n[24];let be;return n[25]!==_||n[26]!==me?(be=F("div",{className:"slider",disabled:_,children:me}),n[25]=_,n[26]=me,n[27]=be):be=n[27],be});var ri=Be(Me());De();var ti=new CSSStyleSheet;ti.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var ni=ti;document.adoptedStyleSheets.push(ni);var oi=Se(l=>{let n=(0,ri.c)(10),{value:f,onChange:b,disabled:h}=l,E;n[0]!==h||n[1]!==b||n[2]!==f?(E=()=>{h||b(!f)},n[0]=h,n[1]=b,n[2]=f,n[3]=E):E=n[3];let y=E,O=`toggle__slider${f?" toggle__slider--enabled":""}${h?" toggle__slider--disabled":""}`,w;n[4]!==O?(w=F("span",{className:"toggle__background",children:F("span",{className:O})}),n[4]=O,n[5]=w):w=n[5];let _;return n[6]!==h||n[7]!==y||n[8]!==w?(_=F("button",{className:"toggle",disabled:h,onClick:y,role:"switch",children:w}),n[6]=h,n[7]=y,n[8]=w,n[9]=_):_=n[9],_});var ai=Se(l=>{let n=(0,ii.c)(23),{option:f,value:b,onChange:h,disabled:E}=l;switch(f.type){case"toggle":{let y=b,O;return n[0]!==E||n[1]!==h||n[2]!==y?(O=F(oi,{disabled:E,onChange:h,value:y}),n[0]=E,n[1]=h,n[2]=y,n[3]=O):O=n[3],O}case"input":{let y=b,O;return n[4]!==E||n[5]!==h||n[6]!==f.placeholder||n[7]!==y?(O=F(Xo,{disabled:E,onChange:h,placeholder:f.placeholder,value:y}),n[4]=E,n[5]=h,n[6]=f.placeholder,n[7]=y,n[8]=O):O=n[8],O}case"dropdown":{let y;n[9]!==f.options?(y=f.options||[],n[9]=f.options,n[10]=y):y=n[10];let O=b,w;return n[11]!==E||n[12]!==h||n[13]!==y||n[14]!==O?(w=F(Rn,{disabled:E,onChange:h,options:y,value:O}),n[11]=E,n[12]=h,n[13]=y,n[14]=O,n[15]=w):w=n[15],w}case"slider":{let y=b,O;return n[16]!==E||n[17]!==h||n[18]!==f.max||n[19]!==f.min||n[20]!==f.step||n[21]!==y?(O=F(An,{disabled:E,max:f.max,min:f.min,onChange:h,step:f.step,value:y}),n[16]=E,n[17]=h,n[18]=f.max,n[19]=f.min,n[20]=f.step,n[21]=y,n[22]=O):O=n[22],O}default:return console.warn(`Unknown option type for option "${f.name||"N/A"}"`),null}});var si=Be(Me());De();var ui=Se(l=>{let n=(0,si.c)(6),{name:f,popupModal:b}=l,h;n[0]!==b||n[1]!==f?(h=()=>ht({title:f,content:F(b,{}),isLarge:!1}),n[0]=b,n[1]=f,n[2]=h):h=n[2];let E;n[3]===Symbol.for("react.memo_cache_sentinel")?(E=F(Ae.React.editButton,{size:16}),n[3]=E):E=n[3];let y;return n[4]!==h?(y=F("button",{className:"popup-button",onClick:h,children:E}),n[4]=h,n[5]=y):y=n[5],y});var ci=Be(Me());De();var li=Se(l=>{let n=(0,ci.c)(3),{tippy:f}=l,b;n[0]===Symbol.for("react.memo_cache_sentinel")?(b=F("div",{className:"info-tippy",children:F(Ae.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),n[0]=b):b=n[0];let h;return n[1]!==f?(h=F(Spicetify.ReactComponent.TooltipWrapper,{label:f,placement:"top",showDelay:0,children:b}),n[1]=f,n[2]=h):h=n[2],h});document.adoptedStyleSheets.push(Go);var pi=Se(l=>{let n=(0,fi.c)(21),{name:f,desc:b,tippy:h,popupModal:E,option:y,value:O,onChange:w,disabled:_}=l,k;n[0]!==b?(k=F("div",{className:"option__desc",children:b}),n[0]=b,n[1]=k):k=n[1];let A;n[2]!==h?(A=h&&F(li,{tippy:h}),n[2]=h,n[3]=A):A=n[3];let P;n[4]!==k||n[5]!==A?(P=ue("div",{className:"option__content",children:[k,A]}),n[4]=k,n[5]=A,n[6]=P):P=n[6];let I;n[7]!==f||n[8]!==E?(I=E&&F(ui,{name:f,popupModal:E}),n[7]=f,n[8]=E,n[9]=I):I=n[9];let L;n[10]!==_||n[11]!==w||n[12]!==y||n[13]!==O?(L=y&&F(ai,{disabled:_,onChange:w||ku,option:y,value:O}),n[10]=_,n[11]=w,n[12]=y,n[13]=O,n[14]=L):L=n[14];let M;n[15]!==I||n[16]!==L?(M=ue("div",{className:"option__control",children:[I,L]}),n[15]=I,n[16]=L,n[17]=M):M=n[17];let B;return n[18]!==P||n[19]!==M?(B=ue("div",{className:"option__row",children:[P,M]}),n[18]=P,n[19]=M,n[20]=B):B=n[20],B});function ku(){}var di=()=>{let l=globalThis.webpackChunkclient_web.push([[Symbol()],{},b=>b]),n=/"data-encore-id":(?:\w+\.)+([A-Z]\w*)\b/,f={};for(let[b,h]of Object.entries(l.m)){if(typeof h!="function")continue;let E=l(b);if(!(!E||typeof E!="object"))for(let y of Object.values(E)){let O=typeof y=="function"?y:y?.render;if(!O)continue;let w=O.toString().match(n);w?.[1]&&!f[w[1]]&&(f[w[1]]=y)}}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(f).length} components.`),globalThis.UI=f};var mi=Be(Me());De();var He=Spicetify.Platform.PlayerAPI,hi={subscribe:l=>{let n=()=>l();return He._events.addListener("update",n,{}),()=>{He._events.removeListener("update",n,{})}},getSnapshot:()=>He._state},yi=(l,n)=>{let f=(0,mi.c)(22),b=zt(hi.subscribe,hi.getSnapshot),h=b.item?.uri===l,E=b.isPaused,y=h&&!E,[O,w]=je(0),[_,k]=je(n),A=Re(!1),P=Re(0),I,L;f[0]!==h||f[1]!==E||f[2]!==b.duration||f[3]!==b.positionAsOfTimestamp||f[4]!==n?(I=()=>{if(!h){w(0),k(n);return}if(k(b.duration),A.current)return;if(E){w(b.positionAsOfTimestamp);return}let H=setInterval(()=>{let ae=Date.now(),ne=He._state.positionAsOfTimestamp,oe=He._state.timestamp,re=ae-oe+ne;w(Math.min(re,b.duration))},100);return()=>clearInterval(H)},L=[h,E,b.duration,b.positionAsOfTimestamp,n],f[0]=h,f[1]=E,f[2]=b.duration,f[3]=b.positionAsOfTimestamp,f[4]=n,f[5]=I,f[6]=L):(I=f[5],L=f[6]),Fe(I,L);let M;f[7]!==h||f[8]!==E||f[9]!==l?(M=()=>{h?E?He.resume({}):He.pause({}):He.play({uri:l},{})},f[7]=h,f[8]=E,f[9]=l,f[10]=M):M=f[10];let B=M,D;f[11]===Symbol.for("react.memo_cache_sentinel")?(D=H=>{A.current=!0,w(H),P.current=H},f[11]=D):D=f[11];let $=D,Y;f[12]!==h||f[13]!==l?(Y=()=>{A.current=!1,h?He.seekTo(P.current):He.play({uri:l},{})},f[12]=h,f[13]=l,f[14]=Y):Y=f[14];let Q=Y,Z;return f[15]!==_||f[16]!==Q||f[17]!==h||f[18]!==y||f[19]!==O||f[20]!==B?(Z={position:O,duration:_,isPlaying:y,isActiveTrack:h,togglePlay:B,handleSliderChange:$,handleSliderRelease:Q},f[15]=_,f[16]=Q,f[17]=h,f[18]=y,f[19]=O,f[20]=B,f[21]=Z):Z=f[21],Z};di();var jr=class{starts=new Map;start(n){this.starts.set(n,performance.now())}end(n){let f=this.starts.get(n);if(f){let b=performance.now()-f;console.debug(`[Debug] ${n}: ${b.toFixed(2)}ms`),this.starts.delete(n)}}},Ne=new jr,Su=["exact","isrc","probable","likely","possible","maybe"],Dr=class extends Ar{constructor(){super("findDupeTracks"),this.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, trackPlayCount, trackIsrc, albumUri, albumReleaseDate, ignoreDuplicates, lastUpdated"})}},vi=new Dr,Tn={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0,maybe:!1},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0,maybe:!0},defaultNormalizeWords:["live","remix","mix","acoustic","inst","instrumental","radio","version","ver","edit","mono","stereo","deluxe","demo","rehearsal","intro","outro","remaster","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],customNormalizeWords:[]},_i="findDupeTracks:settings",gi=(()=>{try{let l=localStorage.getItem(_i);return l?{...Tn,...JSON.parse(l)}:Tn}catch{return Tn}})(),Tr=new Set,Nr={getSnapshot:()=>gi,subscribe:l=>(Tr.add(l),()=>Tr.delete(l)),update:l=>{gi=l,localStorage.setItem(_i,JSON.stringify(l)),Tr.forEach(n=>{n()})}},wi=()=>zt(Nr.subscribe,Nr.getSnapshot),Cu=l=>new RegExp(`\\b(${l.join("|")})\\b`,"gi"),Pu=(l,n)=>l.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(n,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),Ou=(l,n)=>{let f=l.replace(/\s+/g,""),b=n.replace(/\s+/g,"");if(f===b)return 1;if(f.length<2||b.length<2)return 0;let h=new Map;for(let y=0;y<f.length-1;y++){let O=f.substring(y,y+2);h.set(O,(h.get(O)||0)+1)}let E=0;for(let y=0;y<b.length-1;y++){let O=b.substring(y,y+2),w=h.get(O)||0;w>0&&(h.set(O,w-1),E++)}return 2*E/(f.length+b.length-2)},Eu=()=>{let l=(0,rt.c)(6),n;l[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],l[0]=n):n=l[0];let[f,b]=je(n),[h,E]=je(!0),y,O;l[1]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{(async()=>{Ne.start("Fetch: All Playlists");let k=await Ko();Ne.end("Fetch: All Playlists"),b(k.filter(Bu)),E(!1)})()},O=[],l[1]=y,l[2]=O):(y=l[1],O=l[2]),Fe(y,O);let w;return l[3]!==h||l[4]!==f?(w={playlists:f,loading:h},l[3]=h,l[4]=f,l[5]=w):w=l[5],w},Ru=l=>{let n=(0,rt.c)(9),f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],n[0]=f):f=n[0];let[b,h]=je(f),E;n[1]===Symbol.for("react.memo_cache_sentinel")?(E={playCounts:new Map,durations:new Map,isrcs:new Map,releaseDates:new Map},n[1]=E):E=n[1];let[y,O]=je(E),[w,_]=je(!1),k,A;n[2]!==l?(k=()=>{if(!l){h([]);return}let I=new AbortController;return _(!0),(async()=>{try{Ne.start("LOAD ALL DATA"),Ne.start("Fetch: All Playlist tracks");let{items:M}=await Bo(l);if(Ne.end("Fetch: All Playlist tracks"),I.signal.aborted)return;let B=M;h(B),Ne.start("Dexie: Read from IndexedDB");let D=await vi.tracks.bulkGet(B.map(Fu));Ne.end("Dexie: Read from IndexedDB");let $=new Map(D.filter($u).map(Lu)),Y=B.filter(ne=>{let oe=$.get(ne.uri);return!oe||oe.trackPlayCount==null||oe.trackDuration==null||oe.trackIsrc==null||oe.albumReleaseDate==null}),Q=new Map,Z=new Map,H=new Map,ae=new Map;if($.forEach(ne=>{ne.trackPlayCount!=null&&Q.set(ne.trackUri,ne.trackPlayCount),ne.trackDuration!=null&&Z.set(ne.trackUri,ne.trackDuration),ne.trackIsrc!=null&&H.set(ne.trackUri,ne.trackIsrc),ne.albumReleaseDate!=null&&ae.set(ne.trackUri,ne.albumReleaseDate)}),Y.length>0){Ne.start("Fetch: GraphQL + WebAPI");let[ne,oe]=await Promise.all([Fo(Y.map(qu)),$o(Y.map(zu))]);if(Ne.end("Fetch: GraphQL + WebAPI"),I.signal.aborted)return;let re=[];Y.forEach(de=>{let he=ne.get(de.uri),ce=oe.get(de.uri),me=he?.duration?.totalMilliseconds??null,be=he?.playcount?Number(he.playcount):null,le=ce?.external_ids?.isrc??ce?.external_id?.find(Uu)?.id,ve=ce?.album?.date,ke=null;if(typeof ve=="string")ke=ve;else if(ve&&typeof ve=="object"){let{year:Ee,month:we,day:mt}=ve;Ee&&(ke=String(Ee),we&&(ke=ke+`-${String(we).padStart(2,"0")}`,mt&&(ke=ke+`-${String(mt).padStart(2,"0")}`)))}be!=null&&Q.set(de.uri,be),me!=null&&Z.set(de.uri,me),le!=null&&H.set(de.uri,le),ke!=null&&ae.set(de.uri,ke),re.push({trackUri:de.uri,trackName:de.name,trackDuration:me,trackPlayCount:be,trackIsrc:le,albumUri:de.album.uri,albumReleaseDate:ke})}),Ne.start("Dexie:Write to IndexedDB"),await vi.tracks.bulkPut(re),Ne.end("Dexie:Write to IndexedDB")}I.signal.aborted||(O({playCounts:Q,durations:Z,isrcs:H,releaseDates:ae}),_(!1),Ne.end("LOAD ALL DATA"))}catch(M){console.error("Failed to load tracks",M),I.signal.aborted||_(!1)}})(),()=>I.abort()},A=[l],n[2]=l,n[3]=k,n[4]=A):(k=n[3],A=n[4]),Fe(k,A);let P;return n[5]!==w||n[6]!==y||n[7]!==b?(P={tracks:b,metadata:y,loading:w,setTracks:h},n[5]=w,n[6]=y,n[7]=b,n[8]=P):P=n[8],P},Au=(l,n,f)=>{let{playCounts:b,durations:h,isrcs:E,releaseDates:y}=n,{defaultNormalizeWords:O,customNormalizeWords:w,groupSettings:_}=f;Ne.start("Dupe Algorithm: Compute");let k={exact:[],isrc:[],probable:[],likely:[],possible:[],maybe:[]};if(l.length===0)return k;let A=[...O,...w],P=Cu(A),I=l.map(B=>({track:B,normName:B.name.toLowerCase().trim(),normFuzzy:Pu(B.name,P),artists:new Set(B.artists.map(D=>D.name.toLowerCase())),isrc:E.get(B.uri),duration:h.get(B.uri),uid:B.uid})),L=new Set,M=(B,D)=>{if(B.length<2)return;let $=[...B].sort((Z,H)=>{let ae=String(y.get(Z.track.uri)||"9999"),ne=String(y.get(H.track.uri)||"9999");if(ae!==ne)return ae.localeCompare(ne);let oe=b.get(Z.track.uri)??0;return(b.get(H.track.uri)??0)-oe}),Y=$[0],Q=$.slice(1);k[D].push({mainTrack:Y.track,duplicates:Q.map(Z=>Z.track)});for(let Z of B)L.add(Z.uid)};if(_.exact){let B=new Map;for(let D of I){let $=B.get(D.track.uri)||[];$.push(D),B.set(D.track.uri,$)}for(let D of B.values())M(D,"exact");I=I.filter(D=>!L.has(D.uid))}if(_.isrc){let B=new Map;for(let D of I){if(!D.isrc)continue;let $=B.get(D.isrc)||[];$.push(D),B.set(D.isrc,$)}for(let D of B.values())M(D,"isrc");I=I.filter(D=>!L.has(D.uid))}if(_.probable){let B=new Map;for(let D of I){let $=B.get(D.normName)||[];$.push(D),B.set(D.normName,$)}B.forEach(D=>{if(D.length>=2){let $=new Set;for(let Y of D){if($.has(Y.uid))continue;let Q=D.filter(Z=>Y.uid===Z.uid||!$.has(Z.uid)&&Z.track.artists.some(H=>Y.artists.has(H.name.toLowerCase())));if(Q.length>1){M(Q,"probable");for(let Z of Q)$.add(Z.uid)}}}}),I=I.filter(D=>!L.has(D.uid))}if(_.likely){let B=new Map;for(let D of I){let $=B.get(D.normName)||[];$.push(D),B.set(D.normName,$)}B.forEach(D=>{if(D.length>=2){let $=new Set;for(let Y of D){if($.has(Y.uid))continue;let Q=Y.duration;if(Q==null)continue;let Z=D.filter(H=>Y.uid===H.uid||!$.has(H.uid)&&H.duration!=null&&Math.abs(Q-H.duration)<=5e3);if(Z.length>1){M(Z,"likely");for(let H of Z)$.add(H.uid)}}}}),I=I.filter(D=>!L.has(D.uid))}if(_.possible){let B=new Map;for(let D of I){let $=B.get(D.normFuzzy)||[];$.push(D),B.set(D.normFuzzy,$)}B.forEach(D=>{if(D.length>=2){let $=new Set;for(let Y of D){if($.has(Y.uid))continue;let Q=Y.duration;if(Q==null)continue;let Z=D.filter(H=>Y.uid===H.uid||!$.has(H.uid)&&H.duration!=null&&Math.abs(Q-H.duration)<=5e3);if(Z.length>1){M(Z,"possible");for(let H of Z)$.add(H.uid)}}}}),I=I.filter(D=>!L.has(D.uid))}if(_.maybe){I.sort((D,$)=>D.normFuzzy.localeCompare($.normFuzzy));let B=30;for(let D=0;D<I.length;D++){let $=I[D];if(L.has($.uid))continue;let Y=[$],Q=Math.min(D+B,I.length);for(let Z=D+1;Z<Q;Z++){let H=I[Z];if(!L.has(H.uid)){if($.normFuzzy[0]!==H.normFuzzy[0])break;Ou($.normFuzzy,H.normFuzzy)>=.8&&Y.push(H)}}Y.length>1&&M(Y,"maybe")}}return Ne.end("Dupe Algorithm: Compute"),k};function Tu(l){let n=(0,rt.c)(38),{track:f,playCounts:b,releaseDates:h}=l,E,y,O,w,_,k,A;if(n[0]!==b||n[1]!==h||n[2]!==f.album.name||n[3]!==f.artists||n[4]!==f.uri){let D=b.get(f.uri),$;n[12]!==h||n[13]!==f.uri?($=h.get(f.uri),n[12]=h,n[13]=f.uri,n[14]=$):$=n[14],E=$,k="track-details";let Y;n[15]!==f.artists?(Y=f.artists.map(ju).join(", ")||"N/A",n[15]=f.artists,n[16]=Y):Y=n[16];let Q;n[17]!==Y?(Q=ue("span",{className:"track-details__artists",children:["Artists: ",Y]}),n[17]=Y,n[18]=Q):Q=n[18];let Z=f.album.name||"N/A",H;n[19]!==Z?(H=ue("span",{className:"track-details__album",children:["Album: ",Z]}),n[19]=Z,n[20]=H):H=n[20],n[21]!==H||n[22]!==Q?(A=ue("div",{className:"track-details__line",children:[Q,H]}),n[21]=H,n[22]=Q,n[23]=A):A=n[23],_="track-details__line",y="track-details__playcount",O="Plays: ",w=D!=null?D.toLocaleString():"N/A",n[0]=b,n[1]=h,n[2]=f.album.name,n[3]=f.artists,n[4]=f.uri,n[5]=E,n[6]=y,n[7]=O,n[8]=w,n[9]=_,n[10]=k,n[11]=A}else E=n[5],y=n[6],O=n[7],w=n[8],_=n[9],k=n[10],A=n[11];let P;n[24]!==y||n[25]!==O||n[26]!==w?(P=ue("span",{className:y,children:[O,w]}),n[24]=y,n[25]=O,n[26]=w,n[27]=P):P=n[27];let I=E||"Unknown",L;n[28]!==I?(L=ue("span",{className:"track-details__playcount",children:["Released: ",I," "]}),n[28]=I,n[29]=L):L=n[29];let M;n[30]!==_||n[31]!==P||n[32]!==L?(M=ue("div",{className:_,children:[P,L]}),n[30]=_,n[31]=P,n[32]=L,n[33]=M):M=n[33];let B;return n[34]!==M||n[35]!==k||n[36]!==A?(B=ue("div",{className:k,children:[A,M]}),n[34]=M,n[35]=k,n[36]=A,n[37]=B):B=n[37],B}function ju(l){return l.name}function Du(l){let n=(0,rt.c)(19),{trackUri:f,duration:b}=l,{position:h,duration:E,isPlaying:y,togglePlay:O,handleSliderChange:w,handleSliderRelease:_}=yi(f,b??0),k=Nu,A;n[0]!==y?(A=y?F(Ae.React.pause,{}):F(Ae.React.play,{}),n[0]=y,n[1]=A):A=n[1];let P;n[2]!==A||n[3]!==O?(P=F("button",{className:"duplicate-group__playback-button",onClick:O,type:"button",children:A}),n[2]=A,n[3]=O,n[4]=P):P=n[4];let I=k(h),L;n[5]!==I?(L=F("span",{className:"slider-time",children:I}),n[5]=I,n[6]=L):L=n[6];let M=E||0,B=h||0,D;n[7]!==w||n[8]!==_||n[9]!==M||n[10]!==B?(D=F(An,{max:M,min:0,onChange:w,onRelease:_,step:1,value:B}),n[7]=w,n[8]=_,n[9]=M,n[10]=B,n[11]=D):D=n[11];let $=k(E),Y;n[12]!==$?(Y=F("span",{className:"slider-time",children:$}),n[12]=$,n[13]=Y):Y=n[13];let Q;return n[14]!==P||n[15]!==L||n[16]!==D||n[17]!==Y?(Q=ue("div",{className:"duplicate-group__playback-controls",children:[P,L,D,Y]}),n[14]=P,n[15]=L,n[16]=D,n[17]=Y,n[18]=Q):Q=n[18],Q}function Nu(l){if(l==null||l<0)return"N/A";let n=Math.floor(l/1e3);return`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`}function bi(l){let n=(0,rt.c)(27),{track:f,category:b,onDelete:h,isSource:E,metadata:y}=l,O=`duplicate-group__duplicate-item duplicate-group__item--${b}`,w=E&&"Source: ",_;n[0]!==w||n[1]!==f.name?(_=ue("span",{className:"duplicate-group__duplicate-name",children:[w,f.name]}),n[0]=w,n[1]=f.name,n[2]=_):_=n[2];let k;n[3]!==y.playCounts||n[4]!==y.releaseDates||n[5]!==f?(k=F(Tu,{playCounts:y.playCounts,releaseDates:y.releaseDates,track:f}),n[3]=y.playCounts,n[4]=y.releaseDates,n[5]=f,n[6]=k):k=n[6];let A;n[7]!==_||n[8]!==k?(A=ue("div",{className:"duplicate-group__duplicate-content",children:[_,k]}),n[7]=_,n[8]=k,n[9]=A):A=n[9];let P;n[10]!==b||n[11]!==h||n[12]!==f?(P=F("button",{className:"duplicate-group__delete-button",onClick:()=>h(b,f),type:"button",children:"Delete"}),n[10]=b,n[11]=h,n[12]=f,n[13]=P):P=n[13];let I;n[14]!==A||n[15]!==P?(I=ue("div",{className:"duplicate-group__duplicate-info",children:[A,P]}),n[14]=A,n[15]=P,n[16]=I):I=n[16];let L;n[17]!==y.durations||n[18]!==f.uri?(L=y.durations.get(f.uri),n[17]=y.durations,n[18]=f.uri,n[19]=L):L=n[19];let M;n[20]!==L||n[21]!==f.uri?(M=F("div",{className:"duplicate-group__actions",children:F(Du,{duration:L,trackUri:f.uri})}),n[20]=L,n[21]=f.uri,n[22]=M):M=n[22];let B;return n[23]!==O||n[24]!==I||n[25]!==M?(B=ue("div",{className:O,children:[I,M]}),n[23]=O,n[24]=I,n[25]=M,n[26]=B):B=n[26],B}function Iu(){let l=(0,rt.c)(10),n=wi(),f;l[0]!==n?(f=(_,k)=>Nr.update({...n,[_]:k}),l[0]=n,l[1]=f):f=l[1];let b=f,h;l[2]!==n||l[3]!==b?(h=(_,k,A)=>b(_,{...n[_],[k]:A}),l[2]=n,l[3]=b,l[4]=h):h=l[4];let E=h,y;l[5]!==n||l[6]!==E?(y=(_,k,A)=>ue("section",{className:"duplicate-settings__section",children:[F("h3",{className:"duplicate-settings__section-title",children:_}),F("div",{className:"duplicate-settings__options",children:Su.map(P=>F(pi,{desc:A[P],name:`${P}-${k}`,onChange:I=>E(k,P,!!I),option:{type:"toggle",name:P,desc:A[P],defaultVal:Tn[k][P]},value:n[k][P]},P))})]}),l[5]=n,l[6]=E,l[7]=y):y=l[7];let O=y,w;return l[8]!==O?(w=ue("div",{className:"duplicate-settings",children:[O("Display Groups","groupSettings",{exact:"Exact Duplicates",isrc:"ISRC Match",probable:"Same Title & Artist",likely:"Same Title & Duration",possible:"Similar Title & Duration",maybe:"Fuzzy Matches"}),O("Confirm Delete","confirmSettings",{exact:"Exact",isrc:"ISRC",probable:"Probable",likely:"Likely",possible:"Possible",maybe:"Maybe"})]}),l[8]=O,l[9]=w):w=l[9],w}function xi(l){let n=(0,rt.c)(34),{selectedPlaylist:f}=l,b=wi(),{playlists:h,loading:E}=Eu(),[y,O]=je(f),[w,_]=je("finder"),{tracks:k,metadata:A,loading:P,setTracks:I}=Ru(y?.uri),L=Au(k,A,b),M;n[0]===Symbol.for("react.memo_cache_sentinel")?(M=performance.now(),n[0]=M):M=n[0];let B=Re(M),D;n[1]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{let le=performance.now()-B.current;le>10&&console.log(`Render:React took ${le.toFixed(2)}ms to render`)},n[1]=D):D=n[1],Fe(D);let $;n[2]!==y||n[3]!==I||n[4]!==b.confirmSettings?($=async(le,ve)=>{let ke=async()=>{y&&(I(Ee=>Ee.filter(we=>we.uid!==ve.uid)),await Spicetify.Platform.PlaylistAPI.remove(y.uri,[{uid:ve.uid}]))};b.confirmSettings[le]?qo({titleText:"Remove Track",descriptionText:`Remove "${ve.name}"?`,confirmText:"Remove",onConfirm:()=>{ke()}}):await ke()},n[2]=y,n[3]=I,n[4]=b.confirmSettings,n[5]=$):$=n[5];let Y=$,Q;n[6]!==L||n[7]!==Y||n[8]!==A||n[9]!==b.groupSettings?(Q=(le,ve)=>{if(!b.groupSettings[le])return null;let ke=L[le];return ue("div",{className:"duplicate-group",children:[ue("div",{className:"duplicate-group__heading",children:[F("div",{className:"duplicate-group__heading-title",children:ve}),ue("div",{className:"duplicate-group__heading-length",children:[ke.length," found"]})]}),F("div",{className:"duplicate-group__list",children:ke.map(Ee=>ue("div",{className:`duplicate-group__item duplicate-group__item--${le}`,children:[F(bi,{category:le,isSource:!0,metadata:A,onDelete:Y,track:Ee.mainTrack}),F("div",{className:"duplicate-group__duplicates-list",children:Ee.duplicates.map(we=>F(bi,{category:le,metadata:A,onDelete:Y,track:we},we.uid))})]},Ee.mainTrack.uid))})]})},n[6]=L,n[7]=Y,n[8]=A,n[9]=b.groupSettings,n[10]=Q):Q=n[10];let Z=Q,H=w==="finder"?"Playlist Duplicate Finder":"Settings",ae;n[11]!==H?(ae=F("h1",{className:"modal__title",children:H}),n[11]=H,n[12]=ae):ae=n[12];let ne;n[13]!==w?(ne=()=>_(w==="finder"?"settings":"finder"),n[13]=w,n[14]=ne):ne=n[14];let oe;n[15]===Symbol.for("react.memo_cache_sentinel")?(oe=F(Ae.React.settings,{}),n[15]=oe):oe=n[15];let re;n[16]!==ne?(re=F("button",{className:"modal__button",onClick:ne,type:"button",children:oe}),n[16]=ne,n[17]=re):re=n[17];let de;n[18]===Symbol.for("react.memo_cache_sentinel")?(de=F("button",{className:"modal__button",onClick:Ku,type:"button",children:F(Ae.React.close,{size:18})}),n[18]=de):de=n[18];let he;n[19]!==re?(he=ue("div",{className:"modal__buttonContainer",children:[re,de]}),n[19]=re,n[20]=he):he=n[20];let ce;n[21]!==he||n[22]!==ae?(ce=ue("div",{className:"modal__header",children:[ae,he]}),n[21]=he,n[22]=ae,n[23]=ce):ce=n[23];let me;n[24]!==E||n[25]!==P||n[26]!==h||n[27]!==Z||n[28]!==y?.uri||n[29]!==w?(me=F("div",{className:"find-duplicates__content",children:w==="settings"?F(Iu,{}):ue(Pr,{children:[ue("div",{className:"find-duplicates__header",children:[F("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),F(Rn,{disabled:E||P,onChange:le=>O(h.find(ve=>ve.uri===le)??void 0),options:h.map(Mu),value:y?.uri??""})]}),P?F("div",{className:"find-duplicates__loading",children:F(UI.ProgressDots,{size:"medium"})}):ue(Pr,{children:[Z("exact","Exact URI Matches"),Z("isrc","Same ISRC"),Z("probable","Same Title + Shared Artist"),Z("likely","Same Title + Same Duration (\xB15s)"),Z("possible","Similar Title + Same Duration (\xB15s)"),Z("maybe","Maybe Duplicates (Very likely incorrect)")]})]})}),n[24]=E,n[25]=P,n[26]=h,n[27]=Z,n[28]=y?.uri,n[29]=w,n[30]=me):me=n[30];let be;return n[31]!==ce||n[32]!==me?(be=ue("div",{className:"find-duplicates",children:[ce,me]}),n[31]=ce,n[32]=me,n[33]=be):be=n[33],be}function Mu(l){return{value:l.uri,label:l.name}}function Ku(){return ht.hide()}function Bu(l){return l.type==="playlist"&&l.canAddTo}function Fu(l){return l.uri}function $u(l){return l!=null}function Lu(l){return[l.trackUri,l]}function qu(l){return l.album.uri}function zu(l){return l.uri}function Uu(l){return(l?.type||"").toLowerCase()==="isrc"}var ki=new CSSStyleSheet;ki.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-main-elevated);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-button);display:flex;flex-direction:column;gap:var(--fdp-gap);overflow:hidden;animation:fdp-fade-in .2s ease-out both}.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius)}.find-duplicates__header-label{font-weight:600;color:var(--fdp-text)}.find-duplicates__content{display:flex;flex-direction:column;gap:8px;padding:0 24px;overflow:scroll}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg)}.duplicate-group__heading{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fdp-text)}.duplicate-group__heading-length{padding:2px 8px;font-size:12px;color:var(--fdp-subtext);border:1px solid var(--fdp-border);border-radius:999px}.duplicate-group__list{display:flex;flex-direction:column;gap:10px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;border:1px solid var(--fdp-border);border-left:3px solid;border-radius:var(--fdp-radius);transition:background-color .12s ease,border-color .12s ease}.duplicate-group__item:hover{background:rgba(var(--spice-rgb-selected-row),.05);border-color:var(--fdp-border-strong)}.duplicate-group__item--exact{border-left-color:#e53935}.duplicate-group__item--isrc{border-left-color:#fb8c00}.duplicate-group__item--probable{border-left-color:#fdd835}.duplicate-group__item--likely{border-left-color:#43a047}.duplicate-group__item--possible{border-left-color:#1e88e5}.duplicate-group__item--maybe{border-left-color:#306}.duplicate-group__duplicate-info{display:flex;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex-direction:column;gap:6px;min-width:0}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:600;color:var(--fdp-text);white-space:nowrap}.track-details{font-size:.9rem;color:var(--fdp-subtext)}.track-details__line{display:flex;flex-wrap:wrap;gap:10px}.duplicate-group__playback-controls{display:flex;gap:10px;align-items:center}.duplicate-group__playback-button{width:32px;height:32px;color:var(--fdp-text);cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%}.duplicate-group__playback-button:hover{background:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}.slider-time{min-width:38px;font-size:12px;color:var(--fdp-subtext);text-align:center}.duplicate-group__delete-button{padding:6px 12px;font-size:.85rem;font-weight:600;color:#fff;cursor:pointer;background:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:999px}.duplicate-group__delete-button:hover{filter:brightness(1.05)}.duplicate-settings__section{margin-bottom:24px}.duplicate-settings__section-title{padding-bottom:6px;margin-bottom:12px;font-weight:600;border-bottom:1px solid var(--fdp-border)}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:10px}.find-duplicates :is(button,[role=button],input,select):focus-visible{outline:none;border-color:var(--fdp-accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--fdp-accent),transparent 60%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(3px)}to{opacity:1;transform:none}}");var Si=ki;document.adoptedStyleSheets.push(Si);var Hu=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:Ae.HTML.duplicate,onClick:async(l,n,f)=>{let b=wr(l.props),h=b.uri,E=b.name,y=Spicetify.URI.from(h)?.type,O={uri:h,name:E||(await Spicetify.Platform.PlaylistAPI.getMetadata(h,{}))?.name||"",type:y||""};ht({title:"Find Duplicates",content:F(xi,{selectedPlaylist:O}),isLarge:!0,template:!1})},divider:"after",shouldAdd:(l,n,f)=>{let b=wr(l),h=Spicetify.URI.from(b.uri)?.type;return h===Spicetify.URI.Type.PLAYLIST||h===Spicetify.URI.Type.PLAYLIST_V2}});Hu.register();
