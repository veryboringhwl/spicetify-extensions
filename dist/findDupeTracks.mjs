await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Ja=Object.create;var gr=Object.defineProperty;var Va=Object.getOwnPropertyDescriptor;var es=Object.getOwnPropertyNames;var ts=Object.getPrototypeOf,rs=Object.prototype.hasOwnProperty;var ns=(f,n)=>()=>(f&&(n=f(f=0)),n);var os=(f,n)=>()=>(n||f((n={exports:{}}).exports,n),n.exports),is=(f,n)=>{for(var l in n)gr(f,l,{get:n[l],enumerable:!0})},xo=(f,n,l,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of es(n))!rs.call(f,d)&&d!==l&&gr(f,d,{get:()=>n[d],enumerable:!(b=Va(n,d))||b.enumerable});return f};var De=(f,n,l)=>(l=f!=null?Ja(ts(f)):{},xo(n||!f||!f.__esModule?gr(l,"default",{value:f,enumerable:!0}):l,f)),as=f=>xo(gr({},"__esModule",{value:!0}),f);var ko={};is(ko,{Children:()=>ss,Component:()=>us,Fragment:()=>cs,Profiler:()=>ls,PureComponent:()=>fs,StrictMode:()=>ps,Suspense:()=>ds,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>hs,act:()=>ms,cloneElement:()=>ys,createContext:()=>vs,createElement:()=>gs,createFactory:()=>bs,createRef:()=>_s,default:()=>Ds,forwardRef:()=>ws,isValidElement:()=>wn,lazy:()=>xs,memo:()=>we,startTransition:()=>ks,unstable_act:()=>Ss,useCallback:()=>Cs,useContext:()=>Ps,useDebugValue:()=>Os,useDeferredValue:()=>Es,useEffect:()=>Ke,useId:()=>xn,useImperativeHandle:()=>Rs,useInsertionEffect:()=>js,useLayoutEffect:()=>As,useMemo:()=>kn,useReducer:()=>Ts,useRef:()=>Te,useState:()=>Ee,useSyncExternalStore:()=>qt,useTransition:()=>Ns,version:()=>Is});var ss,us,cs,ls,fs,ps,ds,hs,ms,ys,vs,gs,bs,_s,ws,wn,xs,we,ks,Ss,Cs,Ps,Os,Es,Ke,xn,Rs,js,As,kn,Ts,Te,Ee,qt,Ns,Is,Ds,Re=ns(()=>{({Children:ss,Component:us,Fragment:cs,Profiler:ls,PureComponent:fs,StrictMode:ps,Suspense:ds,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:hs,act:ms,cloneElement:ys,createContext:vs,createElement:gs,createFactory:bs,createRef:_s,forwardRef:ws,isValidElement:wn,lazy:xs,memo:we,startTransition:ks,unstable_act:Ss,useCallback:Cs,useContext:Ps,useDebugValue:Os,useDeferredValue:Es,useEffect:Ke,useId:xn,useImperativeHandle:Rs,useInsertionEffect:js,useLayoutEffect:As,useMemo:kn,useReducer:Ts,useRef:Te,useState:Ee,useSyncExternalStore:qt,useTransition:Ns,version:Is}=Spicetify.React),Ds=Spicetify.React});var Ne=os((Zu,Ro)=>{"use no memo";"use strict";var Ms=Object.create,wr=Object.defineProperty,Ks=Object.getOwnPropertyDescriptor,zs=Object.getOwnPropertyNames,Bs=Object.getPrototypeOf,qs=Object.prototype.hasOwnProperty,$s=(f,n)=>{for(var l in n)wr(f,l,{get:n[l],enumerable:!0})},Oo=(f,n,l,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of zs(n))!qs.call(f,d)&&d!==l&&wr(f,d,{get:()=>n[d],enumerable:!(b=Ks(n,d))||b.enumerable});return f},Fs=(f,n,l)=>(l=f!=null?Ms(Bs(f)):{},Oo(n||!f||!f.__esModule?wr(l,"default",{value:f,enumerable:!0}):l,f)),Ls=f=>Oo(wr({},"__esModule",{value:!0}),f),Eo={};$s(Eo,{$dispatcherGuard:()=>Ys,$makeReadOnly:()=>Ws,$reset:()=>Gs,$structuralCheck:()=>eu,c:()=>Zs,clearRenderCounterRegistry:()=>Qs,renderCounterRegistry:()=>Ft,useRenderCounter:()=>Vs});Ro.exports=Ls(Eo);var Ct=Fs((Re(),as(ko))),{useRef:Us,useEffect:Hs,isValidElement:kt}=Ct,So,Sn=(So=Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?So:Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cn=Symbol.for("react.memo_cache_sentinel"),Co,Zs=typeof((Co=Ct.__COMPILER_RUNTIME)==null?void 0:Co.c)=="function"?Ct.__COMPILER_RUNTIME.c:function(n){return Ct.useMemo(()=>{let l=new Array(n);for(let b=0;b<n;b++)l[b]=Cn;return l[Cn]=!0,l},[])},_r={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(f=>{_r[f]=()=>{throw new Error(`[React] Unexpected React hook call (${f}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var $t=null;_r.useMemoCache=f=>{if($t==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return $t.useMemoCache(f)};function br(f){return Sn.ReactCurrentDispatcher.current=f,Sn.ReactCurrentDispatcher.current}var St=[];function Ys(f){let n=Sn.ReactCurrentDispatcher.current;if(f===0){if(St.push(n),St.length===1&&($t=n),n===_r)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");br(_r)}else if(f===1){let l=St.pop();if(l==null)throw new Error("React Compiler internal error: unexpected null in guard stack");St.length===0&&($t=null),br(l)}else if(f===2)St.push(n),br($t);else if(f===3){let l=St.pop();if(l==null)throw new Error("React Compiler internal error: unexpected null in guard stack");br(l)}else throw new Error("React Compiler internal error: unreachable block"+f)}function Gs(f){for(let n=0;n<f.length;n++)f[n]=Cn}function Ws(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Ft=new Map;function Qs(){for(let f of Ft.values())f.forEach(n=>{n.count=0})}function Xs(f,n){let l=Ft.get(f);l==null&&(l=new Set,Ft.set(f,l)),l.add(n)}function Js(f,n){let l=Ft.get(f);l?.delete(n)}function Vs(f){let n=Us(null);n.current!=null&&(n.current.count+=1),Hs(()=>{if(n.current==null){let l={count:0};Xs(f,l),n.current=l}return()=>{n.current!==null&&Js(f,n.current)}})}var Po=new Set;function eu(f,n,l,b,d,P){function v(w,x,T,E){let K=`${b}:${P} [${d}] ${l}${T} changed from ${w} to ${x} at depth ${E}`;Po.has(K)||(Po.add(K),console.error(K))}let O=2;function _(w,x,T,E){if(!(E>O)){if(w===x)return;if(typeof w!=typeof x)v(`type ${typeof w}`,`type ${typeof x}`,T,E);else if(typeof w=="object"){let K=Array.isArray(w),$=Array.isArray(x);if(w===null&&x!==null)v("null",`type ${typeof x}`,T,E);else if(x===null)v(`type ${typeof w}`,"null",T,E);else if(w instanceof Map)if(!(x instanceof Map))v("Map instance","other value",T,E);else if(w.size!==x.size)v(`Map instance with size ${w.size}`,`Map instance with size ${x.size}`,T,E);else for(let[I,Z]of w)x.has(I)?_(Z,x.get(I),`${T}.get(${I})`,E+1):v(`Map instance with key ${I}`,`Map instance without key ${I}`,T,E);else if(x instanceof Map)v("other value","Map instance",T,E);else if(w instanceof Set)if(!(x instanceof Set))v("Set instance","other value",T,E);else if(w.size!==x.size)v(`Set instance with size ${w.size}`,`Set instance with size ${x.size}`,T,E);else for(let I of x)w.has(I)||v(`Set instance without element ${I}`,`Set instance with element ${I}`,T,E);else if(x instanceof Set)v("other value","Set instance",T,E);else if(K||$)if(K!==$)v(`type ${K?"array":"object"}`,`type ${$?"array":"object"}`,T,E);else if(w.length!==x.length)v(`array with length ${w.length}`,`array with length ${x.length}`,T,E);else for(let I=0;I<w.length;I++)_(w[I],x[I],`${T}[${I}]`,E+1);else if(kt(w)||kt(x))kt(w)!==kt(x)?v(`type ${kt(w)?"React element":"object"}`,`type ${kt(x)?"React element":"object"}`,T,E):w.type!==x.type?v(`React element of type ${w.type}`,`React element of type ${x.type}`,T,E):_(w.props,x.props,`[props of ${T}]`,E+1);else{for(let I in x)I in w||v(`object without key ${I}`,`object with key ${I}`,T,E);for(let I in w)I in x?_(w[I],x[I],`${T}.${I}`,E+1):v(`object with key ${I}`,`object without key ${I}`,T,E)}}else{if(typeof w=="function")return;isNaN(w)||isNaN(x)?isNaN(w)!==isNaN(x)&&v(`${isNaN(w)?"NaN":"non-NaN value"}`,`${isNaN(x)?"NaN":"non-NaN value"}`,T,E):w!==x&&v(w,x,T,E)}}}_(f,n,"",0)}});function _n(f){if(!f)return{};let n={},l=(b,d)=>{if(!(!b||typeof b!="object"))for(let P in b)Object.hasOwn(b,P)&&d[P]===void 0&&(d[P]=b[P])};return l(f,n),l(f.item,n),l(f.reference,n),n}var jo=De(Ne());var{Fragment:Pn,jsx:M,jsxs:pe}=Spicetify.ReactJSX;var xr={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},tu=f=>{let{path:n,size:l}=xr[f],b=d=>{let P=(0,jo.c)(4),{size:v,fill:O}=d,_=v===void 0?l:v,w=O===void 0?"currentColor":O,x;P[0]===Symbol.for("react.memo_cache_sentinel")?(x=M("path",{d:n}),P[0]=x):x=P[0];let T;return P[1]!==w||P[2]!==_?(T=M("svg",{fill:w,height:_,role:"img",viewBox:`0 0 ${l} ${l}`,width:_,children:x}),P[1]=w,P[2]=_,P[3]=T):T=P[3],T};return b.defaultProps={size:l,fill:"currentColor"},b},{raw:ru,react:nu,html:ou}=Object.keys(xr).reduce((f,n)=>(f.raw[n]=xr[n].path,f.react[n]=tu(n),f.html[n]=`<path d="${xr[n].path}"/>`,f),{raw:{},react:{},html:{}}),Pe={React:nu,HTML:ou,RAW:ru};var No=De(Ne());Re();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Qu,createPortal:Xu,createRoot:kr,findDOMNode:Ju,flushSync:Vu,hydrate:ec,hydrateRoot:tc,render:rc,unmountComponentAtNode:nc,unstable_batchedUpdates:oc,unstable_renderSubtreeIntoContainer:ic,version:ac}=Spicetify.ReactDOM,sc=Spicetify.ReactDOM;var Ao=new CSSStyleSheet;Ao.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var To=Ao;document.adoptedStyleSheets.push(To);var Lt=null,On="popup-modal-container",En=()=>{let f=document.getElementById(On);Lt&&(Lt.unmount(),Lt=null),f&&f.remove(),document.body.style.overflow="auto"},iu=we(f=>{let n=(0,No.c)(44),{title:l,content:b,isLarge:d,buttons:P,icon:v,template:O,onClose:_}=f,w=Te(null),x,T;n[0]!==_?(x=()=>{document.body.style.overflow="hidden";let H=W=>{W.key==="Escape"&&(W.preventDefault(),_())};return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},T=[_],n[0]=_,n[1]=x,n[2]=T):(x=n[1],T=n[2]),Ke(x,T);let E;n[3]!==_?(E=()=>{_()},n[3]=_,n[4]=E):E=n[4];let K=E,$;n[5]!==K?($=H=>{H.target===w.current&&K()},n[5]=K,n[6]=$):$=n[6];let I=$,Z;n[7]!==b?(Z=()=>wn(b)?b:typeof b=="function"?M(b,{}):b,n[7]=b,n[8]=Z):Z=n[8];let Y=Z;if(O===!0){let H=`modal__container${d?" modal__container--large":""}`,W;n[9]!==v?(W=v&&M("div",{className:"modal__icon",children:v}),n[9]=v,n[10]=W):W=n[10];let ee;n[11]!==l?(ee=l&&M("h1",{className:"modal__title",children:l}),n[11]=l,n[12]=ee):ee=n[12];let te;n[13]!==W||n[14]!==ee?(te=pe("div",{className:"modal__titleContainer",children:[W,ee]}),n[13]=W,n[14]=ee,n[15]=te):te=n[15];let F;n[16]===Symbol.for("react.memo_cache_sentinel")?(F=M(Pe.React.close,{size:18}),n[16]=F):F=n[16];let ae;n[17]!==K?(ae=M(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:M("button",{className:"modal__button modal__button--close",onClick:K,children:F})}),n[17]=K,n[18]=ae):ae=n[18];let re;n[19]!==P||n[20]!==ae?(re=pe("div",{className:"modal__buttonContainer",children:[P,ae]}),n[19]=P,n[20]=ae,n[21]=re):re=n[21];let ne;n[22]!==re||n[23]!==te?(ne=pe("div",{className:"modal__header",children:[te,re]}),n[22]=re,n[23]=te,n[24]=ne):ne=n[24];let le;n[25]!==Y?(le=Y(),n[25]=Y,n[26]=le):le=n[26];let he;n[27]!==le?(he=M("div",{className:"modal__content",children:le}),n[27]=le,n[28]=he):he=n[28];let ye;n[29]!==ne||n[30]!==he||n[31]!==H?(ye=pe("div",{className:H,children:[ne,he]}),n[29]=ne,n[30]=he,n[31]=H,n[32]=ye):ye=n[32];let ke;return n[33]!==I||n[34]!==ye?(ke=M("div",{className:"modal",onClick:I,ref:w,children:ye}),n[33]=I,n[34]=ye,n[35]=ke):ke=n[35],ke}let se=`modal__container${d?" modal__container--large":""}`,oe;n[36]!==Y?(oe=Y(),n[36]=Y,n[37]=oe):oe=n[37];let ie;n[38]!==se||n[39]!==oe?(ie=M("div",{className:se,children:oe}),n[38]=se,n[39]=oe,n[40]=ie):ie=n[40];let ue;return n[41]!==I||n[42]!==ie?(ue=M("div",{className:"modal",onClick:I,ref:w,children:ie}),n[41]=I,n[42]=ie,n[43]=ue):ue=n[43],ue}),ft=f=>{document.getElementById(On)&&En();let n=document.createElement("div");n.id=On,document.body.appendChild(n),Lt=kr(n),Lt.render(M(iu,{...f,onClose:En}))};ft.hide=En;var et=De(Ne());var au=(f,...n)=>({$t:setTimeout(f,0,...n),[Symbol.dispose](){clearTimeout(this.t)}}),su=Object.create,Do=Object.defineProperty,uu=Object.getOwnPropertyDescriptor,cu=Object.getOwnPropertyNames,lu=Object.getPrototypeOf,fu=Object.prototype.hasOwnProperty,pu=(f,n)=>()=>(n||f((n={exports:{}}).exports,n),n.exports),du=(f,n,l,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of cu(n))!fu.call(f,d)&&d!==l&&Do(f,d,{get:()=>n[d],enumerable:!(b=uu(n,d))||b.enumerable});return f},hu=(f,n,l)=>(l=f!=null?su(lu(f)):{},du(n||!f||!f.__esModule?Do(l,"default",{value:f,enumerable:!0}):l,f)),mu=pu((f,n)=>{(function(l,b){typeof f=="object"&&typeof n<"u"?n.exports=b():typeof define=="function"&&define.amd?define(b):(l=typeof globalThis<"u"?globalThis:l||self,l.Dexie=b())})(f,(function(){"use strict";var l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},l(t,e)};function b(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var d=function(){return d=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d.apply(this,arguments)};function P(t,e,r){if(r||arguments.length===2)for(var o=0,i=e.length,a;o<i;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return t.concat(a||Array.prototype.slice.call(e))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,O=Object.keys,_=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function w(t,e){return typeof e!="object"||O(e).forEach(function(r){t[r]=e[r]}),t}var x=Object.getPrototypeOf,T={}.hasOwnProperty;function E(t,e){return T.call(t,e)}function K(t,e){typeof e=="function"&&(e=e(x(t))),(typeof Reflect>"u"?O:Reflect.ownKeys)(e).forEach(function(r){I(t,r,e[r])})}var $=Object.defineProperty;function I(t,e,r,o){$(t,e,w(r&&E(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function Z(t){return{from:function(e){return t.prototype=Object.create(e.prototype),I(t.prototype,"constructor",t),{extend:K.bind(null,t.prototype)}}}}var Y=Object.getOwnPropertyDescriptor;function se(t,e){var r=Y(t,e),o;return r||(o=x(t))&&se(o,e)}var oe=[].slice;function ie(t,e,r){return oe.call(t,e,r)}function ue(t,e){return e(t)}function H(t){if(!t)throw new Error("Assertion Failed")}function W(t){v.setImmediate?au(t):setTimeout(t,0)}function ee(t,e){return t.reduce(function(r,o,i){var a=e(o,i);return a&&(r[a[0]]=a[1]),r},{})}function te(t,e){if(typeof e=="string"&&E(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var r=[],o=0,i=e.length;o<i;++o){var a=te(t,e[o]);r.push(a)}return r}var s=e.indexOf(".");if(s!==-1){var u=t[e.substr(0,s)];return u==null?void 0:te(u,e.substr(s+1))}}function F(t,e,r){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){H(typeof r!="string"&&"length"in r);for(var o=0,i=e.length;o<i;++o)F(t,e[o],r[o])}else{var a=e.indexOf(".");if(a!==-1){var s=e.substr(0,a),u=e.substr(a+1);if(u==="")r===void 0?_(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=r;else{var c=t[s];(!c||!E(t,s))&&(c=t[s]={}),F(c,u,r)}}else r===void 0?_(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function ae(t,e){typeof e=="string"?F(t,e,void 0):"length"in e&&[].map.call(e,function(r){F(t,r,void 0)})}function re(t){var e={};for(var r in t)E(t,r)&&(e[r]=t[r]);return e}var ne=[].concat;function le(t){return ne.apply([],t)}var he="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return v[t]}),ye=new Set(he.map(function(t){return v[t]}));function ke(t){var e={};for(var r in t)if(E(t,r)){var o=t[r];e[r]=!o||typeof o!="object"||ye.has(o.constructor)?o:ke(o)}return e}function Er(t){for(var e in t)if(E(t,e))return!1;return!0}var pt=null;function je(t){pt=new WeakMap;var e=Rr(t);return pt=null,e}function Rr(t){if(!t||typeof t!="object")return t;var e=pt.get(t);if(e)return e;if(_(t)){e=[],pt.set(t,e);for(var r=0,o=t.length;r<o;++r)e.push(Rr(t[r]))}else if(ye.has(t.constructor))e=t;else{var i=x(t);e=i===Object.prototype?{}:Object.create(i),pt.set(t,e);for(var a in t)E(t,a)&&(e[a]=Rr(t[a]))}return e}var Si={}.toString;function jr(t){return Si.call(t).slice(8,-1)}var Ar=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ci=typeof Ar=="symbol"?function(t){var e;return t!=null&&(e=t[Ar])&&e.apply(t)}:function(){return null};function tt(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),r>=0}var dt={};function Le(t){var e,r,o,i;if(arguments.length===1){if(_(t))return t.slice();if(this===dt&&typeof t=="string")return[t];if(i=Ci(t)){for(r=[];o=i.next(),!o.done;)r.push(o.value);return r}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var Tr=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],In=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Nr=Pi.concat(In),Oi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ht(t,e){this.name=t,this.message=e}Z(ht).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Dn(t,e){return t+". Errors: "+Object.keys(e).map(function(r){return e[r].toString()}).filter(function(r,o,i){return i.indexOf(r)===o}).join(`
`)}function Ut(t,e,r,o){this.failures=e,this.failedKeys=o,this.successCount=r,this.message=Dn(t,e)}Z(Ut).from(ht);function mt(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(r){return e[r]}),this.failuresByPos=e,this.message=Dn(t,this.failures)}Z(mt).from(ht);var Ir=Nr.reduce(function(t,e){return t[e]=e+"Error",t},{}),Ei=ht,X=Nr.reduce(function(t,e){var r=e+"Error";function o(i,a){this.name=r,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Oi[e]||r,this.inner=null)}return Z(o).from(Ei),t[e]=o,t},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Mn=In.reduce(function(t,e){return t[e+"Error"]=X[e],t},{});function Ri(t,e){if(!t||t instanceof ht||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Mn[t.name])return t;var r=new Mn[t.name](e||t.message,t);return"stack"in t&&I(r,"stack",{get:function(){return this.inner.stack}}),r}var Ht=Nr.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=X[e]),t},{});Ht.ModifyError=Ut,Ht.DexieError=ht,Ht.BulkError=mt;function ve(){}function Pt(t){return t}function ji(t,e){return t==null||t===Pt?e:function(r){return e(t(r))}}function rt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Ai(t,e){return t===ve?e:function(){var r=t.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?rt(o,this.onsuccess):o),i&&(this.onerror=this.onerror?rt(i,this.onerror):i),a!==void 0?a:r}}function Ti(t,e){return t===ve?e:function(){t.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?rt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?rt(o,this.onerror):o)}}function Ni(t,e){return t===ve?e:function(r){var o=t.apply(this,arguments);w(r,o);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?rt(i,this.onsuccess):i),a&&(this.onerror=this.onerror?rt(a,this.onerror):a),o===void 0?s===void 0?void 0:s:w(o,s)}}function Ii(t,e){return t===ve?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Dr(t,e){return t===ve?e:function(){var r=t.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then(function(){return e.apply(o,a)})}return e.apply(this,arguments)}}var ze=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kn(t,e){ze=t}var Ot={},zn=100,Mr=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,x(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,x(e),t]})(),Bn=Mr[0],qn=Mr[1],Di=Mr[2],Mi=qn&&qn.then,nt=Bn&&Bn.constructor,Kr=!!Di;function Ki(){queueMicrotask(Bi)}var Et=function(t,e){Rt.push([t,e]),Zt&&(Ki(),Zt=!1)},zr=!0,Zt=!0,ot=[],Yt=[],Br=Pt,Ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:ve},G=Ze,Rt=[],it=0,Gt=[];function q(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=G;if(typeof t!="function"){if(t!==Ot)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&$r(this,this._value);return}this._state=null,this._value=null,++e.ref,Fn(this,t)}var qr={get:function(){var t=G,e=Jt;function r(o,i){var a=this,s=!t.global&&(t!==G||e!==Jt),u=s&&!Ge(),c=new q(function(p,y){Fr(a,new $n(Hn(o,t,s,u),Hn(i,t,s,u),p,y,t))});return this._consoleTask&&(c._consoleTask=this._consoleTask),c}return r.prototype=Ot,r},set:function(t){I(this,"then",t&&t.prototype===Ot?qr:{get:function(){return t},set:qr.set})}};K(q.prototype,{then:qr,_then:function(t,e){Fr(this,new $n(null,null,t,e,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],r=arguments[1];return typeof e=="function"?this.then(null,function(o){return o instanceof e?r(o):Wt(o)}):this.then(null,function(o){return o&&o.name===e?r(o):Wt(o)})},finally:function(t){return this.then(function(e){return q.resolve(t()).then(function(){return e})},function(e){return q.resolve(t()).then(function(){return Wt(e)})})},timeout:function(t,e){var r=this;return t<1/0?new q(function(o,i){var a=setTimeout(function(){return i(new X.Timeout(e))},t);r.then(o,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I(q.prototype,Symbol.toStringTag,"Dexie.Promise"),Ze.env=Un();function $n(t,e,r,o,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=r,this.reject=o,this.psd=i}K(q,{all:function(){var t=Le.apply(null,arguments).map(Vt);return new q(function(e,r){t.length===0&&e([]);var o=t.length;t.forEach(function(i,a){return q.resolve(i).then(function(s){t[a]=s,--o||e(t)},r)})})},resolve:function(t){if(t instanceof q)return t;if(t&&typeof t.then=="function")return new q(function(r,o){t.then(r,o)});var e=new q(Ot,!0,t);return e},reject:Wt,race:function(){var t=Le.apply(null,arguments).map(Vt);return new q(function(e,r){t.map(function(o){return q.resolve(o).then(e,r)})})},PSD:{get:function(){return G},set:function(t){return G=t}},totalEchoes:{get:function(){return Jt}},newPSD:Ye,usePSD:at,scheduler:{get:function(){return Et},set:function(t){Et=t}},rejectionMapper:{get:function(){return Br},set:function(t){Br=t}},follow:function(t,e){return new q(function(r,o){return Ye(function(i,a){var s=G;s.unhandleds=[],s.onunhandled=a,s.finalize=rt(function(){var u=this;qi(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},s.finalize),t()},e,r,o)})}}),nt&&(nt.allSettled&&I(q,"allSettled",function(){var t=Le.apply(null,arguments).map(Vt);return new q(function(e){t.length===0&&e([]);var r=t.length,o=new Array(r);t.forEach(function(i,a){return q.resolve(i).then(function(s){return o[a]={status:"fulfilled",value:s}},function(s){return o[a]={status:"rejected",reason:s}}).then(function(){return--r||e(o)})})})}),nt.any&&typeof AggregateError<"u"&&I(q,"any",function(){var t=Le.apply(null,arguments).map(Vt);return new q(function(e,r){t.length===0&&r(new AggregateError([]));var o=t.length,i=new Array(o);t.forEach(function(a,s){return q.resolve(a).then(function(u){return e(u)},function(u){i[s]=u,--o||r(new AggregateError(i))})})})}),nt.withResolvers&&(q.withResolvers=nt.withResolvers));function Fn(t,e){try{e(function(r){if(t._state===null){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&yt();r&&typeof r.then=="function"?Fn(t,function(i,a){r instanceof q?r._then(i,a):r.then(i,a)}):(t._state=!0,t._value=r,Ln(t)),o&&vt()}},$r.bind(null,t))}catch(r){$r(t,r)}}function $r(t,e){if(Yt.push(e),t._state===null){var r=t._lib&&yt();e=Br(e),t._state=!1,t._value=e,$i(t),Ln(t),r&&vt()}}function Ln(t){var e=t._listeners;t._listeners=[];for(var r=0,o=e.length;r<o;++r)Fr(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),it===0&&(++it,Et(function(){--it===0&&Lr()},[]))}function Fr(t,e){if(t._state===null){t._listeners.push(e);return}var r=t._state?e.onFulfilled:e.onRejected;if(r===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++it,Et(zi,[r,t,e])}function zi(t,e,r){try{var o,i=e._value;!e._state&&Yt.length&&(Yt=[]),o=ze&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),!e._state&&Yt.indexOf(i)===-1&&Fi(e),r.resolve(o)}catch(a){r.reject(a)}finally{--it===0&&Lr(),--r.psd.ref||r.psd.finalize()}}function Bi(){at(Ze,function(){yt()&&vt()})}function yt(){var t=zr;return zr=!1,Zt=!1,t}function vt(){var t,e,r;do for(;Rt.length>0;)for(t=Rt,Rt=[],r=t.length,e=0;e<r;++e){var o=t[e];o[0].apply(null,o[1])}while(Rt.length>0);zr=!0,Zt=!0}function Lr(){var t=ot;ot=[],t.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var e=Gt.slice(0),r=e.length;r;)e[--r]()}function qi(t){function e(){t(),Gt.splice(Gt.indexOf(e),1)}Gt.push(e),++it,Et(function(){--it===0&&Lr()},[])}function $i(t){ot.some(function(e){return e._value===t._value})||ot.push(t)}function Fi(t){for(var e=ot.length;e;)if(ot[--e]._value===t._value){ot.splice(e,1);return}}function Wt(t){return new q(Ot,!1,t)}function ge(t,e){var r=G;return function(){var o=yt(),i=G;try{return We(r,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{We(i,!1),o&&vt()}}}var xe={awaits:0,echoes:0,id:0},Li=0,Qt=[],Xt=0,Jt=0,Ui=0;function Ye(t,e,r,o){var i=G,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Ui,Ze.env,a.env=Kr?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},e&&w(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=at(a,t,r,o);return a.ref===0&&a.finalize(),s}function gt(){return xe.id||(xe.id=++Li),++xe.awaits,xe.echoes+=zn,xe.id}function Ge(){return xe.awaits?(--xe.awaits===0&&(xe.id=0),xe.echoes=xe.awaits*zn,!0):!1}(""+Mi).indexOf("[native code]")===-1&&(gt=Ge=ve);function Vt(t){return xe.echoes&&t&&t.constructor===nt?(gt(),t.then(function(e){return Ge(),e},function(e){return Ge(),_e(e)})):t}function Hi(t){++Jt,(!xe.echoes||--xe.echoes===0)&&(xe.echoes=xe.awaits=xe.id=0),Qt.push(G),We(t,!0)}function Zi(){var t=Qt[Qt.length-1];Qt.pop(),We(t,!1)}function We(t,e){var r=G;if((e?xe.echoes&&(!Xt++||t!==G):Xt&&(!--Xt||t!==G))&&queueMicrotask(e?Hi.bind(null,t):Zi),t!==G&&(G=t,r===Ze&&(Ze.env=Un()),Kr)){var o=Ze.env.Promise,i=t.env;(r.global||t.global)&&(Object.defineProperty(v,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))}}function Un(){var t=v.Promise;return Kr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function at(t,e,r,o,i){var a=G;try{return We(t,!0),e(r,o,i)}finally{We(a,!1)}}function Hn(t,e,r,o){return typeof t!="function"?t:function(){var i=G;r&&gt(),We(e,!0);try{return t.apply(this,arguments)}finally{We(i,!1),o&&queueMicrotask(Ge)}}}function Ur(t){Promise===nt&&xe.echoes===0?Xt===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}var _e=q.reject;function Hr(t,e,r,o){if(!t.idbdb||!t._state.openComplete&&!G.letThrough&&!t._vip){if(t._state.openComplete)return _e(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return _e(new X.DatabaseClosed);t.open().catch(ve)}return t._state.dbReadyPromise.then(function(){return Hr(t,e,r,o)})}else{var i=t._createTransaction(e,r,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===Ir.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Hr(t,e,r,o)})):_e(a)}return i._promise(e,function(a,s){return Ye(function(){return G.trans=i,o(a,s,i)})}).then(function(a){if(e==="readwrite")try{i.idbtrans.commit()}catch{}return e==="readonly"?a:i._completion.then(function(){return a})})}}var Zn="4.2.1",st="\uFFFF",Zr=-1/0,Ue="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Yn="String expected.",bt=[],er="__dbnames",Yr="readonly",Gr="readwrite";function ut(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Gn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tr(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=je(e),delete e[t]),e}:function(e){return e}}function Wn(){throw X.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function de(t,e){try{var r=Qn(t),o=Qn(e);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Gi(Xn(t),Xn(e));case"Array":return Yi(t,e)}}catch{}return NaN}function Yi(t,e){for(var r=t.length,o=e.length,i=r<o?r:o,a=0;a<i;++a){var s=de(t[a],e[a]);if(s!==0)return s}return r===o?0:r<o?-1:1}function Gi(t,e){for(var r=t.length,o=e.length,i=r<o?r:o,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return r===o?0:r<o?-1:1}function Qn(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var r=jr(t);return r==="ArrayBuffer"?"binary":r}function Xn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function rr(t,e,r){var o=t.schema.yProps;return o?(e&&r.numFailures>0&&(e=e.filter(function(i,a){return!r.failures[a]})),Promise.all(o.map(function(i){var a=i.updatesTable;return e?t.db.table(a).where("k").anyOf(e).delete():t.db.table(a).clear()})).then(function(){return r})):r}var jt=(function(){function t(e){this["@@propmod"]=e}return t.prototype.execute=function(e){var r,o=this["@@propmod"];if(o.add!==void 0){var i=o.add;if(_(i))return P(P([],_(e)?e:[],!0),i,!0).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(o.remove!==void 0){var a=o.remove;if(_(a))return _(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var s=(r=o.replacePrefix)===null||r===void 0?void 0:r[0];return s&&typeof e=="string"&&e.startsWith(s)?o.replacePrefix[1]+e.substring(s.length):e},t})();function Jn(t,e){for(var r=O(e),o=r.length,i=!1,a=0;a<o;++a){var s=r[a],u=e[s],c=te(t,s);u instanceof jt?(F(t,s,u.execute(c)),i=!0):c!==u&&(F(t,s,u),i=!0)}return i}var Vn=(function(){function t(){}return t.prototype._trans=function(e,r,o){var i=this._tx||G.trans,a=this.name,s=ze&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function u(y,h,S){if(!S.schema[a])throw new X.NotFound("Table "+a+" not part of transaction");return r(S.idbtrans,S)}var c=yt();try{var p=i&&i.db._novip===this.db._novip?i===G.trans?i._promise(e,u,o):Ye(function(){return i._promise(e,u,o)},{trans:i,transless:G.transless||G}):Hr(this.db,e,[this.name],u);return s&&(p._consoleTask=s,p=p.catch(function(y){return console.trace(y),_e(y)})),p}finally{c&&vt()}},t.prototype.get=function(e,r){var o=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?_e(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return o.core.get({trans:i,key:e}).then(function(a){return o.hook.reading.fire(a)})}).then(r)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(_(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=O(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&r.every(function(S){return y.keyPath.indexOf(S)>=0})){for(var h=0;h<r.length;++h)if(r.indexOf(y.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(y,h){return y.keyPath.length-h.keyPath.length})[0];if(o&&this.db._maxKey!==st){var i=o.keyPath.slice(0,r.length);return this.where(i).equals(i.map(function(y){return e[y]}))}!o&&ze&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName;function s(y,h){return de(y,h)===0}var u=r.reduce(function(y,h){var S=y[0],D=y[1],m=a[h],g=e[h];return[S||m,S||!m?ut(D,m&&m.multi?function(k){var C=te(k,h);return _(C)&&C.some(function(A){return s(g,A)})}:function(k){return s(g,te(k,h))}):D]},[null,null]),c=u[0],p=u[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(p):o?this.filter(p):this.where(r).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,_(e)?"[".concat(e.join("+"),"]"):e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){var r=this,o=r.db,i=r.name;this.schema.mappedClass=e,e.prototype instanceof Wn&&(e=(function(c){b(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),p.prototype.table=function(){return i},p})(e));for(var a=new Set,s=e.prototype;s;s=x(s))Object.getOwnPropertyNames(s).forEach(function(c){return a.add(c)});var u=function(c){if(!c)return c;var p=Object.create(e.prototype);for(var y in c)if(!a.has(y))try{p[y]=c[y]}catch{}return p};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},t.prototype.defineClass=function(){function e(r){w(this,r)}return this.mapToClass(e)},t.prototype.add=function(e,r){var o=this,i=this.schema.primKey,a=i.auto,s=i.keyPath,u=e;return s&&a&&(u=tr(s)(e)),this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"add",keys:r!=null?[r]:null,values:[u]})}).then(function(c){return c.numFailures?q.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{F(e,s,c)}catch{}return c})},t.prototype.upsert=function(e,r){var o=this,i=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return o.core.get({trans:a,key:e}).then(function(s){var u=s??{};return Jn(u,r),i&&F(u,i,e),o.core.mutate({trans:a,type:"put",values:[u],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[r]}}).then(function(c){return c.numFailures?q.reject(c.failures[0]):!!s})})})},t.prototype.update=function(e,r){if(typeof e=="object"&&!_(e)){var o=te(e,this.schema.primKey.keyPath);return o===void 0?_e(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(r)}else return this.where(":id").equals(e).modify(r)},t.prototype.put=function(e,r){var o=this,i=this.schema.primKey,a=i.auto,s=i.keyPath,u=e;return s&&a&&(u=tr(s)(e)),this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"put",values:[u],keys:r!=null?[r]:null})}).then(function(c){return c.numFailures?q.reject(c.failures[0]):c.lastResult}).then(function(c){if(s)try{F(e,s,c)}catch{}return c})},t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:[e]}).then(function(i){return rr(r,[e],i)}).then(function(i){return i.numFailures?q.reject(i.failures[0]):void 0})})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:Gn}).then(function(o){return rr(e,null,o)})}).then(function(r){return r.numFailures?q.reject(r.failures[0]):void 0})},t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(o){return r.core.getMany({keys:e,trans:o}).then(function(i){return i.map(function(a){return r.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,r,o){var i=this,a=Array.isArray(r)?r:void 0;o=o||(a?void 0:r);var s=o?o.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,p=c.auto,y=c.keyPath;if(y&&a)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,S=y&&p?e.map(tr(y)):e;return i.core.mutate({trans:u,type:"add",keys:a,values:S,wantResults:s}).then(function(D){var m=D.numFailures,g=D.results,k=D.lastResult,C=D.failures,A=s?g:k;if(m===0)return A;throw new mt("".concat(i.name,".bulkAdd(): ").concat(m," of ").concat(h," operations failed"),C)})})},t.prototype.bulkPut=function(e,r,o){var i=this,a=Array.isArray(r)?r:void 0;o=o||(a?void 0:r);var s=o?o.allKeys:void 0;return this._trans("readwrite",function(u){var c=i.schema.primKey,p=c.auto,y=c.keyPath;if(y&&a)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,S=y&&p?e.map(tr(y)):e;return i.core.mutate({trans:u,type:"put",keys:a,values:S,wantResults:s}).then(function(D){var m=D.numFailures,g=D.results,k=D.lastResult,C=D.failures,A=s?g:k;if(m===0)return A;throw new mt("".concat(i.name,".bulkPut(): ").concat(m," of ").concat(h," operations failed"),C)})})},t.prototype.bulkUpdate=function(e){var r=this,o=this.core,i=e.map(function(u){return u.key}),a=e.map(function(u){return u.changes}),s=[];return this._trans("readwrite",function(u){return o.getMany({trans:u,keys:i,cache:"clone"}).then(function(c){var p=[],y=[];e.forEach(function(S,D){var m=S.key,g=S.changes,k=c[D];if(k){for(var C=0,A=Object.keys(g);C<A.length;C++){var j=A[C],N=g[j];if(j===r.schema.primKey.keyPath){if(de(N,m)!==0)throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else F(k,j,N)}s.push(D),p.push(m),y.push(k)}});var h=p.length;return o.mutate({trans:u,type:"put",keys:p,values:y,updates:{keys:i,changeSpecs:a}}).then(function(S){var D=S.numFailures,m=S.failures;if(D===0)return h;for(var g=0,k=Object.keys(m);g<k.length;g++){var C=k[g],A=s[Number(C)];if(A!=null){var j=m[C];delete m[C],m[A]=j}}throw new mt("".concat(r.name,".bulkUpdate(): ").concat(D," of ").concat(h," operations failed"),m)})})})},t.prototype.bulkDelete=function(e){var r=this,o=e.length;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:e}).then(function(a){return rr(r,e,a)})}).then(function(i){var a=i.numFailures,s=i.lastResult,u=i.failures;if(a===0)return s;throw new mt("".concat(r.name,".bulkDelete(): ").concat(a," of ").concat(o," operations failed"),u)})},t})();function At(t){var e={},r=function(u,c){if(c){for(var p=arguments.length,y=new Array(p-1);--p;)y[p-1]=arguments[p];return e[u].subscribe.apply(null,y),t}else if(typeof u=="string")return e[u]};r.addEventType=a;for(var o=1,i=arguments.length;o<i;++o)a(arguments[o]);return r;function a(u,c,p){if(typeof u=="object")return s(u);c||(c=Ii),p||(p=ve);var y={subscribers:[],fire:p,subscribe:function(h){y.subscribers.indexOf(h)===-1&&(y.subscribers.push(h),y.fire=c(y.fire,h))},unsubscribe:function(h){y.subscribers=y.subscribers.filter(function(S){return S!==h}),y.fire=y.subscribers.reduce(c,p)}};return e[u]=r[u]=y,y}function s(u){O(u).forEach(function(c){var p=u[c];if(_(p))a(c,u[c][0],u[c][1]);else if(p==="asap")var y=a(c,Pt,function(){for(var h=arguments.length,S=new Array(h);h--;)S[h]=arguments[h];y.subscribers.forEach(function(D){W(function(){D.apply(null,S)})})});else throw new X.InvalidArgument("Invalid event config")})}}function Tt(t,e){return Z(e).from({prototype:t}),e}function Wi(t){return Tt(Vn.prototype,function(e,r,o){this.db=t,this._tx=o,this.name=e,this.schema=r,this.hook=t._allTables[e]?t._allTables[e].hook:At(null,{creating:[Ai,ve],reading:[ji,Pt],updating:[Ni,ve],deleting:[Ti,ve]})})}function _t(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Wr(t,e){t.filter=ut(t.filter,e)}function Qr(t,e,r){var o=t.replayFilter;t.replayFilter=o?function(){return ut(o(),e())}:e,t.justLimit=r&&!o}function Qi(t,e){t.isMatch=ut(t.isMatch,e)}function nr(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new X.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function eo(t,e,r){var o=nr(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function or(t,e,r,o){var i=t.replayFilter?ut(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},s=function(u,c,p){if(!i||i(c,p,function(S){return c.stop(S)},function(S){return c.fail(S)})){var y=c.primaryKey,h=""+y;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(y)),E(a,h)||(a[h]=!0,e(u,c,p))}};return Promise.all([t.or._iterate(s,r),to(eo(t,o,r),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}else return to(eo(t,o,r),ut(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function to(t,e,r,o){var i=o?function(s,u,c){return r(o(s),u,c)}:r,a=ge(i);return t.then(function(s){if(s)return s.start(function(){var u=function(){return s.continue()};(!e||e(s,function(c){return u=c},function(c){s.stop(c),u=ve},function(c){s.fail(c),u=ve}))&&a(s.value,s,function(c){return u=c}),u()})})}var Xi=(function(){function t(){}return t.prototype._read=function(e,r){var o=this._ctx;return o.error?o.table._trans(null,_e.bind(null,o.error)):o.table._trans("readonly",e).then(r)},t.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,_e.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=ut(r.algorithm,e)},t.prototype._iterate=function(e,r){return or(this._ctx,e,r,this._ctx.table.core)},t.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&w(o,e),r._ctx=o,r},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var r=this._ctx;return this._read(function(o){return or(r,e,o,r.table.core)})},t.prototype.count=function(e){var r=this;return this._read(function(o){var i=r._ctx,a=i.table.core;if(_t(i,!0))return a.count({trans:o,query:{index:nr(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var s=0;return or(i,function(){return++s,!1},o,a).then(function(){return s})}).then(e)},t.prototype.sortBy=function(e,r){var o=e.split(".").reverse(),i=o[0],a=o.length-1;function s(p,y){return y?s(p[o[y]],y-1):p[i]}var u=this._ctx.dir==="next"?1:-1;function c(p,y){var h=s(p,a),S=s(y,a);return de(h,S)*u}return this.toArray(function(p){return p.sort(c)}).then(r)},t.prototype.toArray=function(e){var r=this;return this._read(function(o){var i=r._ctx;if(i.dir==="next"&&_t(i,!0)&&i.limit>0){var a=i.valueMapper,s=nr(i,i.table.core.schema);return i.table.core.query({trans:o,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(function(c){var p=c.result;return a?p.map(a):p})}else{var u=[];return or(i,function(c){return u.push(c)},o,i.table.core).then(function(){return u})}},e)},t.prototype.offset=function(e){var r=this._ctx;return e<=0?this:(r.offset+=e,_t(r)?Qr(r,function(){var o=e;return function(i,a){return o===0?!0:o===1?(--o,!1):(a(function(){i.advance(o),o=0}),!1)}}):Qr(r,function(){var o=e;return function(){return--o<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Qr(this._ctx,function(){var r=e;return function(o,i,a){return--r<=0&&i(a),r>=0}},!0),this},t.prototype.until=function(e,r){return Wr(this._ctx,function(o,i,a){return e(o.value)?(i(a),r):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Wr(this._ctx,function(r){return e(r.value)}),Qi(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,a){o.push(a.key)}).then(function(){return o}).then(e)},t.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&_t(r,!0)&&r.limit>0)return this._read(function(i){var a=nr(r,r.table.core.schema);return r.table.core.query({trans:i,values:!1,limit:r.limit,query:{index:a,range:r.range}})}).then(function(i){var a=i.result;return a}).then(e);r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,a){o.push(a.primaryKey)}).then(function(){return o}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var o={};return Wr(this._ctx,function(i){var a=i.primaryKey.toString(),s=E(o,a);return o[a]=!0,!s}),this},t.prototype.modify=function(e){var r=this,o=this._ctx;return this._write(function(i){var a;typeof e=="function"?a=e:a=function(C){return Jn(C,e)};var s=o.table.core,u=s.schema.primaryKey,c=u.outbound,p=u.extractKey,y=200,h=r.db._options.modifyChunkSize;h&&(typeof h=="object"?y=h[s.name]||h["*"]||200:y=h);var S=[],D=0,m=[],g=function(C,A){var j=A.failures,N=A.numFailures;D+=C-N;for(var R=0,z=O(j);R<z.length;R++){var L=z[R];S.push(j[L])}},k=e===ro;return r.clone().primaryKeys().then(function(C){var A=_t(o)&&o.limit===1/0&&(typeof e!="function"||k)&&{index:o.index,range:o.range},j=function(N){var R=Math.min(y,C.length-N),z=C.slice(N,N+R);return(k?Promise.resolve([]):s.getMany({trans:i,keys:z,cache:"immutable"})).then(function(L){var B=[],J=[],fe=c?[]:null,U=k?z:[];if(!k)for(var ce=0;ce<R;++ce){var V=L[ce],me={value:je(V),primKey:C[N+ce]};a.call(me,me.value,me)!==!1&&(me.value==null?U.push(C[N+ce]):!c&&de(p(V),p(me.value))!==0?(U.push(C[N+ce]),B.push(me.value)):(J.push(me.value),c&&fe.push(C[N+ce])))}return Promise.resolve(B.length>0&&s.mutate({trans:i,type:"add",values:B}).then(function(Q){for(var be in Q.failures)U.splice(parseInt(be),1);g(B.length,Q)})).then(function(){return(J.length>0||A&&typeof e=="object")&&s.mutate({trans:i,type:"put",keys:fe,values:J,criteria:A,changeSpec:typeof e!="function"&&e,isAdditionalChunk:N>0}).then(function(Q){return g(J.length,Q)})}).then(function(){return(U.length>0||A&&k)&&s.mutate({trans:i,type:"delete",keys:U,criteria:A,isAdditionalChunk:N>0}).then(function(Q){return rr(o.table,U,Q)}).then(function(Q){return g(U.length,Q)})}).then(function(){return C.length>N+R&&j(N+y)})})};return j(0).then(function(){if(S.length>0)throw new Ut("Error modifying one or more objects",S,D,m);return C.length})})})},t.prototype.delete=function(){var e=this._ctx,r=e.range;return _t(e)&&!e.table.schema.yProps&&(e.isPrimKey||r.type===3)?this._write(function(o){var i=e.table.core.schema.primaryKey,a=r;return e.table.core.count({trans:o,query:{index:i,range:a}}).then(function(s){return e.table.core.mutate({trans:o,type:"deleteRange",range:a}).then(function(u){var c=u.failures,p=u.numFailures;if(p)throw new Ut("Could not delete some values",Object.keys(c).map(function(y){return c[y]}),s-p);return s-p})})}):this.modify(ro)},t})(),ro=function(t,e){return e.value=null};function Ji(t){return Tt(Xi.prototype,function(e,r){this.db=t;var o=Gn,i=null;if(r)try{o=r()}catch(c){i=c}var a=e._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:a.or,valueMapper:u!==Pt?u:null}})}function Vi(t,e){return t<e?-1:t===e?0:1}function ea(t,e){return t>e?-1:t===e?0:1}function Ae(t,e,r){var o=t instanceof oo?new t.Collection(t):t;return o._ctx.error=r?new r(e):new TypeError(e),o}function wt(t){return new t.Collection(t,function(){return no("")}).limit(0)}function ta(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function ra(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function na(t,e,r,o,i,a){for(var s=Math.min(t.length,o.length),u=-1,c=0;c<s;++c){var p=e[c];if(p!==o[c])return i(t[c],r[c])<0?t.substr(0,c)+r[c]+r.substr(c+1):i(t[c],o[c])<0?t.substr(0,c)+o[c]+r.substr(c+1):u>=0?t.substr(0,u)+e[u]+r.substr(u+1):null;i(t[c],p)<0&&(u=c)}return s<o.length&&a==="next"?t+r.substr(t.length):s<t.length&&a==="prev"?t.substr(0,r.length):u<0?null:t.substr(0,u)+o[u]+r.substr(u+1)}function ir(t,e,r,o){var i,a,s,u,c,p,y,h=r.length;if(!r.every(function(g){return typeof g=="string"}))return Ae(t,Yn);function S(g){i=ta(g),a=ra(g),s=g==="next"?Vi:ea;var k=r.map(function(C){return{lower:a(C),upper:i(C)}}).sort(function(C,A){return s(C.lower,A.lower)});u=k.map(function(C){return C.upper}),c=k.map(function(C){return C.lower}),p=g,y=g==="next"?"":o}S("next");var D=new t.Collection(t,function(){return Qe(u[0],c[h-1]+o)});D._ondirectionchange=function(g){S(g)};var m=0;return D._addAlgorithm(function(g,k,C){var A=g.key;if(typeof A!="string")return!1;var j=a(A);if(e(j,c,m))return!0;for(var N=null,R=m;R<h;++R){var z=na(A,j,u[R],c[R],s,p);z===null&&N===null?m=R+1:(N===null||s(N,z)>0)&&(N=z)}return k(N!==null?function(){g.continue(N+y)}:C),!1}),D}function Qe(t,e,r,o){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:o}}function no(t){return{type:1,lower:t,upper:t}}var oo=(function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,r,o,i){o=o!==!1,i=i===!0;try{return this._cmp(e,r)>0||this._cmp(e,r)===0&&(o||i)&&!(o&&i)?wt(this):new this.Collection(this,function(){return Qe(e,r,!o,!i)})}catch{return Ae(this,Ue)}},t.prototype.equals=function(e){return e==null?Ae(this,Ue):new this.Collection(this,function(){return no(e)})},t.prototype.above=function(e){return e==null?Ae(this,Ue):new this.Collection(this,function(){return Qe(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?Ae(this,Ue):new this.Collection(this,function(){return Qe(e,void 0,!1)})},t.prototype.below=function(e){return e==null?Ae(this,Ue):new this.Collection(this,function(){return Qe(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?Ae(this,Ue):new this.Collection(this,function(){return Qe(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?Ae(this,Yn):this.between(e,e+st,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ir(this,function(r,o){return r.indexOf(o[0])===0},[e],st)},t.prototype.equalsIgnoreCase=function(e){return ir(this,function(r,o){return r===o[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Le.apply(dt,arguments);return e.length===0?wt(this):ir(this,function(r,o){return o.indexOf(r)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Le.apply(dt,arguments);return e.length===0?wt(this):ir(this,function(r,o){return o.some(function(i){return r.indexOf(i)===0})},e,st)},t.prototype.anyOf=function(){var e=this,r=Le.apply(dt,arguments),o=this._cmp;try{r.sort(o)}catch{return Ae(this,Ue)}if(r.length===0)return wt(this);var i=new this.Collection(this,function(){return Qe(r[0],r[r.length-1])});i._ondirectionchange=function(s){o=s==="next"?e._ascending:e._descending,r.sort(o)};var a=0;return i._addAlgorithm(function(s,u,c){for(var p=s.key;o(p,r[a])>0;)if(++a,a===r.length)return u(c),!1;return o(p,r[a])===0?!0:(u(function(){s.continue(r[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Zr,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Le.apply(dt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ae(this,Ue)}var r=e.reduce(function(o,i){return o?o.concat([[o[o.length-1][1],i]]):[[Zr,i]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,r){var o=this,i=this._cmp,a=this._ascending,s=this._descending,u=this._min,c=this._max;if(e.length===0)return wt(this);if(!e.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&a(R[0],R[1])<=0}))return Ae(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var p=!r||r.includeLowers!==!1,y=r&&r.includeUppers===!0;function h(R,z){for(var L=0,B=R.length;L<B;++L){var J=R[L];if(i(z[0],J[1])<0&&i(z[1],J[0])>0){J[0]=u(J[0],z[0]),J[1]=c(J[1],z[1]);break}}return L===B&&R.push(z),R}var S=a;function D(R,z){return S(R[0],z[0])}var m;try{m=e.reduce(h,[]),m.sort(D)}catch{return Ae(this,Ue)}var g=0,k=y?function(R){return a(R,m[g][1])>0}:function(R){return a(R,m[g][1])>=0},C=p?function(R){return s(R,m[g][0])>0}:function(R){return s(R,m[g][0])>=0};function A(R){return!k(R)&&!C(R)}var j=k,N=new this.Collection(this,function(){return Qe(m[0][0],m[m.length-1][1],!p,!y)});return N._ondirectionchange=function(R){R==="next"?(j=k,S=a):(j=C,S=s),m.sort(D)},N._addAlgorithm(function(R,z,L){for(var B=R.key;j(B);)if(++g,g===m.length)return z(L),!1;return A(B)?!0:(o._cmp(B,m[g][1])===0||o._cmp(B,m[g][0])===0||z(function(){S===a?R.continue(m[g][0]):R.continue(m[g][1])}),!1)}),N},t.prototype.startsWithAnyOf=function(){var e=Le.apply(dt,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?wt(this):this.inAnyRange(e.map(function(r){return[r,r+st]})):Ae(this,"startsWithAnyOf() only works with strings")},t})();function oa(t){return Tt(oo.prototype,function(e,r,o){if(this.db=t,this._ctx={table:e,index:r===":id"?null:r,or:o},this._cmp=this._ascending=de,this._descending=function(i,a){return de(a,i)},this._max=function(i,a){return de(i,a)>0?i:a},this._min=function(i,a){return de(i,a)<0?i:a},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI})}function Be(t){return ge(function(e){return Nt(e),t(e.target.error),!1})}function Nt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var It="storagemutated",Xr="x-storagemutated-1",Xe=At(null,It),ia=(function(){function t(){}return t.prototype._lock=function(){return H(!G.global),++this._reculock,this._reculock===1&&!G.global&&(G.lockOwnerFor=this),this},t.prototype._unlock=function(){if(H(!G.global),--this._reculock===0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{at(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},t.prototype.create=function(e){var r=this;if(!this.mode)return this;var o=this.db.idbdb,i=this.db._state.dbOpenError;if(H(!this.idbtrans),!e&&!o)switch(i&&i.name){case"DatabaseClosedError":throw new X.DatabaseClosed(i);case"MissingAPIError":throw new X.MissingAPI(i.message,i);default:throw new X.OpenFailed(i)}if(!this.active)throw new X.TransactionInactive;return H(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=ge(function(a){Nt(a),r._reject(e.error)}),e.onabort=ge(function(a){Nt(a),r.active&&r._reject(new X.Abort(e.error)),r.active=!1,r.on("abort").fire(a)}),e.oncomplete=ge(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Xe.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,r,o){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return _e(new X.ReadOnly("Transaction is readonly"));if(!this.active)return _e(new X.TransactionInactive);if(this._locked())return new q(function(s,u){i._blockedFuncs.push([function(){i._promise(e,r,o).then(s,u)},G])});if(o)return Ye(function(){var s=new q(function(u,c){i._lock();var p=r(u,c,i);p&&p.then&&p.then(u,c)});return s.finally(function(){return i._unlock()}),s._lib=!0,s});var a=new q(function(s,u){var c=r(s,u,i);c&&c.then&&c.then(s,u)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var r=this._root(),o=q.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return o});else{r._waitingFor=o,r._waitingQueue=[];var i=r.idbtrans.objectStore(r.storeNames[0]);(function s(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var a=r._waitingFor;return new q(function(s,u){o.then(function(c){return r._waitingQueue.push(ge(s.bind(null,c)))},function(c){return r._waitingQueue.push(ge(u.bind(null,c)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},t.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(E(r,e))return r[e];var o=this.schema[e];if(!o)throw new X.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,o,this);return i.core=this.db.core.table(e),r[e]=i,i},t})();function aa(t){return Tt(ia.prototype,function(e,r,o,i,a){var s=this;e!=="readonly"&&r.forEach(function(u){var c,p=(c=o[u])===null||c===void 0?void 0:c.yProps;p&&(r=r.concat(p.map(function(y){return y.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=At(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(u,c){s._resolve=u,s._reject=c}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var c=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):c&&s.idbtrans&&s.idbtrans.abort(),_e(u)})})}function Jr(t,e,r,o,i,a,s,u){return{name:t,keyPath:e,unique:r,multi:o,auto:i,compound:a,src:(r&&!s?"&":"")+(o?"*":"")+(i?"++":"")+io(e),type:u}}function io(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Vr(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:ee(r,function(o){return[o.name,o]})}}function sa(t){return t.length===1?t[0]:t}var Dt=function(t){try{return t.only([[]]),Dt=function(){return[[]]},[[]]}catch{return Dt=function(){return st},st}};function en(t){return t==null?function(){}:typeof t=="string"?ua(t):function(e){return te(e,t)}}function ua(t){var e=t.split(".");return e.length===1?function(r){return r[t]}:function(r){return te(r,t)}}function ao(t){return[].slice.call(t)}var ca=0;function Mt(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function la(t,e,r){function o(h,S){var D=ao(h.objectStoreNames);return{schema:{name:h.name,tables:D.map(function(m){return S.objectStore(m)}).map(function(m){var g=m.keyPath,k=m.autoIncrement,C=_(g),A=g==null,j={},N={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A,compound:C,keyPath:g,autoIncrement:k,unique:!0,extractKey:en(g)},indexes:ao(m.indexNames).map(function(R){return m.index(R)}).map(function(R){var z=R.name,L=R.unique,B=R.multiEntry,J=R.keyPath,fe=_(J),U={name:z,compound:fe,keyPath:J,unique:L,multiEntry:B,extractKey:en(J)};return j[Mt(J)]=U,U}),getIndexByKeyPath:function(R){return j[Mt(R)]}};return j[":id"]=N.primaryKey,g!=null&&(j[Mt(g)]=N.primaryKey),N})},hasGetAll:D.length>0&&"getAll"in S.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=h.lower,D=h.upper,m=h.lowerOpen,g=h.upperOpen,k=S===void 0?D===void 0?null:e.upperBound(D,!!g):D===void 0?e.lowerBound(S,!!m):e.bound(S,D,!!m,!!g);return k}function a(h){var S=h.name;function D(k){var C=k.trans,A=k.type,j=k.keys,N=k.values,R=k.range;return new Promise(function(z,L){z=ge(z);var B=C.objectStore(S),J=B.keyPath==null,fe=A==="put"||A==="add";if(!fe&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var U=(j||N||{length:1}).length;if(j&&N&&j.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return z({numFailures:0,failures:{},results:[],lastResult:void 0});var ce,V=[],me=[],Q=0,be=function($e){++Q,Nt($e)};if(A==="deleteRange"){if(R.type===4)return z({numFailures:Q,failures:me,results:[],lastResult:void 0});R.type===3?V.push(ce=B.clear()):V.push(ce=B.delete(i(R)))}else{var Ce=fe?J?[N,j]:[N,null]:[j,null],qe=Ce[0],Oe=Ce[1];if(fe)for(var Ie=0;Ie<U;++Ie)V.push(ce=Oe&&Oe[Ie]!==void 0?B[A](qe[Ie],Oe[Ie]):B[A](qe[Ie])),ce.onerror=be;else for(var Ie=0;Ie<U;++Ie)V.push(ce=B[A](qe[Ie])),ce.onerror=be}var Ve=function($e){var Bt=$e.target.result;V.forEach(function(Me,vr){return Me.error!=null&&(me[vr]=Me.error)}),z({numFailures:Q,failures:me,results:A==="delete"?j:V.map(function(Me){return Me.result}),lastResult:Bt})};ce.onerror=function($e){be($e),Ve($e)},ce.onsuccess=Ve})}function m(k){var C=k.trans,A=k.values,j=k.query,N=k.reverse,R=k.unique;return new Promise(function(z,L){z=ge(z);var B=j.index,J=j.range,fe=C.objectStore(S),U=B.isPrimaryKey?fe:fe.index(B.name),ce=N?R?"prevunique":"prev":R?"nextunique":"next",V=A||!("openKeyCursor"in U)?U.openCursor(i(J),ce):U.openKeyCursor(i(J),ce);V.onerror=Be(L),V.onsuccess=ge(function(me){var Q=V.result;if(!Q){z(null);return}Q.___id=++ca,Q.done=!1;var be=Q.continue.bind(Q),Ce=Q.continuePrimaryKey;Ce&&(Ce=Ce.bind(Q));var qe=Q.advance.bind(Q),Oe=function(){throw new Error("Cursor not started")},Ie=function(){throw new Error("Cursor not stopped")};Q.trans=C,Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=Oe,Q.fail=ge(L),Q.next=function(){var Ve=this,$e=1;return this.start(function(){return $e--?Ve.continue():Ve.stop()}).then(function(){return Ve})},Q.start=function(Ve){var $e=new Promise(function(Me,vr){Me=ge(Me),V.onerror=Be(vr),Q.fail=vr,Q.stop=function(Xa){Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=Ie,Me(Xa)}}),Bt=function(){if(V.result)try{Ve()}catch(Me){Q.fail(Me)}else Q.done=!0,Q.start=function(){throw new Error("Cursor behind last entry")},Q.stop()};return V.onsuccess=ge(function(Me){V.onsuccess=Bt,Bt()}),Q.continue=be,Q.continuePrimaryKey=Ce,Q.advance=qe,Bt(),$e},z(Q)},L)})}function g(k){return function(C){return new Promise(function(A,j){A=ge(A);var N=C.trans,R=C.values,z=C.limit,L=C.query,B=z===1/0?void 0:z,J=L.index,fe=L.range,U=N.objectStore(S),ce=J.isPrimaryKey?U:U.index(J.name),V=i(fe);if(z===0)return A({result:[]});if(k){var me=R?ce.getAll(V,B):ce.getAllKeys(V,B);me.onsuccess=function(qe){return A({result:qe.target.result})},me.onerror=Be(j)}else{var Q=0,be=R||!("openKeyCursor"in ce)?ce.openCursor(V):ce.openKeyCursor(V),Ce=[];be.onsuccess=function(qe){var Oe=be.result;if(!Oe)return A({result:Ce});if(Ce.push(R?Oe.value:Oe.primaryKey),++Q===z)return A({result:Ce});Oe.continue()},be.onerror=Be(j)}})}}return{name:S,schema:h,mutate:D,getMany:function(k){var C=k.trans,A=k.keys;return new Promise(function(j,N){j=ge(j);for(var R=C.objectStore(S),z=A.length,L=new Array(z),B=0,J=0,fe,U=function(Q){var be=Q.target;(L[be._pos]=be.result)!=null,++J===B&&j(L)},ce=Be(N),V=0;V<z;++V){var me=A[V];me!=null&&(fe=R.get(A[V]),fe._pos=V,fe.onsuccess=U,fe.onerror=ce,++B)}B===0&&j(L)})},get:function(k){var C=k.trans,A=k.key;return new Promise(function(j,N){j=ge(j);var R=C.objectStore(S),z=R.get(A);z.onsuccess=function(L){return j(L.target.result)},z.onerror=Be(N)})},query:g(c),openCursor:m,count:function(k){var C=k.query,A=k.trans,j=C.index,N=C.range;return new Promise(function(R,z){var L=A.objectStore(S),B=j.isPrimaryKey?L:L.index(j.name),J=i(N),fe=J?B.count(J):B.count();fe.onsuccess=ge(function(U){return R(U.target.result)}),fe.onerror=Be(z)})}}}var s=o(t,r),u=s.schema,c=s.hasGetAll,p=u.tables.map(function(h){return a(h)}),y={};return p.forEach(function(h){return y[h.name]=h}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(h){var S=y[h];if(!S)throw new Error("Table '".concat(h,"' not found"));return y[h]},MIN_KEY:-1/0,MAX_KEY:Dt(e),schema:u}}function fa(t,e){return e.reduce(function(r,o){var i=o.create;return d(d({},r),i(r))},t)}function pa(t,e,r,o){var i=r.IDBKeyRange;r.indexedDB;var a=fa(la(e,i,o),t.dbcore);return{dbcore:a}}function ar(t,e){var r=e.db,o=pa(t._middlewares,r,t._deps,e);t.core=o.dbcore,t.tables.forEach(function(i){var a=i.name;t.core.schema.tables.some(function(s){return s.name===a})&&(i.core=t.core.table(a),t[a]instanceof t.Table&&(t[a].core=i.core))})}function sr(t,e,r,o){r.forEach(function(i){var a=o[i];e.forEach(function(s){var u=se(s,i);(!u||"value"in u&&u.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?I(s,i,{get:function(){return this.table(i)},set:function(c){$(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,a))})})}function tn(t,e){e.forEach(function(r){for(var o in r)r[o]instanceof t.Table&&delete r[o]})}function da(t,e){return t._cfg.version-e._cfg.version}function ha(t,e,r,o){var i=t._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Vr("$meta",uo("")[0],[]),t._storeNames.push("$meta"));var a=t._createTransaction("readwrite",t._storeNames,i);a.create(r),a._completion.catch(o);var s=a._reject.bind(a),u=G.transless||G;Ye(function(){if(G.trans=a,G.transless=u,e===0)O(i).forEach(function(c){nn(r,c,i[c].primKey,i[c].indexes)}),ar(t,r),q.follow(function(){return t.on.populate.fire(a)}).catch(s);else return ar(t,r),ya(t,a,e).then(function(c){return va(t,c,a,r)}).catch(s)})}function ma(t,e){so(t._dbSchema,e),e.db.version%10===0&&!e.objectStoreNames.contains("$meta")&&e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var r=cr(t,t.idbdb,e);lr(t,t._dbSchema,e);for(var o=rn(r,t._dbSchema),i=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var y=e.objectStore(p.name);p.add.forEach(function(h){ze&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(h.src)),ur(y,h)})},a=0,s=o.change;a<s.length;a++){var u=s[a],c=i(u);if(typeof c=="object")return c.value}}function ya(t,e,r){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(o){return o??r}):q.resolve(r)}function va(t,e,r,o){var i=[],a=t._versions,s=t._dbSchema=cr(t,t.idbdb,o),u=a.filter(function(p){return p._cfg.version>=e});if(u.length===0)return q.resolve();u.forEach(function(p){i.push(function(){var y=s,h=p._cfg.dbschema;lr(t,y,o),lr(t,h,o),s=t._dbSchema=h;var S=rn(y,h);S.add.forEach(function(A){nn(o,A[0],A[1].primKey,A[1].indexes)}),S.change.forEach(function(A){if(A.recreate)throw new X.Upgrade("Not yet support for changing primary key");var j=o.objectStore(A.name);A.add.forEach(function(N){return ur(j,N)}),A.change.forEach(function(N){j.deleteIndex(N.name),ur(j,N)}),A.del.forEach(function(N){return j.deleteIndex(N)})});var D=p._cfg.contentUpgrade;if(D&&p._cfg.version>e){ar(t,o),r._memoizedTables={};var m=re(h);S.del.forEach(function(A){m[A]=y[A]}),tn(t,[t.Transaction.prototype]),sr(t,[t.Transaction.prototype],O(m),m),r.schema=m;var g=Tr(D);g&&gt();var k,C=q.follow(function(){if(k=D(r),k&&g){var A=Ge.bind(null,null);k.then(A,A)}});return k&&typeof k.then=="function"?q.resolve(k):C.then(function(){return k})}}),i.push(function(y){var h=p._cfg.dbschema;ga(h,y),tn(t,[t.Transaction.prototype]),sr(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema}),i.push(function(y){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===p._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(h){return h!=="$meta"})):y.objectStore("$meta").put(p._cfg.version,"version"))})});function c(){return i.length?q.resolve(i.shift()(r.idbtrans)).then(c):q.resolve()}return c().then(function(){so(s,o)})}function rn(t,e){var r={del:[],add:[],change:[]},o;for(o in t)e[o]||r.del.push(o);for(o in e){var i=t[o],a=e[o];if(!i)r.add.push([o,a]);else{var s={name:o,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)s.recreate=!0,r.change.push(s);else{var u=i.idxByName,c=a.idxByName,p=void 0;for(p in u)c[p]||s.del.push(p);for(p in c){var y=u[p],h=c[p];y?y.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}}return r}function nn(t,e,r,o){var i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(a){return ur(i,a)}),i}function so(t,e){O(t).forEach(function(r){e.db.objectStoreNames.contains(r)||(ze&&console.debug("Dexie: Creating missing table",r),nn(e,r,t[r].primKey,t[r].indexes))})}function ga(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(r){return t[r]==null&&e.db.deleteObjectStore(r)})}function ur(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function cr(t,e,r){var o={},i=ie(e.objectStoreNames,0);return i.forEach(function(a){for(var s=r.objectStore(a),u=s.keyPath,c=Jr(io(u),u||"",!0,!1,!!s.autoIncrement,u&&typeof u!="string",!0),p=[],y=0;y<s.indexNames.length;++y){var h=s.index(s.indexNames[y]);u=h.keyPath;var S=Jr(h.name,u,!!h.unique,!!h.multiEntry,!1,u&&typeof u!="string",!1);p.push(S)}o[a]=Vr(a,c,p)}),o}function ba(t,e,r){t.verno=e.version/10;var o=t._dbSchema=cr(t,e,r);t._storeNames=ie(e.objectStoreNames,0),sr(t,[t._allTables],O(o),o)}function _a(t,e){var r=cr(t,t.idbdb,e),o=rn(r,t._dbSchema);return!(o.add.length||o.change.some(function(i){return i.add.length||i.change.length}))}function lr(t,e,r){for(var o=r.db.objectStoreNames,i=0;i<o.length;++i){var a=o[i],s=r.objectStore(a);t._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c=s.indexNames[u],p=s.index(c).keyPath,y=typeof p=="string"?p:"["+ie(p).join("+")+"]";if(e[a]){var h=e[a].idxByName[y];h&&(h.name=c,delete e[a].idxByName[y],e[a].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function uo(t){return t.split(",").map(function(e,r){var o,i=e.split(":"),a=(o=i[1])===null||o===void 0?void 0:o.trim();e=i[0].trim();var s=e.replace(/([&*]|\+\+)/g,""),u=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return Jr(s,u||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),_(u),r===0,a)})}var wa=(function(){function t(){}return t.prototype._createTableSchema=function(e,r,o){return Vr(e,r,o)},t.prototype._parseIndexSyntax=function(e){return uo(e)},t.prototype._parseStoresSpec=function(e,r){var o=this;O(e).forEach(function(i){if(e[i]!==null){var a=o._parseIndexSyntax(e[i]),s=a.shift();if(!s)throw new X.Schema("Invalid schema for table "+i+": "+e[i]);if(s.unique=!0,s.multi)throw new X.Schema("Primary key cannot be multiEntry*");a.forEach(function(c){if(c.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")});var u=o._createTableSchema(i,s,a);r[i]=u}})},t.prototype.stores=function(e){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?w(this._cfg.storesSource,e):e;var o=r._versions,i={},a={};return o.forEach(function(s){w(i,s._cfg.storesSource),a=s._cfg.dbschema={},s._parseStoresSpec(i,a)}),r._dbSchema=a,tn(r,[r._allTables,r,r.Transaction.prototype]),sr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],O(a),a),r._storeNames=O(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Dr(this._cfg.contentUpgrade||ve,e),this},t})();function xa(t){return Tt(wa.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function on(t,e){var r=t._dbNamesDB;return r||(r=t._dbNamesDB=new He(er,{addons:[],indexedDB:t,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function an(t){return t&&typeof t.databases=="function"}function ka(t){var e=t.indexedDB,r=t.IDBKeyRange;return an(e)?Promise.resolve(e.databases()).then(function(o){return o.map(function(i){return i.name}).filter(function(i){return i!==er})}):on(e,r).toCollection().primaryKeys()}function Sa(t,e){var r=t.indexedDB,o=t.IDBKeyRange;!an(r)&&e!==er&&on(r,o).put({name:e}).catch(ve)}function Ca(t,e){var r=t.indexedDB,o=t.IDBKeyRange;!an(r)&&e!==er&&on(r,o).delete(e).catch(ve)}function sn(t){return Ye(function(){return G.letThrough=!0,t()})}function Pa(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(r){var o=function(){return indexedDB.databases().finally(r)};e=setInterval(o,100),o()}).finally(function(){return clearInterval(e)})}var un;function cn(t){return!("from"in t)}var Se=function(t,e){if(this)w(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var r=new Se;return t&&"d"in t&&w(r,t),r}};K(Se.prototype,(un={add:function(t){return zt(this,t),this},addKey:function(t){return Kt(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(r){return Kt(e,r,r)}),this},hasKey:function(t){var e=fr(this).next(t).value;return e&&de(e.from,t)<=0&&de(e.to,t)>=0}},un[Ar]=function(){return fr(this)},un));function Kt(t,e,r){var o=de(e,r);if(!isNaN(o)){if(o>0)throw RangeError();if(cn(t))return w(t,{from:e,to:r,d:1});var i=t.l,a=t.r;if(de(r,t.from)<0)return i?Kt(i,e,r):t.l={from:e,to:r,d:1,l:null,r:null},lo(t);if(de(e,t.to)>0)return a?Kt(a,e,r):t.r={from:e,to:r,d:1,l:null,r:null},lo(t);de(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),de(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);var s=!t.r;i&&!t.l&&zt(t,i),a&&s&&zt(t,a)}}function zt(t,e){function r(o,i){var a=i.from,s=i.to,u=i.l,c=i.r;Kt(o,a,s),u&&r(o,u),c&&r(o,c)}cn(e)||r(t,e)}function co(t,e){var r=fr(e),o=r.next();if(o.done)return!1;for(var i=o.value,a=fr(t),s=a.next(i.from),u=s.value;!o.done&&!s.done;){if(de(u.from,i.to)<=0&&de(u.to,i.from)>=0)return!0;de(i.from,u.from)<0?i=(o=r.next(u.from)).value:u=(s=a.next(i.from)).value}return!1}function fr(t){var e=cn(t)?null:{s:0,n:t};return{next:function(r){for(var o=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&de(r,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||de(r,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function lo(t){var e,r,o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((r=t.l)===null||r===void 0?void 0:r.d)||0),i=o>1?"r":o<-1?"l":"";if(i){var a=i==="r"?"l":"r",s=d({},t),u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],s[i]=u[a],t[a]=s,s.d=fo(s)}t.d=fo(t)}function fo(t){var e=t.r,r=t.l;return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}function pr(t,e){return O(e).forEach(function(r){t[r]?zt(t[r],e[r]):t[r]=ke(e[r])}),t}function ln(t,e){return t.all||e.all||Object.keys(t).some(function(r){return e[r]&&co(e[r],t[r])})}var ct={},fn={},pn=!1;function dr(t,e){pr(fn,t),pn||(pn=!0,setTimeout(function(){pn=!1;var r=fn;fn={},dn(r,!1)},0))}function dn(t,e){e===void 0&&(e=!1);var r=new Set;if(t.all)for(var o=0,i=Object.values(ct);o<i.length;o++){var a=i[o];po(a,t,r,e)}else for(var s in t){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(u){var c=u[1],p=u[2],a=ct["idb://".concat(c,"/").concat(p)];a&&po(a,t,r,e)}}r.forEach(function(y){return y()})}function po(t,e,r,o){for(var i=[],a=0,s=Object.entries(t.queries.query);a<s.length;a++){for(var u=s[a],c=u[0],p=u[1],y=[],h=0,S=p;h<S.length;h++){var D=S[h];ln(e,D.obsSet)?D.subscribers.forEach(function(C){return r.add(C)}):o&&y.push(D)}o&&i.push([c,y])}if(o)for(var m=0,g=i;m<g.length;m++){var k=g[m],c=k[0],y=k[1];t.queries.query[c]=y}}function Oa(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?_e(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var o=e.openCanceller,i=Math.round(t.verno*10),a=!1;function s(){if(e.openCanceller!==o)throw new X.DatabaseClosed("db.open() was cancelled")}var u=e.dbReadyResolve,c=null,p=!1,y=function(){return new q(function(h,S){if(s(),!r)throw new X.MissingAPI;var D=t.name,m=e.autoSchema||!i?r.open(D):r.open(D,i);if(!m)throw new X.MissingAPI;m.onerror=Be(S),m.onblocked=ge(t._fireOnBlocked),m.onupgradeneeded=ge(function(g){if(c=m.transaction,e.autoSchema&&!t._options.allowEmptyDB){m.onerror=Nt,c.abort(),m.result.close();var k=r.deleteDatabase(D);k.onsuccess=k.onerror=ge(function(){S(new X.NoSuchDatabase("Database ".concat(D," doesnt exist")))})}else{c.onerror=Be(S);var C=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;p=C<1,t.idbdb=m.result,a&&ma(t,c),ha(t,C/10,c,S)}},S),m.onsuccess=ge(function(){c=null;var g=t.idbdb=m.result,k=ie(g.objectStoreNames);if(k.length>0)try{var C=g.transaction(sa(k),"readonly");if(e.autoSchema)ba(t,g,C);else if(lr(t,t._dbSchema,C),!_a(t,C)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,a=!0,h(y());ar(t,C)}catch{}bt.push(t),g.onversionchange=ge(function(A){e.vcFired=!0,t.on("versionchange").fire(A)}),g.onclose=ge(function(){t.close({disableAutoOpen:!1})}),p&&Sa(t._deps,D),h()},S)}).catch(function(h){switch(h?.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),y();break;case"VersionError":if(i>0)return i=0,y();break}return q.reject(h)})};return q.race([o,(typeof navigator>"u"?q.resolve():Pa()).then(y)]).then(function(){return s(),e.onReadyBeingFired=[],q.resolve(sn(function(){return t.on.ready.fire(t.vip)})).then(function h(){if(e.onReadyBeingFired.length>0){var S=e.onReadyBeingFired.reduce(Dr,ve);return e.onReadyBeingFired=[],q.resolve(sn(function(){return S(t.vip)})).then(h)}})}).finally(function(){e.openCanceller===o&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(h){e.dbOpenError=h;try{c&&c.abort()}catch{}return o===e.openCanceller&&t._close(),_e(h)}).finally(function(){e.openComplete=!0,u()}).then(function(){if(p){var h={};t.tables.forEach(function(S){S.schema.indexes.forEach(function(D){D.name&&(h["idb://".concat(t.name,"/").concat(S.name,"/").concat(D.name)]=new Se(-1/0,[[[]]]))}),h["idb://".concat(t.name,"/").concat(S.name,"/")]=h["idb://".concat(t.name,"/").concat(S.name,"/:dels")]=new Se(-1/0,[[[]]])}),Xe(It).fire(h),dn(h,!0)}return t})}function hn(t){var e=function(s){return t.next(s)},r=function(s){return t.throw(s)},o=a(e),i=a(r);function a(s){return function(u){var c=s(u),p=c.value;return c.done?p:!p||typeof p.then!="function"?_(p)?Promise.all(p).then(o,i):o(p):p.then(o,i)}}return a(e)()}function Ea(t,e,r){var o=arguments.length;if(o<2)throw new X.InvalidArgument("Too few arguments");for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];r=i.pop();var a=le(i);return[t,a,r]}function ho(t,e,r,o,i){return q.resolve().then(function(){var a=G.transless||G,s=t._createTransaction(e,r,t._dbSchema,o);s.explicit=!0;var u={trans:s,transless:a};if(o)s.idbtrans=o.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(h){return h.name===Ir.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return ho(t,e,r,null,i)})):_e(h)}var c=Tr(i);c&&gt();var p,y=q.follow(function(){if(p=i.call(s,s),p)if(c){var h=Ge.bind(null,null);p.then(h,h)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=hn(p))},u);return(p&&typeof p.then=="function"?q.resolve(p).then(function(h){return s.active?h:_e(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):y.then(function(){return p})).then(function(h){return o&&s._resolve(),s._completion.then(function(){return h})}).catch(function(h){return s._reject(h),_e(h)})})}function hr(t,e,r){for(var o=_(t)?t.slice():[t],i=0;i<r;++i)o.push(e);return o}function Ra(t){return d(d({},t),{table:function(e){var r=t.table(e),o=r.schema,i={},a=[];function s(g,k,C){var A=Mt(g),j=i[A]=i[A]||[],N=g==null?0:typeof g=="string"?1:g.length,R=k>0,z=d(d({},C),{name:R?"".concat(A,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:R,keyTail:k,keyLength:N,extractKey:en(g),unique:!R&&C.unique});if(j.push(z),z.isPrimaryKey||a.push(z),N>1){var L=N===2?g[0]:g.slice(0,N-1);s(L,k+1,C)}return j.sort(function(B,J){return B.keyTail-J.keyTail}),z}var u=s(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[u];for(var c=0,p=o.indexes;c<p.length;c++){var y=p[c];s(y.keyPath,0,y)}function h(g){var k=i[Mt(g)];return k&&k[0]}function S(g,k){return{type:g.type===1?2:g.type,lower:hr(g.lower,g.lowerOpen?t.MAX_KEY:t.MIN_KEY,k),lowerOpen:!0,upper:hr(g.upper,g.upperOpen?t.MIN_KEY:t.MAX_KEY,k),upperOpen:!0}}function D(g){var k=g.query.index;return k.isVirtual?d(d({},g),{query:{index:k.lowLevelIndex,range:S(g.query.range,k.keyTail)}}):g}var m=d(d({},r),{schema:d(d({},o),{primaryKey:u,indexes:a,getIndexByKeyPath:h}),count:function(g){return r.count(D(g))},query:function(g){return r.query(D(g))},openCursor:function(g){var k=g.query.index,C=k.keyTail,A=k.isVirtual,j=k.keyLength;if(!A)return r.openCursor(g);function N(R){function z(B){B!=null?R.continue(hr(B,g.reverse?t.MAX_KEY:t.MIN_KEY,C)):g.unique?R.continue(R.key.slice(0,j).concat(g.reverse?t.MIN_KEY:t.MAX_KEY,C)):R.continue()}var L=Object.create(R,{continue:{value:z},continuePrimaryKey:{value:function(B,J){R.continuePrimaryKey(hr(B,t.MAX_KEY,C),J)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var B=R.key;return j===1?B[0]:B.slice(0,j)}},value:{get:function(){return R.value}}});return L}return r.openCursor(D(g)).then(function(R){return R&&N(R)})}});return m}})}var ja={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ra};function mn(t,e,r,o){return r=r||{},o=o||"",O(t).forEach(function(i){if(!E(e,i))r[o+i]=void 0;else{var a=t[i],s=e[i];if(typeof a=="object"&&typeof s=="object"&&a&&s){var u=jr(a),c=jr(s);u!==c?r[o+i]=e[i]:u==="Object"?mn(a,s,r,o+i+"."):a!==s&&(r[o+i]=e[i])}else a!==s&&(r[o+i]=e[i])}}),O(e).forEach(function(i){E(t,i)||(r[o+i]=e[i])}),r}function yn(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Aa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return d(d({},t),{table:function(e){var r=t.table(e),o=r.schema.primaryKey,i=d(d({},r),{mutate:function(a){var s=G.trans,u=s.table(e).hook,c=u.deleting,p=u.creating,y=u.updating;switch(a.type){case"add":if(p.fire===ve)break;return s._promise("readwrite",function(){return h(a)},!0);case"put":if(p.fire===ve&&y.fire===ve)break;return s._promise("readwrite",function(){return h(a)},!0);case"delete":if(c.fire===ve)break;return s._promise("readwrite",function(){return h(a)},!0);case"deleteRange":if(c.fire===ve)break;return s._promise("readwrite",function(){return S(a)},!0)}return r.mutate(a);function h(m){var g=G.trans,k=m.keys||yn(o,m);if(!k)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?d(d({},m),{keys:k}):d({},m),m.type!=="delete"&&(m.values=P([],m.values,!0)),m.keys&&(m.keys=P([],m.keys,!0)),Ta(r,m,k).then(function(C){var A=k.map(function(j,N){var R=C[N],z={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(z,j,R,g);else if(m.type==="add"||R===void 0){var L=p.fire.call(z,j,m.values[N],g);j==null&&L!=null&&(j=L,m.keys[N]=j,o.outbound||F(m.values[N],o.keyPath,j))}else{var B=mn(R,m.values[N]),J=y.fire.call(z,B,j,R,g);if(J){var fe=m.values[N];Object.keys(J).forEach(function(U){E(fe,U)?fe[U]=J[U]:F(fe,U,J[U])})}}return z});return r.mutate(m).then(function(j){for(var N=j.failures,R=j.results,z=j.numFailures,L=j.lastResult,B=0;B<k.length;++B){var J=R?R[B]:k[B],fe=A[B];J==null?fe.onerror&&fe.onerror(N[B]):fe.onsuccess&&fe.onsuccess(m.type==="put"&&C[B]?m.values[B]:J)}return{failures:N,results:R,numFailures:z,lastResult:L}}).catch(function(j){return A.forEach(function(N){return N.onerror&&N.onerror(j)}),Promise.reject(j)})})}function S(m){return D(m.trans,m.range,1e4)}function D(m,g,k){return r.query({trans:m,values:!1,query:{index:o,range:g},limit:k}).then(function(C){var A=C.result;return h({type:"delete",keys:A,trans:m}).then(function(j){return j.numFailures>0?Promise.reject(j.failures[0]):A.length<k?{failures:[],numFailures:0,lastResult:void 0}:D(m,d(d({},g),{lower:A[A.length-1],lowerOpen:!0}),k)})})}}});return i}})}};function Ta(t,e,r){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:r,cache:"immutable"})}function mo(t,e,r){try{if(!e||e.keys.length<t.length)return null;for(var o=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)de(e.keys[i],t[a])===0&&(o.push(r?je(e.values[i]):e.values[i]),++a);return o.length===t.length?o:null}catch{return null}}var Na={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return d(d({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var i=mo(o.keys,o.trans._cache,o.cache==="clone");return i?q.resolve(i):r.getMany(o).then(function(a){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?je(a):a},a})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function yo(t,e){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!e.schema.primaryKey.outbound}function vo(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ia={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,r=new Se(t.MIN_KEY,t.MAX_KEY);return d(d({},t),{transaction:function(o,i,a){if(G.subscr&&i!=="readonly")throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return t.transaction(o,i,a)},table:function(o){var i=t.table(o),a=i.schema,s=a.primaryKey,u=a.indexes,c=s.extractKey,p=s.outbound,y=s.autoIncrement&&u.filter(function(m){return m.compound&&m.keyPath.includes(s.keyPath)}),h=d(d({},i),{mutate:function(m){var g,k,C=m.trans,A=m.mutatedParts||(m.mutatedParts={}),j=function(V){var me="idb://".concat(e,"/").concat(o,"/").concat(V);return A[me]||(A[me]=new Se)},N=j(""),R=j(":dels"),z=m.type,L=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[yn(s,m).filter(function(V){return V}),m.values]:[],B=L[0],J=L[1],fe=m.trans._cache;if(_(B)){N.addKeys(B);var U=z==="delete"||B.length===J.length?mo(B,fe):null;U||R.addKeys(B),(U||J)&&Da(j,a,U,J)}else if(B){var ce={from:(g=B.lower)!==null&&g!==void 0?g:t.MIN_KEY,to:(k=B.upper)!==null&&k!==void 0?k:t.MAX_KEY};R.add(ce),N.add(ce)}else N.add(r),R.add(r),a.indexes.forEach(function(V){return j(V.name).add(r)});return i.mutate(m).then(function(V){return B&&(m.type==="add"||m.type==="put")&&(N.addKeys(V.results),y&&y.forEach(function(me){for(var Q=m.values.map(function(Oe){return me.extractKey(Oe)}),be=me.keyPath.findIndex(function(Oe){return Oe===s.keyPath}),Ce=0,qe=V.results.length;Ce<qe;++Ce)Q[Ce][be]=V.results[Ce];j(me.name).addKeys(Q)})),C.mutatedParts=pr(C.mutatedParts||{},A),V})}}),S=function(m){var g,k,C=m.query,A=C.index,j=C.range;return[A,new Se((g=j.lower)!==null&&g!==void 0?g:t.MIN_KEY,(k=j.upper)!==null&&k!==void 0?k:t.MAX_KEY)]},D={get:function(m){return[s,new Se(m.key)]},getMany:function(m){return[s,new Se().addKeys(m.keys)]},count:S,query:S,openCursor:S};return O(D).forEach(function(m){h[m]=function(g){var k=G.subscr,C=!!k,A=yo(G,i)&&vo(m,g),j=A?g.obsSet={}:k;if(C){var N=function(U){var ce="idb://".concat(e,"/").concat(o,"/").concat(U);return j[ce]||(j[ce]=new Se)},R=N(""),z=N(":dels"),L=D[m](g),B=L[0],J=L[1];if(m==="query"&&B.isPrimaryKey&&!g.values?z.add(J):N(B.name||"").add(J),!B.isPrimaryKey)if(m==="count")z.add(r);else{var fe=m==="query"&&p&&g.values&&i.query(d(d({},g),{values:!1}));return i[m].apply(this,arguments).then(function(U){if(m==="query"){if(p&&g.values)return fe.then(function(Q){var be=Q.result;return R.addKeys(be),U});var ce=g.values?U.result.map(c):U.result;g.values?R.addKeys(ce):z.addKeys(ce)}else if(m==="openCursor"){var V=U,me=g.values;return V&&Object.create(V,{key:{get:function(){return z.addKey(V.primaryKey),V.key}},primaryKey:{get:function(){var Q=V.primaryKey;return z.addKey(Q),Q}},value:{get:function(){return me&&R.addKey(V.primaryKey),V.value}}})}return U})}}return i[m].apply(this,arguments)}}),h}})}};function Da(t,e,r,o){function i(a){var s=t(a.name||"");function u(p){return p!=null?a.extractKey(p):null}var c=function(p){return a.multiEntry&&_(p)?p.forEach(function(y){return s.addKey(y)}):s.addKey(p)};(r||o).forEach(function(p,y){var h=r&&u(r[y]),S=o&&u(o[y]);de(h,S)!==0&&(h!=null&&c(h),S!=null&&c(S))})}e.indexes.forEach(i)}function go(t,e,r){if(r.numFailures===0)return e;if(e.type==="deleteRange")return null;var o=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(r.numFailures===o)return null;var i=d({},e);return _(i.keys)&&(i.keys=i.keys.filter(function(a,s){return!(s in r.failures)})),"values"in i&&_(i.values)&&(i.values=i.values.filter(function(a,s){return!(s in r.failures)})),i}function Ma(t,e){return e.lower===void 0?!0:e.lowerOpen?de(t,e.lower)>0:de(t,e.lower)>=0}function Ka(t,e){return e.upper===void 0?!0:e.upperOpen?de(t,e.upper)<0:de(t,e.upper)<=0}function vn(t,e){return Ma(t,e)&&Ka(t,e)}function bo(t,e,r,o,i,a){if(!r||r.length===0)return t;var s=e.query.index,u=s.multiEntry,c=e.query.range,p=o.schema.primaryKey,y=p.extractKey,h=s.extractKey,S=(s.lowLevelIndex||s).extractKey,D=r.reduce(function(m,g){var k=m,C=[];if(g.type==="add"||g.type==="put")for(var A=new Se,j=g.values.length-1;j>=0;--j){var N=g.values[j],R=y(N);if(!A.hasKey(R)){var z=h(N);(u&&_(z)?z.some(function(U){return vn(U,c)}):vn(z,c))&&(A.addKey(R),C.push(N))}}switch(g.type){case"add":{var L=new Se().addKeys(e.values?m.map(function(U){return y(U)}):m);k=m.concat(e.values?C.filter(function(U){var ce=y(U);return L.hasKey(ce)?!1:(L.addKey(ce),!0)}):C.map(function(U){return y(U)}).filter(function(U){return L.hasKey(U)?!1:(L.addKey(U),!0)}));break}case"put":{var B=new Se().addKeys(g.values.map(function(U){return y(U)}));k=m.filter(function(U){return!B.hasKey(e.values?y(U):U)}).concat(e.values?C:C.map(function(U){return y(U)}));break}case"delete":var J=new Se().addKeys(g.keys);k=m.filter(function(U){return!J.hasKey(e.values?y(U):U)});break;case"deleteRange":var fe=g.range;k=m.filter(function(U){return!vn(y(U),fe)});break}return k},t);return D===t?t:(D.sort(function(m,g){return de(S(m),S(g))||de(y(m),y(g))}),e.limit&&e.limit<1/0&&(D.length>e.limit?D.length=e.limit:t.length===e.limit&&D.length<e.limit&&(i.dirty=!0)),a?Object.freeze(D):D)}function _o(t,e){return de(t.lower,e.lower)===0&&de(t.upper,e.upper)===0&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function za(t,e,r,o){if(t===void 0)return e!==void 0?-1:0;if(e===void 0)return 1;var i=de(t,e);if(i===0){if(r&&o)return 0;if(r)return 1;if(o)return-1}return i}function Ba(t,e,r,o){if(t===void 0)return e!==void 0?1:0;if(e===void 0)return-1;var i=de(t,e);if(i===0){if(r&&o)return 0;if(r)return-1;if(o)return 1}return i}function qa(t,e){return za(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&Ba(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function $a(t,e,r,o){var i=ct["idb://".concat(t,"/").concat(e)];if(!i)return[];var a=i.queries[r];if(!a)return[null,!1,i,null];var s=o.query?o.query.index.name:null,u=a[s||""];if(!u)return[null,!1,i,null];switch(r){case"query":var c=u.find(function(h){return h.req.limit===o.limit&&h.req.values===o.values&&_o(h.req.query.range,o.query.range)});if(c)return[c,!0,i,u];var p=u.find(function(h){var S="limit"in h.req?h.req.limit:1/0;return S>=o.limit&&(o.values?h.req.values:!0)&&qa(h.req.query.range,o.query.range)});return[p,!1,i,u];case"count":var y=u.find(function(h){return _o(h.req.query.range,o.query.range)});return[y,!!y,i,u]}}function Fa(t,e,r,o){t.subscribers.add(r),o.addEventListener("abort",function(){t.subscribers.delete(r),t.subscribers.size===0&&La(t,e)})}function La(t,e){setTimeout(function(){t.subscribers.size===0&&tt(e,t)},3e3)}var Ua={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,r=d(d({},t),{transaction:function(o,i,a){var s=t.transaction(o,i,a);if(i==="readwrite"){var u=new AbortController,c=u.signal,p=function(y){return function(){if(u.abort(),i==="readwrite"){for(var h=new Set,S=0,D=o;S<D.length;S++){var m=D[S],g=ct["idb://".concat(e,"/").concat(m)];if(g){var k=t.table(m),C=g.optimisticOps.filter(function(me){return me.trans===s});if(s._explicit&&y&&s.mutatedParts)for(var A=0,j=Object.values(g.queries.query);A<j.length;A++)for(var N=j[A],R=0,z=N.slice();R<z.length;R++){var L=z[R];ln(L.obsSet,s.mutatedParts)&&(tt(N,L),L.subscribers.forEach(function(me){return h.add(me)}))}else if(C.length>0){g.optimisticOps=g.optimisticOps.filter(function(me){return me.trans!==s});for(var B=0,J=Object.values(g.queries.query);B<J.length;B++)for(var N=J[B],fe=0,U=N.slice();fe<U.length;fe++){var L=U[fe];if(L.res!=null&&s.mutatedParts)if(y&&!L.dirty){var ce=Object.isFrozen(L.res),V=bo(L.res,L.req,C,k,L,ce);L.dirty?(tt(N,L),L.subscribers.forEach(function(be){return h.add(be)})):V!==L.res&&(L.res=V,L.promise=q.resolve({result:V}))}else L.dirty&&tt(N,L),L.subscribers.forEach(function(be){return h.add(be)})}}}}h.forEach(function(me){return me()})}}};s.addEventListener("abort",p(!1),{signal:c}),s.addEventListener("error",p(!1),{signal:c}),s.addEventListener("complete",p(!0),{signal:c})}return s},table:function(o){var i=t.table(o),a=i.schema.primaryKey,s=d(d({},i),{mutate:function(u){var c=G.trans;if(a.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return i.mutate(u);var p=ct["idb://".concat(e,"/").concat(o)];if(!p)return i.mutate(u);var y=i.mutate(u);return(u.type==="add"||u.type==="put")&&(u.values.length>=50||yn(a,u).some(function(h){return h==null}))?y.then(function(h){var S=d(d({},u),{values:u.values.map(function(m,g){var k;if(h.failures[g])return m;var C=!((k=a.keyPath)===null||k===void 0)&&k.includes(".")?je(m):d({},m);return F(C,a.keyPath,h.results[g]),C})}),D=go(p,S,h);p.optimisticOps.push(D),queueMicrotask(function(){return u.mutatedParts&&dr(u.mutatedParts)})}):(p.optimisticOps.push(u),u.mutatedParts&&dr(u.mutatedParts),y.then(function(h){if(h.numFailures>0){tt(p.optimisticOps,u);var S=go(p,u,h);S&&p.optimisticOps.push(S),u.mutatedParts&&dr(u.mutatedParts)}}),y.catch(function(){tt(p.optimisticOps,u),u.mutatedParts&&dr(u.mutatedParts)})),y},query:function(u){var c;if(!yo(G,i)||!vo("query",u))return i.query(u);var p=((c=G.trans)===null||c===void 0?void 0:c.db._options.cache)==="immutable",y=G,h=y.requery,S=y.signal,D=$a(e,o,"query",u),m=D[0],g=D[1],k=D[2],C=D[3];if(m&&g)m.obsSet=u.obsSet;else{var A=i.query(u).then(function(j){var N=j.result;if(m&&(m.res=N),p){for(var R=0,z=N.length;R<z;++R)Object.freeze(N[R]);Object.freeze(N)}else j.result=je(N);return j}).catch(function(j){return C&&m&&tt(C,m),Promise.reject(j)});m={obsSet:u.obsSet,promise:A,subscribers:new Set,type:"query",req:u,dirty:!1},C?C.push(m):(C=[m],k||(k=ct["idb://".concat(e,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),k.queries.query[u.query.index.name||""]=C)}return Fa(m,C,h,S),m.promise.then(function(j){return{result:bo(j.result,u,k?.optimisticOps,i,m,p)}})}});return s}});return r}};function mr(t,e){return new Proxy(t,{get:function(r,o,i){return o==="db"?e:Reflect.get(r,o,i)}})}var He=(function(){function t(e,r){var o=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=r=d({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ve,dbReadyPromise:null,cancelOpen:ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};s.dbReadyPromise=new q(function(c){s.dbReadyResolve=c}),s.openCanceller=new q(function(c,p){s.cancelOpen=p}),this._state=s,this.name=e,this.on=At(this,"populate","blocked","versionchange","close",{ready:[Dr,ve]}),this.once=function(c,p){var y=function(){for(var h=[],S=0;S<arguments.length;S++)h[S]=arguments[S];o.on(c).unsubscribe(y),p.apply(o,h)};return o.on(c,y)},this.on.ready.subscribe=ue(this.on.ready.subscribe,function(c){return function(p,y){t.vip(function(){var h=o._state;if(h.openComplete)h.dbOpenError||q.resolve().then(p),y&&c(p);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(p),y&&c(p);else{c(p);var S=o;y||c(function D(){S.on.ready.unsubscribe(p),S.on.ready.unsubscribe(D)})}})}}),this.Collection=Ji(this),this.Table=Wi(this),this.Transaction=aa(this),this.Version=xa(this),this.WhereClause=oa(this),this.on("versionchange",function(c){c.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(c.oldVersion/10))}),this._maxKey=Dt(r.IDBKeyRange),this._createTransaction=function(c,p,y,h){return new o.Transaction(c,p,y,o._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(c){o.on("blocked").fire(c),bt.filter(function(p){return p.name===o.name&&p!==o&&!p._state.vcFired}).map(function(p){return p.on("versionchange").fire(c)})},this.use(Na),this.use(Ua),this.use(Ia),this.use(ja),this.use(Aa);var u=new Proxy(this,{get:function(c,p,y){if(p==="_vip")return!0;if(p==="table")return function(S){return mr(o.table(S),u)};var h=Reflect.get(c,p,y);return h instanceof Vn?mr(h,u):p==="tables"?h.map(function(S){return mr(S,u)}):p==="_createTransaction"?function(){var S=h.apply(this,arguments);return mr(S,u)}:h}});this.vip=u,a.forEach(function(c){return c(o)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,o=r.filter(function(i){return i._cfg.version===e})[0];return o||(o=new this.Version(e),r.push(o),r.sort(da),o.stores({}),this._state.autoSchema=!1,o)},t.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new q(function(o,i){if(r._state.openComplete)return i(new X.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){i(new X.DatabaseClosed);return}r.open().catch(ve)}r._state.dbReadyPromise.then(o,i)}).then(e)},t.prototype.use=function(e){var r=e.stack,o=e.create,i=e.level,a=e.name;a&&this.unuse({stack:r,name:a});var s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:o,level:i??10,name:a}),s.sort(function(u,c){return u.level-c.level}),this},t.prototype.unuse=function(e){var r=e.stack,o=e.name,i=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(a){return i?a.create!==i:o?a.name!==o:!1})),this},t.prototype.open=function(){var e=this;return at(Ze,function(){return Oa(e)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,r=bt.indexOf(this);if(r>=0&&bt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new q(function(o){e.dbReadyResolve=o}),e.openCanceller=new q(function(o,i){e.cancelOpen=i}))},t.prototype.close=function(e){var r=e===void 0?{disableAutoOpen:!0}:e,o=r.disableAutoOpen,i=this._state;o?(i.isBeingOpened&&i.cancelOpen(new X.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new X.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},t.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new q(function(a,s){var u=function(){r.close(e);var c=r._deps.indexedDB.deleteDatabase(r.name);c.onsuccess=ge(function(){Ca(r._deps,r.name),a()}),c.onerror=Be(s),c.onblocked=r._fireOnBlocked};if(o)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(u):u()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return O(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=Ea.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,r,o){var i=this,a=G.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var u,c;try{if(c=r.map(function(y){var h=y instanceof i.Table?y.name:y;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===Yr)u=Yr;else if(e=="rw"||e==Gr)u=Gr;else throw new X.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===Yr&&u===Gr)if(s)a=null;else throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&c.forEach(function(y){if(a&&a.storeNames.indexOf(y)===-1)if(s)a=null;else throw new X.SubTransaction("Table "+y+" not included in parent transaction.")}),s&&a&&!a.active&&(a=null)}}catch(y){return a?a._promise(null,function(h,S){S(y)}):_e(y)}var p=ho.bind(null,this,u,c,a,o);return a?a._promise(u,p,"lock"):G.trans?at(G.transless,function(){return i._whenReady(p)}):this._whenReady(p)},t.prototype.table=function(e){if(!E(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},t})(),Ha=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Za=(function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,r,o){return this._subscribe(!e||typeof e=="function"?{next:e,error:r,complete:o}:e)},t.prototype[Ha]=function(){return this},t})(),yr;try{yr={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{yr={indexedDB:null,IDBKeyRange:null}}function wo(t){var e=!1,r,o=new Za(function(i){var a=Tr(t);function s(C){var A=yt();try{a&&gt();var j=Ye(t,C);return a&&(j=j.finally(Ge)),j}finally{A&&vt()}}var u=!1,c,p={},y={},h={get closed(){return u},unsubscribe:function(){u||(u=!0,c&&c.abort(),S&&Xe.storagemutated.unsubscribe(g))}};i.start&&i.start(h);var S=!1,D=function(){return Ur(k)};function m(){return ln(y,p)}var g=function(C){pr(p,C),m()&&D()},k=function(){if(!(u||!yr.indexedDB)){p={};var C={};c&&c.abort(),c=new AbortController;var A={subscr:C,signal:c.signal,requery:D,querier:t,trans:null},j=s(A);Promise.resolve(j).then(function(N){e=!0,r=N,!(u||A.signal.aborted)&&(p={},y=C,!Er(y)&&!S&&(Xe(It,g),S=!0),Ur(function(){return!u&&i.next&&i.next(N)}))},function(N){e=!1,["DatabaseClosedError","AbortError"].includes(N?.name)||u||Ur(function(){u||i.error&&i.error(N)})})}};return setTimeout(D,0),h});return o.hasValue=function(){return e},o.getValue=function(){return r},o}var lt=He;K(lt,d(d({},Ht),{delete:function(t){var e=new lt(t,{addons:[]});return e.delete()},exists:function(t){return new lt(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return ka(lt.dependencies).then(t)}catch{return _e(new X.MissingAPI)}},defineClass:function(){function t(e){w(this,e)}return t},ignoreTransaction:function(t){return G.trans?at(G.transless,t):t()},vip:sn,async:function(t){return function(){try{var e=hn(t.apply(this,arguments));return!e||typeof e.then!="function"?q.resolve(e):e}catch(r){return _e(r)}}},spawn:function(t,e,r){try{var o=hn(t.apply(r,e||[]));return!o||typeof o.then!="function"?q.resolve(o):o}catch(i){return _e(i)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(t,e){var r=q.resolve(typeof t=="function"?lt.ignoreTransaction(t):t).timeout(e||6e4);return G.trans?G.trans.waitFor(r):r},Promise:q,debug:{get:function(){return ze},set:function(t){Kn(t)}},derive:Z,extend:w,props:K,override:ue,Events:At,on:Xe,liveQuery:wo,extendObservabilitySet:pr,getByKeyPath:te,setByKeyPath:F,delByKeyPath:ae,shallowClone:re,deepClone:je,getObjectDiff:mn,cmp:de,asap:W,minKey:Zr,addons:[],connections:bt,errnames:Ir,dependencies:yr,cache:ct,semVer:Zn,version:Zn.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,r*2)})})),lt.maxKey=Dt(lt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xe(It,function(t){if(!Je){var e;e=new CustomEvent(Xr,{detail:t}),Je=!0,dispatchEvent(e),Je=!1}}),addEventListener(Xr,function(t){var e=t.detail;Je||gn(e)}));function gn(t){var e=Je;try{Je=!0,Xe.storagemutated.fire(t),dn(t,!0)}finally{Je=e}}var Je=!1,xt,bn=function(){};typeof BroadcastChannel<"u"&&(bn=function(){xt=new BroadcastChannel(Xr),xt.onmessage=function(t){return t.data&&gn(t.data)}},bn(),typeof xt.unref=="function"&&xt.unref(),Xe(It,function(t){Je||xt.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!He.disableBfCache&&t.persisted){ze&&console.debug("Dexie: handling persisted pagehide"),xt?.close();for(var e=0,r=bt;e<r.length;e++){var o=r[e];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(t){!He.disableBfCache&&t.persisted&&(ze&&console.debug("Dexie: handling persisted pageshow"),bn(),gn({all:new Se(-1/0,[[]])}))}));function Ya(t){return new jt({add:t})}function Ga(t){return new jt({remove:t})}function Wa(t,e){return new jt({replacePrefix:[t,e]})}q.rejectionMapper=Ri,Kn(ze);var Qa=Object.freeze({__proto__:null,Dexie:He,liveQuery:wo,Entity:Wn,cmp:de,PropModification:jt,replacePrefix:Wa,add:Ya,remove:Ga,default:He,RangeSet:Se,mergeRanges:zt,rangesOverlap:co});return d(He,Qa,{default:He}),He}))}),Rn=hu(mu(),1),Io=Symbol.for("Dexie"),Sr=globalThis[Io]||(globalThis[Io]=Rn.default);if(Rn.default.semVer!==Sr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rn.default.semVer} and ${Sr.semVer}`);var{liveQuery:yc,mergeRanges:vc,rangesOverlap:gc,RangeSet:bc,cmp:_c,Entity:wc,PropModification:xc,replacePrefix:kc,add:Sc,remove:Cc,DexieYProvider:Pc}=Sr,jn=Sr;Re();var yu=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function Mo(){return(await yu.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var vu=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Ko(f){return{items:(await vu.getContents(f,{offset:0,limit:-1})).items}}async function zo(f){let n=new Map,l=50,b=[...new Set(f)];for(let d=0;d<b.length;d+=l){let v=b.slice(d,d+l).map(async O=>{let w=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:O,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(w)for(let x of w){let T=x?.track?.uri;T&&n.set(T,x.track)}});await Promise.allSettled(v)}return n}async function Bo(f){let n=new Map,l=[...new Set(f.map(v=>Spicetify.URI.fromString(v).id).filter(v=>!!v))],b=async v=>{for(let _=0;_<v.length;_+=50){let x=`https://api.spotify.com/v1/tracks?ids=${v.slice(_,_+50).join(",")}`;try{(await Spicetify.CosmosAsync.get(x))?.tracks?.forEach(E=>{E?.uri&&n.set(E.uri,E)})}catch{}}},d=async v=>{for(let _=0;_<v.length;_+=50){let w=v.slice(_,_+50);await Promise.allSettled(w.map(async x=>{let T=`spotify:track:${x}`;if(!n.has(T))try{let E=Spicetify.URI.idToHex(x),$=await(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/track/${E}`).send()).body;$&&n.set(T,$)}catch{}}))}};await b(l);let P=l.filter(v=>!n.has(`spotify:track:${v}`));return P.length>0&&await d(P),n}Re();var qo=webpackChunkclient_web.push([[Symbol()],{},f=>f]),gu=Object.entries(qo.m),bu=gu.filter(([f,n])=>typeof n=="function"&&n.toString().includes("main-confirmDialog-container")),_u=bu.flatMap(([f])=>Object.values(qo(f)))[0];Spicetify.ReactComponent.ConfirmDialog=_u;function $o({titleText:f,descriptionText:n,cancelText:l="Cancel",confirmText:b="Confirm",onConfirm:d,onClose:P,onOpen:v,onOutside:O,allowHTML:_,confirmLabel:w,shouldCloseOnEsc:x,shouldCloseOnOverlayClick:T,shouldFocusAfterRender:E,width:K}){let $=document.createElement("div");document.body.appendChild($);let I=kr($),Z=()=>{let[Y,se]=Ee(!0),oe=Te(null);Ke(()=>{v?.()},[v]),Ke(()=>{if(Y)return;let ue=()=>{I.unmount(),$.remove()},H=oe.current;if(H)return H.addEventListener("animationend",ue,{once:!0}),()=>{H.removeEventListener("animationend",ue)};ue()},[Y]);let ie=ue=>()=>{ue?.(),se(!1)};return M(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:_,cancelText:l,confirmLabel:w,confirmText:b,descriptionText:n,isOpen:Y,onClose:ie(P),onConfirm:ie(d),onOutside:ie(O),ref:oe,shouldCloseOnEsc:x,shouldCloseOnOverlayClick:T,shouldFocusAfterRender:E,titleText:f,width:K})};I.render(M(Z,{}))}var Uo=De(Ne());Re();var Fo=new CSSStyleSheet;Fo.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Lo=Fo;document.adoptedStyleSheets.push(Lo);var Cr=we(f=>{let n=(0,Uo.c)(43),{value:l,options:b,onChange:d,disabled:P}=f,v=xn(),O=Te(null),_=`--dropdown-anchor-${v.replace(/:/g,"id")}`,w,x,T,E,K,$,I,Z,Y;if(n[0]!==_||n[1]!==P||n[2]!==d||n[3]!==b||n[4]!==v||n[5]!==l){let ie=ne=>{d?.(ne.value),O.current?.hidePopover()},ue;n[15]!==b||n[16]!==l?(ue=b.find(ne=>ne.value===l)?.label||"Select...",n[15]=b,n[16]=l,n[17]=ue):ue=n[17];let H=ue;I="dropdown",Z=P;let W;n[18]!==_?(W={anchorName:_},n[18]=_,n[19]=W):W=n[19];let ee;n[20]!==H?(ee=M("div",{className:"dropdown__text",children:H}),n[20]=H,n[21]=ee):ee=n[21];let te;n[22]===Symbol.for("react.memo_cache_sentinel")?(te=M("div",{className:"dropdown__arrow",children:M(Pe.React.dropdown,{size:12})}),n[22]=te):te=n[22],n[23]!==v||n[24]!==W||n[25]!==ee?(Y=pe("button",{className:"dropdown__button",popoverTarget:v,popoverTargetAction:"toggle",style:W,children:[ee,te]}),n[23]=v,n[24]=W,n[25]=ee,n[26]=Y):Y=n[26],w="dropdown__menu",x=v,T="auto",E=O;let F=`calc(anchor(${_} bottom) + 4px)`,ae=`anchor(${_} left)`,re=`anchor-size(${_} width)`;n[27]!==F||n[28]!==ae||n[29]!==re?(K={top:F,left:ae,width:re},n[27]=F,n[28]=ae,n[29]=re,n[30]=K):K=n[30],$=b.map(ne=>M("div",{className:`dropdown__option${l===ne.value?" dropdown__option--selected":""}`,onClick:()=>ie(ne),onKeyDown:le=>le.key==="Enter"&&ie(ne),role:"option",tabIndex:0,children:ne.label},ne.value)),n[0]=_,n[1]=P,n[2]=d,n[3]=b,n[4]=v,n[5]=l,n[6]=w,n[7]=x,n[8]=T,n[9]=E,n[10]=K,n[11]=$,n[12]=I,n[13]=Z,n[14]=Y}else w=n[6],x=n[7],T=n[8],E=n[9],K=n[10],$=n[11],I=n[12],Z=n[13],Y=n[14];let se;n[31]!==w||n[32]!==x||n[33]!==T||n[34]!==E||n[35]!==K||n[36]!==$?(se=M("div",{className:w,id:x,popover:T,ref:E,style:K,children:$}),n[31]=w,n[32]=x,n[33]=T,n[34]=E,n[35]=K,n[36]=$,n[37]=se):se=n[37];let oe;return n[38]!==se||n[39]!==I||n[40]!==Z||n[41]!==Y?(oe=pe("div",{className:I,disabled:Z,children:[Y,se]}),n[38]=se,n[39]=I,n[40]=Z,n[41]=Y,n[42]=oe):oe=n[42],oe});var li=De(Ne());Re();var Ho=new CSSStyleSheet;Ho.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var Zo=Ho;var oi=De(Ne());Re();var Wo=De(Ne());Re();var Yo=new CSSStyleSheet;Yo.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var Go=Yo;document.adoptedStyleSheets.push(Go);var Qo=we(f=>{let n=(0,Wo.c)(7),{value:l,onChange:b,placeholder:d,disabled:P}=f,v=P===void 0?!1:P,O;n[0]!==b?(O=x=>{b(x.target.value)},n[0]=b,n[1]=O):O=n[1];let _=O,w;return n[2]!==v||n[3]!==_||n[4]!==d||n[5]!==l?(w=M("input",{className:"input",disabled:v,onChange:_,placeholder:d,type:"text",value:l}),n[2]=v,n[3]=_,n[4]=d,n[5]=l,n[6]=w):w=n[6],w});var Vo=De(Ne());Re();var Xo=new CSSStyleSheet;Xo.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Jo=Xo;document.adoptedStyleSheets.push(Jo);var Pr=we(f=>{let n=(0,Vo.c)(28),{value:l,min:b,max:d,step:P,defaultValue:v,onChange:O,onRelease:_,disabled:w}=f,x=b===void 0?0:b,T=d===void 0?100:d,E=P===void 0?1:P,K=Te(null),$=Te(!1),I=l!==void 0?l:v,Z=T>x&&I!==void 0?(I-x)/(T-x)*100:0,Y;n[0]!==w||n[1]!==T||n[2]!==x||n[3]!==O||n[4]!==E?(Y=ye=>{if(!K.current||w)return;let ke=K.current.getBoundingClientRect(),Er=ye.clientX,je=Math.max(0,Math.min(Er-ke.left,ke.width))/ke.width*(T-x)+x;je=Math.round(je/E)*E,je=Math.max(x,Math.min(je,T)),O(je)},n[0]=w,n[1]=T,n[2]=x,n[3]=O,n[4]=E,n[5]=Y):Y=n[5];let se=Y,oe;n[6]!==w||n[7]!==se?(oe=ye=>{w||!K.current||($.current=!0,K.current.setPointerCapture(ye.pointerId),se(ye.nativeEvent))},n[6]=w,n[7]=se,n[8]=oe):oe=n[8];let ie=oe,ue;n[9]!==se?(ue=ye=>{$.current&&se(ye.nativeEvent)},n[9]=se,n[10]=ue):ue=n[10];let H=ue,W;n[11]!==_?(W=ye=>{!$.current||!K.current||($.current=!1,K.current.releasePointerCapture(ye.pointerId),_?.())},n[11]=_,n[12]=W):W=n[12];let ee=W,te=`${Z}%`,F;n[13]!==te?(F=M("div",{className:"slider__fill",style:{width:te}}),n[13]=te,n[14]=F):F=n[14];let ae=`${Z}%`,re;n[15]!==ae?(re=M("div",{className:"slider__thumb",style:{left:ae}}),n[15]=ae,n[16]=re):re=n[16];let ne;n[17]!==re||n[18]!==F?(ne=pe("div",{className:"slider__track",children:[F,re]}),n[17]=re,n[18]=F,n[19]=ne):ne=n[19];let le;n[20]!==ie||n[21]!==H||n[22]!==ee||n[23]!==ne?(le=M("div",{className:"slider-container",onPointerCancel:ee,onPointerDown:ie,onPointerMove:H,onPointerUp:ee,ref:K,children:ne}),n[20]=ie,n[21]=H,n[22]=ee,n[23]=ne,n[24]=le):le=n[24];let he;return n[25]!==w||n[26]!==le?(he=M("div",{className:"slider",disabled:w,children:le}),n[25]=w,n[26]=le,n[27]=he):he=n[27],he});var ri=De(Ne());Re();var ei=new CSSStyleSheet;ei.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var ti=ei;document.adoptedStyleSheets.push(ti);var ni=we(f=>{let n=(0,ri.c)(10),{value:l,onChange:b,disabled:d}=f,P;n[0]!==d||n[1]!==b||n[2]!==l?(P=()=>{d||b(!l)},n[0]=d,n[1]=b,n[2]=l,n[3]=P):P=n[3];let v=P,O=`toggle__slider${l?" toggle__slider--enabled":""}${d?" toggle__slider--disabled":""}`,_;n[4]!==O?(_=M("span",{className:"toggle__background",children:M("span",{className:O})}),n[4]=O,n[5]=_):_=n[5];let w;return n[6]!==d||n[7]!==v||n[8]!==_?(w=M("button",{className:"toggle",disabled:d,onClick:v,role:"switch",children:_}),n[6]=d,n[7]=v,n[8]=_,n[9]=w):w=n[9],w});var ii=we(f=>{let n=(0,oi.c)(23),{option:l,value:b,onChange:d,disabled:P}=f;switch(l.type){case"toggle":{let v=b,O;return n[0]!==P||n[1]!==d||n[2]!==v?(O=M(ni,{disabled:P,onChange:d,value:v}),n[0]=P,n[1]=d,n[2]=v,n[3]=O):O=n[3],O}case"input":{let v=b,O;return n[4]!==P||n[5]!==d||n[6]!==l.placeholder||n[7]!==v?(O=M(Qo,{disabled:P,onChange:d,placeholder:l.placeholder,value:v}),n[4]=P,n[5]=d,n[6]=l.placeholder,n[7]=v,n[8]=O):O=n[8],O}case"dropdown":{let v;n[9]!==l.options?(v=l.options||[],n[9]=l.options,n[10]=v):v=n[10];let O=b,_;return n[11]!==P||n[12]!==d||n[13]!==v||n[14]!==O?(_=M(Cr,{disabled:P,onChange:d,options:v,value:O}),n[11]=P,n[12]=d,n[13]=v,n[14]=O,n[15]=_):_=n[15],_}case"slider":{let v=b,O;return n[16]!==P||n[17]!==d||n[18]!==l.max||n[19]!==l.min||n[20]!==l.step||n[21]!==v?(O=M(Pr,{disabled:P,max:l.max,min:l.min,onChange:d,step:l.step,value:v}),n[16]=P,n[17]=d,n[18]=l.max,n[19]=l.min,n[20]=l.step,n[21]=v,n[22]=O):O=n[22],O}default:return console.warn(`Unknown option type for option "${l.name||"N/A"}"`),null}});var ai=De(Ne());Re();var si=we(f=>{let n=(0,ai.c)(6),{name:l,popupModal:b}=f,d;n[0]!==b||n[1]!==l?(d=()=>ft({title:l,content:M(b,{}),isLarge:!1}),n[0]=b,n[1]=l,n[2]=d):d=n[2];let P;n[3]===Symbol.for("react.memo_cache_sentinel")?(P=M(Pe.React.editButton,{size:16}),n[3]=P):P=n[3];let v;return n[4]!==d?(v=M("button",{className:"popup-button",onClick:d,children:P}),n[4]=d,n[5]=v):v=n[5],v});var ui=De(Ne());Re();var ci=we(f=>{let n=(0,ui.c)(3),{tippy:l}=f,b;n[0]===Symbol.for("react.memo_cache_sentinel")?(b=M("div",{className:"info-tippy",children:M(Pe.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),n[0]=b):b=n[0];let d;return n[1]!==l?(d=M(Spicetify.ReactComponent.TooltipWrapper,{label:l,placement:"top",showDelay:0,children:b}),n[1]=l,n[2]=d):d=n[2],d});document.adoptedStyleSheets.push(Zo);var fi=we(f=>{let n=(0,li.c)(21),{name:l,desc:b,tippy:d,popupModal:P,option:v,value:O,onChange:_,disabled:w}=f,x;n[0]!==b?(x=M("div",{className:"option__desc",children:b}),n[0]=b,n[1]=x):x=n[1];let T;n[2]!==d?(T=d&&M(ci,{tippy:d}),n[2]=d,n[3]=T):T=n[3];let E;n[4]!==x||n[5]!==T?(E=pe("div",{className:"option__content",children:[x,T]}),n[4]=x,n[5]=T,n[6]=E):E=n[6];let K;n[7]!==l||n[8]!==P?(K=P&&M(si,{name:l,popupModal:P}),n[7]=l,n[8]=P,n[9]=K):K=n[9];let $;n[10]!==w||n[11]!==_||n[12]!==v||n[13]!==O?($=v&&M(ii,{disabled:w,onChange:_||wu,option:v,value:O}),n[10]=w,n[11]=_,n[12]=v,n[13]=O,n[14]=$):$=n[14];let I;n[15]!==K||n[16]!==$?(I=pe("div",{className:"option__control",children:[K,$]}),n[15]=K,n[16]=$,n[17]=I):I=n[17];let Z;return n[18]!==E||n[19]!==I?(Z=pe("div",{className:"option__row",children:[E,I]}),n[18]=E,n[19]=I,n[20]=Z):Z=n[20],Z});function wu(){}var pi=()=>{let f=globalThis.webpackChunkclient_web.push([[Symbol()],{},b=>b]),n=/"data-encore-id":(?:\w+\.)+([A-Z]\w*)\b/,l={};for(let[b,d]of Object.entries(f.m)){if(typeof d!="function")continue;let P=f(b);if(!(!P||typeof P!="object"))for(let v of Object.values(P)){let O=typeof v=="function"?v:v?.render;if(!O)continue;let _=O.toString().match(n);_?.[1]&&!l[_[1]]&&(l[_[1]]=v)}}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(l).length} components.`),globalThis.UI=l};var hi=De(Ne());Re();var Fe=Spicetify.Platform.PlayerAPI,di={subscribe:f=>{let n=()=>f();return Fe._events.addListener("update",n,{}),()=>{Fe._events.removeListener("update",n,{})}},getSnapshot:()=>Fe._state},mi=(f,n)=>{let l=(0,hi.c)(22),b=qt(di.subscribe,di.getSnapshot),d=b.item?.uri===f,P=b.isPaused,v=d&&!P,[O,_]=Ee(0),[w,x]=Ee(n),T=Te(!1),E=Te(0),K,$;l[0]!==d||l[1]!==P||l[2]!==b.duration||l[3]!==b.positionAsOfTimestamp||l[4]!==n?(K=()=>{if(!d){_(0),x(n);return}if(x(b.duration),T.current)return;if(P){_(b.positionAsOfTimestamp);return}let H=setInterval(()=>{let W=Date.now(),ee=Fe._state.positionAsOfTimestamp,te=Fe._state.timestamp,F=W-te+ee;_(Math.min(F,b.duration))},100);return()=>clearInterval(H)},$=[d,P,b.duration,b.positionAsOfTimestamp,n],l[0]=d,l[1]=P,l[2]=b.duration,l[3]=b.positionAsOfTimestamp,l[4]=n,l[5]=K,l[6]=$):(K=l[5],$=l[6]),Ke(K,$);let I;l[7]!==d||l[8]!==P||l[9]!==f?(I=()=>{d?P?Fe.resume({}):Fe.pause({}):Fe.play({uri:f},{})},l[7]=d,l[8]=P,l[9]=f,l[10]=I):I=l[10];let Z=I,Y;l[11]===Symbol.for("react.memo_cache_sentinel")?(Y=H=>{T.current=!0,_(H),E.current=H},l[11]=Y):Y=l[11];let se=Y,oe;l[12]!==d||l[13]!==f?(oe=()=>{T.current=!1,d?Fe.seekTo(E.current):Fe.play({uri:f},{})},l[12]=d,l[13]=f,l[14]=oe):oe=l[14];let ie=oe,ue;return l[15]!==w||l[16]!==ie||l[17]!==d||l[18]!==v||l[19]!==O||l[20]!==Z?(ue={position:O,duration:w,isPlaying:v,isActiveTrack:d,togglePlay:Z,handleSliderChange:se,handleSliderRelease:ie},l[15]=w,l[16]=ie,l[17]=d,l[18]=v,l[19]=O,l[20]=Z,l[21]=ue):ue=l[21],ue};pi();var xu=["exact","isrc","probable","likely","possible","maybe"],Tn=class extends jn{constructor(){super("findDupeTracks"),this.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, albumUri, trackPlayCount, trackIsrc, ignoreDuplicates"})}},yi=new Tn,Or={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0,maybe:!1},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0,maybe:!0},defaultNormalizeWords:["live","remix","mix","acoustic","inst","instrumental","radio","version","ver","edit","mono","stereo","deluxe","demo","rehearsal","intro","outro","remaster","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],customNormalizeWords:[]},bi="findDupeTracks:settings",vi=(()=>{try{let f=localStorage.getItem(bi);return f?{...Or,...JSON.parse(f)}:Or}catch{return Or}})(),An=new Set,Nn={getSnapshot:()=>vi,subscribe:f=>(An.add(f),()=>An.delete(f)),update:f=>{vi=f,localStorage.setItem(bi,JSON.stringify(f)),An.forEach(n=>{n()})}},_i=()=>qt(Nn.subscribe,Nn.getSnapshot),ku=f=>new RegExp(`\\b(${f.join("|")})\\b`,"gi"),Su=(f,n)=>f.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(n,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),Cu=(f,n)=>{let l=f.replace(/\s+/g,""),b=n.replace(/\s+/g,"");if(l===b)return 1;if(l.length<2||b.length<2)return 0;let d=new Map;for(let v=0;v<l.length-1;v++){let O=l.substring(v,v+2);d.set(O,(d.get(O)||0)+1)}let P=0;for(let v=0;v<b.length-1;v++){let O=b.substring(v,v+2),_=d.get(O)||0;_>0&&(d.set(O,_-1),P++)}return 2*P/(l.length+b.length-2)},Pu=()=>{let f=(0,et.c)(6),n;f[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],f[0]=n):n=f[0];let[l,b]=Ee(n),[d,P]=Ee(!0),v,O;f[1]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{(async()=>{let x=await Mo();b(x.filter(Mu)),P(!1)})()},O=[],f[1]=v,f[2]=O):(v=f[1],O=f[2]),Ke(v,O);let _;return f[3]!==d||f[4]!==l?(_={playlists:l,loading:d},f[3]=d,f[4]=l,f[5]=_):_=f[5],_},Ou=f=>{let n=(0,et.c)(9),l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],n[0]=l):l=n[0];let[b,d]=Ee(l),P;n[1]===Symbol.for("react.memo_cache_sentinel")?(P={playCounts:new Map,durations:new Map,isrcs:new Map},n[1]=P):P=n[1];let[v,O]=Ee(P),[_,w]=Ee(!1),x,T;n[2]!==f?(x=()=>{if(!f){d([]);return}let K=new AbortController;return w(!0),(async()=>{try{let{items:I}=await Ko(f);if(K.signal.aborted)return;let Z=I;d(Z);let Y=await yi.tracks.bulkGet(Z.map(Ku)),se=new Map(Y.filter(zu).map(Bu)),oe=Z.filter(W=>{let ee=se.get(W.uri);return!ee||ee.trackPlayCount==null||ee.trackDuration==null||ee.trackIsrc==null}),ie=new Map,ue=new Map,H=new Map;if(se.forEach(W=>{W.trackPlayCount!=null&&ie.set(W.trackUri,W.trackPlayCount),W.trackDuration!=null&&ue.set(W.trackUri,W.trackDuration),W.trackIsrc!=null&&H.set(W.trackUri,W.trackIsrc)}),oe.length>0){let[W,ee]=await Promise.all([zo(oe.map(qu)),Bo(oe.map($u))]);if(K.signal.aborted)return;let te=[];oe.forEach(F=>{let ae=W.get(F.uri),re=ee.get(F.uri),ne=ae?.duration?.totalMilliseconds??null,le=ae?.playcount?Number(ae.playcount):null,he=re?.external_ids?.isrc??re?.external_id?.find(Fu)?.id;le!=null&&ie.set(F.uri,le),ne!=null&&ue.set(F.uri,ne),he!=null&&H.set(F.uri,he),te.push({trackUri:F.uri,trackName:F.name,albumUri:F.album.uri,trackDuration:ne,trackPlayCount:le,trackIsrc:he})}),await yi.tracks.bulkPut(te)}K.signal.aborted||(O({playCounts:ie,durations:ue,isrcs:H}),w(!1))}catch(I){console.error("Failed to load tracks",I),K.signal.aborted||w(!1)}})(),()=>K.abort()},T=[f],n[2]=f,n[3]=x,n[4]=T):(x=n[3],T=n[4]),Ke(x,T);let E;return n[5]!==_||n[6]!==v||n[7]!==b?(E={tracks:b,metadata:v,loading:_,setTracks:d},n[5]=_,n[6]=v,n[7]=b,n[8]=E):E=n[8],E},Eu=(f,n,l)=>{let{playCounts:b,durations:d,isrcs:P}=n,{defaultNormalizeWords:v,customNormalizeWords:O,groupSettings:_}=l,w=E=>{let K=[];return Object.values(E).forEach($=>{if($.length>1){let I=[...$].sort((Z,Y)=>(b.get(Y.uri)??0)-(b.get(Z.uri)??0));K.push({mainTrack:I[0],duplicates:I.slice(1)})}}),K},x=kn(()=>{if(f.length===0)return{exact:{},isrc:{},probable:{},likely:{},possible:{},maybe:{}};let E=[...v,...O],K=ku(E),$=_.exact?Object.groupBy(f,H=>H.uri):{},I=_.isrc?Object.groupBy(f.filter(H=>P.has(H.uri)),H=>P.get(H.uri)??""):{},Z=f.map(H=>({track:H,normName:H.name.toLowerCase().trim(),normFuzzy:Su(H.name,K),artists:new Set(H.artists.map(W=>W.name.toLowerCase())),uid:H.uid})),Y=(H,W)=>{let ee={},te=Object.groupBy(H,W);return Object.values(te).forEach(F=>{if(!F||F.length<2)return;let ae=new Set;for(let re of F){if(ae.has(re.uid))continue;let ne=d.get(re.track.uri);if(!ne)continue;let le=[re.track];for(let he of F){if(re===he||ae.has(he.uid))continue;let ye=d.get(he.track.uri);ye&&Math.abs(ne-ye)<=5e3&&(le.push(he.track),ae.add(he.uid))}le.length>1&&(ae.add(re.uid),ee[re.uid]=le)}}),ee},se=_.probable?(()=>{let H={},W=Object.groupBy(Z,ee=>ee.normName);return Object.values(W).forEach(ee=>{if(!ee||ee.length<2)return;let te=new Set;ee.forEach(F=>{if(te.has(F.uid))return;let ae=[F.track];ee.forEach(re=>{F===re||te.has(re.uid)||re.track.artists.some(ne=>F.artists.has(ne.name.toLowerCase()))&&(ae.push(re.track),te.add(re.uid))}),ae.length>1&&(te.add(F.uid),H[F.uid]=ae)})}),H})():{},oe=_.likely?Y(Z,H=>H.normName):{},ie=_.possible?Y(Z,H=>H.normFuzzy):{},ue=(()=>{if(!_.maybe)return{};let H=Z.filter(F=>F.normFuzzy.length>=3);H.sort((F,ae)=>F.normFuzzy.localeCompare(ae.normFuzzy));let W={},ee=new Set,te=50;for(let F=0;F<H.length;F++){let ae=H[F];if(ee.has(ae.uid))continue;let re=[ae.track],ne=Math.min(F+te,H.length);for(let le=F+1;le<ne;le++){let he=H[le];if(ee.has(he.uid))continue;if(ae.normFuzzy[0]!==he.normFuzzy[0])break;Cu(ae.normFuzzy,he.normFuzzy)>=.7&&re.push(he.track)}re.length>1&&(re.forEach(le=>{ee.add(le.uid)}),W[ae.uid]=re)}return W})();return{exact:$,isrc:I,probable:se,likely:oe,possible:ie,maybe:ue}},[f,_,v,O,d,P]);return{exact:w(x.exact),isrc:w(x.isrc),probable:w(x.probable),likely:w(x.likely),possible:w(x.possible),maybe:w(x.maybe)}};function Ru(f){let n=(0,et.c)(30),{track:l,playCounts:b}=f,d,P,v,O,_,w;if(n[0]!==b||n[1]!==l.album.name||n[2]!==l.artists||n[3]!==l.uri){let K=b.get(l.uri);_="track-details";let $;n[10]!==l.artists?($=l.artists.map(ju).join(", ")||"N/A",n[10]=l.artists,n[11]=$):$=n[11];let I;n[12]!==$?(I=pe("span",{className:"track-details__artists",children:["Artists: ",$]}),n[12]=$,n[13]=I):I=n[13];let Z=l.album.name||"N/A",Y;n[14]!==Z?(Y=pe("span",{className:"track-details__album",children:["Album: ",Z]}),n[14]=Z,n[15]=Y):Y=n[15],n[16]!==Y||n[17]!==I?(w=pe("div",{className:"track-details__line",children:[I,Y]}),n[16]=Y,n[17]=I,n[18]=w):w=n[18],O="track-details__line",d="track-details__playcount",P="Plays: ",v=K!=null?K.toLocaleString():"N/A",n[0]=b,n[1]=l.album.name,n[2]=l.artists,n[3]=l.uri,n[4]=d,n[5]=P,n[6]=v,n[7]=O,n[8]=_,n[9]=w}else d=n[4],P=n[5],v=n[6],O=n[7],_=n[8],w=n[9];let x;n[19]!==d||n[20]!==P||n[21]!==v?(x=pe("span",{className:d,children:[P,v]}),n[19]=d,n[20]=P,n[21]=v,n[22]=x):x=n[22];let T;n[23]!==O||n[24]!==x?(T=M("div",{className:O,children:x}),n[23]=O,n[24]=x,n[25]=T):T=n[25];let E;return n[26]!==_||n[27]!==w||n[28]!==T?(E=pe("div",{className:_,children:[w,T]}),n[26]=_,n[27]=w,n[28]=T,n[29]=E):E=n[29],E}function ju(f){return f.name}function Au(f){let n=(0,et.c)(19),{trackUri:l,duration:b}=f,{position:d,duration:P,isPlaying:v,togglePlay:O,handleSliderChange:_,handleSliderRelease:w}=mi(l,b??0),x=Tu,T;n[0]!==v?(T=v?M(Pe.React.pause,{}):M(Pe.React.play,{}),n[0]=v,n[1]=T):T=n[1];let E;n[2]!==T||n[3]!==O?(E=M("button",{className:"duplicate-group__playback-button",onClick:O,type:"button",children:T}),n[2]=T,n[3]=O,n[4]=E):E=n[4];let K=x(d),$;n[5]!==K?($=M("span",{className:"slider-time",children:K}),n[5]=K,n[6]=$):$=n[6];let I=P||0,Z=d||0,Y;n[7]!==_||n[8]!==w||n[9]!==I||n[10]!==Z?(Y=M(Pr,{max:I,min:0,onChange:_,onRelease:w,step:1,value:Z}),n[7]=_,n[8]=w,n[9]=I,n[10]=Z,n[11]=Y):Y=n[11];let se=x(P),oe;n[12]!==se?(oe=M("span",{className:"slider-time",children:se}),n[12]=se,n[13]=oe):oe=n[13];let ie;return n[14]!==E||n[15]!==$||n[16]!==Y||n[17]!==oe?(ie=pe("div",{className:"duplicate-group__playback-controls",children:[E,$,Y,oe,")"]}),n[14]=E,n[15]=$,n[16]=Y,n[17]=oe,n[18]=ie):ie=n[18],ie}function Tu(f){if(f==null||f<0)return"N/A";let n=Math.floor(f/1e3);return`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`}var gi=function(n){let l=(0,et.c)(26),{track:b,category:d,onDelete:P,isSource:v,metadata:O}=n,_=`duplicate-group__duplicate-item duplicate-group__item--${d}`,w=v&&"Source: ",x;l[0]!==w||l[1]!==b.name?(x=pe("span",{className:"duplicate-group__duplicate-name",children:[w,b.name]}),l[0]=w,l[1]=b.name,l[2]=x):x=l[2];let T;l[3]!==O.playCounts||l[4]!==b?(T=M(Ru,{playCounts:O.playCounts,track:b}),l[3]=O.playCounts,l[4]=b,l[5]=T):T=l[5];let E;l[6]!==x||l[7]!==T?(E=pe("div",{className:"duplicate-group__duplicate-content",children:[x,T]}),l[6]=x,l[7]=T,l[8]=E):E=l[8];let K;l[9]!==d||l[10]!==P||l[11]!==b?(K=M("button",{className:"duplicate-group__delete-button",onClick:()=>P(d,b),type:"button",children:"Delete"}),l[9]=d,l[10]=P,l[11]=b,l[12]=K):K=l[12];let $;l[13]!==E||l[14]!==K?($=pe("div",{className:"duplicate-group__duplicate-info",children:[E,K]}),l[13]=E,l[14]=K,l[15]=$):$=l[15];let I;l[16]!==O.durations||l[17]!==b.uri?(I=O.durations.get(b.uri),l[16]=O.durations,l[17]=b.uri,l[18]=I):I=l[18];let Z;l[19]!==I||l[20]!==b.uri?(Z=M("div",{className:"duplicate-group__actions",children:M(Au,{duration:I,trackUri:b.uri})}),l[19]=I,l[20]=b.uri,l[21]=Z):Z=l[21];let Y;return l[22]!==_||l[23]!==$||l[24]!==Z?(Y=pe("div",{className:_,children:[$,Z]}),l[22]=_,l[23]=$,l[24]=Z,l[25]=Y):Y=l[25],Y};function Nu(){let f=(0,et.c)(10),n=_i(),l;f[0]!==n?(l=(w,x)=>Nn.update({...n,[w]:x}),f[0]=n,f[1]=l):l=f[1];let b=l,d;f[2]!==n||f[3]!==b?(d=(w,x,T)=>b(w,{...n[w],[x]:T}),f[2]=n,f[3]=b,f[4]=d):d=f[4];let P=d,v;f[5]!==n||f[6]!==P?(v=(w,x,T)=>pe("section",{className:"duplicate-settings__section",children:[M("h3",{className:"duplicate-settings__section-title",children:w}),M("div",{className:"duplicate-settings__options",children:xu.map(E=>M(fi,{desc:T[E],name:`${E}-${x}`,onChange:K=>P(x,E,!!K),option:{type:"toggle",name:E,desc:T[E],defaultVal:Or[x][E]},value:n[x][E]},E))})]}),f[5]=n,f[6]=P,f[7]=v):v=f[7];let O=v,_;return f[8]!==O?(_=pe("div",{className:"duplicate-settings",children:[O("Display Groups","groupSettings",{exact:"Exact Duplicates",isrc:"ISRC Match",probable:"Same Title & Artist",likely:"Same Title & Duration",possible:"Similar Title & Duration",maybe:"Fuzzy Matches"}),O("Confirm Delete","confirmSettings",{exact:"Exact",isrc:"ISRC",probable:"Probable",likely:"Likely",possible:"Possible",maybe:"Maybe"})]}),f[8]=O,f[9]=_):_=f[9],_}function wi(f){let n=(0,et.c)(32),{selectedPlaylist:l}=f,b=_i(),{playlists:d,loading:P}=Pu(),[v,O]=Ee(l),[_,w]=Ee("finder"),{tracks:x,metadata:T,loading:E,setTracks:K}=Ou(v?.uri),$=Eu(x,T,b),I;n[0]!==v||n[1]!==K||n[2]!==b.confirmSettings?(I=async(ne,le)=>{let he=async()=>{v&&(await Spicetify.Platform.PlaylistAPI.remove(v.uri,[{uid:le.uid}]),K(ye=>ye.filter(ke=>ke.uid!==le.uid)))};b.confirmSettings[ne]?$o({titleText:"Remove Track",descriptionText:`Remove "${le.name}"?`,confirmText:"Remove",onConfirm:()=>{he()}}):await he()},n[0]=v,n[1]=K,n[2]=b.confirmSettings,n[3]=I):I=n[3];let Z=I,Y;n[4]!==$||n[5]!==Z||n[6]!==T||n[7]!==b.groupSettings?(Y=(ne,le)=>{if(!b.groupSettings[ne])return null;let he=$[ne];return pe("div",{className:"duplicate-group",children:[pe("div",{className:"duplicate-group__heading",children:[M("div",{className:"duplicate-group__heading-title",children:le}),pe("div",{className:"duplicate-group__heading-length",children:[he.length," found"]})]}),M("div",{className:"duplicate-group__list",children:he.map(ye=>pe("div",{className:`duplicate-group__item duplicate-group__item--${ne}`,children:[M(gi,{category:ne,isSource:!0,metadata:T,onDelete:Z,track:ye.mainTrack}),M("div",{className:"duplicate-group__duplicates-list",children:ye.duplicates.map(ke=>M(gi,{category:ne,metadata:T,onDelete:Z,track:ke},ke.uid))})]},ye.mainTrack.uid))})]})},n[4]=$,n[5]=Z,n[6]=T,n[7]=b.groupSettings,n[8]=Y):Y=n[8];let se=Y,oe=_==="finder"?"Playlist Duplicate Finder":"Settings",ie;n[9]!==oe?(ie=M("h1",{className:"modal__title",children:oe}),n[9]=oe,n[10]=ie):ie=n[10];let ue;n[11]!==_?(ue=()=>w(_==="finder"?"settings":"finder"),n[11]=_,n[12]=ue):ue=n[12];let H;n[13]===Symbol.for("react.memo_cache_sentinel")?(H=M(Pe.React.settings,{}),n[13]=H):H=n[13];let W;n[14]!==ue?(W=M("button",{className:"modal__button",onClick:ue,type:"button",children:H}),n[14]=ue,n[15]=W):W=n[15];let ee;n[16]===Symbol.for("react.memo_cache_sentinel")?(ee=M("button",{className:"modal__button",onClick:Du,type:"button",children:M(Pe.React.close,{size:18})}),n[16]=ee):ee=n[16];let te;n[17]!==W?(te=pe("div",{className:"modal__buttonContainer",children:[W,ee]}),n[17]=W,n[18]=te):te=n[18];let F;n[19]!==ie||n[20]!==te?(F=pe("div",{className:"modal__header",children:[ie,te]}),n[19]=ie,n[20]=te,n[21]=F):F=n[21];let ae;n[22]!==P||n[23]!==E||n[24]!==d||n[25]!==se||n[26]!==v?.uri||n[27]!==_?(ae=M("div",{className:"find-duplicates__content",children:_==="settings"?M(Nu,{}):pe(Pn,{children:[pe("div",{className:"find-duplicates__header",children:[M("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),M(Cr,{disabled:P||E,onChange:ne=>O(d.find(le=>le.uri===ne)??void 0),options:d.map(Iu),value:v?.uri??""})]}),E?M("div",{className:"find-duplicates__loading",children:M(UI.ProgressDots,{size:"medium"})}):pe(Pn,{children:[se("exact","Exact URI Matches"),se("isrc","Same ISRC"),se("probable","Same Title + Shared Artist"),se("likely","Same Title + Same Duration (\xB15s)"),se("possible","Similar Title + Same Duration (\xB15s)"),se("maybe","Maybe Duplicates (Very likely incorrect)")]})]})}),n[22]=P,n[23]=E,n[24]=d,n[25]=se,n[26]=v?.uri,n[27]=_,n[28]=ae):ae=n[28];let re;return n[29]!==F||n[30]!==ae?(re=pe("div",{className:"find-duplicates",children:[F,ae]}),n[29]=F,n[30]=ae,n[31]=re):re=n[31],re}function Iu(f){return{value:f.uri,label:f.name}}function Du(){return ft.hide()}function Mu(f){return f.type==="playlist"&&f.canAddTo}function Ku(f){return f.uri}function zu(f){return f!=null}function Bu(f){return[f.trackUri,f]}function qu(f){return f.album.uri}function $u(f){return f.uri}function Fu(f){return(f?.type||"").toLowerCase()==="isrc"}var xi=new CSSStyleSheet;xi.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-player);--fdp-surface-2: var(--spice-player);--fdp-overlay: rgba(255, 255, 255, .02);--fdp-shadow: 0 4px 12px rgba(0, 0, 0, .28);--fdp-shadow-sm: 0 2px 6px rgba(0, 0, 0, .2);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-button);--fdp-exact: 255 90 90;--fdp-isrc: 255 144 80;--fdp-likely: 234 234 102;--fdp-possible: 128 239 128;display:flex;flex-direction:column;width:100%;min-height:500px;animation:fdp-fade-in .24s ease-out both;.find-duplicates__content{display:flex;flex-direction:column;gap:var(--fdp-gap);padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius);box-shadow:none;.find-duplicates__header-label{font-weight:700;color:var(--fdp-text);letter-spacing:.2px}}.find-duplicates__details{font-size:1.1rem;color:var(--fdp-subtext)}.find-duplicates__loading{display:flex;align-items:center;justify-content:center;height:100%}}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg);box-shadow:none;transition:border-color .2s ease,background-color .2s ease;&:hover{background-color:var(--fdp-surface);border-color:var(--fdp-border-strong)}.duplicate-group__heading{display:flex;gap:12px;align-items:center;justify-content:space-between;font-size:1.05rem;font-weight:800;color:var(--fdp-text);.duplicate-group__heading-length{align-content:center;padding:2px 10px;font-size:12px;font-weight:600;color:var(--fdp-text);background:#ffffff0a;border:1px solid var(--fdp-border);border-radius:999px;box-shadow:none}}.duplicate-group__list{display:flex;flex-direction:column;gap:12px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;background:transparent;border:1px solid var(--fdp-border);border-left:4px solid;border-radius:var(--fdp-radius);transition:background-color .16s ease,border-color .16s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.06);border-color:var(--fdp-border-strong)}&.duplicate-group__item--exact{border-left-color:rgb(var(--fdp-exact));box-shadow:none}&.duplicate-group__item--isrc{border-left-color:rgb(var(--fdp-isrc));box-shadow:none}&.duplicate-group__item--likely{border-left-color:rgb(var(--fdp-likely));box-shadow:none}&.duplicate-group__item--possible{border-left-color:rgb(var(--fdp-possible));box-shadow:none}}.duplicate-group__playback-controls{display:flex;flex-grow:1;gap:10px;align-items:center;width:100%}.duplicate-group__playback-button{display:flex;flex-shrink:0;align-items:center;justify-content:center;width:32px;height:32px;padding:0;color:#fff;cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%;transition:background-color .14s ease,border-color .14s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}&:active{background-color:rgba(var(--spice-rgb-selected-row),.12)}svg{width:18px;height:18px}}.slider-time{min-width:38px;font-size:13px;color:var(--fdp-subtext);text-align:center}.duplicate-group__duplicates-label{padding-left:15px;font-size:14px;font-weight:700;color:var(--fdp-subtext)}.duplicate-group__duplicates-list{padding-left:15px}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:700;color:var(--fdp-text);letter-spacing:.2px;white-space:nowrap}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:10px;font-size:1rem;border-bottom:1px solid var(--fdp-border);&:last-child{border-bottom:none}}.duplicate-group__actions{padding-bottom:8px}.duplicate-group__duplicate-info{display:flex;flex-direction:row;flex-wrap:nowrap;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex:1 1 auto;flex-direction:column;gap:6px;min-width:0}.duplicate-group__delete-button{padding:8px 14px;font-size:.9rem;font-weight:700;line-height:1;color:#fff;cursor:pointer;background-color:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:20px;transition:filter .14s ease,background-color .14s ease,border-color .14s ease;&:hover{border-color:#e9142999;filter:brightness(1.05)}&:active{background-color:#c71124}}}.track-details{display:flex;flex-direction:column;font-size:.92rem;color:var(--fdp-subtext);.track-details__line{display:flex;flex-wrap:wrap;gap:10px}}.duplicate-settings{width:100%;.duplicate-settings__section{margin-bottom:24px;.duplicate-settings__section-title{padding-bottom:8px;margin-bottom:16px;font-size:16px;font-weight:800;border-bottom:1px solid var(--fdp-border)}}.duplicate-settings__description{margin-bottom:12px;font-size:13px;color:var(--fdp-subtext)}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}.duplicate-settings__option{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}.duplicate-settings__words-list{max-height:200px;overflow-y:auto;.duplicate-settings__no-words{padding:12px;color:var(--fdp-subtext);text-align:center;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}}.duplicate-settings__words-ul{padding:0;margin:0}.duplicate-settings__word-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;margin-bottom:8px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm);.duplicate-settings__word-remove{padding:6px 10px;font-size:12px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ff5a5ae6,#ff3c3ce6);border:1px solid rgba(255,90,90,.35);border-radius:999px;transition:transform .14s ease,box-shadow .16s ease,filter .16s ease;&:hover{box-shadow:0 6px 16px #ff5a5a40;filter:brightness(1.06)}}}.duplicate-settings__actions{display:flex;justify-content:flex-end;margin-top:24px;.duplicate-settings__reset{padding:8px 14px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ffffff0f,#ffffff05);border:1px solid var(--fdp-border);border-radius:999px;transition:filter .16s ease,transform .14s ease,border-color .16s ease;&:hover{border-color:var(--fdp-border-strong);filter:brightness(1.08)}}}}.find-duplicates :is(button,[role=button],a,input,select,textarea):focus-visible{outline:none;border-color:color-mix(in srgb,var(--fdp-accent),transparent 40%);box-shadow:0 0 0 3px color-mix(in srgb,var(--fdp-accent),transparent 50%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@media(max-width:820px){.duplicate-group{padding:12px;.duplicate-group__empty,.duplicate-group__heading{flex-direction:column;gap:6px;align-items:flex-start}}}");var ki=xi;document.adoptedStyleSheets.push(ki);var Lu=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:Pe.HTML.duplicate,onClick:async(f,n,l)=>{let b=_n(f.props),d=b.uri,P=b.name,v=Spicetify.URI.from(d)?.type,O={uri:d,name:P||(await Spicetify.Platform.PlaylistAPI.getMetadata(d,{}))?.name||"",type:v||""};ft({title:"Find Duplicates",content:M(wi,{selectedPlaylist:O}),isLarge:!0,template:!1})},divider:"after",shouldAdd:(f,n,l)=>{let b=_n(f),d=Spicetify.URI.from(b.uri)?.type;return d===Spicetify.URI.Type.PLAYLIST||d===Spicetify.URI.Type.PLAYLIST_V2}});Lu.register();
