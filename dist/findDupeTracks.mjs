await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var jt=Object.create;var gt=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var Kt=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty;var nt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oe=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Kt(t))!ee.call(e,r)&&r!==o&&gt(e,r,{get:()=>t[r],enumerable:!(a=Yt(t,r))||a.enumerable});return e};var p=(e,t,o)=>(o=e!=null?jt(te(e)):{},oe(t||!e||!e.__esModule?gt(o,"default",{value:e,enumerable:!0}):o,e));var h=nt((ze,ht)=>{ht.exports=Spicetify.ReactJSX});var L=nt(($e,yt)=>{yt.exports=Spicetify.React});var dt=nt((We,bt)=>{bt.exports=Spicetify.ReactDOM});function ae(e){if(!e)return{};let t={},o=(a,r)=>{if(!(!a||typeof a!="object"))for(let n in a)Object.hasOwn(a,n)&&r[n]===void 0&&(r[n]=a[n])};return o(e,t),o(e.item,t),o(e.reference,t),t}var lt=ae;var ct=p(h()),g={editButton:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",settings:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",github:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",close:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",warning:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",more:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",questionMark:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",dropdown:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",palette:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",duplicate:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",terminal:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",customArtwork:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",play:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",pause:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z"},I=(e,t=16)=>({size:o=t,fill:a="currentColor"})=>(0,ct.jsx)("svg",{fill:a,height:o,viewBox:`0 0 ${t} ${t}`,width:o,children:(0,ct.jsx)("path",{d:e})});g.React={editButton:I(g.editButton,24),settings:I(g.settings,16),github:I(g.github,24),close:I(g.close,32),warning:I(g.warning,24),more:I(g.more,16),questionMark:I(g.questionMark,24),dropdown:I(g.dropdown,24),palette:I(g.palette,24),duplicate:I(g.duplicate,16),terminal:I(g.terminal,16),customArtwork:I(g.customArtwork,16),play:I(g.play,16),pause:I(g.pause,16)};g.HTML={editButton:`<path d="${g.editButton}"/>`,settings:`<path d="${g.settings}"/>`,github:`<path d="${g.github}"/>`,close:`<path d="${g.close}"/>`,warning:`<path d="${g.warning}"/>`,more:`<path d="${g.more}"/>`,questionMark:`<path d="${g.questionMark}"/>`,dropdown:`<path d="${g.dropdown}"/>`,palette:`<path d="${g.palette}"/>`,duplicate:`<path d="${g.duplicate}"/>`,terminal:`<path d="${g.terminal}"/>`,customArtwork:`<path d="${g.customArtwork}"/>`,play:`<path d="${g.play}"/>`,pause:`<path d="${g.pause}"/>`};var C=g;var X=p(L()),_t=p(dt());(function(){let e=".modal-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background-color:rgba(var(--spice-rgb-shadow),.5);border-radius:7px}.modal{background-color:unset}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9)!important;border-radius:7px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5)!important;backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 12px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:34px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px!important;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}",t="shared-popupModal";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var T=p(h()),O=null,q=null,Y=()=>{q&&O&&(q.unmount(),O.remove(),document.body.style.overflow="auto",document.removeEventListener("keydown",xt),document.removeEventListener("mousedown",vt),O=null,q=null)},xt=e=>{e.key==="Escape"&&Y()},vt=e=>{e.target.classList.contains("modal-overlay")&&Y()},kt=({title:e="",content:t,isLarge:o=!0,buttons:a=!1,icon:r=""}={})=>{O=document.getElementById("popup-modal"),O||(O=document.createElement("popup-modal"),O.id="popup-modal",document.body.appendChild(O)),q=_t.default.createRoot(O),document.body.style.overflow="hidden",document.addEventListener("keydown",xt),document.addEventListener("mousedown",vt);let n=(0,X.memo)(()=>(0,T.jsx)("div",{className:"modal-overlay",children:(0,T.jsx)("div",{className:"modal",children:(0,T.jsxs)("div",{className:`modal__container${o?" modal__container--large":""}`,children:[(0,T.jsxs)("div",{className:"modal__header",children:[(0,T.jsxs)("div",{className:"modal__titleContainer",children:[(0,T.jsx)("div",{className:"modal__icon",children:r}),(0,T.jsx)("h1",{className:"modal__title",children:e})]}),(0,T.jsxs)("div",{className:"modal__buttonContainer",children:[a,(0,T.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:(0,T.jsx)("button",{className:"modal__button modal__button--close",onClick:()=>Y(),children:(0,T.jsx)(C.React.close,{size:18})})})]})]}),(0,T.jsx)("div",{className:"modal__content",children:X.default.isValidElement(t)?t:X.default.createElement(t)})]})})}));q.render((0,T.jsx)(n,{}))};kt.hide=Y;var K=kt;var v=p(L());import ve from"https://esm.sh/dexie";async function ie(){return(await Spicetify.Platform.LibraryAPI.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var wt=ie;async function re(e){return{items:(await Spicetify.Platform.PlaylistAPI.getContents(e,{offset:0,limit:-1})).items}}var Pt=re;async function se(e){let t=new Map,o=Array.from(e).map(async a=>{let n=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:a,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(n)for(let c of n){let s=c?.track?.uri;s&&t.set(s,c.track)}});return await Promise.all(o),t}var Ct=se;async function ne(e){let t=new Map,o=new Map;for(let n of e)n&&o.set(n,Spicetify.URI.fromString(n).id);let a=50,r=Array.from(o.values()).reduce((n,c,s)=>{let l=Math.floor(s/a);return n[l]=n[l]||[],n[l].push(c),n},[]).map(async n=>{let c=`https://api.spotify.com/v1/tracks?ids=${n.join(",")}`,s=await Spicetify.CosmosAsync.get(c);if(s?.tracks)for(let l of s.tracks){let i=l?.uri;i&&t.set(i,l)}});return await Promise.all(r),t}var Nt=ne;var pt=p(L()),St=p(dt()),tt=p(h());function le({titleText:e,descriptionText:t,cancelText:o="Cancel",confirmText:a="Confirm",onConfirm:r,onClose:n,onOpen:c,onOutside:s,confirmLabel:l,allowHTML:i}){let f=pt.default.memo(()=>{let[u,m]=Spicetify.React.useState(!0),x=document.querySelector(".ReactModalPortal:last-of-type");return pt.default.useEffect(()=>{u&&c?.()},[u,c]),(0,tt.jsx)(Spicetify.ReactComponent.RemoteConfigProvider,{configuration:Spicetify.Platform.RemoteConfiguration,children:(0,tt.jsx)(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:i,cancelText:o,confirmLabel:l,confirmText:a,descriptionText:t,isOpen:u,onClose:()=>{m(!1),n?.(),x?.remove()},onConfirm:()=>{m(!1),r?.(),x?.remove()},onOutside:()=>{m(!1),s?.(),x?.remove()},titleText:e})})});St.default.createRoot(document.createElement("div")).render((0,tt.jsx)(f,{}))}var et=le;var G=p(L());(function(){let e=".dropdown{position:relative;width:fit-content;min-width:100px;font-size:14px!important;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px;.dropdown__arrow{display:flex}}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(var(--spice-rgb-subtext),.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003;.dropdown__option{display:flex;align-items:center;height:32px;padding:0 8px;cursor:pointer;&:first-child{border-top-left-radius:4px;border-top-right-radius:4px}&:last-child{border-bottom-right-radius:4px;border-bottom-left-radius:4px}}.dropdown__option--selected,.dropdown__option:hover{background:var(--spice-button)}}}",t="shared-dropdown";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var B=p(h()),ce=(0,G.memo)(({value:e,options:t,onChange:o,disabled:a})=>{let r=(0,G.useId)(),n=(0,G.useRef)(null),c=`--dropdown-anchor-${r.replace(/:/g,"id")}`,s=i=>{o?.({target:{value:i.value}}),n.current?.hidePopover()},l=t.find(i=>i.value===e)?.label||"Select...";return(0,B.jsxs)("div",{className:"dropdown",children:[(0,B.jsxs)("button",{className:"dropdown__button",disabled:a,popovertarget:r,popovertargetaction:"toggle",style:{anchorName:c},children:[(0,B.jsx)("div",{className:"dropdown__text",children:l}),(0,B.jsx)("div",{className:"dropdown__arrow",children:(0,B.jsx)(C.React.dropdown,{size:12})})]}),(0,B.jsx)("div",{className:"dropdown__menu",id:r,popover:"auto",ref:n,style:{top:`calc(anchor(${c} bottom) + 4px)`,left:`anchor(${c} left)`,width:`anchor-size(${c} width)`},children:t.map(i=>(0,B.jsx)("div",{className:`dropdown__option${e===i.value?" dropdown__option--selected":""}`,onClick:()=>s(i),children:i.label},i.value))})]})}),Tt=ce;var M=p(L());(function(){let e=".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1!important}.slider__fill{background-color:var(--fill-color)!important}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}",t="shared-slider";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var V=p(h()),de=(0,M.memo)(({value:e,min:t=0,max:o,step:a=1,defaultValue:r,onChange:n,onRelease:c,disabled:s=!1})=>{let l=(0,M.useRef)(null),i=(0,M.useRef)(!1),f=e!==void 0?e:r,u=o>t?(f-t)/(o-t)*100:0,m=(0,M.useCallback)((R,b=!1)=>{if(!l.current||s)return;let P=l.current.getBoundingClientRect(),w=b?R.touches[0].clientX:R.clientX,E=Math.max(0,Math.min(w-P.left,P.width))/P.width*(o-t)+t;E=Math.round(E/a)*a,E=Math.max(t,Math.min(E,o)),n(E)},[t,o,a,n,s]),x=(0,M.useCallback)(R=>{s||(i.current=!0,m(R,!1))},[m,s]),k=(0,M.useCallback)(R=>{s||(i.current=!0,m(R,!0))},[m,s]),y=(0,M.useCallback)(()=>{i.current&&c?.(),i.current=!1},[c]),z=y,$=(0,M.useCallback)(R=>{i.current&&(R.preventDefault(),m(R,!1))},[m]),D=(0,M.useCallback)(R=>{i.current&&m(R,!0)},[m]);return(0,M.useEffect)(()=>(window.addEventListener("mousemove",$),window.addEventListener("mouseup",y),window.addEventListener("touchmove",D),window.addEventListener("touchend",z),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",y),window.removeEventListener("touchmove",D),window.removeEventListener("touchend",z)}),[$,y,D,z]),(0,V.jsx)("div",{className:"slider",disabled:s,children:(0,V.jsx)("div",{className:"slider-container",onMouseDown:x,onTouchStart:k,ref:l,children:(0,V.jsxs)("div",{className:"slider__track",children:[(0,V.jsx)("div",{className:"slider__fill",style:{width:`${u}%`}}),(0,V.jsx)("div",{className:"slider__thumb",style:{left:`${u}%`}})]})})})}),Dt=de;var N=p(L()),ot=0,J=null,pe=()=>{J||(J=setInterval(()=>{let e=Spicetify.Platform.PlayerAPI.getState();Spicetify.Platform.PlayerAPI._events.emit("progress",e)},100))},ue=()=>{J&&(clearInterval(J),J=null)},me=(e,t)=>{let[o,a]=(0,N.useState)(()=>Spicetify.Platform.PlayerAPI.getState()),[r,n]=(0,N.useState)(0),[c,s]=(0,N.useState)(t),l=(0,N.useRef)(!1),i=(0,N.useRef)(0),f=(0,N.useCallback)((y,z=!1)=>{if(a(y),y.item?.uri===e){if(!z&&i.current!==0&&y.positionAsOfTimestamp<500&&(Spicetify.Platform.PlayerAPI.seekTo(i.current),i.current=0),!l.current){let D=z&&!y.isPaused?y.positionAsOfTimestamp+(Date.now()-y.timestamp):y.positionAsOfTimestamp;n(Math.min(D,y.duration))}s(y.duration)}else n(0),s(t)},[e,t]);(0,N.useEffect)(()=>{ot===0&&pe(),ot++;let y=Spicetify.Platform.PlayerAPI.getState();f(y);let z=D=>f(D.data),$=D=>f(D.data,!0);return Spicetify.Platform.PlayerAPI._events.addListener("update",z),Spicetify.Platform.PlayerAPI._events.addListener("progress",$),()=>{ot--,ot===0&&ue(),Spicetify.Platform.PlayerAPI._events.removeListener("update",z),Spicetify.Platform.PlayerAPI._events.removeListener("progress",$)}},[e,t,f]);let u=(0,N.useCallback)(()=>{o.item?.uri===e?o.isPaused?Spicetify.Platform.PlayerAPI.resume():Spicetify.Platform.PlayerAPI.pause():Spicetify.Platform.PlayerAPI.play({uri:e},{},{})},[o,e]),m=(0,N.useCallback)(y=>{l.current=!0,n(y),i.current=y},[]),x=(0,N.useCallback)(()=>{l.current&&(o.item?.uri===e?Spicetify.Platform.PlayerAPI.seekTo(r):Spicetify.Platform.PlayerAPI.play({uri:e},{},{}),l.current=!1)},[r,e,o]),k=(0,N.useMemo)(()=>!o.isPaused&&o.item?.uri===e,[o,e]);return{position:r,duration:c,isCurrentlyPlayingThisTrack:k,togglePlay:u,handleSliderChange:m,handleSliderRelease:x}},It=me;var Q=p(L());var Mt=p(L());(function(){let e=".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}",t="shared-input";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var Rt=p(h()),fe=(0,Mt.memo)(({value:e,onChange:t,placeholder:o,disabled:a})=>(0,Rt.jsx)("input",{className:"input",disabled:a,onChange:t,placeholder:o,type:"text",value:e})),At=fe;var Wt=p(L());var Lt=p(L());var ut=p(h()),ge=(0,Lt.memo)(({name:e,popupModal:t})=>t?(0,ut.jsx)("button",{className:"themeOptionPopupButton",onClick:()=>K({title:e,content:t,isLarge:!1}),children:(0,ut.jsx)(C.React.editButton,{size:16})}):null),zt=ge;var Et=p(L());var at=p(h()),he=(0,Et.memo)(({tippy:e})=>(0,at.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:e,placement:"top",showDelay:0,children:(0,at.jsx)("div",{className:"themeOptionTippy",children:(0,at.jsx)(C.React.questionMark,{fill:"var(--spice-subtext)",size:20})})})),$t=he;(function(){let e=".themeOptionRow{display:flex;justify-content:space-between;height:32px}.themeOptionDesc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}.themeOptionControl{display:flex;gap:8px;align-content:center}",t="shared-optionRow";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var H=p(h()),ye=(0,Wt.memo)(({name:e,desc:t,tippy:o,children:a,popupModal:r})=>(0,H.jsxs)("div",{className:"themeOptionRow","data-name":`theme:${e}`,children:[(0,H.jsx)("div",{className:"themeOptionContent",children:(0,H.jsx)("div",{className:"themeOptionDesc",children:t})}),(0,H.jsxs)("div",{className:"themeOptionControl",children:[o&&(0,H.jsx)($t,{tippy:o}),(0,H.jsx)(zt,{name:e,popupModal:r}),a]})]})),mt=ye;var Ot=p(L());(function(){let e=".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}",t="shared-toggle";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var it=p(h()),be=(0,Ot.memo)(({value:e,onChange:t,disabled:o})=>(0,it.jsx)("button",{className:"toggle",disabled:o,onClick:t,children:(0,it.jsx)("span",{className:"toggle__background",children:(0,it.jsx)("span",{className:`toggle__slider${e?" toggle__slider--enabled":""}`})})})),Bt=be;var _=p(h()),Ft=["live","remix","mix","acoustic","instrumental","radio","version","ver","edit","mono","stereo","deluxe","intro","outro","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],Ht={groupSettings:{exact:!0,isrc:!0,likely:!0,possible:!0},confirmSettings:{exact:!1,isrc:!1,likely:!0,possible:!0},defaultNormalizeWords:Ft,customNormalizeWords:[]},Zt=()=>{let e=localStorage.getItem("findDupeTracks");if(e){let t=JSON.parse(e);return t.defaultNormalizeWords||(t.defaultNormalizeWords=[...Ft]),t}return Ht},_e=e=>{localStorage.setItem("findDupeTracks",JSON.stringify(e))},rt=()=>Zt(),xe=()=>{let[e,t]=(0,Q.useState)(Zt()),[o,a]=(0,Q.useState)("");(0,Q.useEffect)(()=>{_e(e)},[e]);let r=(i,f,u)=>(0,_.jsxs)("section",{className:"duplicate-settings__section",children:[(0,_.jsx)("h3",{className:"duplicate-settings__section-title",children:i}),(0,_.jsx)("div",{className:"duplicate-settings__options",children:Object.entries(u).map(([m,x])=>(0,_.jsx)(mt,{desc:x,name:`${m}-${f}`,children:(0,_.jsx)(Bt,{onChange:()=>t(k=>({...k,[f]:{...k[f],[m]:!k[f][m]}})),value:e[f][m]})},m))})]}),n=()=>{let i=o.trim().toLowerCase();i&&(e.customNormalizeWords.includes(i)||e.defaultNormalizeWords.includes(i)||(t(f=>({...f,customNormalizeWords:[...f.customNormalizeWords,i]})),a("")))},c=(i,f)=>{t(u=>f?{...u,defaultNormalizeWords:u.defaultNormalizeWords.filter(m=>m!==i)}:{...u,customNormalizeWords:u.customNormalizeWords.filter(m=>m!==i)})},s=()=>{et({titleText:"Are you sure?",descriptionText:"This will reset all settings to default!",confirmText:"Reset",onConfirm:()=>t(JSON.parse(JSON.stringify(Ht)))})},l=[...e.defaultNormalizeWords.map(i=>({word:i,isDefault:!0})),...e.customNormalizeWords.map(i=>({word:i,isDefault:!1}))];return(0,_.jsxs)("div",{className:"duplicate-settings",children:[r("Duplicate Groups to Display","groupSettings",{exact:"Exact Duplicates (Same URI)",isrc:"ISRC Duplicates (Same Recording)",likely:"Likely Duplicates (Same Name)",possible:"Possible Duplicates (Similar Name)"}),r("Confirm Before Deleting","confirmSettings",{exact:"Exact Duplicates",isrc:"ISRC Duplicates",likely:"Likely Duplicates",possible:"Possible Duplicates"}),(0,_.jsxs)("section",{className:"duplicate-settings__section",children:[(0,_.jsx)("h3",{className:"duplicate-settings__section-title",children:"Normalization Words"}),(0,_.jsx)("p",{className:"duplicate-settings__description",children:"Add or remove words to be ignored when comparing track names for similarity."}),(0,_.jsxs)(mt,{desc:"Add a word to normalization list",name:"custom-words",children:[(0,_.jsx)(At,{disabled:!1,onChange:i=>a(i.target.value),onKeyDown:i=>i.key==="Enter"&&n(),placeholder:"Enter word to normalize",value:o}),(0,_.jsx)("button",{onClick:n,style:{marginLeft:8},type:"button",children:"Add"})]}),(0,_.jsx)("div",{className:"duplicate-settings__words-list",children:l.length>0?(0,_.jsx)("div",{className:"duplicate-settings__words-ul",children:l.map(({word:i,isDefault:f})=>(0,_.jsxs)("div",{className:"duplicate-settings__word-item",children:[i,(0,_.jsx)("button",{className:"duplicate-settings__word-remove",onClick:()=>c(i,f),type:"button",children:"Remove"})]},i))}):(0,_.jsx)("p",{className:"duplicate-settings__no-words",children:"No normalization words"})})]}),(0,_.jsx)("div",{className:"duplicate-settings__actions",children:(0,_.jsx)("button",{className:"duplicate-settings__reset",onClick:s,type:"button",children:"Reset to Defaults"})})]})},Vt=xe;var d=p(h()),U=new ve("findDupeTracks");U.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, albumUri, trackPlayCount, trackIsrc, ignoreDuplicates"});async function ke(){return(await wt()).filter(t=>t.type==="playlist"&&t.canAddTo)}async function we(e){let{items:t}=await Pt(e),o=t.map(c=>c.uri),a=await U.tracks.bulkGet(o),r=new Map(a.filter(Boolean).map(c=>[c.trackUri,c])),n=t.reduce((c,s)=>{let l=r.get(s.uri);return(!l||l.trackName!==s.name||l.albumUri!==s.album.uri)&&c.push({trackUri:s.uri,trackName:s.name,albumUri:s.album.uri,trackDuration:l?.duration.milliseconds??null,trackPlayCount:l?.trackPlayCount??null,trackIsrc:l?.trackIsrc??null}),c},[]);return n.length>0&&await U.tracks.bulkPut(n),{items:t}}async function Pe(e){let t=new Map,o=[],a=e.filter(s=>s?.uri),r=a.map(s=>s.uri);if(r.length===0)return t;let n=await U.tracks.bulkGet(r),c=new Map(n.filter(Boolean).map(s=>[s.trackUri,s]));for(let s of a){let l=c.get(s.uri);l?.trackIsrc?t.set(s.uri,l.trackIsrc):o.push(s)}if(o.length>0){let s=await Nt(o.map(i=>i.uri)),l=[];for(let[i,f]of s.entries()){let u=f?.external_ids?.isrc;u&&(t.set(i,u),l.push({key:i,changes:{trackIsrc:u}}))}l.length>0&&await U.tracks.bulkUpdate(l)}return t}async function Ce(e){let t=new Map,o=new Map,a=[],r=e.filter(l=>l?.uri),n=r.map(l=>l.uri);if(n.length===0)return{trackPlayCountMap:t,trackDurationMap:o};let c=await U.tracks.bulkGet(n),s=new Map(c.filter(Boolean).map(l=>[l.trackUri,l]));for(let l of r){let i=s.get(l.uri);i?.trackPlayCount!=null&&t.set(l.uri,i.trackPlayCount),i?.trackDuration!=null&&o.set(l.uri,i.trackDuration),(i?.trackPlayCount==null||i?.trackDuration==null)&&a.push(l)}if(a.length>0){let l=new Set(a.map(u=>u.album.uri).filter(Boolean)),i=await Ct(l),f=[];for(let[u,m]of i.entries()){let x=m.playcount?Number.parseInt(m.playcount,10):null,k=m.duration?.totalMilliseconds??null;x!==null&&t.set(u,x),k!==null&&o.set(u,k),f.push({key:u,changes:{trackPlayCount:x,trackDuration:k}})}f.length>0&&await U.tracks.bulkUpdate(f)}return{trackPlayCountMap:t,trackDurationMap:o}}var Ut=(e,t)=>t.get(e)??0,Ne=e=>{let t=rt(),o=[...t.defaultNormalizeWords,...t.customNormalizeWords],a=new RegExp(`\\b(${o.join("|")})\\b`,"gi");return e.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(a,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim()},Se=(0,v.memo)(({track:e,trackPlayCounts:t,trackIsrcs:o})=>{let a=t.get(e.uri),r=a!=null?a.toLocaleString():"N/A",n=o.get(e.uri)||"N/A",c=e.album?.name||"N/A",s=e.artists?.map(l=>l.name).join(", ")||"N/A";return(0,d.jsxs)("div",{className:"track-details",children:[(0,d.jsxs)("div",{className:"track-details__line",children:[(0,d.jsxs)("span",{className:"track-details__artists",children:[" Artists: ",s]}),(0,d.jsxs)("span",{className:"track-details__album",children:[" Album: ",c]})]}),(0,d.jsxs)("div",{className:"track-details__line",children:[(0,d.jsxs)("span",{className:"track-details__playcount",children:[" Plays: ",r]}),(0,d.jsxs)("span",{className:"track-details__isrc",children:[" ISRC: ",n]})]})]})}),Te=(0,v.memo)(({trackUri:e,trackDuration:t})=>{let{position:o,duration:a,isCurrentlyPlayingThisTrack:r,togglePlay:n,handleSliderChange:c,handleSliderRelease:s}=It(e,t),l=u=>{if(Number.isNaN(u)||u<0)return"N/A";let m=Math.floor(u/1e3),x=Math.floor(m/60),k=m%60;return`${x}:${k.toString().padStart(2,"0")}`},i=l(o),f=l(a);return(0,d.jsxs)("div",{className:"duplicate-group__playback-controls",children:[(0,d.jsx)("button",{className:"duplicate-group__playback-button",onClick:n,type:"button",children:r?(0,d.jsx)(C.React.pause,{}):(0,d.jsx)(C.React.play,{})}),(0,d.jsx)("span",{className:"slider-time",children:i}),(0,d.jsx)(Dt,{max:a,min:0,onChange:c,onRelease:s,step:1,value:o}),(0,d.jsx)("span",{className:"slider-time",children:f})]})}),Gt=(0,v.memo)(({track:e,category:t,groupIndex:o,onDelete:a,isSource:r,trackPlayCounts:n,trackIsrcs:c,trackDurations:s})=>(0,d.jsxs)("div",{className:`duplicate-group__duplicate-item duplicate-group__item--${t}`,children:[(0,d.jsxs)("div",{className:"duplicate-group__duplicate-info",children:[(0,d.jsxs)("div",{className:"duplicate-group__duplicate-content",children:[(0,d.jsxs)("span",{className:"duplicate-group__duplicate-name",children:[r?"Source: ":"",e.name]}),(0,d.jsx)(Se,{track:e,trackIsrcs:c,trackPlayCounts:n})]}),(0,d.jsx)("button",{className:"duplicate-group__delete-button",onClick:()=>a(t,o,e),type:"button",children:"Delete"})]}),(0,d.jsx)("div",{className:"duplicate-group__actions",children:(0,d.jsx)(Te,{trackDuration:s.get(e.uri),trackUri:e.uri})})]})),De=(0,v.memo)(({group:e,category:t,groupIndex:o,onDelete:a,trackPlayCounts:r,trackIsrcs:n,trackDurations:c})=>(0,d.jsxs)("div",{className:`duplicate-group__item duplicate-group__item--${t}`,children:[(0,d.jsx)(Gt,{category:t,groupIndex:o,isSource:!0,onDelete:a,track:e.mainTrack,trackDurations:c,trackIsrcs:n,trackPlayCounts:r}),(0,d.jsx)("div",{className:"duplicate-group__duplicates-label",children:"Duplicates:"}),(0,d.jsx)("div",{className:"duplicate-group__duplicates-list",children:e.duplicates.map(s=>(0,d.jsx)(Gt,{category:t,groupIndex:o,onDelete:a,track:s,trackDurations:c,trackIsrcs:n,trackPlayCounts:r},`${s.uri}-${s.uid||s.uri}`))})]},`${e.mainTrack.uri}-${e.mainTrack.uid||o}`)),st=(0,v.memo)(({title:e,groups:t,category:o,onDelete:a,trackPlayCounts:r,trackIsrcs:n,trackDurations:c})=>rt().groupSettings[o]?(0,d.jsxs)("div",{className:"duplicate-group",children:[(0,d.jsxs)("p",{className:"duplicate-group__heading",children:[(0,d.jsx)("div",{className:"duplicate-group__heading-title",children:e}),(0,d.jsxs)("div",{className:"duplicate-group__heading-length",children:[t.length," found"]})]}),t.length>0?(0,d.jsx)("div",{className:"duplicate-group__list",children:t.map((l,i)=>(0,d.jsx)(De,{category:o,group:l,groupIndex:i,onDelete:a,trackDurations:c,trackIsrcs:n,trackPlayCounts:r},`${l.mainTrack.uri}-${i}`))}):(0,d.jsx)("p",{children:"No duplicates found in this category."})]}):null);function Ie({selectedPlaylist:e}){let[t,o]=(0,v.useState)([]),[a,r]=(0,v.useState)(e||null),[n,c]=(0,v.useState)([]),[s,l]=(0,v.useState)(new Map),[i,f]=(0,v.useState)(new Map),[u,m]=(0,v.useState)(new Map),[x,k]=(0,v.useState)({exact:[],isrc:[],likely:[],possible:[]});(0,v.useEffect)(()=>{let b=!0;return(async()=>{let P=await ke();b&&(o(P),r(e||P[0]||null))})(),()=>{b=!1}},[e]);let y=b=>{let P=t.find(w=>w.uri===b.target.value);P&&r(P)},z=(0,v.useCallback)((b,P,w)=>{let Z=new Set,E=(S,Xt,Jt)=>{let j=new Map;for(let W of S){if(Z.has(W.uri))continue;let F=Jt(Xt(W));F&&(j.set(F,j.get(F)||[]),j.get(F).push(W))}let ft=[];for(let W of j.values())if(W.length>1){W.sort((F,Qt)=>Ut(Qt.uri,P)-Ut(F.uri,P));for(let F of W)Z.add(F.uri);ft.push({mainTrack:W[0],duplicates:W.slice(1)})}return ft};k({exact:E(b,S=>S.uri,S=>S),isrc:E(b,S=>w.get(S.uri),S=>S),likely:E(b,S=>S.name,S=>S.trim()),possible:E(b,S=>S.name,Ne)})},[]),$=async b=>{await Spicetify.Platform.PlaylistAPI.remove(a.uri,[{uid:b.uid}]),c(P=>P.filter(w=>!(w.uri===b.uri&&w.uid===b.uid)))},D=async(b,P,w)=>{if(!rt().confirmSettings[b]){await $(w);return}et({titleText:"Remove Track",descriptionText:`Are you sure you want to remove "${w.name}"? This cannot be undone.`,confirmText:"Remove",onConfirm:()=>$(w)})};(0,v.useEffect)(()=>{c([]),k({exact:[],isrc:[],likely:[],possible:[]}),l(new Map),m(new Map),f(new Map),(async()=>{if(!a?.uri)return;let w=(await we(a.uri)).items;if(c(w),w.length>0){let[Z,E]=await Promise.all([Ce(w),Pe(w)]);l(Z.trackPlayCountMap),f(Z.trackDurationMap),m(E)}})()},[a]),(0,v.useEffect)(()=>{n.length>0?z(n,s,u):k({exact:[],isrc:[],likely:[],possible:[]})},[n,s,u,z]);let R=t.map(b=>({value:b.uri,label:b.name}));return(0,d.jsxs)("div",{className:"find-duplicates",children:[(0,d.jsxs)("div",{className:"find-duplicates__header",children:[(0,d.jsx)("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),(0,d.jsx)(Tt,{disabled:t.length===0,onChange:y,options:R,value:a?.uri})]}),a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{className:"find-duplicates__details",children:["Playlist: ",a.name," (",n.length," tracks analyzed)"]}),(0,d.jsx)(st,{category:"exact",groups:x.exact,onDelete:D,title:"Exact Duplicates (Same URI)",trackDurations:i,trackIsrcs:u,trackPlayCounts:s}),(0,d.jsx)(st,{category:"isrc",groups:x.isrc,onDelete:D,title:"ISRC Duplicates (Same Recording)",trackDurations:i,trackIsrcs:u,trackPlayCounts:s}),(0,d.jsx)(st,{category:"likely",groups:x.likely,onDelete:D,title:"Likely Duplicates (Same Name)",trackDurations:i,trackIsrcs:u,trackPlayCounts:s}),(0,d.jsx)(st,{category:"possible",groups:x.possible,onDelete:D,title:"Possible Duplicates (Similar Name)",trackDurations:i,trackIsrcs:u,trackPlayCounts:s})]})]})}var qt=Ie;(function(){let e=".find-duplicates{display:flex;flex-direction:column;gap:10px;width:100%;.find-duplicates__header{display:flex;gap:10px;align-items:center;.find-duplicates__header-label{font-weight:700;color:var(--spice-text)}}.find-duplicates__details{font-size:1.25em;color:var(--spice-text)}}.duplicate-group{display:flex;flex-direction:column;gap:10px;padding:12px;background-color:var(--spice-player);border:1px solid rgba(var(--spice-rgb-selected-row),.1);border-radius:6px;.duplicate-group__heading{display:flex;justify-content:space-between;font-size:1.2em;font-weight:700;color:var(--spice-text);.duplicate-group__heading-length{align-content:center;padding:0 12px;font-size:12px;font-weight:400;background:#ff676746;border:1px solid #ff575766;border-radius:100px}}.duplicate-group__list{display:flex;flex-direction:column;gap:10px}.duplicate-group__item{display:flex;flex-direction:column;gap:5px;padding:15px;border:1px solid rgba(var(--spice-rgb-selected-row),.1);border-left:4px solid;border-radius:4px;&.duplicate-group__item--exact{border-left-color:#ff5a5a}&.duplicate-group__item--isrc{border-left-color:#ff9050}&.duplicate-group__item--likely{border-left-color:#eaea66}&.duplicate-group__item--possible{border-left-color:#80ef80}}.duplicate-group__playback-controls{display:flex;flex-grow:1;gap:8px;align-items:center;width:100%}.duplicate-group__playback-button{display:flex;flex-shrink:0;align-items:center;justify-content:center;width:32px;height:32px;padding:0;color:#fff;cursor:pointer;background:none;border:none;svg{width:100%;height:100%}}.slider-time{font-size:14px}.duplicate-group__duplicates-label{padding-left:15px;font-size:20px;font-weight:600;color:var(--spice-subtext)}.duplicate-group__duplicates-list{padding-left:15px}.duplicate-group__duplicate-name{font-weight:600}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:10px;font-size:1em;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1);&:last-child{border-bottom:none}}.duplicate-group__actions{padding-bottom:8px}.duplicate-group__duplicate-info{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex-direction:column}.duplicate-group__delete-button{padding:6px 12px;font-size:.85em;font-weight:700;color:#fff;cursor:pointer;background-color:#ff5a5a;border:none;border-radius:4px;&:hover{background-color:#d34f4f}&:active{background-color:#c72c2c;transform:scale(.98)}}}.track-details{display:flex;flex-direction:column;font-size:.9em;color:var(--spice-subtext);.track-details__line{display:flex;gap:8px}}.duplicate-settings{width:100%;.duplicate-settings__section{margin-bottom:24px;.duplicate-settings__section-title{padding-bottom:8px;margin-bottom:16px;font-size:16px;font-weight:700;border-bottom:1px solid rgba(255,255,255,.1)}}.duplicate-settings__description{margin-bottom:12px;font-size:13px;opacity:.7}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}.duplicate-settings__option{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background-color:#0003;border-radius:4px}.duplicate-settings__words-list{max-height:200px;overflow-y:auto;.duplicate-settings__no-words{padding:12px;text-align:center;background-color:#0003;border-radius:4px;opacity:.7}}.duplicate-settings__words-ul{padding:0;margin:0}.duplicate-settings__word-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;margin-bottom:8px;background-color:#0003;border-radius:4px;.duplicate-settings__word-remove{padding:4px 8px;font-size:12px;color:#fff;cursor:pointer;background-color:#ff5a5a;border:none;border-radius:4px;&:hover{background-color:#d34f4f}}}.duplicate-settings__actions{display:flex;justify-content:flex-end;margin-top:24px;.duplicate-settings__reset{padding:8px 16px;color:#fff;cursor:pointer;background-color:#ff32324d;border:none;border-radius:4px;&:hover{background-color:#ff323299}}}}",t="findDupeTracks-styles";if(document.getElementById(t))return;let o=document.createElement("style");o.id=t,o.textContent=e,document.head.appendChild(o)})();var A=p(h()),Me=(e,t="main")=>{let o=a=>{let r=a==="settings";K({title:r?"Find Duplicates Settings":"Find Duplicates",content:r?(0,A.jsx)(Vt,{}):(0,A.jsx)(qt,{selectedPlaylist:e}),isLarge:!0,buttons:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:r?"Back to Duplicates":"Settings",placement:"top",children:(0,A.jsx)("button",{className:`modal__button modal__button--${r?"back":"settings"}`,onClick:()=>o(r?"main":"settings"),children:r?(0,A.jsx)(C.React.duplicate,{size:18}):(0,A.jsx)(C.React.settings,{size:18})})}),(0,A.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:"GitHub",placement:"top",children:(0,A.jsx)("button",{className:"modal__button modal__button--github",onClick:()=>window.open("https://github.com/veryboringhwl/spicetify-extensions"),children:(0,A.jsx)(C.React.github,{size:18})})})]})})};o(t)},Ae=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:C.HTML.duplicate,onClick:async(e,t,o)=>{let a=lt(e.props),r=a.uri,n=a.name,c={uri:r,name:n||(await Spicetify.Platform.PlaylistAPI.getMetadata(r))?.name};Me(c)},shouldAdd:(e,t,o)=>{let a=lt(e),r=Spicetify.URI.from(a.uri)?.type;return r===Spicetify.URI.Type.PLAYLIST||r===Spicetify.URI.Type.PLAYLIST_V2}});Ae.register();
