await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var es=Object.create;var Ir=Object.defineProperty;var ts=Object.getOwnPropertyDescriptor;var rs=Object.getOwnPropertyNames;var ns=Object.getPrototypeOf,os=Object.prototype.hasOwnProperty;var is=(u,n)=>()=>(u&&(n=u(u=0)),n);var as=(u,n)=>()=>(n||u((n={exports:{}}).exports,n),n.exports),ss=(u,n)=>{for(var a in n)Ir(u,a,{get:n[a],enumerable:!0})},To=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of rs(n))!os.call(u,p)&&p!==a&&Ir(u,p,{get:()=>n[p],enumerable:!(g=ts(n,p))||g.enumerable});return u};var Ue=(u,n,a)=>(a=u!=null?es(ns(u)):{},To(n||!u||!u.__esModule?Ir(a,"default",{value:u,enumerable:!0}):a,u)),cs=u=>To(Ir({},"__esModule",{value:!0}),u);var Eo={};ss(Eo,{Children:()=>us,Component:()=>ls,Fragment:()=>fs,Profiler:()=>ps,PureComponent:()=>ds,StrictMode:()=>hs,Suspense:()=>ms,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>ys,act:()=>vs,cloneElement:()=>gs,createContext:()=>bs,createElement:()=>_s,createFactory:()=>ws,createRef:()=>xs,default:()=>Ks,forwardRef:()=>ks,isValidElement:()=>jn,lazy:()=>Ss,memo:()=>ve,startTransition:()=>Cs,unstable_act:()=>Ps,useCallback:()=>Dt,useContext:()=>Os,useDebugValue:()=>Ns,useDeferredValue:()=>Ds,useEffect:()=>Be,useId:()=>Mn,useImperativeHandle:()=>Ts,useInsertionEffect:()=>Es,useLayoutEffect:()=>Is,useMemo:()=>Kn,useReducer:()=>Rs,useRef:()=>ze,useState:()=>Oe,useSyncExternalStore:()=>As,useTransition:()=>js,version:()=>Ms});var us,ls,fs,ps,ds,hs,ms,ys,vs,gs,bs,_s,ws,xs,ks,jn,Ss,ve,Cs,Ps,Dt,Os,Ns,Ds,Be,Mn,Ts,Es,Is,Kn,Rs,ze,Oe,As,js,Ms,Ks,Ae=is(()=>{({Children:us,Component:ls,Fragment:fs,Profiler:ps,PureComponent:ds,StrictMode:hs,Suspense:ms,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ys,act:vs,cloneElement:gs,createContext:bs,createElement:_s,createFactory:ws,createRef:xs,forwardRef:ks,isValidElement:jn,lazy:Ss,memo:ve,startTransition:Cs,unstable_act:Ps,useCallback:Dt,useContext:Os,useDebugValue:Ns,useDeferredValue:Ds,useEffect:Be,useId:Mn,useImperativeHandle:Ts,useInsertionEffect:Es,useLayoutEffect:Is,useMemo:Kn,useReducer:Rs,useRef:ze,useState:Oe,useSyncExternalStore:As,useTransition:js,version:Ms}=Spicetify.React),Ks=Spicetify.React});var $e=as((Gc,Ko)=>{"use no memo";"use strict";var Bs=Object.create,jr=Object.defineProperty,zs=Object.getOwnPropertyDescriptor,$s=Object.getOwnPropertyNames,qs=Object.getPrototypeOf,Fs=Object.prototype.hasOwnProperty,Ls=(u,n)=>{for(var a in n)jr(u,a,{get:n[a],enumerable:!0})},jo=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of $s(n))!Fs.call(u,p)&&p!==a&&jr(u,p,{get:()=>n[p],enumerable:!(g=zs(n,p))||g.enumerable});return u},Us=(u,n,a)=>(a=u!=null?Bs(qs(u)):{},jo(n||!u||!u.__esModule?jr(a,"default",{value:u,enumerable:!0}):a,u)),Ws=u=>jo(jr({},"__esModule",{value:!0}),u),Mo={};Ls(Mo,{$dispatcherGuard:()=>Qs,$makeReadOnly:()=>Xs,$reset:()=>Ys,$structuralCheck:()=>rc,c:()=>Zs,clearRenderCounterRegistry:()=>Js,renderCounterRegistry:()=>Jt,useRenderCounter:()=>tc});Ko.exports=Ws(Mo);var It=Us((Ae(),cs(Eo))),{useRef:Hs,useEffect:Gs,isValidElement:Tt}=It,Io,Bn=(Io=It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Io:It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zn=Symbol.for("react.memo_cache_sentinel"),Ro,Zs=typeof((Ro=It.__COMPILER_RUNTIME)==null?void 0:Ro.c)=="function"?It.__COMPILER_RUNTIME.c:function(n){return It.useMemo(()=>{let a=new Array(n);for(let g=0;g<n;g++)a[g]=zn;return a[zn]=!0,a},[])},Ar={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(u=>{Ar[u]=()=>{throw new Error(`[React] Unexpected React hook call (${u}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var Xt=null;Ar.useMemoCache=u=>{if(Xt==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return Xt.useMemoCache(u)};function Rr(u){return Bn.ReactCurrentDispatcher.current=u,Bn.ReactCurrentDispatcher.current}var Et=[];function Qs(u){let n=Bn.ReactCurrentDispatcher.current;if(u===0){if(Et.push(n),Et.length===1&&(Xt=n),n===Ar)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");Rr(Ar)}else if(u===1){let a=Et.pop();if(a==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Et.length===0&&(Xt=null),Rr(a)}else if(u===2)Et.push(n),Rr(Xt);else if(u===3){let a=Et.pop();if(a==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Rr(a)}else throw new Error("React Compiler internal error: unreachable block"+u)}function Ys(u){for(let n=0;n<u.length;n++)u[n]=zn}function Xs(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Jt=new Map;function Js(){for(let u of Jt.values())u.forEach(n=>{n.count=0})}function Vs(u,n){let a=Jt.get(u);a==null&&(a=new Set,Jt.set(u,a)),a.add(n)}function ec(u,n){let a=Jt.get(u);a?.delete(n)}function tc(u){let n=Hs(null);n.current!=null&&(n.current.count+=1),Gs(()=>{if(n.current==null){let a={count:0};Vs(u,a),n.current=a}return()=>{n.current!==null&&ec(u,n.current)}})}var Ao=new Set;function rc(u,n,a,g,p,k){function y(w,P,S,I){let M=`${g}:${k} [${p}] ${a}${S} changed from ${w} to ${P} at depth ${I}`;Ao.has(M)||(Ao.add(M),console.error(M))}let _=2;function v(w,P,S,I){if(!(I>_)){if(w===P)return;if(typeof w!=typeof P)y(`type ${typeof w}`,`type ${typeof P}`,S,I);else if(typeof w=="object"){let M=Array.isArray(w),z=Array.isArray(P);if(w===null&&P!==null)y("null",`type ${typeof P}`,S,I);else if(P===null)y(`type ${typeof w}`,"null",S,I);else if(w instanceof Map)if(!(P instanceof Map))y("Map instance","other value",S,I);else if(w.size!==P.size)y(`Map instance with size ${w.size}`,`Map instance with size ${P.size}`,S,I);else for(let[D,$]of w)P.has(D)?v($,P.get(D),`${S}.get(${D})`,I+1):y(`Map instance with key ${D}`,`Map instance without key ${D}`,S,I);else if(P instanceof Map)y("other value","Map instance",S,I);else if(w instanceof Set)if(!(P instanceof Set))y("Set instance","other value",S,I);else if(w.size!==P.size)y(`Set instance with size ${w.size}`,`Set instance with size ${P.size}`,S,I);else for(let D of P)w.has(D)||y(`Set instance without element ${D}`,`Set instance with element ${D}`,S,I);else if(P instanceof Set)y("other value","Set instance",S,I);else if(M||z)if(M!==z)y(`type ${M?"array":"object"}`,`type ${z?"array":"object"}`,S,I);else if(w.length!==P.length)y(`array with length ${w.length}`,`array with length ${P.length}`,S,I);else for(let D=0;D<w.length;D++)v(w[D],P[D],`${S}[${D}]`,I+1);else if(Tt(w)||Tt(P))Tt(w)!==Tt(P)?y(`type ${Tt(w)?"React element":"object"}`,`type ${Tt(P)?"React element":"object"}`,S,I):w.type!==P.type?y(`React element of type ${w.type}`,`React element of type ${P.type}`,S,I):v(w.props,P.props,`[props of ${S}]`,I+1);else{for(let D in P)D in w||y(`object without key ${D}`,`object with key ${D}`,S,I);for(let D in w)D in P?v(w[D],P[D],`${S}.${D}`,I+1):y(`object with key ${D}`,`object without key ${D}`,S,I)}}else{if(typeof w=="function")return;isNaN(w)||isNaN(P)?isNaN(w)!==isNaN(P)&&y(`${isNaN(w)?"NaN":"non-NaN value"}`,`${isNaN(P)?"NaN":"non-NaN value"}`,S,I):w!==P&&y(w,P,S,I)}}}v(u,n,"",0)}});function An(u){if(!u)return{};let n={},a=(g,p)=>{if(!(!g||typeof g!="object"))for(let k in g)Object.hasOwn(g,k)&&p[k]===void 0&&(p[k]=g[k])};return a(u,n),a(u.item,n),a(u.reference,n),n}var Bo=Ue($e());var{Fragment:Mr,jsx:A,jsxs:V}=Spicetify.ReactJSX;var Kr={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},nc=u=>{let{path:n,size:a}=Kr[u],g=p=>{let k=(0,Bo.c)(4),{size:y,fill:_}=p,v=y===void 0?a:y,w=_===void 0?"currentColor":_,P;k[0]===Symbol.for("react.memo_cache_sentinel")?(P=A("path",{d:n}),k[0]=P):P=k[0];let S;return k[1]!==w||k[2]!==v?(S=A("svg",{fill:w,height:v,role:"img",viewBox:`0 0 ${a} ${a}`,width:v,children:P}),k[1]=w,k[2]=v,k[3]=S):S=k[3],S};return g.defaultProps={size:a,fill:"currentColor"},g},{raw:oc,react:ic,html:ac}=Object.keys(Kr).reduce((u,n)=>(u.raw[n]=Kr[n].path,u.react[n]=nc(n),u.html[n]=`<path d="${Kr[n].path}"/>`,u),{raw:{},react:{},html:{}}),Re={React:ic,HTML:ac,RAW:oc};var qo=Ue($e());Ae();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Xc,createPortal:Jc,createRoot:Br,findDOMNode:Vc,flushSync:eu,hydrate:tu,hydrateRoot:ru,render:nu,unmountComponentAtNode:ou,unstable_batchedUpdates:iu,unstable_renderSubtreeIntoContainer:au,version:su}=Spicetify.ReactDOM,cu=Spicetify.ReactDOM;var zo=new CSSStyleSheet;zo.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var $o=zo;document.adoptedStyleSheets.push($o);var Vt=null,$n="popup-modal-container",qn=()=>{let u=document.getElementById($n);Vt&&(Vt.unmount(),Vt=null),u&&u.remove(),document.body.style.overflow="auto"},sc=ve(u=>{let n=(0,qo.c)(36),{title:a,content:g,isLarge:p,buttons:k,icon:y,onClose:_}=u,v=ze(null),w,P;n[0]!==_?(w=()=>{document.body.style.overflow="hidden";let se=ye=>{ye.key==="Escape"&&(ye.preventDefault(),_())};return document.addEventListener("keydown",se),()=>{document.removeEventListener("keydown",se)}},P=[_],n[0]=_,n[1]=w,n[2]=P):(w=n[1],P=n[2]),Be(w,P);let S;n[3]!==_?(S=()=>{_()},n[3]=_,n[4]=S):S=n[4];let I=S,M;n[5]!==I?(M=se=>{se.target===v.current&&I()},n[5]=I,n[6]=M):M=n[6];let z=M,D;n[7]!==g?(D=()=>jn(g)?g:typeof g=="function"?A(g,{}):g,n[7]=g,n[8]=D):D=n[8];let $=D,H=`modal__container${p?" modal__container--large":""}`,W;n[9]!==y?(W=y&&A("div",{className:"modal__icon",children:y}),n[9]=y,n[10]=W):W=n[10];let Z;n[11]!==a?(Z=A("h1",{className:"modal__title",children:a}),n[11]=a,n[12]=Z):Z=n[12];let ne;n[13]!==W||n[14]!==Z?(ne=V("div",{className:"modal__titleContainer",children:[W,Z]}),n[13]=W,n[14]=Z,n[15]=ne):ne=n[15];let oe;n[16]===Symbol.for("react.memo_cache_sentinel")?(oe=A(Re.React.close,{size:18}),n[16]=oe):oe=n[16];let ie;n[17]!==I?(ie=A(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:A("button",{className:"modal__button modal__button--close",onClick:I,children:oe})}),n[17]=I,n[18]=ie):ie=n[18];let fe;n[19]!==k||n[20]!==ie?(fe=V("div",{className:"modal__buttonContainer",children:[k,ie]}),n[19]=k,n[20]=ie,n[21]=fe):fe=n[21];let le;n[22]!==fe||n[23]!==ne?(le=V("div",{className:"modal__header",children:[ne,fe]}),n[22]=fe,n[23]=ne,n[24]=le):le=n[24];let ae;n[25]!==$?(ae=$(),n[25]=$,n[26]=ae):ae=n[26];let ee;n[27]!==ae?(ee=A("div",{className:"modal__content",children:ae}),n[27]=ae,n[28]=ee):ee=n[28];let he;n[29]!==le||n[30]!==ee||n[31]!==H?(he=V("div",{className:H,children:[le,ee]}),n[29]=le,n[30]=ee,n[31]=H,n[32]=he):he=n[32];let pe;return n[33]!==z||n[34]!==he?(pe=A("div",{className:"modal",onClick:z,ref:v,children:he}),n[33]=z,n[34]=he,n[35]=pe):pe=n[35],pe}),er=u=>{document.getElementById($n)&&qn();let n=document.createElement("div");n.id=$n,document.body.appendChild(n),Vt=Br(n),Vt.render(A(sc,{...u,onClose:qn}))};er.hide=qn;var bt=Ue($e());var cc=(u,...n)=>({$t:setTimeout(u,0,...n),[Symbol.dispose](){clearTimeout(this.t)}}),uc=Object.create,Lo=Object.defineProperty,lc=Object.getOwnPropertyDescriptor,fc=Object.getOwnPropertyNames,pc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,hc=(u,n)=>()=>(n||u((n={exports:{}}).exports,n),n.exports),mc=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of fc(n))!dc.call(u,p)&&p!==a&&Lo(u,p,{get:()=>n[p],enumerable:!(g=lc(n,p))||g.enumerable});return u},yc=(u,n,a)=>(a=u!=null?uc(pc(u)):{},mc(n||!u||!u.__esModule?Lo(a,"default",{value:u,enumerable:!0}):a,u)),vc=hc((u,n)=>{(function(a,g){typeof u=="object"&&typeof n<"u"?n.exports=g():typeof define=="function"&&define.amd?define(g):(a=typeof globalThis<"u"?globalThis:a||self,a.Dexie=g())})(u,function(){"use strict";var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},a(e,t)};function g(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var p=function(){return p=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p.apply(this,arguments)};function k(e,t,r){if(r||arguments.length===2)for(var o=0,i=t.length,s;o<i;o++)(s||!(o in t))&&(s||(s=Array.prototype.slice.call(t,0,o)),s[o]=t[o]);return e.concat(s||Array.prototype.slice.call(t))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,_=Object.keys,v=Array.isArray;typeof Promise<"u"&&!y.Promise&&(y.Promise=Promise);function w(e,t){return typeof t!="object"||_(t).forEach(function(r){e[r]=t[r]}),e}var P=Object.getPrototypeOf,S={}.hasOwnProperty;function I(e,t){return S.call(e,t)}function M(e,t){typeof t=="function"&&(t=t(P(e))),(typeof Reflect>"u"?_:Reflect.ownKeys)(t).forEach(function(r){D(e,r,t[r])})}var z=Object.defineProperty;function D(e,t,r,o){z(e,t,w(r&&I(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function $(e){return{from:function(t){return e.prototype=Object.create(t.prototype),D(e.prototype,"constructor",e),{extend:M.bind(null,e.prototype)}}}}var H=Object.getOwnPropertyDescriptor;function W(e,t){var r=H(e,t),o;return r||(o=P(e))&&W(o,t)}var Z=[].slice;function ne(e,t,r){return Z.call(e,t,r)}function oe(e,t){return t(e)}function ie(e){if(!e)throw new Error("Assertion Failed")}function fe(e){y.setImmediate?cc(e):setTimeout(e,0)}function le(e,t){return e.reduce(function(r,o,i){var s=t(o,i);return s&&(r[s[0]]=s[1]),r},{})}function ae(e,t){if(typeof t=="string"&&I(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],o=0,i=t.length;o<i;++o){var s=ae(e,t[o]);r.push(s)}return r}var c=t.indexOf(".");if(c!==-1){var l=e[t.substr(0,c)];return l==null?void 0:ae(l,t.substr(c+1))}}function ee(e,t,r){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ie(typeof r!="string"&&"length"in r);for(var o=0,i=t.length;o<i;++o)ee(e,t[o],r[o])}else{var s=t.indexOf(".");if(s!==-1){var c=t.substr(0,s),l=t.substr(s+1);if(l==="")r===void 0?v(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=r;else{var f=e[c];(!f||!I(e,c))&&(f=e[c]={}),ee(f,l,r)}}else r===void 0?v(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function he(e,t){typeof t=="string"?ee(e,t,void 0):"length"in t&&[].map.call(t,function(r){ee(e,r,void 0)})}function pe(e){var t={};for(var r in e)I(e,r)&&(t[r]=e[r]);return t}var se=[].concat;function ye(e){return se.apply([],e)}var De="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ye([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return y[e]}),Se=new Set(De.map(function(e){return y[e]}));function de(e){var t={};for(var r in e)if(I(e,r)){var o=e[r];t[r]=!o||typeof o!="object"||Se.has(o.constructor)?o:de(o)}return t}function ge(e){for(var t in e)if(I(e,t))return!1;return!0}var Pe=null;function be(e){Pe=new WeakMap;var t=je(e);return Pe=null,t}function je(e){if(!e||typeof e!="object")return e;var t=Pe.get(e);if(t)return t;if(v(e)){t=[],Pe.set(e,t);for(var r=0,o=e.length;r<o;++r)t.push(je(e[r]))}else if(Se.has(e.constructor))t=e;else{var i=P(e);t=i===Object.prototype?{}:Object.create(i),Pe.set(e,t);for(var s in e)I(e,s)&&(t[s]=je(e[s]))}return t}var Ve={}.toString;function qe(e){return Ve.call(e).slice(8,-1)}var Fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ye=typeof Fe=="symbol"?function(e){var t;return e!=null&&(t=e[Fe])&&t.apply(e)}:function(){return null};function xe(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}var Te={};function _e(e){var t,r,o,i;if(arguments.length===1){if(v(e))return e.slice();if(this===Te&&typeof e=="string")return[e];if(i=Ye(e)){for(r=[];o=i.next(),!o.done;)r.push(o.value);return r}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var et=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],jt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mt=_t.concat(jt),or={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tt(e,t){this.name=e,this.message=t}$(tt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Wn(e,t){return e+". Errors: "+Object.keys(t).map(function(r){return t[r].toString()}).filter(function(r,o,i){return i.indexOf(r)===o}).join(`
`)}function ir(e,t,r,o){this.failures=t,this.failedKeys=o,this.successCount=r,this.message=Wn(e,t)}$(ir).from(tt);function wt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(r){return t[r]}),this.failuresByPos=t,this.message=Wn(e,this.failures)}$(wt).from(tt);var Gr=Mt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ti=tt,Y=Mt.reduce(function(e,t){var r=t+"Error";function o(i,s){this.name=r,i?typeof i=="string"?(this.message="".concat(i).concat(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=or[t]||r,this.inner=null)}return $(o).from(Ti),e[t]=o,e},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Hn=jt.reduce(function(e,t){return e[t+"Error"]=Y[t],e},{});function Ei(e,t){if(!e||e instanceof tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Hn[e.name])return e;var r=new Hn[e.name](t||e.message,e);return"stack"in e&&D(r,"stack",{get:function(){return this.inner.stack}}),r}var ar=Mt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Y[t]),e},{});ar.ModifyError=ir,ar.DexieError=tt,ar.BulkError=wt;function me(){}function Kt(e){return e}function Ii(e,t){return e==null||e===Kt?t:function(r){return t(e(r))}}function lt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ri(e,t){return e===me?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?lt(o,this.onsuccess):o),i&&(this.onerror=this.onerror?lt(i,this.onerror):i),s!==void 0?s:r}}function Ai(e,t){return e===me?t:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?lt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?lt(o,this.onerror):o)}}function ji(e,t){return e===me?t:function(r){var o=e.apply(this,arguments);w(r,o);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?lt(i,this.onsuccess):i),s&&(this.onerror=this.onerror?lt(s,this.onerror):s),o===void 0?c===void 0?void 0:c:w(o,c)}}function Mi(e,t){return e===me?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Zr(e,t){return e===me?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(o,s)})}return t.apply(this,arguments)}}var He=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Gn(e,t){He=e}var Bt={},Zn=100,Qr=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,P(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,P(t),e]}(),Qn=Qr[0],Yn=Qr[1],Ki=Qr[2],Bi=Yn&&Yn.then,ft=Qn&&Qn.constructor,Yr=!!Ki;function zi(){queueMicrotask(qi)}var zt=function(e,t){$t.push([e,t]),sr&&(zi(),sr=!1)},Xr=!0,sr=!0,pt=[],cr=[],Jr=Kt,rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},G=rt,$t=[],dt=0,ur=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=G;if(typeof e!="function"){if(e!==Bt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&en(this,this._value);return}this._state=null,this._value=null,++t.ref,Jn(this,e)}var Vr={get:function(){var e=G,t=dr;function r(o,i){var s=this,c=!e.global&&(e!==G||t!==dr),l=c&&!ot(),f=new F(function(d,b){tn(s,new Xn(to(o,e,c,l),to(i,e,c,l),d,b,e))});return this._consoleTask&&(f._consoleTask=this._consoleTask),f}return r.prototype=Bt,r},set:function(e){D(this,"then",e&&e.prototype===Bt?Vr:{get:function(){return e},set:Vr.set})}};M(F.prototype,{then:Vr,_then:function(e,t){tn(this,new Xn(null,null,e,t,G))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,function(o){return o instanceof t?r(o):lr(o)}):this.then(null,function(o){return o&&o.name===t?r(o):lr(o)})},finally:function(e){return this.then(function(t){return F.resolve(e()).then(function(){return t})},function(t){return F.resolve(e()).then(function(){return lr(t)})})},timeout:function(e,t){var r=this;return e<1/0?new F(function(o,i){var s=setTimeout(function(){return i(new Y.Timeout(t))},e);r.then(o,i).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(F.prototype,Symbol.toStringTag,"Dexie.Promise"),rt.env=eo();function Xn(e,t,r,o,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=o,this.psd=i}M(F,{all:function(){var e=_e.apply(null,arguments).map(hr);return new F(function(t,r){e.length===0&&t([]);var o=e.length;e.forEach(function(i,s){return F.resolve(i).then(function(c){e[s]=c,--o||t(e)},r)})})},resolve:function(e){if(e instanceof F)return e;if(e&&typeof e.then=="function")return new F(function(r,o){e.then(r,o)});var t=new F(Bt,!0,e);return t},reject:lr,race:function(){var e=_e.apply(null,arguments).map(hr);return new F(function(t,r){e.map(function(o){return F.resolve(o).then(t,r)})})},PSD:{get:function(){return G},set:function(e){return G=e}},totalEchoes:{get:function(){return dr}},newPSD:nt,usePSD:ht,scheduler:{get:function(){return zt},set:function(e){zt=e}},rejectionMapper:{get:function(){return Jr},set:function(e){Jr=e}},follow:function(e,t){return new F(function(r,o){return nt(function(i,s){var c=G;c.unhandleds=[],c.onunhandled=s,c.finalize=lt(function(){var l=this;Fi(function(){l.unhandleds.length===0?i():s(l.unhandleds[0])})},c.finalize),e()},t,r,o)})}}),ft&&(ft.allSettled&&D(F,"allSettled",function(){var e=_e.apply(null,arguments).map(hr);return new F(function(t){e.length===0&&t([]);var r=e.length,o=new Array(r);e.forEach(function(i,s){return F.resolve(i).then(function(c){return o[s]={status:"fulfilled",value:c}},function(c){return o[s]={status:"rejected",reason:c}}).then(function(){return--r||t(o)})})})}),ft.any&&typeof AggregateError<"u"&&D(F,"any",function(){var e=_e.apply(null,arguments).map(hr);return new F(function(t,r){e.length===0&&r(new AggregateError([]));var o=e.length,i=new Array(o);e.forEach(function(s,c){return F.resolve(s).then(function(l){return t(l)},function(l){i[c]=l,--o||r(new AggregateError(i))})})})}),ft.withResolvers&&(F.withResolvers=ft.withResolvers));function Jn(e,t){try{t(function(r){if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var o=e._lib&&xt();r&&typeof r.then=="function"?Jn(e,function(i,s){r instanceof F?r._then(i,s):r.then(i,s)}):(e._state=!0,e._value=r,Vn(e)),o&&kt()}},en.bind(null,e))}catch(r){en(e,r)}}function en(e,t){if(cr.push(t),e._state===null){var r=e._lib&&xt();t=Jr(t),e._state=!1,e._value=t,Li(e),Vn(e),r&&kt()}}function Vn(e){var t=e._listeners;e._listeners=[];for(var r=0,o=t.length;r<o;++r)tn(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),dt===0&&(++dt,zt(function(){--dt===0&&rn()},[]))}function tn(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++dt,zt($i,[r,e,t])}function $i(e,t,r){try{var o,i=t._value;!t._state&&cr.length&&(cr=[]),o=He&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&cr.indexOf(i)===-1&&Ui(t),r.resolve(o)}catch(s){r.reject(s)}finally{--dt===0&&rn(),--r.psd.ref||r.psd.finalize()}}function qi(){ht(rt,function(){xt()&&kt()})}function xt(){var e=Xr;return Xr=!1,sr=!1,e}function kt(){var e,t,r;do for(;$t.length>0;)for(e=$t,$t=[],r=e.length,t=0;t<r;++t){var o=e[t];o[0].apply(null,o[1])}while($t.length>0);Xr=!0,sr=!0}function rn(){var e=pt;pt=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var t=ur.slice(0),r=t.length;r;)t[--r]()}function Fi(e){function t(){e(),ur.splice(ur.indexOf(t),1)}ur.push(t),++dt,zt(function(){--dt===0&&rn()},[])}function Li(e){pt.some(function(t){return t._value===e._value})||pt.push(e)}function Ui(e){for(var t=pt.length;t;)if(pt[--t]._value===e._value){pt.splice(t,1);return}}function lr(e){return new F(Bt,!1,e)}function we(e,t){var r=G;return function(){var o=xt(),i=G;try{return it(r,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{it(i,!1),o&&kt()}}}var Ne={awaits:0,echoes:0,id:0},Wi=0,fr=[],pr=0,dr=0,Hi=0;function nt(e,t,r,o){var i=G,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Hi,rt.env,s.env=Yr?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},t&&w(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=ht(s,e,r,o);return s.ref===0&&s.finalize(),c}function St(){return Ne.id||(Ne.id=++Wi),++Ne.awaits,Ne.echoes+=Zn,Ne.id}function ot(){return Ne.awaits?(--Ne.awaits===0&&(Ne.id=0),Ne.echoes=Ne.awaits*Zn,!0):!1}(""+Bi).indexOf("[native code]")===-1&&(St=ot=me);function hr(e){return Ne.echoes&&e&&e.constructor===ft?(St(),e.then(function(t){return ot(),t},function(t){return ot(),Ce(t)})):e}function Gi(e){++dr,(!Ne.echoes||--Ne.echoes===0)&&(Ne.echoes=Ne.awaits=Ne.id=0),fr.push(G),it(e,!0)}function Zi(){var e=fr[fr.length-1];fr.pop(),it(e,!1)}function it(e,t){var r=G;if((t?Ne.echoes&&(!pr++||e!==G):pr&&(!--pr||e!==G))&&queueMicrotask(t?Gi.bind(null,e):Zi),e!==G&&(G=e,r===rt&&(rt.env=eo()),Yr)){var o=rt.env.Promise,i=e.env;(r.global||e.global)&&(Object.defineProperty(y,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))}}function eo(){var e=y.Promise;return Yr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ht(e,t,r,o,i){var s=G;try{return it(e,!0),t(r,o,i)}finally{it(s,!1)}}function to(e,t,r,o){return typeof e!="function"?e:function(){var i=G;r&&St(),it(t,!0);try{return e.apply(this,arguments)}finally{it(i,!1),o&&queueMicrotask(ot)}}}function nn(e){Promise===ft&&Ne.echoes===0?pr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var Ce=F.reject;function on(e,t,r,o){if(!e.idbdb||!e._state.openComplete&&!G.letThrough&&!e._vip){if(e._state.openComplete)return Ce(new Y.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Ce(new Y.DatabaseClosed);e.open().catch(me)}return e._state.dbReadyPromise.then(function(){return on(e,t,r,o)})}else{var i=e._createTransaction(t,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Gr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return on(e,t,r,o)})):Ce(s)}return i._promise(t,function(s,c){return nt(function(){return G.trans=i,o(s,c,i)})}).then(function(s){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?s:i._completion.then(function(){return s})})}}var ro="4.0.11",mt="\uFFFF",an=-1/0,Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",no="String expected.",Ct=[],mr="__dbnames",sn="readonly",cn="readwrite";function yt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var oo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yr(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=be(t),delete t[e]),t}:function(t){return t}}function io(){throw Y.Type()}function ce(e,t){try{var r=ao(e),o=ao(t);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Yi(so(e),so(t));case"Array":return Qi(e,t)}}catch{}return NaN}function Qi(e,t){for(var r=e.length,o=t.length,i=r<o?r:o,s=0;s<i;++s){var c=ce(e[s],t[s]);if(c!==0)return c}return r===o?0:r<o?-1:1}function Yi(e,t){for(var r=e.length,o=t.length,i=r<o?r:o,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===o?0:r<o?-1:1}function ao(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=qe(e);return r==="ArrayBuffer"?"binary":r}function so(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var co=function(){function e(){}return e.prototype._trans=function(t,r,o){var i=this._tx||G.trans,s=this.name,c=He&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function l(b,h,O){if(!O.schema[s])throw new Y.NotFound("Table "+s+" not part of transaction");return r(O.idbtrans,O)}var f=xt();try{var d=i&&i.db._novip===this.db._novip?i===G.trans?i._promise(t,l,o):nt(function(){return i._promise(t,l,o)},{trans:i,transless:G.transless||G}):on(this.db,t,[this.name],l);return c&&(d._consoleTask=c,d=d.catch(function(b){return console.trace(b),Ce(b)})),d}finally{f&&kt()}},e.prototype.get=function(t,r){var o=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?Ce(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return o.core.get({trans:i,key:t}).then(function(s){return o.hook.reading.fire(s)})}).then(r)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(v(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=_(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&r.every(function(O){return b.keyPath.indexOf(O)>=0})){for(var h=0;h<r.length;++h)if(r.indexOf(b.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(b,h){return b.keyPath.length-h.keyPath.length})[0];if(o&&this.db._maxKey!==mt){var i=o.keyPath.slice(0,r.length);return this.where(i).equals(i.map(function(b){return t[b]}))}!o&&He&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var s=this.schema.idxByName;function c(b,h){return ce(b,h)===0}var l=r.reduce(function(b,h){var O=b[0],K=b[1],m=s[h],x=t[h];return[O||m,O||!m?yt(K,m&&m.multi?function(C){var R=ae(C,h);return v(R)&&R.some(function(T){return c(x,T)})}:function(C){return c(x,ae(C,h))}):K]},[null,null]),f=l[0],d=l[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(d):o?this.filter(d):this.where(r).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,v(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var r=this,o=r.db,i=r.name;this.schema.mappedClass=t,t.prototype instanceof io&&(t=function(f){g(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(d.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),d.prototype.table=function(){return i},d}(t));for(var s=new Set,c=t.prototype;c;c=P(c))Object.getOwnPropertyNames(c).forEach(function(f){return s.add(f)});var l=function(f){if(!f)return f;var d=Object.create(t.prototype);for(var b in f)if(!s.has(b))try{d[b]=f[b]}catch{}return d};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},e.prototype.defineClass=function(){function t(r){w(this,r)}return this.mapToClass(t)},e.prototype.add=function(t,r){var o=this,i=this.schema.primKey,s=i.auto,c=i.keyPath,l=t;return c&&s&&(l=yr(c)(t)),this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"add",keys:r!=null?[r]:null,values:[l]})}).then(function(f){return f.numFailures?F.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{ee(t,c,f)}catch{}return f})},e.prototype.update=function(t,r){if(typeof t=="object"&&!v(t)){var o=ae(t,this.schema.primKey.keyPath);return o===void 0?Ce(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(r)}else return this.where(":id").equals(t).modify(r)},e.prototype.put=function(t,r){var o=this,i=this.schema.primKey,s=i.auto,c=i.keyPath,l=t;return c&&s&&(l=yr(c)(t)),this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"put",values:[l],keys:r!=null?[r]:null})}).then(function(f){return f.numFailures?F.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{ee(t,c,f)}catch{}return f})},e.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?F.reject(o.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:oo})}).then(function(r){return r.numFailures?F.reject(r.failures[0]):void 0})},e.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(o){return r.core.getMany({keys:t,trans:o}).then(function(i){return i.map(function(s){return r.hook.reading.fire(s)})})})},e.prototype.bulkAdd=function(t,r,o){var i=this,s=Array.isArray(r)?r:void 0;o=o||(s?void 0:r);var c=o?o.allKeys:void 0;return this._trans("readwrite",function(l){var f=i.schema.primKey,d=f.auto,b=f.keyPath;if(b&&s)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var h=t.length,O=b&&d?t.map(yr(b)):t;return i.core.mutate({trans:l,type:"add",keys:s,values:O,wantResults:c}).then(function(K){var m=K.numFailures,x=K.results,C=K.lastResult,R=K.failures,T=c?x:C;if(m===0)return T;throw new wt("".concat(i.name,".bulkAdd(): ").concat(m," of ").concat(h," operations failed"),R)})})},e.prototype.bulkPut=function(t,r,o){var i=this,s=Array.isArray(r)?r:void 0;o=o||(s?void 0:r);var c=o?o.allKeys:void 0;return this._trans("readwrite",function(l){var f=i.schema.primKey,d=f.auto,b=f.keyPath;if(b&&s)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var h=t.length,O=b&&d?t.map(yr(b)):t;return i.core.mutate({trans:l,type:"put",keys:s,values:O,wantResults:c}).then(function(K){var m=K.numFailures,x=K.results,C=K.lastResult,R=K.failures,T=c?x:C;if(m===0)return T;throw new wt("".concat(i.name,".bulkPut(): ").concat(m," of ").concat(h," operations failed"),R)})})},e.prototype.bulkUpdate=function(t){var r=this,o=this.core,i=t.map(function(l){return l.key}),s=t.map(function(l){return l.changes}),c=[];return this._trans("readwrite",function(l){return o.getMany({trans:l,keys:i,cache:"clone"}).then(function(f){var d=[],b=[];t.forEach(function(O,K){var m=O.key,x=O.changes,C=f[K];if(C){for(var R=0,T=Object.keys(x);R<T.length;R++){var E=T[R],j=x[E];if(E===r.schema.primKey.keyPath){if(ce(j,m)!==0)throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else ee(C,E,j)}c.push(K),d.push(m),b.push(C)}});var h=d.length;return o.mutate({trans:l,type:"put",keys:d,values:b,updates:{keys:i,changeSpecs:s}}).then(function(O){var K=O.numFailures,m=O.failures;if(K===0)return h;for(var x=0,C=Object.keys(m);x<C.length;x++){var R=C[x],T=c[Number(R)];if(T!=null){var E=m[R];delete m[R],m[T]=E}}throw new wt("".concat(r.name,".bulkUpdate(): ").concat(K," of ").concat(h," operations failed"),m)})})})},e.prototype.bulkDelete=function(t){var r=this,o=t.length;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var s=i.numFailures,c=i.lastResult,l=i.failures;if(s===0)return c;throw new wt("".concat(r.name,".bulkDelete(): ").concat(s," of ").concat(o," operations failed"),l)})},e}();function qt(e){var t={},r=function(l,f){if(f){for(var d=arguments.length,b=new Array(d-1);--d;)b[d-1]=arguments[d];return t[l].subscribe.apply(null,b),e}else if(typeof l=="string")return t[l]};r.addEventType=s;for(var o=1,i=arguments.length;o<i;++o)s(arguments[o]);return r;function s(l,f,d){if(typeof l=="object")return c(l);f||(f=Mi),d||(d=me);var b={subscribers:[],fire:d,subscribe:function(h){b.subscribers.indexOf(h)===-1&&(b.subscribers.push(h),b.fire=f(b.fire,h))},unsubscribe:function(h){b.subscribers=b.subscribers.filter(function(O){return O!==h}),b.fire=b.subscribers.reduce(f,d)}};return t[l]=r[l]=b,b}function c(l){_(l).forEach(function(f){var d=l[f];if(v(d))s(f,l[f][0],l[f][1]);else if(d==="asap")var b=s(f,Kt,function(){for(var h=arguments.length,O=new Array(h);h--;)O[h]=arguments[h];b.subscribers.forEach(function(K){fe(function(){K.apply(null,O)})})});else throw new Y.InvalidArgument("Invalid event config")})}}function Ft(e,t){return $(t).from({prototype:e}),t}function Xi(e){return Ft(co.prototype,function(t,r,o){this.db=e,this._tx=o,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:qt(null,{creating:[Ri,me],reading:[Ii,Kt],updating:[ji,me],deleting:[Ai,me]})})}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function un(e,t){e.filter=yt(e.filter,t)}function ln(e,t,r){var o=e.replayFilter;e.replayFilter=o?function(){return yt(o(),t())}:t,e.justLimit=r&&!o}function Ji(e,t){e.isMatch=yt(e.isMatch,t)}function vr(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new Y.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function uo(e,t,r){var o=vr(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function gr(e,t,r,o){var i=e.replayFilter?yt(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},c=function(l,f,d){if(!i||i(f,d,function(O){return f.stop(O)},function(O){return f.fail(O)})){var b=f.primaryKey,h=""+b;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(b)),I(s,h)||(s[h]=!0,t(l,f,d))}};return Promise.all([e.or._iterate(c,r),lo(uo(e,o,r),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}else return lo(uo(e,o,r),yt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function lo(e,t,r,o){var i=o?function(c,l,f){return r(o(c),l,f)}:r,s=we(i);return e.then(function(c){if(c)return c.start(function(){var l=function(){return c.continue()};(!t||t(c,function(f){return l=f},function(f){c.stop(f),l=me},function(f){c.fail(f),l=me}))&&s(c.value,c,function(f){return l=f}),l()})})}var Lt=function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var r,o=this["@@propmod"];if(o.add!==void 0){var i=o.add;if(v(i))return k(k([],v(t)?t:[],!0),i,!0).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(o.remove!==void 0){var s=o.remove;if(v(s))return v(t)?t.filter(function(l){return!s.includes(l)}).sort():[];if(typeof s=="number")return Number(t)-s;if(typeof s=="bigint")try{return BigInt(t)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var c=(r=o.replacePrefix)===null||r===void 0?void 0:r[0];return c&&typeof t=="string"&&t.startsWith(c)?o.replacePrefix[1]+t.substring(c.length):t},e}(),Vi=function(){function e(){}return e.prototype._read=function(t,r){var o=this._ctx;return o.error?o.table._trans(null,Ce.bind(null,o.error)):o.table._trans("readonly",t).then(r)},e.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,Ce.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=yt(r.algorithm,t)},e.prototype._iterate=function(t,r){return gr(this._ctx,t,r,this._ctx.table.core)},e.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&w(o,t),r._ctx=o,r},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var r=this._ctx;return this._read(function(o){return gr(r,t,o,r.table.core)})},e.prototype.count=function(t){var r=this;return this._read(function(o){var i=r._ctx,s=i.table.core;if(Pt(i,!0))return s.count({trans:o,query:{index:vr(i,s.schema),range:i.range}}).then(function(l){return Math.min(l,i.limit)});var c=0;return gr(i,function(){return++c,!1},o,s).then(function(){return c})}).then(t)},e.prototype.sortBy=function(t,r){var o=t.split(".").reverse(),i=o[0],s=o.length-1;function c(d,b){return b?c(d[o[b]],b-1):d[i]}var l=this._ctx.dir==="next"?1:-1;function f(d,b){var h=c(d,s),O=c(b,s);return ce(h,O)*l}return this.toArray(function(d){return d.sort(f)}).then(r)},e.prototype.toArray=function(t){var r=this;return this._read(function(o){var i=r._ctx;if(i.dir==="next"&&Pt(i,!0)&&i.limit>0){var s=i.valueMapper,c=vr(i,i.table.core.schema);return i.table.core.query({trans:o,limit:i.limit,values:!0,query:{index:c,range:i.range}}).then(function(f){var d=f.result;return s?d.map(s):d})}else{var l=[];return gr(i,function(f){return l.push(f)},o,i.table.core).then(function(){return l})}},t)},e.prototype.offset=function(t){var r=this._ctx;return t<=0?this:(r.offset+=t,Pt(r)?ln(r,function(){var o=t;return function(i,s){return o===0?!0:o===1?(--o,!1):(s(function(){i.advance(o),o=0}),!1)}}):ln(r,function(){var o=t;return function(){return--o<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ln(this._ctx,function(){var r=t;return function(o,i,s){return--r<=0&&i(s),r>=0}},!0),this},e.prototype.until=function(t,r){return un(this._ctx,function(o,i,s){return t(o.value)?(i(s),r):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return un(this._ctx,function(r){return t(r.value)}),Ji(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,s){o.push(s.key)}).then(function(){return o}).then(t)},e.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&Pt(r,!0)&&r.limit>0)return this._read(function(i){var s=vr(r,r.table.core.schema);return r.table.core.query({trans:i,values:!1,limit:r.limit,query:{index:s,range:r.range}})}).then(function(i){var s=i.result;return s}).then(t);r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,s){o.push(s.primaryKey)}).then(function(){return o}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var o={};return un(this._ctx,function(i){var s=i.primaryKey.toString(),c=I(o,s);return o[s]=!0,!c}),this},e.prototype.modify=function(t){var r=this,o=this._ctx;return this._write(function(i){var s;if(typeof t=="function")s=t;else{var c=_(t),l=c.length;s=function(T){for(var E=!1,j=0;j<l;++j){var N=c[j],B=t[N],L=ae(T,N);B instanceof Lt?(ee(T,N,B.execute(L)),E=!0):L!==B&&(ee(T,N,B),E=!0)}return E}}var f=o.table.core,d=f.schema.primaryKey,b=d.outbound,h=d.extractKey,O=200,K=r.db._options.modifyChunkSize;K&&(typeof K=="object"?O=K[f.name]||K["*"]||200:O=K);var m=[],x=0,C=[],R=function(T,E){var j=E.failures,N=E.numFailures;x+=T-N;for(var B=0,L=_(j);B<L.length;B++){var q=L[B];m.push(j[q])}};return r.clone().primaryKeys().then(function(T){var E=Pt(o)&&o.limit===1/0&&(typeof t!="function"||t===fn)&&{index:o.index,range:o.range},j=function(N){var B=Math.min(O,T.length-N);return f.getMany({trans:i,keys:T.slice(N,N+B),cache:"immutable"}).then(function(L){for(var q=[],X=[],re=b?[]:null,U=[],te=0;te<B;++te){var J=L[te],ue={value:be(J),primKey:T[N+te]};s.call(ue,ue.value,ue)!==!1&&(ue.value==null?U.push(T[N+te]):!b&&ce(h(J),h(ue.value))!==0?(U.push(T[N+te]),q.push(ue.value)):(X.push(ue.value),b&&re.push(T[N+te])))}return Promise.resolve(q.length>0&&f.mutate({trans:i,type:"add",values:q}).then(function(Q){for(var ke in Q.failures)U.splice(parseInt(ke),1);R(q.length,Q)})).then(function(){return(X.length>0||E&&typeof t=="object")&&f.mutate({trans:i,type:"put",keys:re,values:X,criteria:E,changeSpec:typeof t!="function"&&t,isAdditionalChunk:N>0}).then(function(Q){return R(X.length,Q)})}).then(function(){return(U.length>0||E&&t===fn)&&f.mutate({trans:i,type:"delete",keys:U,criteria:E,isAdditionalChunk:N>0}).then(function(Q){return R(U.length,Q)})}).then(function(){return T.length>N+B&&j(N+O)})})};return j(0).then(function(){if(m.length>0)throw new ir("Error modifying one or more objects",m,x,C);return T.length})})})},e.prototype.delete=function(){var t=this._ctx,r=t.range;return Pt(t)&&(t.isPrimKey||r.type===3)?this._write(function(o){var i=t.table.core.schema.primaryKey,s=r;return t.table.core.count({trans:o,query:{index:i,range:s}}).then(function(c){return t.table.core.mutate({trans:o,type:"deleteRange",range:s}).then(function(l){var f=l.failures;l.lastResult,l.results;var d=l.numFailures;if(d)throw new ir("Could not delete some values",Object.keys(f).map(function(b){return f[b]}),c-d);return c-d})})}):this.modify(fn)},e}(),fn=function(e,t){return t.value=null};function ea(e){return Ft(Vi.prototype,function(t,r){this.db=e;var o=oo,i=null;if(r)try{o=r()}catch(f){i=f}var s=t._ctx,c=s.table,l=c.hook.reading.fire;this._ctx={table:c,index:s.index,isPrimKey:!s.index||c.schema.primKey.keyPath&&s.index===c.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:l!==Kt?l:null}})}function ta(e,t){return e<t?-1:e===t?0:1}function ra(e,t){return e>t?-1:e===t?0:1}function Ke(e,t,r){var o=e instanceof po?new e.Collection(e):e;return o._ctx.error=r?new r(t):new TypeError(t),o}function Ot(e){return new e.Collection(e,function(){return fo("")}).limit(0)}function na(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function oa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function ia(e,t,r,o,i,s){for(var c=Math.min(e.length,o.length),l=-1,f=0;f<c;++f){var d=t[f];if(d!==o[f])return i(e[f],r[f])<0?e.substr(0,f)+r[f]+r.substr(f+1):i(e[f],o[f])<0?e.substr(0,f)+o[f]+r.substr(f+1):l>=0?e.substr(0,l)+t[l]+r.substr(l+1):null;i(e[f],d)<0&&(l=f)}return c<o.length&&s==="next"?e+r.substr(e.length):c<e.length&&s==="prev"?e.substr(0,r.length):l<0?null:e.substr(0,l)+o[l]+r.substr(l+1)}function br(e,t,r,o){var i,s,c,l,f,d,b,h=r.length;if(!r.every(function(x){return typeof x=="string"}))return Ke(e,no);function O(x){i=na(x),s=oa(x),c=x==="next"?ta:ra;var C=r.map(function(R){return{lower:s(R),upper:i(R)}}).sort(function(R,T){return c(R.lower,T.lower)});l=C.map(function(R){return R.upper}),f=C.map(function(R){return R.lower}),d=x,b=x==="next"?"":o}O("next");var K=new e.Collection(e,function(){return at(l[0],f[h-1]+o)});K._ondirectionchange=function(x){O(x)};var m=0;return K._addAlgorithm(function(x,C,R){var T=x.key;if(typeof T!="string")return!1;var E=s(T);if(t(E,f,m))return!0;for(var j=null,N=m;N<h;++N){var B=ia(T,E,l[N],f[N],c,d);B===null&&j===null?m=N+1:(j===null||c(j,B)>0)&&(j=B)}return C(j!==null?function(){x.continue(j+b)}:R),!1}),K}function at(e,t,r,o){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:o}}function fo(e){return{type:1,lower:e,upper:e}}var po=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,r,o,i){o=o!==!1,i=i===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(o||i)&&!(o&&i)?Ot(this):new this.Collection(this,function(){return at(t,r,!o,!i)})}catch{return Ke(this,Xe)}},e.prototype.equals=function(t){return t==null?Ke(this,Xe):new this.Collection(this,function(){return fo(t)})},e.prototype.above=function(t){return t==null?Ke(this,Xe):new this.Collection(this,function(){return at(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Ke(this,Xe):new this.Collection(this,function(){return at(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Ke(this,Xe):new this.Collection(this,function(){return at(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Ke(this,Xe):new this.Collection(this,function(){return at(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Ke(this,no):this.between(t,t+mt,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):br(this,function(r,o){return r.indexOf(o[0])===0},[t],mt)},e.prototype.equalsIgnoreCase=function(t){return br(this,function(r,o){return r===o[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=_e.apply(Te,arguments);return t.length===0?Ot(this):br(this,function(r,o){return o.indexOf(r)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=_e.apply(Te,arguments);return t.length===0?Ot(this):br(this,function(r,o){return o.some(function(i){return r.indexOf(i)===0})},t,mt)},e.prototype.anyOf=function(){var t=this,r=_e.apply(Te,arguments),o=this._cmp;try{r.sort(o)}catch{return Ke(this,Xe)}if(r.length===0)return Ot(this);var i=new this.Collection(this,function(){return at(r[0],r[r.length-1])});i._ondirectionchange=function(c){o=c==="next"?t._ascending:t._descending,r.sort(o)};var s=0;return i._addAlgorithm(function(c,l,f){for(var d=c.key;o(d,r[s])>0;)if(++s,s===r.length)return l(f),!1;return o(d,r[s])===0?!0:(l(function(){c.continue(r[s])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[an,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=_e.apply(Te,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ke(this,Xe)}var r=t.reduce(function(o,i){return o?o.concat([[o[o.length-1][1],i]]):[[an,i]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,r){var o=this,i=this._cmp,s=this._ascending,c=this._descending,l=this._min,f=this._max;if(t.length===0)return Ot(this);if(!t.every(function(N){return N[0]!==void 0&&N[1]!==void 0&&s(N[0],N[1])<=0}))return Ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var d=!r||r.includeLowers!==!1,b=r&&r.includeUppers===!0;function h(N,B){for(var L=0,q=N.length;L<q;++L){var X=N[L];if(i(B[0],X[1])<0&&i(B[1],X[0])>0){X[0]=l(X[0],B[0]),X[1]=f(X[1],B[1]);break}}return L===q&&N.push(B),N}var O=s;function K(N,B){return O(N[0],B[0])}var m;try{m=t.reduce(h,[]),m.sort(K)}catch{return Ke(this,Xe)}var x=0,C=b?function(N){return s(N,m[x][1])>0}:function(N){return s(N,m[x][1])>=0},R=d?function(N){return c(N,m[x][0])>0}:function(N){return c(N,m[x][0])>=0};function T(N){return!C(N)&&!R(N)}var E=C,j=new this.Collection(this,function(){return at(m[0][0],m[m.length-1][1],!d,!b)});return j._ondirectionchange=function(N){N==="next"?(E=C,O=s):(E=R,O=c),m.sort(K)},j._addAlgorithm(function(N,B,L){for(var q=N.key;E(q);)if(++x,x===m.length)return B(L),!1;return T(q)?!0:(o._cmp(q,m[x][1])===0||o._cmp(q,m[x][0])===0||B(function(){O===s?N.continue(m[x][0]):N.continue(m[x][1])}),!1)}),j},e.prototype.startsWithAnyOf=function(){var t=_e.apply(Te,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?Ot(this):this.inAnyRange(t.map(function(r){return[r,r+mt]})):Ke(this,"startsWithAnyOf() only works with strings")},e}();function aa(e){return Ft(po.prototype,function(t,r,o){if(this.db=e,this._ctx={table:t,index:r===":id"?null:r,or:o},this._cmp=this._ascending=ce,this._descending=function(i,s){return ce(s,i)},this._max=function(i,s){return ce(i,s)>0?i:s},this._min=function(i,s){return ce(i,s)<0?i:s},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI})}function Ge(e){return we(function(t){return Ut(t),e(t.target.error),!1})}function Ut(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Wt="storagemutated",pn="x-storagemutated-1",st=qt(null,Wt),sa=function(){function e(){}return e.prototype._lock=function(){return ie(!G.global),++this._reculock,this._reculock===1&&!G.global&&(G.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ie(!G.global),--this._reculock===0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ht(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},e.prototype.create=function(t){var r=this;if(!this.mode)return this;var o=this.db.idbdb,i=this.db._state.dbOpenError;if(ie(!this.idbtrans),!t&&!o)switch(i&&i.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(i);case"MissingAPIError":throw new Y.MissingAPI(i.message,i);default:throw new Y.OpenFailed(i)}if(!this.active)throw new Y.TransactionInactive;return ie(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=we(function(s){Ut(s),r._reject(t.error)}),t.onabort=we(function(s){Ut(s),r.active&&r._reject(new Y.Abort(t.error)),r.active=!1,r.on("abort").fire(s)}),t.oncomplete=we(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&st.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,r,o){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return Ce(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return Ce(new Y.TransactionInactive);if(this._locked())return new F(function(c,l){i._blockedFuncs.push([function(){i._promise(t,r,o).then(c,l)},G])});if(o)return nt(function(){var c=new F(function(l,f){i._lock();var d=r(l,f,i);d&&d.then&&d.then(l,f)});return c.finally(function(){return i._unlock()}),c._lib=!0,c});var s=new F(function(c,l){var f=r(c,l,i);f&&f.then&&f.then(c,l)});return s._lib=!0,s},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var r=this._root(),o=F.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return o});else{r._waitingFor=o,r._waitingQueue=[];var i=r.idbtrans.objectStore(r.storeNames[0]);(function c(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(i.get(-1/0).onsuccess=c)})()}var s=r._waitingFor;return new F(function(c,l){o.then(function(f){return r._waitingQueue.push(we(c.bind(null,f)))},function(f){return r._waitingQueue.push(we(l.bind(null,f)))}).finally(function(){r._waitingFor===s&&(r._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},e.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(I(r,t))return r[t];var o=this.schema[t];if(!o)throw new Y.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,o,this);return i.core=this.db.core.table(t),r[t]=i,i},e}();function ca(e){return Ft(sa.prototype,function(t,r,o,i,s){var c=this;this.db=e,this.mode=t,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=qt(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(l,f){c._resolve=l,c._reject=f}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(l){var f=c.active;return c.active=!1,c.on.error.fire(l),c.parent?c.parent._reject(l):f&&c.idbtrans&&c.idbtrans.abort(),Ce(l)})})}function dn(e,t,r,o,i,s,c){return{name:e,keyPath:t,unique:r,multi:o,auto:i,compound:s,src:(r&&!c?"&":"")+(o?"*":"")+(i?"++":"")+ho(t)}}function ho(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function hn(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:le(r,function(o){return[o.name,o]})}}function ua(e){return e.length===1?e[0]:e}var Ht=function(e){try{return e.only([[]]),Ht=function(){return[[]]},[[]]}catch{return Ht=function(){return mt},mt}};function mn(e){return e==null?function(){}:typeof e=="string"?la(e):function(t){return ae(t,e)}}function la(e){var t=e.split(".");return t.length===1?function(r){return r[e]}:function(r){return ae(r,e)}}function mo(e){return[].slice.call(e)}var fa=0;function Gt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function pa(e,t,r){function o(h,O){var K=mo(h.objectStoreNames);return{schema:{name:h.name,tables:K.map(function(m){return O.objectStore(m)}).map(function(m){var x=m.keyPath,C=m.autoIncrement,R=v(x),T=x==null,E={},j={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:R,keyPath:x,autoIncrement:C,unique:!0,extractKey:mn(x)},indexes:mo(m.indexNames).map(function(N){return m.index(N)}).map(function(N){var B=N.name,L=N.unique,q=N.multiEntry,X=N.keyPath,re=v(X),U={name:B,compound:re,keyPath:X,unique:L,multiEntry:q,extractKey:mn(X)};return E[Gt(X)]=U,U}),getIndexByKeyPath:function(N){return E[Gt(N)]}};return E[":id"]=j.primaryKey,x!=null&&(E[Gt(x)]=j.primaryKey),j})},hasGetAll:K.length>0&&"getAll"in O.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=h.lower,K=h.upper,m=h.lowerOpen,x=h.upperOpen,C=O===void 0?K===void 0?null:t.upperBound(K,!!x):K===void 0?t.lowerBound(O,!!m):t.bound(O,K,!!m,!!x);return C}function s(h){var O=h.name;function K(C){var R=C.trans,T=C.type,E=C.keys,j=C.values,N=C.range;return new Promise(function(B,L){B=we(B);var q=R.objectStore(O),X=q.keyPath==null,re=T==="put"||T==="add";if(!re&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var U=(E||j||{length:1}).length;if(E&&j&&E.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});var te,J=[],ue=[],Q=0,ke=function(Qe){++Q,Ut(Qe)};if(T==="deleteRange"){if(N.type===4)return B({numFailures:Q,failures:ue,results:[],lastResult:void 0});N.type===3?J.push(te=q.clear()):J.push(te=q.delete(i(N)))}else{var Ie=re?X?[j,E]:[j,null]:[E,null],Ze=Ie[0],Me=Ie[1];if(re)for(var Le=0;Le<U;++Le)J.push(te=Me&&Me[Le]!==void 0?q[T](Ze[Le],Me[Le]):q[T](Ze[Le])),te.onerror=ke;else for(var Le=0;Le<U;++Le)J.push(te=q[T](Ze[Le])),te.onerror=ke}var ut=function(Qe){var Yt=Qe.target.result;J.forEach(function(We,Er){return We.error!=null&&(ue[Er]=We.error)}),B({numFailures:Q,failures:ue,results:T==="delete"?E:J.map(function(We){return We.result}),lastResult:Yt})};te.onerror=function(Qe){ke(Qe),ut(Qe)},te.onsuccess=ut})}function m(C){var R=C.trans,T=C.values,E=C.query,j=C.reverse,N=C.unique;return new Promise(function(B,L){B=we(B);var q=E.index,X=E.range,re=R.objectStore(O),U=q.isPrimaryKey?re:re.index(q.name),te=j?N?"prevunique":"prev":N?"nextunique":"next",J=T||!("openKeyCursor"in U)?U.openCursor(i(X),te):U.openKeyCursor(i(X),te);J.onerror=Ge(L),J.onsuccess=we(function(ue){var Q=J.result;if(!Q){B(null);return}Q.___id=++fa,Q.done=!1;var ke=Q.continue.bind(Q),Ie=Q.continuePrimaryKey;Ie&&(Ie=Ie.bind(Q));var Ze=Q.advance.bind(Q),Me=function(){throw new Error("Cursor not started")},Le=function(){throw new Error("Cursor not stopped")};Q.trans=R,Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=Me,Q.fail=we(L),Q.next=function(){var ut=this,Qe=1;return this.start(function(){return Qe--?ut.continue():ut.stop()}).then(function(){return ut})},Q.start=function(ut){var Qe=new Promise(function(We,Er){We=we(We),J.onerror=Ge(Er),Q.fail=Er,Q.stop=function(Va){Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=Le,We(Va)}}),Yt=function(){if(J.result)try{ut()}catch(We){Q.fail(We)}else Q.done=!0,Q.start=function(){throw new Error("Cursor behind last entry")},Q.stop()};return J.onsuccess=we(function(We){J.onsuccess=Yt,Yt()}),Q.continue=ke,Q.continuePrimaryKey=Ie,Q.advance=Ze,Yt(),Qe},B(Q)},L)})}function x(C){return function(R){return new Promise(function(T,E){T=we(T);var j=R.trans,N=R.values,B=R.limit,L=R.query,q=B===1/0?void 0:B,X=L.index,re=L.range,U=j.objectStore(O),te=X.isPrimaryKey?U:U.index(X.name),J=i(re);if(B===0)return T({result:[]});if(C){var ue=N?te.getAll(J,q):te.getAllKeys(J,q);ue.onsuccess=function(Ze){return T({result:Ze.target.result})},ue.onerror=Ge(E)}else{var Q=0,ke=N||!("openKeyCursor"in te)?te.openCursor(J):te.openKeyCursor(J),Ie=[];ke.onsuccess=function(Ze){var Me=ke.result;if(!Me)return T({result:Ie});if(Ie.push(N?Me.value:Me.primaryKey),++Q===B)return T({result:Ie});Me.continue()},ke.onerror=Ge(E)}})}}return{name:O,schema:h,mutate:K,getMany:function(C){var R=C.trans,T=C.keys;return new Promise(function(E,j){E=we(E);for(var N=R.objectStore(O),B=T.length,L=new Array(B),q=0,X=0,re,U=function(Q){var ke=Q.target;(L[ke._pos]=ke.result)!=null,++X===q&&E(L)},te=Ge(j),J=0;J<B;++J){var ue=T[J];ue!=null&&(re=N.get(T[J]),re._pos=J,re.onsuccess=U,re.onerror=te,++q)}q===0&&E(L)})},get:function(C){var R=C.trans,T=C.key;return new Promise(function(E,j){E=we(E);var N=R.objectStore(O),B=N.get(T);B.onsuccess=function(L){return E(L.target.result)},B.onerror=Ge(j)})},query:x(f),openCursor:m,count:function(C){var R=C.query,T=C.trans,E=R.index,j=R.range;return new Promise(function(N,B){var L=T.objectStore(O),q=E.isPrimaryKey?L:L.index(E.name),X=i(j),re=X?q.count(X):q.count();re.onsuccess=we(function(U){return N(U.target.result)}),re.onerror=Ge(B)})}}}var c=o(e,r),l=c.schema,f=c.hasGetAll,d=l.tables.map(function(h){return s(h)}),b={};return d.forEach(function(h){return b[h.name]=h}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(h){var O=b[h];if(!O)throw new Error("Table '".concat(h,"' not found"));return b[h]},MIN_KEY:-1/0,MAX_KEY:Ht(t),schema:l}}function da(e,t){return t.reduce(function(r,o){var i=o.create;return p(p({},r),i(r))},e)}function ha(e,t,r,o){var i=r.IDBKeyRange;r.indexedDB;var s=da(pa(t,i,o),e.dbcore);return{dbcore:s}}function _r(e,t){var r=t.db,o=ha(e._middlewares,r,e._deps,t);e.core=o.dbcore,e.tables.forEach(function(i){var s=i.name;e.core.schema.tables.some(function(c){return c.name===s})&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function wr(e,t,r,o){r.forEach(function(i){var s=o[i];t.forEach(function(c){var l=W(c,i);(!l||"value"in l&&l.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?D(c,i,{get:function(){return this.table(i)},set:function(f){z(this,i,{value:f,writable:!0,configurable:!0,enumerable:!0})}}):c[i]=new e.Table(i,s))})})}function yn(e,t){t.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function ma(e,t){return e._cfg.version-t._cfg.version}function ya(e,t,r,o){var i=e._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=hn("$meta",vo("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(r),s._completion.catch(o);var c=s._reject.bind(s),l=G.transless||G;nt(function(){if(G.trans=s,G.transless=l,t===0)_(i).forEach(function(f){gn(r,f,i[f].primKey,i[f].indexes)}),_r(e,r),F.follow(function(){return e.on.populate.fire(s)}).catch(c);else return _r(e,r),ga(e,s,t).then(function(f){return ba(e,f,s,r)}).catch(c)})}function va(e,t){yo(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=kr(e,e.idbdb,t);Sr(e,e._dbSchema,t);for(var o=vn(r,e._dbSchema),i=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=t.objectStore(d.name);d.add.forEach(function(h){He&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(h.src)),xr(b,h)})},s=0,c=o.change;s<c.length;s++){var l=c[s],f=i(l);if(typeof f=="object")return f.value}}function ga(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(o){return o??r}):F.resolve(r)}function ba(e,t,r,o){var i=[],s=e._versions,c=e._dbSchema=kr(e,e.idbdb,o),l=s.filter(function(d){return d._cfg.version>=t});if(l.length===0)return F.resolve();l.forEach(function(d){i.push(function(){var b=c,h=d._cfg.dbschema;Sr(e,b,o),Sr(e,h,o),c=e._dbSchema=h;var O=vn(b,h);O.add.forEach(function(T){gn(o,T[0],T[1].primKey,T[1].indexes)}),O.change.forEach(function(T){if(T.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var E=o.objectStore(T.name);T.add.forEach(function(j){return xr(E,j)}),T.change.forEach(function(j){E.deleteIndex(j.name),xr(E,j)}),T.del.forEach(function(j){return E.deleteIndex(j)})});var K=d._cfg.contentUpgrade;if(K&&d._cfg.version>t){_r(e,o),r._memoizedTables={};var m=pe(h);O.del.forEach(function(T){m[T]=b[T]}),yn(e,[e.Transaction.prototype]),wr(e,[e.Transaction.prototype],_(m),m),r.schema=m;var x=et(K);x&&St();var C,R=F.follow(function(){if(C=K(r),C&&x){var T=ot.bind(null,null);C.then(T,T)}});return C&&typeof C.then=="function"?F.resolve(C):R.then(function(){return C})}}),i.push(function(b){var h=d._cfg.dbschema;_a(h,b),yn(e,[e.Transaction.prototype]),wr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}),i.push(function(b){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===d._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(h){return h!=="$meta"})):b.objectStore("$meta").put(d._cfg.version,"version"))})});function f(){return i.length?F.resolve(i.shift()(r.idbtrans)).then(f):F.resolve()}return f().then(function(){yo(c,o)})}function vn(e,t){var r={del:[],add:[],change:[]},o;for(o in e)t[o]||r.del.push(o);for(o in t){var i=e[o],s=t[o];if(!i)r.add.push([o,s]);else{var c={name:o,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)c.recreate=!0,r.change.push(c);else{var l=i.idxByName,f=s.idxByName,d=void 0;for(d in l)f[d]||c.del.push(d);for(d in f){var b=l[d],h=f[d];b?b.src!==h.src&&c.change.push(h):c.add.push(h)}(c.del.length>0||c.add.length>0||c.change.length>0)&&r.change.push(c)}}}return r}function gn(e,t,r,o){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(s){return xr(i,s)}),i}function yo(e,t){_(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(He&&console.debug("Dexie: Creating missing table",r),gn(t,r,e[r].primKey,e[r].indexes))})}function _a(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(r){return e[r]==null&&t.db.deleteObjectStore(r)})}function xr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function kr(e,t,r){var o={},i=ne(t.objectStoreNames,0);return i.forEach(function(s){for(var c=r.objectStore(s),l=c.keyPath,f=dn(ho(l),l||"",!0,!1,!!c.autoIncrement,l&&typeof l!="string",!0),d=[],b=0;b<c.indexNames.length;++b){var h=c.index(c.indexNames[b]);l=h.keyPath;var O=dn(h.name,l,!!h.unique,!!h.multiEntry,!1,l&&typeof l!="string",!1);d.push(O)}o[s]=hn(s,f,d)}),o}function wa(e,t,r){e.verno=t.version/10;var o=e._dbSchema=kr(e,t,r);e._storeNames=ne(t.objectStoreNames,0),wr(e,[e._allTables],_(o),o)}function xa(e,t){var r=kr(e,e.idbdb,t),o=vn(r,e._dbSchema);return!(o.add.length||o.change.some(function(i){return i.add.length||i.change.length}))}function Sr(e,t,r){for(var o=r.db.objectStoreNames,i=0;i<o.length;++i){var s=o[i],c=r.objectStore(s);e._hasGetAll="getAll"in c;for(var l=0;l<c.indexNames.length;++l){var f=c.indexNames[l],d=c.index(f).keyPath,b=typeof d=="string"?d:"["+ne(d).join("+")+"]";if(t[s]){var h=t[s].idxByName[b];h&&(h.name=f,delete t[s].idxByName[b],t[s].idxByName[f]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function vo(e){return e.split(",").map(function(t,r){t=t.trim();var o=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return dn(o,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),v(i),r===0)})}var ka=function(){function e(){}return e.prototype._parseStoresSpec=function(t,r){_(t).forEach(function(o){if(t[o]!==null){var i=vo(t[o]),s=i.shift();if(s.unique=!0,s.multi)throw new Y.Schema("Primary key cannot be multi-valued");i.forEach(function(c){if(c.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")}),r[o]=hn(o,s,i)}})},e.prototype.stores=function(t){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?w(this._cfg.storesSource,t):t;var o=r._versions,i={},s={};return o.forEach(function(c){w(i,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(i,s)}),r._dbSchema=s,yn(r,[r._allTables,r,r.Transaction.prototype]),wr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],_(s),s),r._storeNames=_(s),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Zr(this._cfg.contentUpgrade||me,t),this},e}();function Sa(e){return Ft(ka.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function bn(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Je(mr,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function _n(e){return e&&typeof e.databases=="function"}function Ca(e){var t=e.indexedDB,r=e.IDBKeyRange;return _n(t)?Promise.resolve(t.databases()).then(function(o){return o.map(function(i){return i.name}).filter(function(i){return i!==mr})}):bn(t,r).toCollection().primaryKeys()}function Pa(e,t){var r=e.indexedDB,o=e.IDBKeyRange;!_n(r)&&t!==mr&&bn(r,o).put({name:t}).catch(me)}function Oa(e,t){var r=e.indexedDB,o=e.IDBKeyRange;!_n(r)&&t!==mr&&bn(r,o).delete(t).catch(me)}function wn(e){return nt(function(){return G.letThrough=!0,e()})}function Na(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(r){var o=function(){return indexedDB.databases().finally(r)};t=setInterval(o,100),o()}).finally(function(){return clearInterval(t)})}var xn;function kn(e){return!("from"in e)}var Ee=function(e,t){if(this)w(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var r=new Ee;return e&&"d"in e&&w(r,e),r}};M(Ee.prototype,(xn={add:function(e){return Qt(this,e),this},addKey:function(e){return Zt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(r){return Zt(t,r,r)}),this},hasKey:function(e){var t=Cr(this).next(e).value;return t&&ce(t.from,e)<=0&&ce(t.to,e)>=0}},xn[Fe]=function(){return Cr(this)},xn));function Zt(e,t,r){var o=ce(t,r);if(!isNaN(o)){if(o>0)throw RangeError();if(kn(e))return w(e,{from:t,to:r,d:1});var i=e.l,s=e.r;if(ce(r,e.from)<0)return i?Zt(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},bo(e);if(ce(t,e.to)>0)return s?Zt(s,t,r):e.r={from:t,to:r,d:1,l:null,r:null},bo(e);ce(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),ce(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);var c=!e.r;i&&!e.l&&Qt(e,i),s&&c&&Qt(e,s)}}function Qt(e,t){function r(o,i){var s=i.from,c=i.to,l=i.l,f=i.r;Zt(o,s,c),l&&r(o,l),f&&r(o,f)}kn(t)||r(e,t)}function go(e,t){var r=Cr(t),o=r.next();if(o.done)return!1;for(var i=o.value,s=Cr(e),c=s.next(i.from),l=c.value;!o.done&&!c.done;){if(ce(l.from,i.to)<=0&&ce(l.to,i.from)>=0)return!0;ce(i.from,l.from)<0?i=(o=r.next(l.from)).value:l=(c=s.next(i.from)).value}return!1}function Cr(e){var t=kn(e)?null:{s:0,n:e};return{next:function(r){for(var o=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&ce(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||ce(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function bo(e){var t,r,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),i=o>1?"r":o<-1?"l":"";if(i){var s=i==="r"?"l":"r",c=p({},e),l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],c[i]=l[s],e[s]=c,c.d=_o(c)}e.d=_o(e)}function _o(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function Pr(e,t){return _(t).forEach(function(r){e[r]?Qt(e[r],t[r]):e[r]=de(t[r])}),e}function Sn(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&go(t[r],e[r])})}var vt={},Cn={},Pn=!1;function Or(e,t){Pr(Cn,e),Pn||(Pn=!0,setTimeout(function(){Pn=!1;var r=Cn;Cn={},On(r,!1)},0))}function On(e,t){t===void 0&&(t=!1);var r=new Set;if(e.all)for(var o=0,i=Object.values(vt);o<i.length;o++){var s=i[o];wo(s,e,r,t)}else for(var c in e){var l=/^idb\:\/\/(.*)\/(.*)\//.exec(c);if(l){var f=l[1],d=l[2],s=vt["idb://".concat(f,"/").concat(d)];s&&wo(s,e,r,t)}}r.forEach(function(b){return b()})}function wo(e,t,r,o){for(var i=[],s=0,c=Object.entries(e.queries.query);s<c.length;s++){for(var l=c[s],f=l[0],d=l[1],b=[],h=0,O=d;h<O.length;h++){var K=O[h];Sn(t,K.obsSet)?K.subscribers.forEach(function(R){return r.add(R)}):o&&b.push(K)}o&&i.push([f,b])}if(o)for(var m=0,x=i;m<x.length;m++){var C=x[m],f=C[0],b=C[1];e.queries.query[f]=b}}function Da(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ce(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,i=Math.round(e.verno*10),s=!1;function c(){if(t.openCanceller!==o)throw new Y.DatabaseClosed("db.open() was cancelled")}var l=t.dbReadyResolve,f=null,d=!1,b=function(){return new F(function(h,O){if(c(),!r)throw new Y.MissingAPI;var K=e.name,m=t.autoSchema||!i?r.open(K):r.open(K,i);if(!m)throw new Y.MissingAPI;m.onerror=Ge(O),m.onblocked=we(e._fireOnBlocked),m.onupgradeneeded=we(function(x){if(f=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Ut,f.abort(),m.result.close();var C=r.deleteDatabase(K);C.onsuccess=C.onerror=we(function(){O(new Y.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{f.onerror=Ge(O);var R=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;d=R<1,e.idbdb=m.result,s&&va(e,f),ya(e,R/10,f,O)}},O),m.onsuccess=we(function(){f=null;var x=e.idbdb=m.result,C=ne(x.objectStoreNames);if(C.length>0)try{var R=x.transaction(ua(C),"readonly");if(t.autoSchema)wa(e,x,R);else if(Sr(e,e._dbSchema,R),!xa(e,R)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),x.close(),i=x.version+1,s=!0,h(b());_r(e,R)}catch{}Ct.push(e),x.onversionchange=we(function(T){t.vcFired=!0,e.on("versionchange").fire(T)}),x.onclose=we(function(T){e.on("close").fire(T)}),d&&Pa(e._deps,K),h()},O)}).catch(function(h){switch(h?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(i>0)return i=0,b();break}return F.reject(h)})};return F.race([o,(typeof navigator>"u"?F.resolve():Na()).then(b)]).then(function(){return c(),t.onReadyBeingFired=[],F.resolve(wn(function(){return e.on.ready.fire(e.vip)})).then(function h(){if(t.onReadyBeingFired.length>0){var O=t.onReadyBeingFired.reduce(Zr,me);return t.onReadyBeingFired=[],F.resolve(wn(function(){return O(e.vip)})).then(h)}})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(h){t.dbOpenError=h;try{f&&f.abort()}catch{}return o===t.openCanceller&&e._close(),Ce(h)}).finally(function(){t.openComplete=!0,l()}).then(function(){if(d){var h={};e.tables.forEach(function(O){O.schema.indexes.forEach(function(K){K.name&&(h["idb://".concat(e.name,"/").concat(O.name,"/").concat(K.name)]=new Ee(-1/0,[[[]]]))}),h["idb://".concat(e.name,"/").concat(O.name,"/")]=h["idb://".concat(e.name,"/").concat(O.name,"/:dels")]=new Ee(-1/0,[[[]]])}),st(Wt).fire(h),On(h,!0)}return e})}function Nn(e){var t=function(c){return e.next(c)},r=function(c){return e.throw(c)},o=s(t),i=s(r);function s(c){return function(l){var f=c(l),d=f.value;return f.done?d:!d||typeof d.then!="function"?v(d)?Promise.all(d).then(o,i):o(d):d.then(o,i)}}return s(t)()}function Ta(e,t,r){var o=arguments.length;if(o<2)throw new Y.InvalidArgument("Too few arguments");for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];r=i.pop();var s=ye(i);return[e,s,r]}function xo(e,t,r,o,i){return F.resolve().then(function(){var s=G.transless||G,c=e._createTransaction(t,r,e._dbSchema,o);c.explicit=!0;var l={trans:c,transless:s};if(o)c.idbtrans=o.idbtrans;else try{c.create(),c.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(h){return h.name===Gr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return xo(e,t,r,null,i)})):Ce(h)}var f=et(i);f&&St();var d,b=F.follow(function(){if(d=i.call(c,c),d)if(f){var h=ot.bind(null,null);d.then(h,h)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=Nn(d))},l);return(d&&typeof d.then=="function"?F.resolve(d).then(function(h){return c.active?h:Ce(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):b.then(function(){return d})).then(function(h){return o&&c._resolve(),c._completion.then(function(){return h})}).catch(function(h){return c._reject(h),Ce(h)})})}function Nr(e,t,r){for(var o=v(e)?e.slice():[e],i=0;i<r;++i)o.push(t);return o}function Ea(e){return p(p({},e),{table:function(t){var r=e.table(t),o=r.schema,i={},s=[];function c(x,C,R){var T=Gt(x),E=i[T]=i[T]||[],j=x==null?0:typeof x=="string"?1:x.length,N=C>0,B=p(p({},R),{name:N?"".concat(T,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:N,keyTail:C,keyLength:j,extractKey:mn(x),unique:!N&&R.unique});if(E.push(B),B.isPrimaryKey||s.push(B),j>1){var L=j===2?x[0]:x.slice(0,j-1);c(L,C+1,R)}return E.sort(function(q,X){return q.keyTail-X.keyTail}),B}var l=c(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[l];for(var f=0,d=o.indexes;f<d.length;f++){var b=d[f];c(b.keyPath,0,b)}function h(x){var C=i[Gt(x)];return C&&C[0]}function O(x,C){return{type:x.type===1?2:x.type,lower:Nr(x.lower,x.lowerOpen?e.MAX_KEY:e.MIN_KEY,C),lowerOpen:!0,upper:Nr(x.upper,x.upperOpen?e.MIN_KEY:e.MAX_KEY,C),upperOpen:!0}}function K(x){var C=x.query.index;return C.isVirtual?p(p({},x),{query:{index:C.lowLevelIndex,range:O(x.query.range,C.keyTail)}}):x}var m=p(p({},r),{schema:p(p({},o),{primaryKey:l,indexes:s,getIndexByKeyPath:h}),count:function(x){return r.count(K(x))},query:function(x){return r.query(K(x))},openCursor:function(x){var C=x.query.index,R=C.keyTail,T=C.isVirtual,E=C.keyLength;if(!T)return r.openCursor(x);function j(N){function B(q){q!=null?N.continue(Nr(q,x.reverse?e.MAX_KEY:e.MIN_KEY,R)):x.unique?N.continue(N.key.slice(0,E).concat(x.reverse?e.MIN_KEY:e.MAX_KEY,R)):N.continue()}var L=Object.create(N,{continue:{value:B},continuePrimaryKey:{value:function(q,X){N.continuePrimaryKey(Nr(q,e.MAX_KEY,R),X)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var q=N.key;return E===1?q[0]:q.slice(0,E)}},value:{get:function(){return N.value}}});return L}return r.openCursor(K(x)).then(function(N){return N&&j(N)})}});return m}})}var Ia={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ea};function Dn(e,t,r,o){return r=r||{},o=o||"",_(e).forEach(function(i){if(!I(t,i))r[o+i]=void 0;else{var s=e[i],c=t[i];if(typeof s=="object"&&typeof c=="object"&&s&&c){var l=qe(s),f=qe(c);l!==f?r[o+i]=t[i]:l==="Object"?Dn(s,c,r,o+i+"."):s!==c&&(r[o+i]=t[i])}else s!==c&&(r[o+i]=t[i])}}),_(t).forEach(function(i){I(e,i)||(r[o+i]=t[i])}),r}function Tn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ra={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return p(p({},e),{table:function(t){var r=e.table(t),o=r.schema.primaryKey,i=p(p({},r),{mutate:function(s){var c=G.trans,l=c.table(t).hook,f=l.deleting,d=l.creating,b=l.updating;switch(s.type){case"add":if(d.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"put":if(d.fire===me&&b.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"delete":if(f.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"deleteRange":if(f.fire===me)break;return c._promise("readwrite",function(){return O(s)},!0)}return r.mutate(s);function h(m){var x=G.trans,C=m.keys||Tn(o,m);if(!C)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?p(p({},m),{keys:C}):p({},m),m.type!=="delete"&&(m.values=k([],m.values,!0)),m.keys&&(m.keys=k([],m.keys,!0)),Aa(r,m,C).then(function(R){var T=C.map(function(E,j){var N=R[j],B={onerror:null,onsuccess:null};if(m.type==="delete")f.fire.call(B,E,N,x);else if(m.type==="add"||N===void 0){var L=d.fire.call(B,E,m.values[j],x);E==null&&L!=null&&(E=L,m.keys[j]=E,o.outbound||ee(m.values[j],o.keyPath,E))}else{var q=Dn(N,m.values[j]),X=b.fire.call(B,q,E,N,x);if(X){var re=m.values[j];Object.keys(X).forEach(function(U){I(re,U)?re[U]=X[U]:ee(re,U,X[U])})}}return B});return r.mutate(m).then(function(E){for(var j=E.failures,N=E.results,B=E.numFailures,L=E.lastResult,q=0;q<C.length;++q){var X=N?N[q]:C[q],re=T[q];X==null?re.onerror&&re.onerror(j[q]):re.onsuccess&&re.onsuccess(m.type==="put"&&R[q]?m.values[q]:X)}return{failures:j,results:N,numFailures:B,lastResult:L}}).catch(function(E){return T.forEach(function(j){return j.onerror&&j.onerror(E)}),Promise.reject(E)})})}function O(m){return K(m.trans,m.range,1e4)}function K(m,x,C){return r.query({trans:m,values:!1,query:{index:o,range:x},limit:C}).then(function(R){var T=R.result;return h({type:"delete",keys:T,trans:m}).then(function(E){return E.numFailures>0?Promise.reject(E.failures[0]):T.length<C?{failures:[],numFailures:0,lastResult:void 0}:K(m,p(p({},x),{lower:T[T.length-1],lowerOpen:!0}),C)})})}}});return i}})}};function Aa(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function ko(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var o=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)ce(t.keys[i],e[s])===0&&(o.push(r?be(t.values[i]):t.values[i]),++s);return o.length===e.length?o:null}catch{return null}}var ja={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return p(p({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var i=ko(o.keys,o.trans._cache,o.cache==="clone");return i?F.resolve(i):r.getMany(o).then(function(s){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?be(s):s},s})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function So(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Co(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ma={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new Ee(e.MIN_KEY,e.MAX_KEY);return p(p({},e),{transaction:function(o,i,s){if(G.subscr&&i!=="readonly")throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return e.transaction(o,i,s)},table:function(o){var i=e.table(o),s=i.schema,c=s.primaryKey,l=s.indexes,f=c.extractKey,d=c.outbound,b=c.autoIncrement&&l.filter(function(m){return m.compound&&m.keyPath.includes(c.keyPath)}),h=p(p({},i),{mutate:function(m){var x,C,R=m.trans,T=m.mutatedParts||(m.mutatedParts={}),E=function(J){var ue="idb://".concat(t,"/").concat(o,"/").concat(J);return T[ue]||(T[ue]=new Ee)},j=E(""),N=E(":dels"),B=m.type,L=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[Tn(c,m).filter(function(J){return J}),m.values]:[],q=L[0],X=L[1],re=m.trans._cache;if(v(q)){j.addKeys(q);var U=B==="delete"||q.length===X.length?ko(q,re):null;U||N.addKeys(q),(U||X)&&Ka(E,s,U,X)}else if(q){var te={from:(x=q.lower)!==null&&x!==void 0?x:e.MIN_KEY,to:(C=q.upper)!==null&&C!==void 0?C:e.MAX_KEY};N.add(te),j.add(te)}else j.add(r),N.add(r),s.indexes.forEach(function(J){return E(J.name).add(r)});return i.mutate(m).then(function(J){return q&&(m.type==="add"||m.type==="put")&&(j.addKeys(J.results),b&&b.forEach(function(ue){for(var Q=m.values.map(function(Me){return ue.extractKey(Me)}),ke=ue.keyPath.findIndex(function(Me){return Me===c.keyPath}),Ie=0,Ze=J.results.length;Ie<Ze;++Ie)Q[Ie][ke]=J.results[Ie];E(ue.name).addKeys(Q)})),R.mutatedParts=Pr(R.mutatedParts||{},T),J})}}),O=function(m){var x,C,R=m.query,T=R.index,E=R.range;return[T,new Ee((x=E.lower)!==null&&x!==void 0?x:e.MIN_KEY,(C=E.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},K={get:function(m){return[c,new Ee(m.key)]},getMany:function(m){return[c,new Ee().addKeys(m.keys)]},count:O,query:O,openCursor:O};return _(K).forEach(function(m){h[m]=function(x){var C=G.subscr,R=!!C,T=So(G,i)&&Co(m,x),E=T?x.obsSet={}:C;if(R){var j=function(U){var te="idb://".concat(t,"/").concat(o,"/").concat(U);return E[te]||(E[te]=new Ee)},N=j(""),B=j(":dels"),L=K[m](x),q=L[0],X=L[1];if(m==="query"&&q.isPrimaryKey&&!x.values?B.add(X):j(q.name||"").add(X),!q.isPrimaryKey)if(m==="count")B.add(r);else{var re=m==="query"&&d&&x.values&&i.query(p(p({},x),{values:!1}));return i[m].apply(this,arguments).then(function(U){if(m==="query"){if(d&&x.values)return re.then(function(Q){var ke=Q.result;return N.addKeys(ke),U});var te=x.values?U.result.map(f):U.result;x.values?N.addKeys(te):B.addKeys(te)}else if(m==="openCursor"){var J=U,ue=x.values;return J&&Object.create(J,{key:{get:function(){return B.addKey(J.primaryKey),J.key}},primaryKey:{get:function(){var Q=J.primaryKey;return B.addKey(Q),Q}},value:{get:function(){return ue&&N.addKey(J.primaryKey),J.value}}})}return U})}}return i[m].apply(this,arguments)}}),h}})}};function Ka(e,t,r,o){function i(s){var c=e(s.name||"");function l(d){return d!=null?s.extractKey(d):null}var f=function(d){return s.multiEntry&&v(d)?d.forEach(function(b){return c.addKey(b)}):c.addKey(d)};(r||o).forEach(function(d,b){var h=r&&l(r[b]),O=o&&l(o[b]);ce(h,O)!==0&&(h!=null&&f(h),O!=null&&f(O))})}t.indexes.forEach(i)}function Po(e,t,r){if(r.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===o)return null;var i=p({},t);return v(i.keys)&&(i.keys=i.keys.filter(function(s,c){return!(c in r.failures)})),"values"in i&&v(i.values)&&(i.values=i.values.filter(function(s,c){return!(c in r.failures)})),i}function Ba(e,t){return t.lower===void 0?!0:t.lowerOpen?ce(e,t.lower)>0:ce(e,t.lower)>=0}function za(e,t){return t.upper===void 0?!0:t.upperOpen?ce(e,t.upper)<0:ce(e,t.upper)<=0}function En(e,t){return Ba(e,t)&&za(e,t)}function Oo(e,t,r,o,i,s){if(!r||r.length===0)return e;var c=t.query.index,l=c.multiEntry,f=t.query.range,d=o.schema.primaryKey,b=d.extractKey,h=c.extractKey,O=(c.lowLevelIndex||c).extractKey,K=r.reduce(function(m,x){var C=m,R=[];if(x.type==="add"||x.type==="put")for(var T=new Ee,E=x.values.length-1;E>=0;--E){var j=x.values[E],N=b(j);if(!T.hasKey(N)){var B=h(j);(l&&v(B)?B.some(function(U){return En(U,f)}):En(B,f))&&(T.addKey(N),R.push(j))}}switch(x.type){case"add":{var L=new Ee().addKeys(t.values?m.map(function(U){return b(U)}):m);C=m.concat(t.values?R.filter(function(U){var te=b(U);return L.hasKey(te)?!1:(L.addKey(te),!0)}):R.map(function(U){return b(U)}).filter(function(U){return L.hasKey(U)?!1:(L.addKey(U),!0)}));break}case"put":{var q=new Ee().addKeys(x.values.map(function(U){return b(U)}));C=m.filter(function(U){return!q.hasKey(t.values?b(U):U)}).concat(t.values?R:R.map(function(U){return b(U)}));break}case"delete":var X=new Ee().addKeys(x.keys);C=m.filter(function(U){return!X.hasKey(t.values?b(U):U)});break;case"deleteRange":var re=x.range;C=m.filter(function(U){return!En(b(U),re)});break}return C},e);return K===e?e:(K.sort(function(m,x){return ce(O(m),O(x))||ce(b(m),b(x))}),t.limit&&t.limit<1/0&&(K.length>t.limit?K.length=t.limit:e.length===t.limit&&K.length<t.limit&&(i.dirty=!0)),s?Object.freeze(K):K)}function No(e,t){return ce(e.lower,t.lower)===0&&ce(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function $a(e,t,r,o){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=ce(e,t);if(i===0){if(r&&o)return 0;if(r)return 1;if(o)return-1}return i}function qa(e,t,r,o){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=ce(e,t);if(i===0){if(r&&o)return 0;if(r)return-1;if(o)return 1}return i}function Fa(e,t){return $a(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&qa(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function La(e,t,r,o){var i=vt["idb://".concat(e,"/").concat(t)];if(!i)return[];var s=i.queries[r];if(!s)return[null,!1,i,null];var c=o.query?o.query.index.name:null,l=s[c||""];if(!l)return[null,!1,i,null];switch(r){case"query":var f=l.find(function(h){return h.req.limit===o.limit&&h.req.values===o.values&&No(h.req.query.range,o.query.range)});if(f)return[f,!0,i,l];var d=l.find(function(h){var O="limit"in h.req?h.req.limit:1/0;return O>=o.limit&&(o.values?h.req.values:!0)&&Fa(h.req.query.range,o.query.range)});return[d,!1,i,l];case"count":var b=l.find(function(h){return No(h.req.query.range,o.query.range)});return[b,!!b,i,l]}}function Ua(e,t,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){e.subscribers.delete(r),e.subscribers.size===0&&Wa(e,t)})}function Wa(e,t){setTimeout(function(){e.subscribers.size===0&&xe(t,e)},3e3)}var Ha={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=p(p({},e),{transaction:function(o,i,s){var c=e.transaction(o,i,s);if(i==="readwrite"){var l=new AbortController,f=l.signal,d=function(b){return function(){if(l.abort(),i==="readwrite"){for(var h=new Set,O=0,K=o;O<K.length;O++){var m=K[O],x=vt["idb://".concat(t,"/").concat(m)];if(x){var C=e.table(m),R=x.optimisticOps.filter(function(ue){return ue.trans===c});if(c._explicit&&b&&c.mutatedParts)for(var T=0,E=Object.values(x.queries.query);T<E.length;T++)for(var j=E[T],N=0,B=j.slice();N<B.length;N++){var L=B[N];Sn(L.obsSet,c.mutatedParts)&&(xe(j,L),L.subscribers.forEach(function(ue){return h.add(ue)}))}else if(R.length>0){x.optimisticOps=x.optimisticOps.filter(function(ue){return ue.trans!==c});for(var q=0,X=Object.values(x.queries.query);q<X.length;q++)for(var j=X[q],re=0,U=j.slice();re<U.length;re++){var L=U[re];if(L.res!=null&&c.mutatedParts)if(b&&!L.dirty){var te=Object.isFrozen(L.res),J=Oo(L.res,L.req,R,C,L,te);L.dirty?(xe(j,L),L.subscribers.forEach(function(ke){return h.add(ke)})):J!==L.res&&(L.res=J,L.promise=F.resolve({result:J}))}else L.dirty&&xe(j,L),L.subscribers.forEach(function(ke){return h.add(ke)})}}}}h.forEach(function(ue){return ue()})}}};c.addEventListener("abort",d(!1),{signal:f}),c.addEventListener("error",d(!1),{signal:f}),c.addEventListener("complete",d(!0),{signal:f})}return c},table:function(o){var i=e.table(o),s=i.schema.primaryKey,c=p(p({},i),{mutate:function(l){var f=G.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return i.mutate(l);var d=vt["idb://".concat(t,"/").concat(o)];if(!d)return i.mutate(l);var b=i.mutate(l);return(l.type==="add"||l.type==="put")&&(l.values.length>=50||Tn(s,l).some(function(h){return h==null}))?b.then(function(h){var O=p(p({},l),{values:l.values.map(function(m,x){var C;if(h.failures[x])return m;var R=!((C=s.keyPath)===null||C===void 0)&&C.includes(".")?be(m):p({},m);return ee(R,s.keyPath,h.results[x]),R})}),K=Po(d,O,h);d.optimisticOps.push(K),queueMicrotask(function(){return l.mutatedParts&&Or(l.mutatedParts)})}):(d.optimisticOps.push(l),l.mutatedParts&&Or(l.mutatedParts),b.then(function(h){if(h.numFailures>0){xe(d.optimisticOps,l);var O=Po(d,l,h);O&&d.optimisticOps.push(O),l.mutatedParts&&Or(l.mutatedParts)}}),b.catch(function(){xe(d.optimisticOps,l),l.mutatedParts&&Or(l.mutatedParts)})),b},query:function(l){var f;if(!So(G,i)||!Co("query",l))return i.query(l);var d=((f=G.trans)===null||f===void 0?void 0:f.db._options.cache)==="immutable",b=G,h=b.requery,O=b.signal,K=La(t,o,"query",l),m=K[0],x=K[1],C=K[2],R=K[3];if(m&&x)m.obsSet=l.obsSet;else{var T=i.query(l).then(function(E){var j=E.result;if(m&&(m.res=j),d){for(var N=0,B=j.length;N<B;++N)Object.freeze(j[N]);Object.freeze(j)}else E.result=be(j);return E}).catch(function(E){return R&&m&&xe(R,m),Promise.reject(E)});m={obsSet:l.obsSet,promise:T,subscribers:new Set,type:"query",req:l,dirty:!1},R?R.push(m):(R=[m],C||(C=vt["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),C.queries.query[l.query.index.name||""]=R)}return Ua(m,R,h,O),m.promise.then(function(E){return{result:Oo(E.result,l,C?.optimisticOps,i,m,d)}})}});return c}});return r}};function Dr(e,t){return new Proxy(e,{get:function(r,o,i){return o==="db"?t:Reflect.get(r,o,i)}})}var Je=function(){function e(t,r){var o=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=r=p({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};c.dbReadyPromise=new F(function(f){c.dbReadyResolve=f}),c.openCanceller=new F(function(f,d){c.cancelOpen=d}),this._state=c,this.name=t,this.on=qt(this,"populate","blocked","versionchange","close",{ready:[Zr,me]}),this.on.ready.subscribe=oe(this.on.ready.subscribe,function(f){return function(d,b){e.vip(function(){var h=o._state;if(h.openComplete)h.dbOpenError||F.resolve().then(d),b&&f(d);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(d),b&&f(d);else{f(d);var O=o;b||f(function K(){O.on.ready.unsubscribe(d),O.on.ready.unsubscribe(K)})}})}}),this.Collection=ea(this),this.Table=Xi(this),this.Transaction=ca(this),this.Version=Sa(this),this.WhereClause=aa(this),this.on("versionchange",function(f){f.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(f){!f.newVersion||f.newVersion<f.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(f.oldVersion/10))}),this._maxKey=Ht(r.IDBKeyRange),this._createTransaction=function(f,d,b,h){return new o.Transaction(f,d,b,o._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(f){o.on("blocked").fire(f),Ct.filter(function(d){return d.name===o.name&&d!==o&&!d._state.vcFired}).map(function(d){return d.on("versionchange").fire(f)})},this.use(ja),this.use(Ha),this.use(Ma),this.use(Ia),this.use(Ra);var l=new Proxy(this,{get:function(f,d,b){if(d==="_vip")return!0;if(d==="table")return function(O){return Dr(o.table(O),l)};var h=Reflect.get(f,d,b);return h instanceof co?Dr(h,l):d==="tables"?h.map(function(O){return Dr(O,l)}):d==="_createTransaction"?function(){var O=h.apply(this,arguments);return Dr(O,l)}:h}});this.vip=l,s.forEach(function(f){return f(o)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Y.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,o=r.filter(function(i){return i._cfg.version===t})[0];return o||(o=new this.Version(t),r.push(o),r.sort(ma),o.stores({}),this._state.autoSchema=!1,o)},e.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?t():new F(function(o,i){if(r._state.openComplete)return i(new Y.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){i(new Y.DatabaseClosed);return}r.open().catch(me)}r._state.dbReadyPromise.then(o,i)}).then(t)},e.prototype.use=function(t){var r=t.stack,o=t.create,i=t.level,s=t.name;s&&this.unuse({stack:r,name:s});var c=this._middlewares[r]||(this._middlewares[r]=[]);return c.push({stack:r,create:o,level:i??10,name:s}),c.sort(function(l,f){return l.level-f.level}),this},e.prototype.unuse=function(t){var r=t.stack,o=t.name,i=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(s){return i?s.create!==i:o?s.name!==o:!1})),this},e.prototype.open=function(){var t=this;return ht(rt,function(){return Da(t)})},e.prototype._close=function(){var t=this._state,r=Ct.indexOf(this);if(r>=0&&Ct.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new F(function(o){t.dbReadyResolve=o}),t.openCanceller=new F(function(o,i){t.cancelOpen=i}))},e.prototype.close=function(t){var r=t===void 0?{disableAutoOpen:!0}:t,o=r.disableAutoOpen,i=this._state;o?(i.isBeingOpened&&i.cancelOpen(new Y.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new Y.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new F(function(s,c){var l=function(){r.close(t);var f=r._deps.indexedDB.deleteDatabase(r.name);f.onsuccess=we(function(){Oa(r._deps,r.name),s()}),f.onerror=Ge(c),f.onblocked=r._fireOnBlocked};if(o)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(l):l()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return _(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Ta.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,r,o){var i=this,s=G.trans;(!s||s.db!==this||t.indexOf("!")!==-1)&&(s=null);var c=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var l,f;try{if(f=r.map(function(b){var h=b instanceof i.Table?b.name:b;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),t=="r"||t===sn)l=sn;else if(t=="rw"||t==cn)l=cn;else throw new Y.InvalidArgument("Invalid transaction mode: "+t);if(s){if(s.mode===sn&&l===cn)if(c)s=null;else throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&f.forEach(function(b){if(s&&s.storeNames.indexOf(b)===-1)if(c)s=null;else throw new Y.SubTransaction("Table "+b+" not included in parent transaction.")}),c&&s&&!s.active&&(s=null)}}catch(b){return s?s._promise(null,function(h,O){O(b)}):Ce(b)}var d=xo.bind(null,this,l,f,s,o);return s?s._promise(l,d,"lock"):G.trans?ht(G.transless,function(){return i._whenReady(d)}):this._whenReady(d)},e.prototype.table=function(t){if(!I(this._allTables,t))throw new Y.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),Ga=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Za=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,r,o){return this._subscribe(!t||typeof t=="function"?{next:t,error:r,complete:o}:t)},e.prototype[Ga]=function(){return this},e}(),Tr;try{Tr={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{Tr={indexedDB:null,IDBKeyRange:null}}function Do(e){var t=!1,r,o=new Za(function(i){var s=et(e);function c(R){var T=xt();try{s&&St();var E=nt(e,R);return s&&(E=E.finally(ot)),E}finally{T&&kt()}}var l=!1,f,d={},b={},h={get closed(){return l},unsubscribe:function(){l||(l=!0,f&&f.abort(),O&&st.storagemutated.unsubscribe(x))}};i.start&&i.start(h);var O=!1,K=function(){return nn(C)};function m(){return Sn(b,d)}var x=function(R){Pr(d,R),m()&&K()},C=function(){if(!(l||!Tr.indexedDB)){d={};var R={};f&&f.abort(),f=new AbortController;var T={subscr:R,signal:f.signal,requery:K,querier:e,trans:null},E=c(T);Promise.resolve(E).then(function(j){t=!0,r=j,!(l||T.signal.aborted)&&(d={},b=R,!ge(b)&&!O&&(st(Wt,x),O=!0),nn(function(){return!l&&i.next&&i.next(j)}))},function(j){t=!1,["DatabaseClosedError","AbortError"].includes(j?.name)||l||nn(function(){l||i.error&&i.error(j)})})}};return setTimeout(K,0),h});return o.hasValue=function(){return t},o.getValue=function(){return r},o}var gt=Je;M(gt,p(p({},ar),{delete:function(e){var t=new gt(e,{addons:[]});return t.delete()},exists:function(e){return new gt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ca(gt.dependencies).then(e)}catch{return Ce(new Y.MissingAPI)}},defineClass:function(){function e(t){w(this,t)}return e},ignoreTransaction:function(e){return G.trans?ht(G.transless,e):e()},vip:wn,async:function(e){return function(){try{var t=Nn(e.apply(this,arguments));return!t||typeof t.then!="function"?F.resolve(t):t}catch(r){return Ce(r)}}},spawn:function(e,t,r){try{var o=Nn(e.apply(r,t||[]));return!o||typeof o.then!="function"?F.resolve(o):o}catch(i){return Ce(i)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(e,t){var r=F.resolve(typeof e=="function"?gt.ignoreTransaction(e):e).timeout(t||6e4);return G.trans?G.trans.waitFor(r):r},Promise:F,debug:{get:function(){return He},set:function(e){Gn(e)}},derive:$,extend:w,props:M,override:oe,Events:qt,on:st,liveQuery:Do,extendObservabilitySet:Pr,getByKeyPath:ae,setByKeyPath:ee,delByKeyPath:he,shallowClone:pe,deepClone:be,getObjectDiff:Dn,cmp:ce,asap:fe,minKey:an,addons:[],connections:Ct,errnames:Gr,dependencies:Tr,cache:vt,semVer:ro,version:ro.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,r*2)})})),gt.maxKey=Ht(gt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(st(Wt,function(e){if(!ct){var t;t=new CustomEvent(pn,{detail:e}),ct=!0,dispatchEvent(t),ct=!1}}),addEventListener(pn,function(e){var t=e.detail;ct||In(t)}));function In(e){var t=ct;try{ct=!0,st.storagemutated.fire(e),On(e,!0)}finally{ct=t}}var ct=!1,Nt,Rn=function(){};typeof BroadcastChannel<"u"&&(Rn=function(){Nt=new BroadcastChannel(pn),Nt.onmessage=function(e){return e.data&&In(e.data)}},Rn(),typeof Nt.unref=="function"&&Nt.unref(),st(Wt,function(e){ct||Nt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Je.disableBfCache&&e.persisted){He&&console.debug("Dexie: handling persisted pagehide"),Nt?.close();for(var t=0,r=Ct;t<r.length;t++){var o=r[t];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!Je.disableBfCache&&e.persisted&&(He&&console.debug("Dexie: handling persisted pageshow"),Rn(),In({all:new Ee(-1/0,[[]])}))}));function Qa(e){return new Lt({add:e})}function Ya(e){return new Lt({remove:e})}function Xa(e,t){return new Lt({replacePrefix:[e,t]})}F.rejectionMapper=Ei,Gn(He);var Ja=Object.freeze({__proto__:null,Dexie:Je,liveQuery:Do,Entity:io,cmp:ce,PropModification:Lt,replacePrefix:Xa,add:Qa,remove:Ya,default:Je,RangeSet:Ee,mergeRanges:Qt,rangesOverlap:go});return p(Je,Ja,{default:Je}),Je})}),Fn=yc(vc(),1),Fo=Symbol.for("Dexie"),zr=globalThis[Fo]||(globalThis[Fo]=Fn.default);if(Fn.default.semVer!==zr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fn.default.semVer} and ${zr.semVer}`);var{liveQuery:vu,mergeRanges:gu,rangesOverlap:bu,RangeSet:_u,cmp:wu,Entity:xu,PropModification:ku,replacePrefix:Su,add:Cu,remove:Pu}=zr,Ln=zr;Ae();var gc=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function Uo(){return(await gc.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var bc=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Wo(u){return{items:(await bc.getContents(u,{offset:0,limit:-1})).items}}async function Ho(u){let n=new Map,a=Array.from(u).map(async g=>{let k=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:g,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(k)for(let y of k){let _=y?.track?.uri;_&&n.set(_,y.track)}});return await Promise.all(a),n}async function Go(u){let n=new Map,a=new Map;for(let k of u)if(k){let y=Spicetify.URI.fromString(k).id;y&&a.set(k,y)}let g=50,p=Array.from(a.values()).reduce((k,y,_)=>{let v=Math.floor(_/g);return k[v]=k[v]||[],k[v].push(y),k},[]).map(async k=>{let y=`https://api.spotify.com/v1/tracks?ids=${k.join(",")}`,_=await Spicetify.CosmosAsync.get(y);if(_?.tracks)for(let v of _.tracks){let w=v?.uri;w&&n.set(w,v)}});return await Promise.all(p),n}Ae();var Zo=webpackChunkclient_web.push([[Symbol()],{},u=>u]),_c=Object.entries(Zo.m),wc=_c.filter(([u,n])=>typeof n=="function"&&n.toString().includes("main-confirmDialog-container")),xc=wc.flatMap(([u])=>Object.values(Zo(u)))[0];Spicetify.ReactComponent.ConfirmDialog=xc;function $r({titleText:u,descriptionText:n,cancelText:a="Cancel",confirmText:g="Confirm",onConfirm:p,onClose:k,onOpen:y,onOutside:_,allowHTML:v,confirmLabel:w,shouldCloseOnEsc:P,shouldCloseOnOverlayClick:S,shouldFocusAfterRender:I,width:M}){let z=document.createElement("div");document.body.appendChild(z);let D=Br(z),$=()=>{let[H,W]=Oe(!0),Z=ze(null);Be(()=>{y?.()},[y]),Be(()=>{if(H)return;let oe=()=>{D.unmount(),z.remove()},ie=Z.current;if(ie)return ie.addEventListener("animationend",oe,{once:!0}),()=>{ie.removeEventListener("animationend",oe)};oe()},[H]);let ne=oe=>()=>{oe?.(),W(!1)};return A(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:v,cancelText:a,confirmLabel:w,confirmText:g,descriptionText:n,isOpen:H,onClose:ne(k),onConfirm:ne(p),onOutside:ne(_),ref:Z,shouldCloseOnEsc:P,shouldCloseOnOverlayClick:S,shouldFocusAfterRender:I,titleText:u,width:M})};D.render(A($,{}))}var Xo=Ue($e());Ae();var Qo=new CSSStyleSheet;Qo.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Yo=Qo;document.adoptedStyleSheets.push(Yo);var qr=ve(u=>{let n=(0,Xo.c)(43),{value:a,options:g,onChange:p,disabled:k}=u,y=Mn(),_=ze(null),v=`--dropdown-anchor-${y.replace(/:/g,"id")}`,w,P,S,I,M,z,D,$,H;if(n[0]!==v||n[1]!==k||n[2]!==p||n[3]!==g||n[4]!==y||n[5]!==a){let ne=se=>{p?.(se.value),_.current?.hidePopover()},oe;n[15]!==g||n[16]!==a?(oe=g.find(se=>se.value===a)?.label||"Select...",n[15]=g,n[16]=a,n[17]=oe):oe=n[17];let ie=oe;D="dropdown",$=k;let fe;n[18]!==v?(fe={anchorName:v},n[18]=v,n[19]=fe):fe=n[19];let le;n[20]!==ie?(le=A("div",{className:"dropdown__text",children:ie}),n[20]=ie,n[21]=le):le=n[21];let ae;n[22]===Symbol.for("react.memo_cache_sentinel")?(ae=A("div",{className:"dropdown__arrow",children:A(Re.React.dropdown,{size:12})}),n[22]=ae):ae=n[22],n[23]!==y||n[24]!==fe||n[25]!==le?(H=V("button",{className:"dropdown__button",popoverTarget:y,popoverTargetAction:"toggle",style:fe,children:[le,ae]}),n[23]=y,n[24]=fe,n[25]=le,n[26]=H):H=n[26],w="dropdown__menu",P=y,S="auto",I=_;let ee=`calc(anchor(${v} bottom) + 4px)`,he=`anchor(${v} left)`,pe=`anchor-size(${v} width)`;n[27]!==ee||n[28]!==he||n[29]!==pe?(M={top:ee,left:he,width:pe},n[27]=ee,n[28]=he,n[29]=pe,n[30]=M):M=n[30],z=g.map(se=>A("div",{className:`dropdown__option${a===se.value?" dropdown__option--selected":""}`,onClick:()=>ne(se),onKeyDown:ye=>ye.key==="Enter"&&ne(se),role:"option",tabIndex:0,children:se.label},se.value)),n[0]=v,n[1]=k,n[2]=p,n[3]=g,n[4]=y,n[5]=a,n[6]=w,n[7]=P,n[8]=S,n[9]=I,n[10]=M,n[11]=z,n[12]=D,n[13]=$,n[14]=H}else w=n[6],P=n[7],S=n[8],I=n[9],M=n[10],z=n[11],D=n[12],$=n[13],H=n[14];let W;n[31]!==w||n[32]!==P||n[33]!==S||n[34]!==I||n[35]!==M||n[36]!==z?(W=A("div",{className:w,id:P,popover:S,ref:I,style:M,children:z}),n[31]=w,n[32]=P,n[33]=S,n[34]=I,n[35]=M,n[36]=z,n[37]=W):W=n[37];let Z;return n[38]!==W||n[39]!==D||n[40]!==$||n[41]!==H?(Z=V("div",{className:D,disabled:$,children:[H,W]}),n[38]=W,n[39]=D,n[40]=$,n[41]=H,n[42]=Z):Z=n[42],Z});var ei=Ue($e());Ae();var Jo=new CSSStyleSheet;Jo.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Vo=Jo;document.adoptedStyleSheets.push(Vo);var Fr=ve(u=>{let n=(0,ei.c)(28),{value:a,min:g,max:p,step:k,defaultValue:y,onChange:_,onRelease:v,disabled:w}=u,P=g===void 0?0:g,S=p===void 0?100:p,I=k===void 0?1:k,M=ze(null),z=ze(!1),D=a!==void 0?a:y,$=S>P&&D!==void 0?(D-P)/(S-P)*100:0,H;n[0]!==w||n[1]!==S||n[2]!==P||n[3]!==_||n[4]!==I?(H=Se=>{if(!M.current||w)return;let de=M.current.getBoundingClientRect(),ge=Se.clientX,be=Math.max(0,Math.min(ge-de.left,de.width))/de.width*(S-P)+P;be=Math.round(be/I)*I,be=Math.max(P,Math.min(be,S)),_(be)},n[0]=w,n[1]=S,n[2]=P,n[3]=_,n[4]=I,n[5]=H):H=n[5];let W=H,Z;n[6]!==w||n[7]!==W?(Z=Se=>{w||!M.current||(z.current=!0,M.current.setPointerCapture(Se.pointerId),W(Se.nativeEvent))},n[6]=w,n[7]=W,n[8]=Z):Z=n[8];let ne=Z,oe;n[9]!==W?(oe=Se=>{z.current&&W(Se.nativeEvent)},n[9]=W,n[10]=oe):oe=n[10];let ie=oe,fe;n[11]!==v?(fe=Se=>{!z.current||!M.current||(z.current=!1,M.current.releasePointerCapture(Se.pointerId),v?.())},n[11]=v,n[12]=fe):fe=n[12];let le=fe,ae=`${$}%`,ee;n[13]!==ae?(ee=A("div",{className:"slider__fill",style:{width:ae}}),n[13]=ae,n[14]=ee):ee=n[14];let he=`${$}%`,pe;n[15]!==he?(pe=A("div",{className:"slider__thumb",style:{left:he}}),n[15]=he,n[16]=pe):pe=n[16];let se;n[17]!==pe||n[18]!==ee?(se=V("div",{className:"slider__track",children:[ee,pe]}),n[17]=pe,n[18]=ee,n[19]=se):se=n[19];let ye;n[20]!==ne||n[21]!==ie||n[22]!==le||n[23]!==se?(ye=A("div",{className:"slider-container",onPointerCancel:le,onPointerDown:ne,onPointerMove:ie,onPointerUp:le,ref:M,children:se}),n[20]=ne,n[21]=ie,n[22]=le,n[23]=se,n[24]=ye):ye=n[24];let De;return n[25]!==w||n[26]!==ye?(De=A("div",{className:"slider",disabled:w,children:ye}),n[25]=w,n[26]=ye,n[27]=De):De=n[27],De});var ti=()=>{let u=globalThis.webpackChunkclient_web.push([[Symbol()],{},g=>g]),n=/"data-encore-id":(?:\w+\.)+([A-Z]\w*)\b/,a={};for(let[g,p]of Object.entries(u.m)){if(typeof p!="function")continue;let k=u(g);if(!(!k||typeof k!="object"))for(let y of Object.values(k)){let _=typeof y=="function"?y:y?.render;if(!_)continue;let v=_.toString().match(n);v?.[1]&&!a[v[1]]&&(a[v[1]]=y)}}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(a).length} components.`),globalThis.UI=a};Ae();var Lr=0,tr=null,kc=()=>{tr||(tr=setInterval(()=>{let u=Spicetify.Platform.PlayerAPI._state;Spicetify.Platform.PlayerAPI._events.emit("progress",u)},100))},Sc=()=>{tr&&(clearInterval(tr),tr=null)},ri=(u,n)=>{let[a,g]=Oe(Spicetify.Platform.PlayerAPI._state),[p,k]=Oe(0),[y,_]=Oe(n),v=ze(!1),w=ze(0),P=Dt((D,$=!1)=>{if(g(D),D.item?.uri===u){if(!$&&w.current!==0&&D.positionAsOfTimestamp<500&&(Spicetify.Platform.PlayerAPI.seekTo(w.current),w.current=0),!v.current){let W=$&&!D.isPaused?D.positionAsOfTimestamp+(Date.now()-D.timestamp):D.positionAsOfTimestamp;k(Math.min(W,D.duration))}_(D.duration)}else k(0),_(n)},[u,n]);Be(()=>{Lr===0&&kc(),Lr++;let D=Spicetify.Platform.PlayerAPI._state;P(D);let $=W=>P(W.data),H=W=>P(W.data,!0);return Spicetify.Platform.PlayerAPI._events.addListener("update",$,{}),Spicetify.Platform.PlayerAPI._events.addListener("progress",H,{}),()=>{Lr--,Lr===0&&Sc(),Spicetify.Platform.PlayerAPI._events.removeListener("update",$,{}),Spicetify.Platform.PlayerAPI._events.removeListener("progress",H,{})}},[P]);let S=Dt(()=>{a.item?.uri===u?a.isPaused?Spicetify.Platform.PlayerAPI.resume({}):Spicetify.Platform.PlayerAPI.pause({}):Spicetify.Platform.PlayerAPI.play({uri:u},{})},[a,u]),I=Dt(D=>{v.current=!0,k(D),w.current=D},[]),M=Dt(()=>{v.current&&(a.item?.uri===u?Spicetify.Platform.PlayerAPI.seekTo(p):Spicetify.Platform.PlayerAPI.play({uri:u},{}),v.current=!1)},[p,u,a]),z=Kn(()=>!a.isPaused&&a.item?.uri===u,[a,u]);return{position:p,duration:y,isCurrentlyPlayingThisTrack:z,togglePlay:S,handleSliderChange:I,handleSliderRelease:M}};var _i=Ue($e());Ae();var ii=Ue($e());Ae();var ni=new CSSStyleSheet;ni.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var oi=ni;document.adoptedStyleSheets.push(oi);var Ur=ve(u=>{let n=(0,ii.c)(7),{value:a,onChange:g,placeholder:p,disabled:k}=u,y=k===void 0?!1:k,_;n[0]!==g?(_=P=>{g(P.target.value)},n[0]=g,n[1]=_):_=n[1];let v=_,w;return n[2]!==y||n[3]!==v||n[4]!==p||n[5]!==a?(w=A("input",{className:"input",disabled:y,onChange:v,placeholder:p,type:"text",value:a}),n[2]=y,n[3]=v,n[4]=p,n[5]=a,n[6]=w):w=n[6],w});var gi=Ue($e());Ae();var ai=new CSSStyleSheet;ai.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var si=ai;var pi=Ue($e());Ae();var li=Ue($e());Ae();var ci=new CSSStyleSheet;ci.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var ui=ci;document.adoptedStyleSheets.push(ui);var fi=ve(u=>{let n=(0,li.c)(10),{value:a,onChange:g,disabled:p}=u,k;n[0]!==p||n[1]!==g||n[2]!==a?(k=()=>{p||g(!a)},n[0]=p,n[1]=g,n[2]=a,n[3]=k):k=n[3];let y=k,_=`toggle__slider${a?" toggle__slider--enabled":""}${p?" toggle__slider--disabled":""}`,v;n[4]!==_?(v=A("span",{className:"toggle__background",children:A("span",{className:_})}),n[4]=_,n[5]=v):v=n[5];let w;return n[6]!==p||n[7]!==y||n[8]!==v?(w=A("button",{className:"toggle",disabled:p,onClick:y,role:"switch",children:v}),n[6]=p,n[7]=y,n[8]=v,n[9]=w):w=n[9],w});var di=ve(u=>{let n=(0,pi.c)(23),{option:a,value:g,onChange:p,disabled:k}=u;switch(a.type){case"toggle":{let y=g,_;return n[0]!==k||n[1]!==p||n[2]!==y?(_=A(fi,{disabled:k,onChange:p,value:y}),n[0]=k,n[1]=p,n[2]=y,n[3]=_):_=n[3],_}case"input":{let y=g,_;return n[4]!==k||n[5]!==p||n[6]!==a.placeholder||n[7]!==y?(_=A(Ur,{disabled:k,onChange:p,placeholder:a.placeholder,value:y}),n[4]=k,n[5]=p,n[6]=a.placeholder,n[7]=y,n[8]=_):_=n[8],_}case"dropdown":{let y;n[9]!==a.options?(y=a.options||[],n[9]=a.options,n[10]=y):y=n[10];let _=g,v;return n[11]!==k||n[12]!==p||n[13]!==y||n[14]!==_?(v=A(qr,{disabled:k,onChange:p,options:y,value:_}),n[11]=k,n[12]=p,n[13]=y,n[14]=_,n[15]=v):v=n[15],v}case"slider":{let y=g,_;return n[16]!==k||n[17]!==p||n[18]!==a.max||n[19]!==a.min||n[20]!==a.step||n[21]!==y?(_=A(Fr,{disabled:k,max:a.max,min:a.min,onChange:p,step:a.step,value:y}),n[16]=k,n[17]=p,n[18]=a.max,n[19]=a.min,n[20]=a.step,n[21]=y,n[22]=_):_=n[22],_}default:return console.warn(`Unknown option type for option "${a.name||"N/A"}"`),null}});var hi=Ue($e());Ae();var mi=ve(u=>{let n=(0,hi.c)(6),{name:a,popupModal:g}=u,p;n[0]!==g||n[1]!==a?(p=()=>er({title:a,content:A(g,{}),isLarge:!1}),n[0]=g,n[1]=a,n[2]=p):p=n[2];let k;n[3]===Symbol.for("react.memo_cache_sentinel")?(k=A(Re.React.editButton,{size:16}),n[3]=k):k=n[3];let y;return n[4]!==p?(y=A("button",{className:"popup-button",onClick:p,children:k}),n[4]=p,n[5]=y):y=n[5],y});var yi=Ue($e());Ae();var vi=ve(u=>{let n=(0,yi.c)(3),{tippy:a}=u,g;n[0]===Symbol.for("react.memo_cache_sentinel")?(g=A("div",{className:"info-tippy",children:A(Re.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),n[0]=g):g=n[0];let p;return n[1]!==a?(p=A(Spicetify.ReactComponent.TooltipWrapper,{label:a,placement:"top",showDelay:0,children:g}),n[1]=a,n[2]=p):p=n[2],p});document.adoptedStyleSheets.push(si);var bi=ve(u=>{let n=(0,gi.c)(21),{name:a,desc:g,tippy:p,popupModal:k,option:y,value:_,onChange:v,disabled:w}=u,P;n[0]!==g?(P=A("div",{className:"option__desc",children:g}),n[0]=g,n[1]=P):P=n[1];let S;n[2]!==p?(S=p&&A(vi,{tippy:p}),n[2]=p,n[3]=S):S=n[3];let I;n[4]!==P||n[5]!==S?(I=V("div",{className:"option__content",children:[P,S]}),n[4]=P,n[5]=S,n[6]=I):I=n[6];let M;n[7]!==a||n[8]!==k?(M=k&&A(mi,{name:a,popupModal:k}),n[7]=a,n[8]=k,n[9]=M):M=n[9];let z;n[10]!==w||n[11]!==v||n[12]!==y||n[13]!==_?(z=y&&A(di,{disabled:w,onChange:v||Cc,option:y,value:_}),n[10]=w,n[11]=v,n[12]=y,n[13]=_,n[14]=z):z=n[14];let D;n[15]!==M||n[16]!==z?(D=V("div",{className:"option__control",children:[M,z]}),n[15]=M,n[16]=z,n[17]=D):D=n[17];let $;return n[18]!==I||n[19]!==D?($=V("div",{className:"option__row",children:[I,D]}),n[18]=I,n[19]=D,n[20]=$):$=n[20],$});function Cc(){}var wi=["live","remix","mix","acoustic","instrumental","radio","version","ver","edit","mono","stereo","deluxe","intro","outro","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],xi="findDupeTracks",Pc="findDupeTracks:settingsChanged",Rt={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0},defaultNormalizeWords:[...wi],customNormalizeWords:[]},ki=()=>{let u=localStorage.getItem(xi);if(u){let n=JSON.parse(u);n.defaultNormalizeWords||(n.defaultNormalizeWords=[...wi]);let a={...Rt,...n};return a.groupSettings={...Rt.groupSettings,...n.groupSettings||{}},a.confirmSettings={...Rt.confirmSettings,...n.confirmSettings||{}},a}return JSON.parse(JSON.stringify(Rt))},Oc=u=>{localStorage.setItem(xi,JSON.stringify(u)),window.dispatchEvent(new CustomEvent(Pc))},Wr=()=>ki(),Nc=()=>{let u=(0,_i.c)(43),n;u[0]===Symbol.for("react.memo_cache_sentinel")?(n=ki(),u[0]=n):n=u[0];let[a,g]=Oe(n),[p,k]=Oe(""),y,_;u[1]!==a?(y=()=>{Oc(a)},_=[a],u[1]=a,u[2]=y,u[3]=_):(y=u[2],_=u[3]),Be(y,_);let v;u[4]!==a?(v=(de,ge,Pe)=>V("section",{className:"duplicate-settings__section",children:[A("h3",{className:"duplicate-settings__section-title",children:de}),A("div",{className:"duplicate-settings__options",children:Object.entries(Pe).map(be=>{let[je,Ve]=be,qe={type:"toggle",name:`${je}-${ge}`,desc:Ve,defaultVal:Rt[ge][je]};return A(bi,{desc:Ve,name:`${je}-${ge}`,onChange:Fe=>g(Ye=>({...Ye,[ge]:{...Ye[ge],[je]:Fe}})),option:qe,value:a[ge][je]},je)})})]}),u[4]=a,u[5]=v):v=u[5];let w=v,P;u[6]!==p||u[7]!==a.customNormalizeWords||u[8]!==a.defaultNormalizeWords?(P=()=>{let de=p.trim().toLowerCase();de&&((a.customNormalizeWords||[]).includes(de)||(a.defaultNormalizeWords||[]).includes(de)||(g(ge=>({...ge,customNormalizeWords:[...ge.customNormalizeWords||[],de]})),k("")))},u[6]=p,u[7]=a.customNormalizeWords,u[8]=a.defaultNormalizeWords,u[9]=P):P=u[9];let S=P,I;u[10]===Symbol.for("react.memo_cache_sentinel")?(I=(de,ge)=>{g(Pe=>ge?{...Pe,defaultNormalizeWords:(Pe.defaultNormalizeWords||[]).filter(be=>be!==de)}:{...Pe,customNormalizeWords:(Pe.customNormalizeWords||[]).filter(be=>be!==de)})},u[10]=I):I=u[10];let M=I,z;u[11]===Symbol.for("react.memo_cache_sentinel")?(z=()=>{$r({titleText:"Are you sure?",descriptionText:"This will reset all settings to default!",confirmText:"Reset",onConfirm:()=>g(JSON.parse(JSON.stringify(Rt)))})},u[11]=z):z=u[11];let D=z,$;u[12]!==a.customNormalizeWords||u[13]!==a.defaultNormalizeWords?($=[...(a.defaultNormalizeWords||[]).map(Dc),...(a.customNormalizeWords||[]).map(Tc)],u[12]=a.customNormalizeWords,u[13]=a.defaultNormalizeWords,u[14]=$):$=u[14];let H=$,W,Z;u[15]!==w?(W=w("Duplicate Groups to Display","groupSettings",{exact:"Exact Duplicates (Same URI)",isrc:"ISRC Duplicates (Same Recording)",probable:"Probable Duplicates (Same Name + Artist)",likely:"Likely Duplicates (Same Name)",possible:"Possible Duplicates (Similar Name)"}),Z=w("Confirm Before Deleting","confirmSettings",{exact:"Exact Duplicates",isrc:"ISRC Duplicates",probable:"Probable Duplicates",likely:"Likely Duplicates",possible:"Possible Duplicates"}),u[15]=w,u[16]=W,u[17]=Z):(W=u[16],Z=u[17]);let ne,oe;u[18]===Symbol.for("react.memo_cache_sentinel")?(ne=A("h3",{className:"duplicate-settings__section-title",children:"Normalization Words"}),oe=A("p",{className:"duplicate-settings__description",children:"Add or remove words to be ignored when comparing track names for similarity."}),u[18]=ne,u[19]=oe):(ne=u[18],oe=u[19]);let ie;u[20]===Symbol.for("react.memo_cache_sentinel")?(ie=A("div",{className:"option__content",children:A("div",{className:"option__desc",children:"Add a word to normalization list"})}),u[20]=ie):ie=u[20];let fe;u[21]===Symbol.for("react.memo_cache_sentinel")?(fe=de=>k(de),u[21]=fe):fe=u[21];let le;u[22]!==p?(le=A(Ur,{disabled:!1,onChange:fe,placeholder:"Enter word to normalize",value:p}),u[22]=p,u[23]=le):le=u[23];let ae;u[24]!==S?(ae=de=>de.key==="Enter"&&S(),u[24]=S,u[25]=ae):ae=u[25];let ee;u[26]===Symbol.for("react.memo_cache_sentinel")?(ee={marginLeft:8},u[26]=ee):ee=u[26];let he;u[27]!==S||u[28]!==ae?(he=A("button",{onClick:S,onKeyDown:ae,style:ee,type:"button",children:"Add"}),u[27]=S,u[28]=ae,u[29]=he):he=u[29];let pe;u[30]!==le||u[31]!==he?(pe=V("div",{className:"option__row",children:[ie,V("div",{className:"option__control",children:[le,he]})]}),u[30]=le,u[31]=he,u[32]=pe):pe=u[32];let se;u[33]!==H?(se=A("div",{className:"duplicate-settings__words-list",children:H.length>0?A("div",{className:"duplicate-settings__words-ul",children:H.map(de=>{let{word:ge,isDefault:Pe}=de;return V("div",{className:"duplicate-settings__word-item",children:[ge,A("button",{className:"duplicate-settings__word-remove",onClick:()=>M(ge,Pe),type:"button",children:"Remove"})]},ge)})}):A("p",{className:"duplicate-settings__no-words",children:"No normalization words"})}),u[33]=H,u[34]=se):se=u[34];let ye;u[35]!==pe||u[36]!==se?(ye=V("section",{className:"duplicate-settings__section",children:[ne,oe,pe,se]}),u[35]=pe,u[36]=se,u[37]=ye):ye=u[37];let De;u[38]===Symbol.for("react.memo_cache_sentinel")?(De=A("div",{className:"duplicate-settings__actions",children:A("button",{className:"duplicate-settings__reset",onClick:D,type:"button",children:"Reset to Defaults"})}),u[38]=De):De=u[38];let Se;return u[39]!==ye||u[40]!==W||u[41]!==Z?(Se=V("div",{className:"duplicate-settings",children:[W,Z,ye,De]}),u[39]=ye,u[40]=W,u[41]=Z,u[42]=Se):Se=u[42],Se},Si=Nc;function Dc(u){return{word:u,isDefault:!0}}function Tc(u){return{word:u,isDefault:!1}}ti();var Un=class extends Ln{constructor(){super("findDupeTracks"),this.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, albumUri, trackPlayCount, trackIsrc, ignoreDuplicates"})}},At=new Un;async function Ec(){return(await Uo()).filter(n=>n.type==="playlist"&&!!n.canAddTo)}async function Ic(u){let a=(await Wo(u)).items,g=a.map(_=>_.uri),p=await At.tracks.bulkGet(g),k=new Map(p.filter(_=>!!_).map(_=>[_.trackUri,_])),y=a.flatMap(_=>{let v=k.get(_.uri);return!v||v.trackName!==_.name||v.albumUri!==_.album.uri?[{trackUri:_.uri,trackName:_.name,albumUri:_.album.uri,trackDuration:v?.trackDuration??null,trackPlayCount:v?.trackPlayCount??null,trackIsrc:v?.trackIsrc??null}]:[]});return y.length>0&&await At.tracks.bulkPut(y),{items:a}}async function Rc(u){let n=new Map,a=[],g=u.filter(_=>_?.uri),p=g.map(_=>_.uri);if(p.length===0)return{isrcMap:n};let k=await At.tracks.bulkGet(p),y=new Map(k.filter(_=>!!_).map(_=>[_.trackUri,_]));for(let _ of g){let v=y.get(_.uri);v?.trackIsrc?n.set(_.uri,v.trackIsrc):a.push(_)}if(a.length>0){let _=await Go(a.map(w=>w.uri)),v=[];for(let[w,P]of _.entries()){let S=P?.external_ids?.isrc;S&&(n.set(w,S),v.push({key:w,changes:{trackIsrc:S}}))}v.length>0&&await At.tracks.bulkUpdate(v)}return{isrcMap:n}}async function Ac(u){let n=new Map,a=new Map,g=[],p=u.filter(v=>v?.uri),k=p.map(v=>v.uri);if(k.length===0)return{trackPlayCountMap:n,trackDurationMap:a};let y=await At.tracks.bulkGet(k),_=new Map(y.filter(v=>!!v).map(v=>[v.trackUri,v]));for(let v of p){let w=_.get(v.uri);w?.trackPlayCount!=null&&n.set(v.uri,w.trackPlayCount),w?.trackDuration!=null&&a.set(v.uri,w.trackDuration),(w?.trackPlayCount==null||w?.trackDuration==null)&&g.push(v)}if(g.length>0){let v=new Set(g.map(S=>S.album.uri).filter(Boolean)),w=await Ho(v),P=[];for(let[S,I]of w.entries()){let M=I,z=M.playcount!=null?Number.parseInt(String(M.playcount),10):null,D=M.duration?.totalMilliseconds??null;z!==null&&n.set(S,z),D!==null&&a.set(S,D),P.push({key:S,changes:{trackPlayCount:z,trackDuration:D}})}P.length>0&&await At.tracks.bulkUpdate(P)}return{trackPlayCountMap:n,trackDurationMap:a}}var jc=u=>{let n=Wr(),a=[...n.defaultNormalizeWords,...n.customNormalizeWords],g=new RegExp(`\\b(${a.join("|")})\\b`,"gi");return u.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(g,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim()},Mc=ve(function(n){let a=(0,bt.c)(25),{track:g,trackPlayCounts:p,trackIsrcs:k}=n,y;if(a[0]!==g.uri||a[1]!==p){let ne=p.get(g.uri);y=ne!=null?ne.toLocaleString():"N/A",a[0]=g.uri,a[1]=p,a[2]=y}else y=a[2];let _=y,v;a[3]!==g.uri||a[4]!==k?(v=k.get(g.uri)||"N/A",a[3]=g.uri,a[4]=k,a[5]=v):v=a[5];let w=v,P=g.album?.name||"N/A",S;a[6]!==g.artists?(S=g.artists?.map(qc).join(", ")||"N/A",a[6]=g.artists,a[7]=S):S=a[7];let I=S,M;a[8]!==I?(M=V("span",{className:"track-details__artists",children:["Artists: ",I]}),a[8]=I,a[9]=M):M=a[9];let z;a[10]!==P?(z=V("span",{className:"track-details__album",children:["Album: ",P]}),a[10]=P,a[11]=z):z=a[11];let D;a[12]!==M||a[13]!==z?(D=V("div",{className:"track-details__line",children:[M,z]}),a[12]=M,a[13]=z,a[14]=D):D=a[14];let $;a[15]!==_?($=V("span",{className:"track-details__playcount",children:["Plays: ",_]}),a[15]=_,a[16]=$):$=a[16];let H;a[17]!==w?(H=V("span",{className:"track-details__isrc",children:["ISRC: ",w]}),a[17]=w,a[18]=H):H=a[18];let W;a[19]!==$||a[20]!==H?(W=V("div",{className:"track-details__line",children:[$,H]}),a[19]=$,a[20]=H,a[21]=W):W=a[21];let Z;return a[22]!==D||a[23]!==W?(Z=V("div",{className:"track-details",children:[D,W]}),a[22]=D,a[23]=W,a[24]=Z):Z=a[24],Z}),Kc=ve(function(n){let a=(0,bt.c)(19),{trackUri:g,trackDuration:p}=n,{position:k,duration:y,isCurrentlyPlayingThisTrack:_,togglePlay:v,handleSliderChange:w,handleSliderRelease:P}=ri(g,p??0),S=Fc,I=S(k),M=S(y),z;a[0]!==_?(z=_?A(Re.React.pause,{}):A(Re.React.play,{}),a[0]=_,a[1]=z):z=a[1];let D;a[2]!==z||a[3]!==v?(D=A("button",{className:"duplicate-group__playback-button",onClick:v,type:"button",children:z}),a[2]=z,a[3]=v,a[4]=D):D=a[4];let $;a[5]!==I?($=A("span",{className:"slider-time",children:I}),a[5]=I,a[6]=$):$=a[6];let H=y||0,W=k||0,Z;a[7]!==w||a[8]!==P||a[9]!==H||a[10]!==W?(Z=A(Fr,{max:H,min:0,onChange:w,onRelease:P,step:1,value:W}),a[7]=w,a[8]=P,a[9]=H,a[10]=W,a[11]=Z):Z=a[11];let ne;a[12]!==M?(ne=A("span",{className:"slider-time",children:M}),a[12]=M,a[13]=ne):ne=a[13];let oe;return a[14]!==D||a[15]!==$||a[16]!==Z||a[17]!==ne?(oe=V("div",{className:"duplicate-group__playback-controls",children:[D,$,Z,ne]}),a[14]=D,a[15]=$,a[16]=Z,a[17]=ne,a[18]=oe):oe=a[18],oe}),Ci=ve(function(n){let a=(0,bt.c)(27),{track:g,category:p,onDelete:k,isSource:y,trackPlayCounts:_,trackIsrcs:v,trackDurations:w}=n,P=`duplicate-group__duplicate-item duplicate-group__item--${p}`,S=y?"Source: ":"",I;a[0]!==S||a[1]!==g.name?(I=V("span",{className:"duplicate-group__duplicate-name",children:[S,g.name]}),a[0]=S,a[1]=g.name,a[2]=I):I=a[2];let M;a[3]!==g||a[4]!==v||a[5]!==_?(M=A(Mc,{track:g,trackIsrcs:v,trackPlayCounts:_}),a[3]=g,a[4]=v,a[5]=_,a[6]=M):M=a[6];let z;a[7]!==I||a[8]!==M?(z=V("div",{className:"duplicate-group__duplicate-content",children:[I,M]}),a[7]=I,a[8]=M,a[9]=z):z=a[9];let D;a[10]!==p||a[11]!==k||a[12]!==g?(D=A("button",{className:"duplicate-group__delete-button",onClick:()=>k(p,g),type:"button",children:"Delete"}),a[10]=p,a[11]=k,a[12]=g,a[13]=D):D=a[13];let $;a[14]!==z||a[15]!==D?($=V("div",{className:"duplicate-group__duplicate-info",children:[z,D]}),a[14]=z,a[15]=D,a[16]=$):$=a[16];let H;a[17]!==g.uri||a[18]!==w?(H=w.get(g.uri),a[17]=g.uri,a[18]=w,a[19]=H):H=a[19];let W;a[20]!==H||a[21]!==g.uri?(W=A("div",{className:"duplicate-group__actions",children:A(Kc,{trackDuration:H,trackUri:g.uri})}),a[20]=H,a[21]=g.uri,a[22]=W):W=a[22];let Z;return a[23]!==P||a[24]!==$||a[25]!==W?(Z=V("div",{className:P,children:[$,W]}),a[23]=P,a[24]=$,a[25]=W,a[26]=Z):Z=a[26],Z}),Bc=ve(function(n){let a=(0,bt.c)(31),{group:g,category:p,groupIndex:k,onDelete:y,trackPlayCounts:_,trackIsrcs:v,trackDurations:w}=n,P=`duplicate-group__item duplicate-group__item--${p}`,S=`${g.mainTrack.uri}-${g.mainTrack.uid||k}`,I;a[0]!==p||a[1]!==g.mainTrack||a[2]!==k||a[3]!==y||a[4]!==w||a[5]!==v||a[6]!==_?(I=A(Ci,{category:p,groupIndex:k,isSource:!0,onDelete:y,track:g.mainTrack,trackDurations:w,trackIsrcs:v,trackPlayCounts:_}),a[0]=p,a[1]=g.mainTrack,a[2]=k,a[3]=y,a[4]=w,a[5]=v,a[6]=_,a[7]=I):I=a[7];let M;a[8]===Symbol.for("react.memo_cache_sentinel")?(M=A("div",{className:"duplicate-group__duplicates-label",children:"Duplicates:"}),a[8]=M):M=a[8];let z;if(a[9]!==p||a[10]!==g.duplicates||a[11]!==k||a[12]!==y||a[13]!==w||a[14]!==v||a[15]!==_){let H;a[17]!==p||a[18]!==k||a[19]!==y||a[20]!==w||a[21]!==v||a[22]!==_?(H=W=>A(Ci,{category:p,groupIndex:k,onDelete:y,track:W,trackDurations:w,trackIsrcs:v,trackPlayCounts:_},`${W.uri}-${W.uid||W.uri}`),a[17]=p,a[18]=k,a[19]=y,a[20]=w,a[21]=v,a[22]=_,a[23]=H):H=a[23],z=g.duplicates.map(H),a[9]=p,a[10]=g.duplicates,a[11]=k,a[12]=y,a[13]=w,a[14]=v,a[15]=_,a[16]=z}else z=a[16];let D;a[24]!==z?(D=A("div",{className:"duplicate-group__duplicates-list",children:z}),a[24]=z,a[25]=D):D=a[25];let $;return a[26]!==P||a[27]!==S||a[28]!==I||a[29]!==D?($=V("div",{className:P,children:[I,M,D]},S),a[26]=P,a[27]=S,a[28]=I,a[29]=D,a[30]=$):$=a[30],$}),rr=ve(function(n){let a=(0,bt.c)(17),{title:g,groups:p,category:k,onDelete:y,trackPlayCounts:_,trackIsrcs:v,trackDurations:w}=n;if(!Wr().groupSettings[k])return null;let S;a[0]!==g?(S=A("div",{className:"duplicate-group__heading-title",children:g}),a[0]=g,a[1]=S):S=a[1];let I;a[2]!==p.length?(I=V("div",{className:"duplicate-group__heading-length",children:[p.length," found"]}),a[2]=p.length,a[3]=I):I=a[3];let M;a[4]!==S||a[5]!==I?(M=V("div",{className:"duplicate-group__heading",children:[S,I]}),a[4]=S,a[5]=I,a[6]=M):M=a[6];let z;a[7]!==k||a[8]!==p||a[9]!==y||a[10]!==w||a[11]!==v||a[12]!==_?(z=p.length>0?A("div",{className:"duplicate-group__list",children:p.map(($,H)=>A(Bc,{category:k,group:$,groupIndex:H,onDelete:y,trackDurations:w,trackIsrcs:v,trackPlayCounts:_},`${$.mainTrack.uri}-${H}`))}):A("div",{className:"duplicate-group__empty",children:"No duplicates found in this category."}),a[7]=k,a[8]=p,a[9]=y,a[10]=w,a[11]=v,a[12]=_,a[13]=z):z=a[13];let D;return a[14]!==M||a[15]!==z?(D=V("div",{className:"duplicate-group",children:[M,z]}),a[14]=M,a[15]=z,a[16]=D):D=a[16],D}),Hr=(u,n)=>(a,g)=>{let p=a.filter(_=>{let v=n(u(_));return v!=null&&v!==""});if(p.length<2)return[];let k=Object.groupBy(p,_=>n(u(_))),y=[];for(let _ of Object.values(k))if(_&&_.length>1){let v=_.toSorted((w,P)=>(g.get(P.uri)??0)-(g.get(w.uri)??0));y.push({mainTrack:v[0],duplicates:v.slice(1)})}return y},zc=(u,n)=>{let a=[],g=Object.groupBy(u,p=>p.name.toLowerCase().trim());for(let p of Object.values(g)){if(!p||p.length<2)continue;let k=new Set;for(let y of p){if(k.has(y.uid))continue;let _=[],v=[y];for(k.add(y.uid);;){let w=v.shift();if(w===void 0)break;_.push(w);let P=new Set(w.artists.map(S=>S.name));for(let S of p)k.has(S.uid)||S.artists.some(I=>P.has(I.name))&&(k.add(S.uid),v.push(S))}if(_.length>1){let w=_.toSorted((P,S)=>(n.get(S.uri)??0)-(n.get(P.uri)??0));a.push({mainTrack:w[0],duplicates:w.slice(1)})}}}return a};function nr(u,n,a){return a(u,n).sort((p,k)=>{let y=n.get(p.mainTrack.uri)??0,_=n.get(k.mainTrack.uri)??0;return _!==y?_-y:p.mainTrack.name.localeCompare(k.mainTrack.name)})}var Pi=(u,n,a)=>{let g=new Set,p=S=>{for(let I of S){g.add(I.mainTrack.uri);for(let M of I.duplicates)g.add(M.uri)}},k=nr(u,n,Hr(S=>S.uri,S=>S));p(k);let y=u.filter(S=>!g.has(S.uri)),_=nr(y,n,Hr(S=>a.get(S.uri),S=>S));p(_),y=u.filter(S=>!g.has(S.uri));let v=nr(y,n,zc);p(v),y=u.filter(S=>!g.has(S.uri));let w=nr(y,n,Hr(S=>S.name,S=>S?.toLowerCase().trim()));p(w),y=u.filter(S=>!g.has(S.uri));let P=nr(y,n,Hr(S=>S.name,S=>S?jc(S):void 0));return{exact:k,isrc:_,probable:v,likely:w,possible:P}};function Oi(u){let n=(0,bt.c)(38),{selectedPlaylist:a}=u,[g,p]=Oe(!0),k;n[0]===Symbol.for("react.memo_cache_sentinel")?(k=[],n[0]=k):k=n[0];let[y,_]=Oe(k),[v,w]=Oe(a||null),P;n[1]===Symbol.for("react.memo_cache_sentinel")?(P=[],n[1]=P):P=n[1];let[,S]=Oe(P),I;n[2]===Symbol.for("react.memo_cache_sentinel")?(I=new Map,n[2]=I):I=n[2];let[M,z]=Oe(I),D;n[3]===Symbol.for("react.memo_cache_sentinel")?(D=new Map,n[3]=D):D=n[3];let[$,H]=Oe(D),W;n[4]===Symbol.for("react.memo_cache_sentinel")?(W=new Map,n[4]=W):W=n[4];let[Z,ne]=Oe(W),oe;n[5]===Symbol.for("react.memo_cache_sentinel")?(oe={exact:[],isrc:[],probable:[],likely:[],possible:[]},n[5]=oe):oe=n[5];let[ie,fe]=Oe(oe),le,ae;n[6]!==a?(le=()=>{let xe=!1;return(async()=>{let _e=await Ec();xe||(_(_e),w(a||_e.at(0)||null))})(),()=>{xe=!0}},ae=[a],n[6]=a,n[7]=le,n[8]=ae):(le=n[7],ae=n[8]),Be(le,ae);let ee,he;n[9]!==v?(he=()=>{let xe=!1;return(async()=>{if(!v){S([]),fe({exact:[],isrc:[],probable:[],likely:[],possible:[]}),p(!1);return}p(!0);let{items:_e}=await Ic(v.uri);if(xe)return;if(_e.length===0){S([]),fe({exact:[],isrc:[],probable:[],likely:[],possible:[]}),p(!1);return}let[et,_t]=await Promise.all([Ac(_e),Rc(_e)]);if(xe)return;let jt=et.trackPlayCountMap,Mt=et.trackDurationMap,or=_t.isrcMap,tt=Pi(_e,jt,or);S(_e),z(jt),H(Mt),ne(or),fe(tt),xe||p(!1)})(),()=>{xe=!0}},ee=[v],n[9]=v,n[10]=ee,n[11]=he):(ee=n[10],he=n[11]),Be(he,ee);let pe;n[12]!==y?(pe=xe=>{let Te=y.find(_e=>_e.uri===xe)??null;w(Te)},n[12]=y,n[13]=pe):pe=n[13];let se=pe,ye;n[14]!==v||n[15]!==Z||n[16]!==M?(ye=async xe=>{v&&(await Spicetify.Platform.PlaylistAPI.remove(v.uri,[{uid:xe.uid}]),S(Te=>{let _e=Te.filter(_t=>!(_t.uri===xe.uri&&_t.uid===xe.uid)),et=Pi(_e,M,Z);return fe(et),_e}))},n[14]=v,n[15]=Z,n[16]=M,n[17]=ye):ye=n[17];let De=ye,Se;n[18]!==De?(Se=async(xe,Te)=>{if(!Wr().confirmSettings[xe]){await De(Te);return}$r({titleText:"Remove Track",descriptionText:`Are you sure you want to remove "${Te.name}"? This cannot be undone.`,confirmText:"Remove",onConfirm:()=>void De(Te)})},n[18]=De,n[19]=Se):Se=n[19];let de=Se,ge;n[20]!==y?(ge=y.map($c),n[20]=y,n[21]=ge):ge=n[21];let Pe=ge,be;n[22]===Symbol.for("react.memo_cache_sentinel")?(be=A("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),n[22]=be):be=n[22];let je=y.length===0||g,Ve=v?.uri||"",qe;n[23]!==se||n[24]!==Pe||n[25]!==je||n[26]!==Ve?(qe=V("div",{className:"find-duplicates__header",children:[be,A(qr,{disabled:je,onChange:se,options:Pe,value:Ve})]}),n[23]=se,n[24]=Pe,n[25]=je,n[26]=Ve,n[27]=qe):qe=n[27];let Fe;n[28]!==ie||n[29]!==de||n[30]!==g||n[31]!==$||n[32]!==Z||n[33]!==M?(Fe=g?A("div",{className:"find-duplicates__loading",children:A(UI.ProgressDots,{size:"large"})}):V(Mr,{children:[A(rr,{category:"exact",groups:ie.exact,onDelete:de,title:"Exact URI Matches",trackDurations:$,trackIsrcs:Z,trackPlayCounts:M}),A(rr,{category:"isrc",groups:ie.isrc,onDelete:de,title:"Same ISRC",trackDurations:$,trackIsrcs:Z,trackPlayCounts:M}),A(rr,{category:"probable",groups:ie.probable,onDelete:de,title:"Same Title + Shared Artist",trackDurations:$,trackIsrcs:Z,trackPlayCounts:M}),A(rr,{category:"likely",groups:ie.likely,onDelete:de,title:"Same Title",trackDurations:$,trackIsrcs:Z,trackPlayCounts:M}),A(rr,{category:"possible",groups:ie.possible,onDelete:de,title:"Similar Title",trackDurations:$,trackIsrcs:Z,trackPlayCounts:M})]}),n[28]=ie,n[29]=de,n[30]=g,n[31]=$,n[32]=Z,n[33]=M,n[34]=Fe):Fe=n[34];let Ye;return n[35]!==qe||n[36]!==Fe?(Ye=V("div",{className:"find-duplicates",children:[qe,Fe]}),n[35]=qe,n[36]=Fe,n[37]=Ye):Ye=n[37],Ye}function $c(u){return{value:u.uri,label:u.name}}function qc(u){return u.name}function Fc(u){if(u==null||Number.isNaN(u)||u<0)return"N/A";let n=Math.floor(u/1e3),a=Math.floor(n/60),g=n%60;return`${a}:${g.toString().padStart(2,"0")}`}var Ni=new CSSStyleSheet;Ni.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-player);--fdp-surface-2: var(--spice-player);--fdp-overlay: rgba(255, 255, 255, .02);--fdp-shadow: 0 4px 12px rgba(0, 0, 0, .28);--fdp-shadow-sm: 0 2px 6px rgba(0, 0, 0, .2);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-primary, #1db954);--fdp-exact: 255 90 90;--fdp-isrc: 255 144 80;--fdp-likely: 234 234 102;--fdp-possible: 128 239 128;display:flex;flex-direction:column;gap:var(--fdp-gap);width:100%;min-height:500px;animation:fdp-fade-in .24s ease-out both;.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius);box-shadow:none;.find-duplicates__header-label{font-weight:700;color:var(--fdp-text);letter-spacing:.2px}}.find-duplicates__details{font-size:1.1rem;color:var(--fdp-subtext)}.find-duplicates__loading{display:flex;align-items:center;justify-content:center;height:100%}}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg);box-shadow:none;transition:border-color .2s ease,background-color .2s ease;&:hover{background-color:var(--fdp-surface);border-color:var(--fdp-border-strong)}.duplicate-group__heading{display:flex;gap:12px;align-items:center;justify-content:space-between;font-size:1.05rem;font-weight:800;color:var(--fdp-text);.duplicate-group__heading-length{align-content:center;padding:2px 10px;font-size:12px;font-weight:600;color:var(--fdp-text);background:#ffffff0a;border:1px solid var(--fdp-border);border-radius:999px;box-shadow:none}}.duplicate-group__list{display:flex;flex-direction:column;gap:12px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;background:transparent;border:1px solid var(--fdp-border);border-left:4px solid;border-radius:var(--fdp-radius);transition:background-color .16s ease,border-color .16s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.06);border-color:var(--fdp-border-strong)}&.duplicate-group__item--exact{border-left-color:rgb(var(--fdp-exact));box-shadow:none}&.duplicate-group__item--isrc{border-left-color:rgb(var(--fdp-isrc));box-shadow:none}&.duplicate-group__item--likely{border-left-color:rgb(var(--fdp-likely));box-shadow:none}&.duplicate-group__item--possible{border-left-color:rgb(var(--fdp-possible));box-shadow:none}}.duplicate-group__playback-controls{display:flex;flex-grow:1;gap:10px;align-items:center;width:100%}.duplicate-group__playback-button{display:flex;flex-shrink:0;align-items:center;justify-content:center;width:32px;height:32px;padding:0;color:#fff;cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%;transition:background-color .14s ease,border-color .14s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}&:active{background-color:rgba(var(--spice-rgb-selected-row),.12)}svg{width:18px;height:18px}}.slider-time{min-width:38px;font-size:13px;color:var(--fdp-subtext);text-align:center}.duplicate-group__duplicates-label{padding-left:15px;font-size:14px;font-weight:700;color:var(--fdp-subtext)}.duplicate-group__duplicates-list{padding-left:15px}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:700;color:var(--fdp-text);letter-spacing:.2px;white-space:nowrap}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:10px;font-size:1rem;border-bottom:1px solid var(--fdp-border);&:last-child{border-bottom:none}}.duplicate-group__actions{padding-bottom:8px}.duplicate-group__duplicate-info{display:flex;flex-direction:row;flex-wrap:nowrap;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex:1 1 auto;flex-direction:column;gap:6px;min-width:0}.duplicate-group__delete-button{padding:8px 14px;font-size:.9rem;font-weight:700;line-height:1;color:#fff;cursor:pointer;background-color:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:20px;transition:filter .14s ease,background-color .14s ease,border-color .14s ease;&:hover{border-color:#e9142999;filter:brightness(1.05)}&:active{background-color:#c71124}}}.track-details{display:flex;flex-direction:column;font-size:.92rem;color:var(--fdp-subtext);.track-details__line{display:flex;flex-wrap:wrap;gap:10px}}.duplicate-settings{width:100%;.duplicate-settings__section{margin-bottom:24px;.duplicate-settings__section-title{padding-bottom:8px;margin-bottom:16px;font-size:16px;font-weight:800;border-bottom:1px solid var(--fdp-border)}}.duplicate-settings__description{margin-bottom:12px;font-size:13px;color:var(--fdp-subtext)}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}.duplicate-settings__option{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}.duplicate-settings__words-list{max-height:200px;overflow-y:auto;.duplicate-settings__no-words{padding:12px;color:var(--fdp-subtext);text-align:center;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}}.duplicate-settings__words-ul{padding:0;margin:0}.duplicate-settings__word-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;margin-bottom:8px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm);.duplicate-settings__word-remove{padding:6px 10px;font-size:12px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ff5a5ae6,#ff3c3ce6);border:1px solid rgba(255,90,90,.35);border-radius:999px;transition:transform .14s ease,box-shadow .16s ease,filter .16s ease;&:hover{box-shadow:0 6px 16px #ff5a5a40;filter:brightness(1.06)}}}.duplicate-settings__actions{display:flex;justify-content:flex-end;margin-top:24px;.duplicate-settings__reset{padding:8px 14px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ffffff0f,#ffffff05);border:1px solid var(--fdp-border);border-radius:999px;transition:filter .16s ease,transform .14s ease,border-color .16s ease;&:hover{border-color:var(--fdp-border-strong);filter:brightness(1.08)}}}}.find-duplicates :is(button,[role=button],a,input,select,textarea):focus-visible{outline:none;border-color:color-mix(in srgb,var(--fdp-accent),transparent 40%);box-shadow:0 0 0 3px color-mix(in srgb,var(--fdp-accent),transparent 50%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 820px){.duplicate-group{padding:12px;.duplicate-group__empty,.duplicate-group__heading{flex-direction:column;gap:6px;align-items:flex-start}}}");var Di=Ni;document.adoptedStyleSheets.push(Di);var Lc=(u,n="main")=>{let a=g=>{let p=g==="settings";er({title:p?"Find Duplicates Settings":"Find Duplicates",content:p?A(Si,{}):A(Oi,{selectedPlaylist:u}),isLarge:!0,buttons:V(Mr,{children:[A(Spicetify.ReactComponent.TooltipWrapper,{label:p?"Back to Duplicates":"Settings",placement:"top",children:A("button",{className:`modal__button modal__button--${p?"back":"settings"}`,onClick:()=>a(p?"main":"settings"),children:p?A(Re.React.duplicate,{size:18}):A(Re.React.settings,{size:18})})}),A(Spicetify.ReactComponent.TooltipWrapper,{label:"GitHub",placement:"top",children:A("button",{className:"modal__button modal__button--github",onClick:()=>window.open("https://github.com/veryboringhwl/spicetify-extensions"),children:A(Re.React.github,{size:18})})})]})})};a(n)},Uc=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:Re.HTML.duplicate,onClick:async(u,n,a)=>{let g=An(u.props),p=g.uri,k=g.name,y=Spicetify.URI.from(p)?.type,_=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI")),v={uri:p,name:k||(await _.getMetadata(p,{}))?.name||"",type:y||""};Lc(v)},divider:"after",shouldAdd:(u,n,a)=>{let g=An(u),p=Spicetify.URI.from(g.uri)?.type;return p===Spicetify.URI.Type.PLAYLIST||p===Spicetify.URI.Type.PLAYLIST_V2}});Uc.register();
