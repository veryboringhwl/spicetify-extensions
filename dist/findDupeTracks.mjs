await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Ya=Object.create;var Ir=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Ja=Object.getOwnPropertyNames;var Va=Object.getPrototypeOf,es=Object.prototype.hasOwnProperty;var ts=(u,n)=>()=>(u&&(n=u(u=0)),n);var rs=(u,n)=>()=>(n||u((n={exports:{}}).exports,n),n.exports),ns=(u,n)=>{for(var a in n)Ir(u,a,{get:n[a],enumerable:!0})},Oo=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of Ja(n))!es.call(u,d)&&d!==a&&Ir(u,d,{get:()=>n[d],enumerable:!(g=Xa(n,d))||g.enumerable});return u};var He=(u,n,a)=>(a=u!=null?Ya(Va(u)):{},Oo(n||!u||!u.__esModule?Ir(a,"default",{value:u,enumerable:!0}):a,u)),os=u=>Oo(Ir({},"__esModule",{value:!0}),u);var No={};ns(No,{Children:()=>is,Component:()=>as,Fragment:()=>ss,Profiler:()=>cs,PureComponent:()=>us,StrictMode:()=>ls,Suspense:()=>fs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>ps,act:()=>ds,cloneElement:()=>hs,createContext:()=>ms,createElement:()=>ys,createFactory:()=>vs,createRef:()=>gs,default:()=>Rs,forwardRef:()=>bs,isValidElement:()=>Rn,lazy:()=>_s,memo:()=>ve,startTransition:()=>ws,unstable_act:()=>xs,useCallback:()=>Rt,useContext:()=>ks,useDebugValue:()=>Ss,useDeferredValue:()=>Cs,useEffect:()=>ze,useId:()=>An,useImperativeHandle:()=>Ps,useInsertionEffect:()=>Os,useLayoutEffect:()=>Ns,useMemo:()=>jn,useReducer:()=>Ds,useRef:()=>qe,useState:()=>Pe,useSyncExternalStore:()=>Ts,useTransition:()=>Es,version:()=>Is});var is,as,ss,cs,us,ls,fs,ps,ds,hs,ms,ys,vs,gs,bs,Rn,_s,ve,ws,xs,Rt,ks,Ss,Cs,ze,An,Ps,Os,Ns,jn,Ds,qe,Pe,Ts,Es,Is,Rs,Ae=ts(()=>{({Children:is,Component:as,Fragment:ss,Profiler:cs,PureComponent:us,StrictMode:ls,Suspense:fs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ps,act:ds,cloneElement:hs,createContext:ms,createElement:ys,createFactory:vs,createRef:gs,forwardRef:bs,isValidElement:Rn,lazy:_s,memo:ve,startTransition:ws,unstable_act:xs,useCallback:Rt,useContext:ks,useDebugValue:Ss,useDeferredValue:Cs,useEffect:ze,useId:An,useImperativeHandle:Ps,useInsertionEffect:Os,useLayoutEffect:Ns,useMemo:jn,useReducer:Ds,useRef:qe,useState:Pe,useSyncExternalStore:Ts,useTransition:Es,version:Is}=Spicetify.React),Rs=Spicetify.React});var Fe=rs((Uc,Ao)=>{"use no memo";"use strict";var As=Object.create,jr=Object.defineProperty,js=Object.getOwnPropertyDescriptor,Ms=Object.getOwnPropertyNames,Ks=Object.getPrototypeOf,Bs=Object.prototype.hasOwnProperty,zs=(u,n)=>{for(var a in n)jr(u,a,{get:n[a],enumerable:!0})},Io=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of Ms(n))!Bs.call(u,d)&&d!==a&&jr(u,d,{get:()=>n[d],enumerable:!(g=js(n,d))||g.enumerable});return u},$s=(u,n,a)=>(a=u!=null?As(Ks(u)):{},Io(n||!u||!u.__esModule?jr(a,"default",{value:u,enumerable:!0}):a,u)),Ls=u=>Io(jr({},"__esModule",{value:!0}),u),Ro={};zs(Ro,{$dispatcherGuard:()=>Ws,$makeReadOnly:()=>Zs,$reset:()=>Hs,$structuralCheck:()=>Js,c:()=>Us,clearRenderCounterRegistry:()=>Gs,renderCounterRegistry:()=>tr,useRenderCounter:()=>Xs});Ao.exports=Ls(Ro);var Mt=$s((Ae(),os(No))),{useRef:qs,useEffect:Fs,isValidElement:At}=Mt,Do,Mn=(Do=Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Do:Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kn=Symbol.for("react.memo_cache_sentinel"),To,Us=typeof((To=Mt.__COMPILER_RUNTIME)==null?void 0:To.c)=="function"?Mt.__COMPILER_RUNTIME.c:function(n){return Mt.useMemo(()=>{let a=new Array(n);for(let g=0;g<n;g++)a[g]=Kn;return a[Kn]=!0,a},[])},Ar={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(u=>{Ar[u]=()=>{throw new Error(`[React] Unexpected React hook call (${u}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var er=null;Ar.useMemoCache=u=>{if(er==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return er.useMemoCache(u)};function Rr(u){return Mn.ReactCurrentDispatcher.current=u,Mn.ReactCurrentDispatcher.current}var jt=[];function Ws(u){let n=Mn.ReactCurrentDispatcher.current;if(u===0){if(jt.push(n),jt.length===1&&(er=n),n===Ar)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");Rr(Ar)}else if(u===1){let a=jt.pop();if(a==null)throw new Error("React Compiler internal error: unexpected null in guard stack");jt.length===0&&(er=null),Rr(a)}else if(u===2)jt.push(n),Rr(er);else if(u===3){let a=jt.pop();if(a==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Rr(a)}else throw new Error("React Compiler internal error: unreachable block"+u)}function Hs(u){for(let n=0;n<u.length;n++)u[n]=Kn}function Zs(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var tr=new Map;function Gs(){for(let u of tr.values())u.forEach(n=>{n.count=0})}function Qs(u,n){let a=tr.get(u);a==null&&(a=new Set,tr.set(u,a)),a.add(n)}function Ys(u,n){let a=tr.get(u);a?.delete(n)}function Xs(u){let n=qs(null);n.current!=null&&(n.current.count+=1),Fs(()=>{if(n.current==null){let a={count:0};Qs(u,a),n.current=a}return()=>{n.current!==null&&Ys(u,n.current)}})}var Eo=new Set;function Js(u,n,a,g,d,k){function v(x,D,R,S){let M=`${g}:${k} [${d}] ${a}${R} changed from ${x} to ${D} at depth ${S}`;Eo.has(M)||(Eo.add(M),console.error(M))}let _=2;function w(x,D,R,S){if(!(S>_)){if(x===D)return;if(typeof x!=typeof D)v(`type ${typeof x}`,`type ${typeof D}`,R,S);else if(typeof x=="object"){let M=Array.isArray(x),B=Array.isArray(D);if(x===null&&D!==null)v("null",`type ${typeof D}`,R,S);else if(D===null)v(`type ${typeof x}`,"null",R,S);else if(x instanceof Map)if(!(D instanceof Map))v("Map instance","other value",R,S);else if(x.size!==D.size)v(`Map instance with size ${x.size}`,`Map instance with size ${D.size}`,R,S);else for(let[C,U]of x)D.has(C)?w(U,D.get(C),`${R}.get(${C})`,S+1):v(`Map instance with key ${C}`,`Map instance without key ${C}`,R,S);else if(D instanceof Map)v("other value","Map instance",R,S);else if(x instanceof Set)if(!(D instanceof Set))v("Set instance","other value",R,S);else if(x.size!==D.size)v(`Set instance with size ${x.size}`,`Set instance with size ${D.size}`,R,S);else for(let C of D)x.has(C)||v(`Set instance without element ${C}`,`Set instance with element ${C}`,R,S);else if(D instanceof Set)v("other value","Set instance",R,S);else if(M||B)if(M!==B)v(`type ${M?"array":"object"}`,`type ${B?"array":"object"}`,R,S);else if(x.length!==D.length)v(`array with length ${x.length}`,`array with length ${D.length}`,R,S);else for(let C=0;C<x.length;C++)w(x[C],D[C],`${R}[${C}]`,S+1);else if(At(x)||At(D))At(x)!==At(D)?v(`type ${At(x)?"React element":"object"}`,`type ${At(D)?"React element":"object"}`,R,S):x.type!==D.type?v(`React element of type ${x.type}`,`React element of type ${D.type}`,R,S):w(x.props,D.props,`[props of ${R}]`,S+1);else{for(let C in D)C in x||v(`object without key ${C}`,`object with key ${C}`,R,S);for(let C in x)C in D?w(x[C],D[C],`${R}.${C}`,S+1):v(`object with key ${C}`,`object without key ${C}`,R,S)}}else{if(typeof x=="function")return;isNaN(x)||isNaN(D)?isNaN(x)!==isNaN(D)&&v(`${isNaN(x)?"NaN":"non-NaN value"}`,`${isNaN(D)?"NaN":"non-NaN value"}`,R,S):x!==D&&v(x,D,R,S)}}}w(u,n,"",0)}});function In(u){if(!u)return{};let n={},a=(g,d)=>{if(!(!g||typeof g!="object"))for(let k in g)Object.hasOwn(g,k)&&d[k]===void 0&&(d[k]=g[k])};return a(u,n),a(u.item,n),a(u.reference,n),n}var Mo=He(Fe());var{Fragment:jo,jsx:A,jsxs:te}=Spicetify.ReactJSX;var Mr={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},Vs=u=>{let{path:n,size:a}=Mr[u],g=d=>{let k=(0,Mo.c)(4),{size:v,fill:_}=d,w=v===void 0?a:v,x=_===void 0?"currentColor":_,D;k[0]===Symbol.for("react.memo_cache_sentinel")?(D=A("path",{d:n}),k[0]=D):D=k[0];let R;return k[1]!==x||k[2]!==w?(R=A("svg",{fill:x,height:w,role:"img",viewBox:`0 0 ${a} ${a}`,width:w,children:D}),k[1]=x,k[2]=w,k[3]=R):R=k[3],R};return g.defaultProps={size:a,fill:"currentColor"},g},{raw:ec,react:tc,html:rc}=Object.keys(Mr).reduce((u,n)=>(u.raw[n]=Mr[n].path,u.react[n]=Vs(n),u.html[n]=`<path d="${Mr[n].path}"/>`,u),{raw:{},react:{},html:{}}),Ie={React:tc,HTML:rc,RAW:ec};var zo=He(Fe());Ae();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Gc,createPortal:Qc,createRoot:Kr,findDOMNode:Yc,flushSync:Xc,hydrate:Jc,hydrateRoot:Vc,render:eu,unmountComponentAtNode:tu,unstable_batchedUpdates:ru,unstable_renderSubtreeIntoContainer:nu,version:ou}=Spicetify.ReactDOM,iu=Spicetify.ReactDOM;var Ko=new CSSStyleSheet;Ko.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var Bo=Ko;document.adoptedStyleSheets.push(Bo);var rr=null,Bn="popup-modal-container",zn=()=>{let u=document.getElementById(Bn);rr&&(rr.unmount(),rr=null),u&&u.remove(),document.body.style.overflow="auto"},nc=ve(u=>{let n=(0,zo.c)(36),{title:a,content:g,isLarge:d,buttons:k,icon:v,onClose:_}=u,w=qe(null),x,D;n[0]!==_?(x=()=>{document.body.style.overflow="hidden";let se=ae=>{ae.key==="Escape"&&(ae.preventDefault(),_())};return document.addEventListener("keydown",se),()=>{document.removeEventListener("keydown",se)}},D=[_],n[0]=_,n[1]=x,n[2]=D):(x=n[1],D=n[2]),ze(x,D);let R;n[3]!==_?(R=()=>{_()},n[3]=_,n[4]=R):R=n[4];let S=R,M;n[5]!==S?(M=se=>{se.target===w.current&&S()},n[5]=S,n[6]=M):M=n[6];let B=M,C;n[7]!==g?(C=()=>Rn(g)?g:typeof g=="function"?A(g,{}):g,n[7]=g,n[8]=C):C=n[8];let U=C,H=`modal__container${d?" modal__container--large":""}`,$;n[9]!==v?($=v&&A("div",{className:"modal__icon",children:v}),n[9]=v,n[10]=$):$=n[10];let V;n[11]!==a?(V=A("h1",{className:"modal__title",children:a}),n[11]=a,n[12]=V):V=n[12];let ee;n[13]!==$||n[14]!==V?(ee=te("div",{className:"modal__titleContainer",children:[$,V]}),n[13]=$,n[14]=V,n[15]=ee):ee=n[15];let J;n[16]===Symbol.for("react.memo_cache_sentinel")?(J=A(Ie.React.close,{size:18}),n[16]=J):J=n[16];let le;n[17]!==S?(le=A(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:A("button",{className:"modal__button modal__button--close",onClick:S,children:J})}),n[17]=S,n[18]=le):le=n[18];let pe;n[19]!==k||n[20]!==le?(pe=te("div",{className:"modal__buttonContainer",children:[k,le]}),n[19]=k,n[20]=le,n[21]=pe):pe=n[21];let fe;n[22]!==pe||n[23]!==ee?(fe=te("div",{className:"modal__header",children:[ee,pe]}),n[22]=pe,n[23]=ee,n[24]=fe):fe=n[24];let ie;n[25]!==U?(ie=U(),n[25]=U,n[26]=ie):ie=n[26];let ne;n[27]!==ie?(ne=A("div",{className:"modal__content",children:ie}),n[27]=ie,n[28]=ne):ne=n[28];let he;n[29]!==fe||n[30]!==ne||n[31]!==H?(he=te("div",{className:H,children:[fe,ne]}),n[29]=fe,n[30]=ne,n[31]=H,n[32]=he):he=n[32];let de;return n[33]!==B||n[34]!==he?(de=A("div",{className:"modal",onClick:B,ref:w,children:he}),n[33]=B,n[34]=he,n[35]=de):de=n[35],de}),nr=u=>{document.getElementById(Bn)&&zn();let n=document.createElement("div");n.id=Bn,document.body.appendChild(n),rr=Kr(n),rr.render(A(nc,{...u,onClose:zn}))};nr.hide=zn;var xt=He(Fe());var oc=(u,...n)=>({$t:setTimeout(u,0,...n),[Symbol.dispose](){clearTimeout(this.t)}}),ic=Object.create,Lo=Object.defineProperty,ac=Object.getOwnPropertyDescriptor,sc=Object.getOwnPropertyNames,cc=Object.getPrototypeOf,uc=Object.prototype.hasOwnProperty,lc=(u,n)=>()=>(n||u((n={exports:{}}).exports,n),n.exports),fc=(u,n,a,g)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of sc(n))!uc.call(u,d)&&d!==a&&Lo(u,d,{get:()=>n[d],enumerable:!(g=ac(n,d))||g.enumerable});return u},pc=(u,n,a)=>(a=u!=null?ic(cc(u)):{},fc(n||!u||!u.__esModule?Lo(a,"default",{value:u,enumerable:!0}):a,u)),dc=lc((u,n)=>{(function(a,g){typeof u=="object"&&typeof n<"u"?n.exports=g():typeof define=="function"&&define.amd?define(g):(a=typeof globalThis<"u"?globalThis:a||self,a.Dexie=g())})(u,function(){"use strict";var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},a(e,t)};function g(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var d=function(){return d=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},d.apply(this,arguments)};function k(e,t,r){if(r||arguments.length===2)for(var o=0,i=t.length,s;o<i;o++)(s||!(o in t))&&(s||(s=Array.prototype.slice.call(t,0,o)),s[o]=t[o]);return e.concat(s||Array.prototype.slice.call(t))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,_=Object.keys,w=Array.isArray;typeof Promise<"u"&&!v.Promise&&(v.Promise=Promise);function x(e,t){return typeof t!="object"||_(t).forEach(function(r){e[r]=t[r]}),e}var D=Object.getPrototypeOf,R={}.hasOwnProperty;function S(e,t){return R.call(e,t)}function M(e,t){typeof t=="function"&&(t=t(D(e))),(typeof Reflect>"u"?_:Reflect.ownKeys)(t).forEach(function(r){C(e,r,t[r])})}var B=Object.defineProperty;function C(e,t,r,o){B(e,t,x(r&&S(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function U(e){return{from:function(t){return e.prototype=Object.create(t.prototype),C(e.prototype,"constructor",e),{extend:M.bind(null,e.prototype)}}}}var H=Object.getOwnPropertyDescriptor;function $(e,t){var r=H(e,t),o;return r||(o=D(e))&&$(o,t)}var V=[].slice;function ee(e,t,r){return V.call(e,t,r)}function J(e,t){return t(e)}function le(e){if(!e)throw new Error("Assertion Failed")}function pe(e){v.setImmediate?oc(e):setTimeout(e,0)}function fe(e,t){return e.reduce(function(r,o,i){var s=t(o,i);return s&&(r[s[0]]=s[1]),r},{})}function ie(e,t){if(typeof t=="string"&&S(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],o=0,i=t.length;o<i;++o){var s=ie(e,t[o]);r.push(s)}return r}var c=t.indexOf(".");if(c!==-1){var l=e[t.substr(0,c)];return l==null?void 0:ie(l,t.substr(c+1))}}function ne(e,t,r){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){le(typeof r!="string"&&"length"in r);for(var o=0,i=t.length;o<i;++o)ne(e,t[o],r[o])}else{var s=t.indexOf(".");if(s!==-1){var c=t.substr(0,s),l=t.substr(s+1);if(l==="")r===void 0?w(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=r;else{var f=e[c];(!f||!S(e,c))&&(f=e[c]={}),ne(f,l,r)}}else r===void 0?w(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function he(e,t){typeof t=="string"?ne(e,t,void 0):"length"in t&&[].map.call(t,function(r){ne(e,r,void 0)})}function de(e){var t={};for(var r in e)S(e,r)&&(t[r]=e[r]);return t}var se=[].concat;function ae(e){return se.apply([],e)}var Ne="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ae([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return v[e]}),xe=new Set(Ne.map(function(e){return v[e]}));function ye(e){var t={};for(var r in e)if(S(e,r)){var o=e[r];t[r]=!o||typeof o!="object"||xe.has(o.constructor)?o:ye(o)}return t}function ge(e){for(var t in e)if(S(e,t))return!1;return!0}var Se=null;function _e(e){Se=new WeakMap;var t=Re(e);return Se=null,t}function Re(e){if(!e||typeof e!="object")return e;var t=Se.get(e);if(t)return t;if(w(e)){t=[],Se.set(e,t);for(var r=0,o=e.length;r<o;++r)t.push(Re(e[r]))}else if(xe.has(e.constructor))t=e;else{var i=D(e);t=i===Object.prototype?{}:Object.create(i),Se.set(e,t);for(var s in e)S(e,s)&&(t[s]=Re(e[s]))}return t}var nt={}.toString;function et(e){return nt.call(e).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ze=typeof Ue=="symbol"?function(e){var t;return e!=null&&(t=e[Ue])&&t.apply(e)}:function(){return null};function je(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}var $e={};function De(e){var t,r,o,i;if(arguments.length===1){if(w(e))return e.slice();if(this===$e&&typeof e=="string")return[e];if(i=Ze(e)){for(r=[];o=i.next(),!o.done;)r.push(o.value);return r}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var Qe=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},kt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Oe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Me=kt.concat(Oe),ot={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(e,t){this.name=e,this.message=t}U(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}});function zt(e,t){return e+". Errors: "+Object.keys(t).map(function(r){return t[r].toString()}).filter(function(r,o,i){return i.indexOf(r)===o}).join(`
`)}function St(e,t,r,o){this.failures=t,this.failedKeys=o,this.successCount=r,this.message=zt(e,t)}U(St).from(Ke);function Ct(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(r){return t[r]}),this.failuresByPos=t,this.message=zt(e,this.failures)}U(Ct).from(Ke);var Wr=Me.reduce(function(e,t){return e[t]=t+"Error",e},{}),Pi=Ke,Q=Me.reduce(function(e,t){var r=t+"Error";function o(i,s){this.name=r,i?typeof i=="string"?(this.message="".concat(i).concat(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=ot[t]||r,this.inner=null)}return U(o).from(Pi),e[t]=o,e},{});Q.Syntax=SyntaxError,Q.Type=TypeError,Q.Range=RangeError;var Fn=Oe.reduce(function(e,t){return e[t+"Error"]=Q[t],e},{});function Oi(e,t){if(!e||e instanceof Ke||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Fn[e.name])return e;var r=new Fn[e.name](t||e.message,e);return"stack"in e&&C(r,"stack",{get:function(){return this.inner.stack}}),r}var ar=Me.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Q[t]),e},{});ar.ModifyError=St,ar.DexieError=Ke,ar.BulkError=Ct;function me(){}function $t(e){return e}function Ni(e,t){return e==null||e===$t?t:function(r){return t(e(r))}}function dt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Di(e,t){return e===me?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?dt(o,this.onsuccess):o),i&&(this.onerror=this.onerror?dt(i,this.onerror):i),s!==void 0?s:r}}function Ti(e,t){return e===me?t:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?dt(r,this.onsuccess):r),o&&(this.onerror=this.onerror?dt(o,this.onerror):o)}}function Ei(e,t){return e===me?t:function(r){var o=e.apply(this,arguments);x(r,o);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?dt(i,this.onsuccess):i),s&&(this.onerror=this.onerror?dt(s,this.onerror):s),o===void 0?c===void 0?void 0:c:x(o,c)}}function Ii(e,t){return e===me?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Hr(e,t){return e===me?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(o,s)})}return t.apply(this,arguments)}}var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Un(e,t){Ye=e}var Lt={},Wn=100,Zr=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,D(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,D(t),e]}(),Hn=Zr[0],Zn=Zr[1],Ri=Zr[2],Ai=Zn&&Zn.then,ht=Hn&&Hn.constructor,Gr=!!Ri;function ji(){queueMicrotask(Ki)}var qt=function(e,t){Ft.push([e,t]),sr&&(ji(),sr=!1)},Qr=!0,sr=!0,mt=[],cr=[],Yr=$t,it={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},Z=it,Ft=[],yt=0,ur=[];function q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Z;if(typeof e!="function"){if(e!==Lt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Jr(this,this._value);return}this._state=null,this._value=null,++t.ref,Qn(this,e)}var Xr={get:function(){var e=Z,t=dr;function r(o,i){var s=this,c=!e.global&&(e!==Z||t!==dr),l=c&&!st(),f=new q(function(p,y){Vr(s,new Gn(Jn(o,e,c,l),Jn(i,e,c,l),p,y,e))});return this._consoleTask&&(f._consoleTask=this._consoleTask),f}return r.prototype=Lt,r},set:function(e){C(this,"then",e&&e.prototype===Lt?Xr:{get:function(){return e},set:Xr.set})}};M(q.prototype,{then:Xr,_then:function(e,t){Vr(this,new Gn(null,null,e,t,Z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,function(o){return o instanceof t?r(o):lr(o)}):this.then(null,function(o){return o&&o.name===t?r(o):lr(o)})},finally:function(e){return this.then(function(t){return q.resolve(e()).then(function(){return t})},function(t){return q.resolve(e()).then(function(){return lr(t)})})},timeout:function(e,t){var r=this;return e<1/0?new q(function(o,i){var s=setTimeout(function(){return i(new Q.Timeout(t))},e);r.then(o,i).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(q.prototype,Symbol.toStringTag,"Dexie.Promise"),it.env=Xn();function Gn(e,t,r,o,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=o,this.psd=i}M(q,{all:function(){var e=De.apply(null,arguments).map(hr);return new q(function(t,r){e.length===0&&t([]);var o=e.length;e.forEach(function(i,s){return q.resolve(i).then(function(c){e[s]=c,--o||t(e)},r)})})},resolve:function(e){if(e instanceof q)return e;if(e&&typeof e.then=="function")return new q(function(r,o){e.then(r,o)});var t=new q(Lt,!0,e);return t},reject:lr,race:function(){var e=De.apply(null,arguments).map(hr);return new q(function(t,r){e.map(function(o){return q.resolve(o).then(t,r)})})},PSD:{get:function(){return Z},set:function(e){return Z=e}},totalEchoes:{get:function(){return dr}},newPSD:at,usePSD:vt,scheduler:{get:function(){return qt},set:function(e){qt=e}},rejectionMapper:{get:function(){return Yr},set:function(e){Yr=e}},follow:function(e,t){return new q(function(r,o){return at(function(i,s){var c=Z;c.unhandleds=[],c.onunhandled=s,c.finalize=dt(function(){var l=this;Bi(function(){l.unhandleds.length===0?i():s(l.unhandleds[0])})},c.finalize),e()},t,r,o)})}}),ht&&(ht.allSettled&&C(q,"allSettled",function(){var e=De.apply(null,arguments).map(hr);return new q(function(t){e.length===0&&t([]);var r=e.length,o=new Array(r);e.forEach(function(i,s){return q.resolve(i).then(function(c){return o[s]={status:"fulfilled",value:c}},function(c){return o[s]={status:"rejected",reason:c}}).then(function(){return--r||t(o)})})})}),ht.any&&typeof AggregateError<"u"&&C(q,"any",function(){var e=De.apply(null,arguments).map(hr);return new q(function(t,r){e.length===0&&r(new AggregateError([]));var o=e.length,i=new Array(o);e.forEach(function(s,c){return q.resolve(s).then(function(l){return t(l)},function(l){i[c]=l,--o||r(new AggregateError(i))})})})}),ht.withResolvers&&(q.withResolvers=ht.withResolvers));function Qn(e,t){try{t(function(r){if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var o=e._lib&&Pt();r&&typeof r.then=="function"?Qn(e,function(i,s){r instanceof q?r._then(i,s):r.then(i,s)}):(e._state=!0,e._value=r,Yn(e)),o&&Ot()}},Jr.bind(null,e))}catch(r){Jr(e,r)}}function Jr(e,t){if(cr.push(t),e._state===null){var r=e._lib&&Pt();t=Yr(t),e._state=!1,e._value=t,zi(e),Yn(e),r&&Ot()}}function Yn(e){var t=e._listeners;e._listeners=[];for(var r=0,o=t.length;r<o;++r)Vr(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),yt===0&&(++yt,qt(function(){--yt===0&&en()},[]))}function Vr(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++yt,qt(Mi,[r,e,t])}function Mi(e,t,r){try{var o,i=t._value;!t._state&&cr.length&&(cr=[]),o=Ye&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&cr.indexOf(i)===-1&&$i(t),r.resolve(o)}catch(s){r.reject(s)}finally{--yt===0&&en(),--r.psd.ref||r.psd.finalize()}}function Ki(){vt(it,function(){Pt()&&Ot()})}function Pt(){var e=Qr;return Qr=!1,sr=!1,e}function Ot(){var e,t,r;do for(;Ft.length>0;)for(e=Ft,Ft=[],r=e.length,t=0;t<r;++t){var o=e[t];o[0].apply(null,o[1])}while(Ft.length>0);Qr=!0,sr=!0}function en(){var e=mt;mt=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var t=ur.slice(0),r=t.length;r;)t[--r]()}function Bi(e){function t(){e(),ur.splice(ur.indexOf(t),1)}ur.push(t),++yt,qt(function(){--yt===0&&en()},[])}function zi(e){mt.some(function(t){return t._value===e._value})||mt.push(e)}function $i(e){for(var t=mt.length;t;)if(mt[--t]._value===e._value){mt.splice(t,1);return}}function lr(e){return new q(Lt,!1,e)}function be(e,t){var r=Z;return function(){var o=Pt(),i=Z;try{return ct(r,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{ct(i,!1),o&&Ot()}}}var Ce={awaits:0,echoes:0,id:0},Li=0,fr=[],pr=0,dr=0,qi=0;function at(e,t,r,o){var i=Z,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++qi,it.env,s.env=Gr?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},t&&x(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=vt(s,e,r,o);return s.ref===0&&s.finalize(),c}function Nt(){return Ce.id||(Ce.id=++Li),++Ce.awaits,Ce.echoes+=Wn,Ce.id}function st(){return Ce.awaits?(--Ce.awaits===0&&(Ce.id=0),Ce.echoes=Ce.awaits*Wn,!0):!1}(""+Ai).indexOf("[native code]")===-1&&(Nt=st=me);function hr(e){return Ce.echoes&&e&&e.constructor===ht?(Nt(),e.then(function(t){return st(),t},function(t){return st(),ke(t)})):e}function Fi(e){++dr,(!Ce.echoes||--Ce.echoes===0)&&(Ce.echoes=Ce.awaits=Ce.id=0),fr.push(Z),ct(e,!0)}function Ui(){var e=fr[fr.length-1];fr.pop(),ct(e,!1)}function ct(e,t){var r=Z;if((t?Ce.echoes&&(!pr++||e!==Z):pr&&(!--pr||e!==Z))&&queueMicrotask(t?Fi.bind(null,e):Ui),e!==Z&&(Z=e,r===it&&(it.env=Xn()),Gr)){var o=it.env.Promise,i=e.env;(r.global||e.global)&&(Object.defineProperty(v,"Promise",i.PromiseProp),o.all=i.all,o.race=i.race,o.resolve=i.resolve,o.reject=i.reject,i.allSettled&&(o.allSettled=i.allSettled),i.any&&(o.any=i.any))}}function Xn(){var e=v.Promise;return Gr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function vt(e,t,r,o,i){var s=Z;try{return ct(e,!0),t(r,o,i)}finally{ct(s,!1)}}function Jn(e,t,r,o){return typeof e!="function"?e:function(){var i=Z;r&&Nt(),ct(t,!0);try{return e.apply(this,arguments)}finally{ct(i,!1),o&&queueMicrotask(st)}}}function tn(e){Promise===ht&&Ce.echoes===0?pr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var ke=q.reject;function rn(e,t,r,o){if(!e.idbdb||!e._state.openComplete&&!Z.letThrough&&!e._vip){if(e._state.openComplete)return ke(new Q.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return ke(new Q.DatabaseClosed);e.open().catch(me)}return e._state.dbReadyPromise.then(function(){return rn(e,t,r,o)})}else{var i=e._createTransaction(t,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Wr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return rn(e,t,r,o)})):ke(s)}return i._promise(t,function(s,c){return at(function(){return Z.trans=i,o(s,c,i)})}).then(function(s){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?s:i._completion.then(function(){return s})})}}var Vn="4.0.11",gt="\uFFFF",nn=-1/0,tt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eo="String expected.",Dt=[],mr="__dbnames",on="readonly",an="readwrite";function bt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var to={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yr(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=_e(t),delete t[e]),t}:function(t){return t}}function ro(){throw Q.Type()}function ce(e,t){try{var r=no(e),o=no(t);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Hi(oo(e),oo(t));case"Array":return Wi(e,t)}}catch{}return NaN}function Wi(e,t){for(var r=e.length,o=t.length,i=r<o?r:o,s=0;s<i;++s){var c=ce(e[s],t[s]);if(c!==0)return c}return r===o?0:r<o?-1:1}function Hi(e,t){for(var r=e.length,o=t.length,i=r<o?r:o,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===o?0:r<o?-1:1}function no(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=et(e);return r==="ArrayBuffer"?"binary":r}function oo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var io=function(){function e(){}return e.prototype._trans=function(t,r,o){var i=this._tx||Z.trans,s=this.name,c=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function l(y,h,O){if(!O.schema[s])throw new Q.NotFound("Table "+s+" not part of transaction");return r(O.idbtrans,O)}var f=Pt();try{var p=i&&i.db._novip===this.db._novip?i===Z.trans?i._promise(t,l,o):at(function(){return i._promise(t,l,o)},{trans:i,transless:Z.transless||Z}):rn(this.db,t,[this.name],l);return c&&(p._consoleTask=c,p=p.catch(function(y){return console.trace(y),ke(y)})),p}finally{f&&Ot()}},e.prototype.get=function(t,r){var o=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?ke(new Q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return o.core.get({trans:i,key:t}).then(function(s){return o.hook.reading.fire(s)})}).then(r)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(w(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=_(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&r.every(function(O){return y.keyPath.indexOf(O)>=0})){for(var h=0;h<r.length;++h)if(r.indexOf(y.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(y,h){return y.keyPath.length-h.keyPath.length})[0];if(o&&this.db._maxKey!==gt){var i=o.keyPath.slice(0,r.length);return this.where(i).equals(i.map(function(y){return t[y]}))}!o&&Ye&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var s=this.schema.idxByName;function c(y,h){return ce(y,h)===0}var l=r.reduce(function(y,h){var O=y[0],K=y[1],m=s[h],b=t[h];return[O||m,O||!m?bt(K,m&&m.multi?function(P){var I=ie(P,h);return w(I)&&I.some(function(T){return c(b,T)})}:function(P){return c(b,ie(P,h))}):K]},[null,null]),f=l[0],p=l[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(p):o?this.filter(p):this.where(r).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,w(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var r=this,o=r.db,i=r.name;this.schema.mappedClass=t,t.prototype instanceof ro&&(t=function(f){g(p,f);function p(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),p.prototype.table=function(){return i},p}(t));for(var s=new Set,c=t.prototype;c;c=D(c))Object.getOwnPropertyNames(c).forEach(function(f){return s.add(f)});var l=function(f){if(!f)return f;var p=Object.create(t.prototype);for(var y in f)if(!s.has(y))try{p[y]=f[y]}catch{}return p};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},e.prototype.defineClass=function(){function t(r){x(this,r)}return this.mapToClass(t)},e.prototype.add=function(t,r){var o=this,i=this.schema.primKey,s=i.auto,c=i.keyPath,l=t;return c&&s&&(l=yr(c)(t)),this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"add",keys:r!=null?[r]:null,values:[l]})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{ne(t,c,f)}catch{}return f})},e.prototype.update=function(t,r){if(typeof t=="object"&&!w(t)){var o=ie(t,this.schema.primKey.keyPath);return o===void 0?ke(new Q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(r)}else return this.where(":id").equals(t).modify(r)},e.prototype.put=function(t,r){var o=this,i=this.schema.primKey,s=i.auto,c=i.keyPath,l=t;return c&&s&&(l=yr(c)(t)),this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"put",values:[l],keys:r!=null?[r]:null})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{ne(t,c,f)}catch{}return f})},e.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?q.reject(o.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:to})}).then(function(r){return r.numFailures?q.reject(r.failures[0]):void 0})},e.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(o){return r.core.getMany({keys:t,trans:o}).then(function(i){return i.map(function(s){return r.hook.reading.fire(s)})})})},e.prototype.bulkAdd=function(t,r,o){var i=this,s=Array.isArray(r)?r:void 0;o=o||(s?void 0:r);var c=o?o.allKeys:void 0;return this._trans("readwrite",function(l){var f=i.schema.primKey,p=f.auto,y=f.keyPath;if(y&&s)throw new Q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var h=t.length,O=y&&p?t.map(yr(y)):t;return i.core.mutate({trans:l,type:"add",keys:s,values:O,wantResults:c}).then(function(K){var m=K.numFailures,b=K.results,P=K.lastResult,I=K.failures,T=c?b:P;if(m===0)return T;throw new Ct("".concat(i.name,".bulkAdd(): ").concat(m," of ").concat(h," operations failed"),I)})})},e.prototype.bulkPut=function(t,r,o){var i=this,s=Array.isArray(r)?r:void 0;o=o||(s?void 0:r);var c=o?o.allKeys:void 0;return this._trans("readwrite",function(l){var f=i.schema.primKey,p=f.auto,y=f.keyPath;if(y&&s)throw new Q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var h=t.length,O=y&&p?t.map(yr(y)):t;return i.core.mutate({trans:l,type:"put",keys:s,values:O,wantResults:c}).then(function(K){var m=K.numFailures,b=K.results,P=K.lastResult,I=K.failures,T=c?b:P;if(m===0)return T;throw new Ct("".concat(i.name,".bulkPut(): ").concat(m," of ").concat(h," operations failed"),I)})})},e.prototype.bulkUpdate=function(t){var r=this,o=this.core,i=t.map(function(l){return l.key}),s=t.map(function(l){return l.changes}),c=[];return this._trans("readwrite",function(l){return o.getMany({trans:l,keys:i,cache:"clone"}).then(function(f){var p=[],y=[];t.forEach(function(O,K){var m=O.key,b=O.changes,P=f[K];if(P){for(var I=0,T=Object.keys(b);I<T.length;I++){var E=T[I],j=b[E];if(E===r.schema.primKey.keyPath){if(ce(j,m)!==0)throw new Q.Constraint("Cannot update primary key in bulkUpdate()")}else ne(P,E,j)}c.push(K),p.push(m),y.push(P)}});var h=p.length;return o.mutate({trans:l,type:"put",keys:p,values:y,updates:{keys:i,changeSpecs:s}}).then(function(O){var K=O.numFailures,m=O.failures;if(K===0)return h;for(var b=0,P=Object.keys(m);b<P.length;b++){var I=P[b],T=c[Number(I)];if(T!=null){var E=m[I];delete m[I],m[T]=E}}throw new Ct("".concat(r.name,".bulkUpdate(): ").concat(K," of ").concat(h," operations failed"),m)})})})},e.prototype.bulkDelete=function(t){var r=this,o=t.length;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var s=i.numFailures,c=i.lastResult,l=i.failures;if(s===0)return c;throw new Ct("".concat(r.name,".bulkDelete(): ").concat(s," of ").concat(o," operations failed"),l)})},e}();function Ut(e){var t={},r=function(l,f){if(f){for(var p=arguments.length,y=new Array(p-1);--p;)y[p-1]=arguments[p];return t[l].subscribe.apply(null,y),e}else if(typeof l=="string")return t[l]};r.addEventType=s;for(var o=1,i=arguments.length;o<i;++o)s(arguments[o]);return r;function s(l,f,p){if(typeof l=="object")return c(l);f||(f=Ii),p||(p=me);var y={subscribers:[],fire:p,subscribe:function(h){y.subscribers.indexOf(h)===-1&&(y.subscribers.push(h),y.fire=f(y.fire,h))},unsubscribe:function(h){y.subscribers=y.subscribers.filter(function(O){return O!==h}),y.fire=y.subscribers.reduce(f,p)}};return t[l]=r[l]=y,y}function c(l){_(l).forEach(function(f){var p=l[f];if(w(p))s(f,l[f][0],l[f][1]);else if(p==="asap")var y=s(f,$t,function(){for(var h=arguments.length,O=new Array(h);h--;)O[h]=arguments[h];y.subscribers.forEach(function(K){pe(function(){K.apply(null,O)})})});else throw new Q.InvalidArgument("Invalid event config")})}}function Wt(e,t){return U(t).from({prototype:e}),t}function Zi(e){return Wt(io.prototype,function(t,r,o){this.db=e,this._tx=o,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:Ut(null,{creating:[Di,me],reading:[Ni,$t],updating:[Ei,me],deleting:[Ti,me]})})}function Tt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function sn(e,t){e.filter=bt(e.filter,t)}function cn(e,t,r){var o=e.replayFilter;e.replayFilter=o?function(){return bt(o(),t())}:t,e.justLimit=r&&!o}function Gi(e,t){e.isMatch=bt(e.isMatch,t)}function vr(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new Q.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function ao(e,t,r){var o=vr(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function gr(e,t,r,o){var i=e.replayFilter?bt(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},c=function(l,f,p){if(!i||i(f,p,function(O){return f.stop(O)},function(O){return f.fail(O)})){var y=f.primaryKey,h=""+y;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(y)),S(s,h)||(s[h]=!0,t(l,f,p))}};return Promise.all([e.or._iterate(c,r),so(ao(e,o,r),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}else return so(ao(e,o,r),bt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function so(e,t,r,o){var i=o?function(c,l,f){return r(o(c),l,f)}:r,s=be(i);return e.then(function(c){if(c)return c.start(function(){var l=function(){return c.continue()};(!t||t(c,function(f){return l=f},function(f){c.stop(f),l=me},function(f){c.fail(f),l=me}))&&s(c.value,c,function(f){return l=f}),l()})})}var Ht=function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var r,o=this["@@propmod"];if(o.add!==void 0){var i=o.add;if(w(i))return k(k([],w(t)?t:[],!0),i,!0).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(o.remove!==void 0){var s=o.remove;if(w(s))return w(t)?t.filter(function(l){return!s.includes(l)}).sort():[];if(typeof s=="number")return Number(t)-s;if(typeof s=="bigint")try{return BigInt(t)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var c=(r=o.replacePrefix)===null||r===void 0?void 0:r[0];return c&&typeof t=="string"&&t.startsWith(c)?o.replacePrefix[1]+t.substring(c.length):t},e}(),Qi=function(){function e(){}return e.prototype._read=function(t,r){var o=this._ctx;return o.error?o.table._trans(null,ke.bind(null,o.error)):o.table._trans("readonly",t).then(r)},e.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,ke.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=bt(r.algorithm,t)},e.prototype._iterate=function(t,r){return gr(this._ctx,t,r,this._ctx.table.core)},e.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&x(o,t),r._ctx=o,r},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var r=this._ctx;return this._read(function(o){return gr(r,t,o,r.table.core)})},e.prototype.count=function(t){var r=this;return this._read(function(o){var i=r._ctx,s=i.table.core;if(Tt(i,!0))return s.count({trans:o,query:{index:vr(i,s.schema),range:i.range}}).then(function(l){return Math.min(l,i.limit)});var c=0;return gr(i,function(){return++c,!1},o,s).then(function(){return c})}).then(t)},e.prototype.sortBy=function(t,r){var o=t.split(".").reverse(),i=o[0],s=o.length-1;function c(p,y){return y?c(p[o[y]],y-1):p[i]}var l=this._ctx.dir==="next"?1:-1;function f(p,y){var h=c(p,s),O=c(y,s);return ce(h,O)*l}return this.toArray(function(p){return p.sort(f)}).then(r)},e.prototype.toArray=function(t){var r=this;return this._read(function(o){var i=r._ctx;if(i.dir==="next"&&Tt(i,!0)&&i.limit>0){var s=i.valueMapper,c=vr(i,i.table.core.schema);return i.table.core.query({trans:o,limit:i.limit,values:!0,query:{index:c,range:i.range}}).then(function(f){var p=f.result;return s?p.map(s):p})}else{var l=[];return gr(i,function(f){return l.push(f)},o,i.table.core).then(function(){return l})}},t)},e.prototype.offset=function(t){var r=this._ctx;return t<=0?this:(r.offset+=t,Tt(r)?cn(r,function(){var o=t;return function(i,s){return o===0?!0:o===1?(--o,!1):(s(function(){i.advance(o),o=0}),!1)}}):cn(r,function(){var o=t;return function(){return--o<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),cn(this._ctx,function(){var r=t;return function(o,i,s){return--r<=0&&i(s),r>=0}},!0),this},e.prototype.until=function(t,r){return sn(this._ctx,function(o,i,s){return t(o.value)?(i(s),r):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return sn(this._ctx,function(r){return t(r.value)}),Gi(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(o,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,s){o.push(s.key)}).then(function(){return o}).then(t)},e.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&Tt(r,!0)&&r.limit>0)return this._read(function(i){var s=vr(r,r.table.core.schema);return r.table.core.query({trans:i,values:!1,limit:r.limit,query:{index:s,range:r.range}})}).then(function(i){var s=i.result;return s}).then(t);r.keysOnly=!r.isMatch;var o=[];return this.each(function(i,s){o.push(s.primaryKey)}).then(function(){return o}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var o={};return sn(this._ctx,function(i){var s=i.primaryKey.toString(),c=S(o,s);return o[s]=!0,!c}),this},e.prototype.modify=function(t){var r=this,o=this._ctx;return this._write(function(i){var s;if(typeof t=="function")s=t;else{var c=_(t),l=c.length;s=function(T){for(var E=!1,j=0;j<l;++j){var N=c[j],z=t[N],F=ie(T,N);z instanceof Ht?(ne(T,N,z.execute(F)),E=!0):F!==z&&(ne(T,N,z),E=!0)}return E}}var f=o.table.core,p=f.schema.primaryKey,y=p.outbound,h=p.extractKey,O=200,K=r.db._options.modifyChunkSize;K&&(typeof K=="object"?O=K[f.name]||K["*"]||200:O=K);var m=[],b=0,P=[],I=function(T,E){var j=E.failures,N=E.numFailures;b+=T-N;for(var z=0,F=_(j);z<F.length;z++){var L=F[z];m.push(j[L])}};return r.clone().primaryKeys().then(function(T){var E=Tt(o)&&o.limit===1/0&&(typeof t!="function"||t===un)&&{index:o.index,range:o.range},j=function(N){var z=Math.min(O,T.length-N);return f.getMany({trans:i,keys:T.slice(N,N+z),cache:"immutable"}).then(function(F){for(var L=[],Y=[],oe=y?[]:null,W=[],re=0;re<z;++re){var X=F[re],ue={value:_e(X),primKey:T[N+re]};s.call(ue,ue.value,ue)!==!1&&(ue.value==null?W.push(T[N+re]):!y&&ce(h(X),h(ue.value))!==0?(W.push(T[N+re]),L.push(ue.value)):(Y.push(ue.value),y&&oe.push(T[N+re])))}return Promise.resolve(L.length>0&&f.mutate({trans:i,type:"add",values:L}).then(function(G){for(var we in G.failures)W.splice(parseInt(we),1);I(L.length,G)})).then(function(){return(Y.length>0||E&&typeof t=="object")&&f.mutate({trans:i,type:"put",keys:oe,values:Y,criteria:E,changeSpec:typeof t!="function"&&t,isAdditionalChunk:N>0}).then(function(G){return I(Y.length,G)})}).then(function(){return(W.length>0||E&&t===un)&&f.mutate({trans:i,type:"delete",keys:W,criteria:E,isAdditionalChunk:N>0}).then(function(G){return I(W.length,G)})}).then(function(){return T.length>N+z&&j(N+O)})})};return j(0).then(function(){if(m.length>0)throw new St("Error modifying one or more objects",m,b,P);return T.length})})})},e.prototype.delete=function(){var t=this._ctx,r=t.range;return Tt(t)&&(t.isPrimKey||r.type===3)?this._write(function(o){var i=t.table.core.schema.primaryKey,s=r;return t.table.core.count({trans:o,query:{index:i,range:s}}).then(function(c){return t.table.core.mutate({trans:o,type:"deleteRange",range:s}).then(function(l){var f=l.failures;l.lastResult,l.results;var p=l.numFailures;if(p)throw new St("Could not delete some values",Object.keys(f).map(function(y){return f[y]}),c-p);return c-p})})}):this.modify(un)},e}(),un=function(e,t){return t.value=null};function Yi(e){return Wt(Qi.prototype,function(t,r){this.db=e;var o=to,i=null;if(r)try{o=r()}catch(f){i=f}var s=t._ctx,c=s.table,l=c.hook.reading.fire;this._ctx={table:c,index:s.index,isPrimKey:!s.index||c.schema.primKey.keyPath&&s.index===c.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:l!==$t?l:null}})}function Xi(e,t){return e<t?-1:e===t?0:1}function Ji(e,t){return e>t?-1:e===t?0:1}function Le(e,t,r){var o=e instanceof uo?new e.Collection(e):e;return o._ctx.error=r?new r(t):new TypeError(t),o}function Et(e){return new e.Collection(e,function(){return co("")}).limit(0)}function Vi(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ea(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function ta(e,t,r,o,i,s){for(var c=Math.min(e.length,o.length),l=-1,f=0;f<c;++f){var p=t[f];if(p!==o[f])return i(e[f],r[f])<0?e.substr(0,f)+r[f]+r.substr(f+1):i(e[f],o[f])<0?e.substr(0,f)+o[f]+r.substr(f+1):l>=0?e.substr(0,l)+t[l]+r.substr(l+1):null;i(e[f],p)<0&&(l=f)}return c<o.length&&s==="next"?e+r.substr(e.length):c<e.length&&s==="prev"?e.substr(0,r.length):l<0?null:e.substr(0,l)+o[l]+r.substr(l+1)}function br(e,t,r,o){var i,s,c,l,f,p,y,h=r.length;if(!r.every(function(b){return typeof b=="string"}))return Le(e,eo);function O(b){i=Vi(b),s=ea(b),c=b==="next"?Xi:Ji;var P=r.map(function(I){return{lower:s(I),upper:i(I)}}).sort(function(I,T){return c(I.lower,T.lower)});l=P.map(function(I){return I.upper}),f=P.map(function(I){return I.lower}),p=b,y=b==="next"?"":o}O("next");var K=new e.Collection(e,function(){return ut(l[0],f[h-1]+o)});K._ondirectionchange=function(b){O(b)};var m=0;return K._addAlgorithm(function(b,P,I){var T=b.key;if(typeof T!="string")return!1;var E=s(T);if(t(E,f,m))return!0;for(var j=null,N=m;N<h;++N){var z=ta(T,E,l[N],f[N],c,p);z===null&&j===null?m=N+1:(j===null||c(j,z)>0)&&(j=z)}return P(j!==null?function(){b.continue(j+y)}:I),!1}),K}function ut(e,t,r,o){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:o}}function co(e){return{type:1,lower:e,upper:e}}var uo=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,r,o,i){o=o!==!1,i=i===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(o||i)&&!(o&&i)?Et(this):new this.Collection(this,function(){return ut(t,r,!o,!i)})}catch{return Le(this,tt)}},e.prototype.equals=function(t){return t==null?Le(this,tt):new this.Collection(this,function(){return co(t)})},e.prototype.above=function(t){return t==null?Le(this,tt):new this.Collection(this,function(){return ut(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Le(this,tt):new this.Collection(this,function(){return ut(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Le(this,tt):new this.Collection(this,function(){return ut(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Le(this,tt):new this.Collection(this,function(){return ut(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Le(this,eo):this.between(t,t+gt,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):br(this,function(r,o){return r.indexOf(o[0])===0},[t],gt)},e.prototype.equalsIgnoreCase=function(t){return br(this,function(r,o){return r===o[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=De.apply($e,arguments);return t.length===0?Et(this):br(this,function(r,o){return o.indexOf(r)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=De.apply($e,arguments);return t.length===0?Et(this):br(this,function(r,o){return o.some(function(i){return r.indexOf(i)===0})},t,gt)},e.prototype.anyOf=function(){var t=this,r=De.apply($e,arguments),o=this._cmp;try{r.sort(o)}catch{return Le(this,tt)}if(r.length===0)return Et(this);var i=new this.Collection(this,function(){return ut(r[0],r[r.length-1])});i._ondirectionchange=function(c){o=c==="next"?t._ascending:t._descending,r.sort(o)};var s=0;return i._addAlgorithm(function(c,l,f){for(var p=c.key;o(p,r[s])>0;)if(++s,s===r.length)return l(f),!1;return o(p,r[s])===0?!0:(l(function(){c.continue(r[s])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[nn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=De.apply($e,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Le(this,tt)}var r=t.reduce(function(o,i){return o?o.concat([[o[o.length-1][1],i]]):[[nn,i]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,r){var o=this,i=this._cmp,s=this._ascending,c=this._descending,l=this._min,f=this._max;if(t.length===0)return Et(this);if(!t.every(function(N){return N[0]!==void 0&&N[1]!==void 0&&s(N[0],N[1])<=0}))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Q.InvalidArgument);var p=!r||r.includeLowers!==!1,y=r&&r.includeUppers===!0;function h(N,z){for(var F=0,L=N.length;F<L;++F){var Y=N[F];if(i(z[0],Y[1])<0&&i(z[1],Y[0])>0){Y[0]=l(Y[0],z[0]),Y[1]=f(Y[1],z[1]);break}}return F===L&&N.push(z),N}var O=s;function K(N,z){return O(N[0],z[0])}var m;try{m=t.reduce(h,[]),m.sort(K)}catch{return Le(this,tt)}var b=0,P=y?function(N){return s(N,m[b][1])>0}:function(N){return s(N,m[b][1])>=0},I=p?function(N){return c(N,m[b][0])>0}:function(N){return c(N,m[b][0])>=0};function T(N){return!P(N)&&!I(N)}var E=P,j=new this.Collection(this,function(){return ut(m[0][0],m[m.length-1][1],!p,!y)});return j._ondirectionchange=function(N){N==="next"?(E=P,O=s):(E=I,O=c),m.sort(K)},j._addAlgorithm(function(N,z,F){for(var L=N.key;E(L);)if(++b,b===m.length)return z(F),!1;return T(L)?!0:(o._cmp(L,m[b][1])===0||o._cmp(L,m[b][0])===0||z(function(){O===s?N.continue(m[b][0]):N.continue(m[b][1])}),!1)}),j},e.prototype.startsWithAnyOf=function(){var t=De.apply($e,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?Et(this):this.inAnyRange(t.map(function(r){return[r,r+gt]})):Le(this,"startsWithAnyOf() only works with strings")},e}();function ra(e){return Wt(uo.prototype,function(t,r,o){if(this.db=e,this._ctx={table:t,index:r===":id"?null:r,or:o},this._cmp=this._ascending=ce,this._descending=function(i,s){return ce(s,i)},this._max=function(i,s){return ce(i,s)>0?i:s},this._min=function(i,s){return ce(i,s)<0?i:s},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new Q.MissingAPI})}function Xe(e){return be(function(t){return Zt(t),e(t.target.error),!1})}function Zt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Gt="storagemutated",ln="x-storagemutated-1",lt=Ut(null,Gt),na=function(){function e(){}return e.prototype._lock=function(){return le(!Z.global),++this._reculock,this._reculock===1&&!Z.global&&(Z.lockOwnerFor=this),this},e.prototype._unlock=function(){if(le(!Z.global),--this._reculock===0)for(Z.global||(Z.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{vt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&Z.lockOwnerFor!==this},e.prototype.create=function(t){var r=this;if(!this.mode)return this;var o=this.db.idbdb,i=this.db._state.dbOpenError;if(le(!this.idbtrans),!t&&!o)switch(i&&i.name){case"DatabaseClosedError":throw new Q.DatabaseClosed(i);case"MissingAPIError":throw new Q.MissingAPI(i.message,i);default:throw new Q.OpenFailed(i)}if(!this.active)throw new Q.TransactionInactive;return le(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=be(function(s){Zt(s),r._reject(t.error)}),t.onabort=be(function(s){Zt(s),r.active&&r._reject(new Q.Abort(t.error)),r.active=!1,r.on("abort").fire(s)}),t.oncomplete=be(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&lt.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,r,o){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return ke(new Q.ReadOnly("Transaction is readonly"));if(!this.active)return ke(new Q.TransactionInactive);if(this._locked())return new q(function(c,l){i._blockedFuncs.push([function(){i._promise(t,r,o).then(c,l)},Z])});if(o)return at(function(){var c=new q(function(l,f){i._lock();var p=r(l,f,i);p&&p.then&&p.then(l,f)});return c.finally(function(){return i._unlock()}),c._lib=!0,c});var s=new q(function(c,l){var f=r(c,l,i);f&&f.then&&f.then(c,l)});return s._lib=!0,s},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var r=this._root(),o=q.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return o});else{r._waitingFor=o,r._waitingQueue=[];var i=r.idbtrans.objectStore(r.storeNames[0]);(function c(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(i.get(-1/0).onsuccess=c)})()}var s=r._waitingFor;return new q(function(c,l){o.then(function(f){return r._waitingQueue.push(be(c.bind(null,f)))},function(f){return r._waitingQueue.push(be(l.bind(null,f)))}).finally(function(){r._waitingFor===s&&(r._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Q.Abort))},e.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(S(r,t))return r[t];var o=this.schema[t];if(!o)throw new Q.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,o,this);return i.core=this.db.core.table(t),r[t]=i,i},e}();function oa(e){return Wt(na.prototype,function(t,r,o,i,s){var c=this;this.db=e,this.mode=t,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Ut(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(l,f){c._resolve=l,c._reject=f}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(l){var f=c.active;return c.active=!1,c.on.error.fire(l),c.parent?c.parent._reject(l):f&&c.idbtrans&&c.idbtrans.abort(),ke(l)})})}function fn(e,t,r,o,i,s,c){return{name:e,keyPath:t,unique:r,multi:o,auto:i,compound:s,src:(r&&!c?"&":"")+(o?"*":"")+(i?"++":"")+lo(t)}}function lo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function pn(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:fe(r,function(o){return[o.name,o]})}}function ia(e){return e.length===1?e[0]:e}var Qt=function(e){try{return e.only([[]]),Qt=function(){return[[]]},[[]]}catch{return Qt=function(){return gt},gt}};function dn(e){return e==null?function(){}:typeof e=="string"?aa(e):function(t){return ie(t,e)}}function aa(e){var t=e.split(".");return t.length===1?function(r){return r[e]}:function(r){return ie(r,e)}}function fo(e){return[].slice.call(e)}var sa=0;function Yt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ca(e,t,r){function o(h,O){var K=fo(h.objectStoreNames);return{schema:{name:h.name,tables:K.map(function(m){return O.objectStore(m)}).map(function(m){var b=m.keyPath,P=m.autoIncrement,I=w(b),T=b==null,E={},j={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:I,keyPath:b,autoIncrement:P,unique:!0,extractKey:dn(b)},indexes:fo(m.indexNames).map(function(N){return m.index(N)}).map(function(N){var z=N.name,F=N.unique,L=N.multiEntry,Y=N.keyPath,oe=w(Y),W={name:z,compound:oe,keyPath:Y,unique:F,multiEntry:L,extractKey:dn(Y)};return E[Yt(Y)]=W,W}),getIndexByKeyPath:function(N){return E[Yt(N)]}};return E[":id"]=j.primaryKey,b!=null&&(E[Yt(b)]=j.primaryKey),j})},hasGetAll:K.length>0&&"getAll"in O.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=h.lower,K=h.upper,m=h.lowerOpen,b=h.upperOpen,P=O===void 0?K===void 0?null:t.upperBound(K,!!b):K===void 0?t.lowerBound(O,!!m):t.bound(O,K,!!m,!!b);return P}function s(h){var O=h.name;function K(P){var I=P.trans,T=P.type,E=P.keys,j=P.values,N=P.range;return new Promise(function(z,F){z=be(z);var L=I.objectStore(O),Y=L.keyPath==null,oe=T==="put"||T==="add";if(!oe&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var W=(E||j||{length:1}).length;if(E&&j&&E.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(W===0)return z({numFailures:0,failures:{},results:[],lastResult:void 0});var re,X=[],ue=[],G=0,we=function(Ve){++G,Zt(Ve)};if(T==="deleteRange"){if(N.type===4)return z({numFailures:G,failures:ue,results:[],lastResult:void 0});N.type===3?X.push(re=L.clear()):X.push(re=L.delete(i(N)))}else{var Ee=oe?Y?[j,E]:[j,null]:[E,null],Je=Ee[0],Be=Ee[1];if(oe)for(var We=0;We<W;++We)X.push(re=Be&&Be[We]!==void 0?L[T](Je[We],Be[We]):L[T](Je[We])),re.onerror=we;else for(var We=0;We<W;++We)X.push(re=L[T](Je[We])),re.onerror=we}var pt=function(Ve){var Vt=Ve.target.result;X.forEach(function(Ge,Er){return Ge.error!=null&&(ue[Er]=Ge.error)}),z({numFailures:G,failures:ue,results:T==="delete"?E:X.map(function(Ge){return Ge.result}),lastResult:Vt})};re.onerror=function(Ve){we(Ve),pt(Ve)},re.onsuccess=pt})}function m(P){var I=P.trans,T=P.values,E=P.query,j=P.reverse,N=P.unique;return new Promise(function(z,F){z=be(z);var L=E.index,Y=E.range,oe=I.objectStore(O),W=L.isPrimaryKey?oe:oe.index(L.name),re=j?N?"prevunique":"prev":N?"nextunique":"next",X=T||!("openKeyCursor"in W)?W.openCursor(i(Y),re):W.openKeyCursor(i(Y),re);X.onerror=Xe(F),X.onsuccess=be(function(ue){var G=X.result;if(!G){z(null);return}G.___id=++sa,G.done=!1;var we=G.continue.bind(G),Ee=G.continuePrimaryKey;Ee&&(Ee=Ee.bind(G));var Je=G.advance.bind(G),Be=function(){throw new Error("Cursor not started")},We=function(){throw new Error("Cursor not stopped")};G.trans=I,G.stop=G.continue=G.continuePrimaryKey=G.advance=Be,G.fail=be(F),G.next=function(){var pt=this,Ve=1;return this.start(function(){return Ve--?pt.continue():pt.stop()}).then(function(){return pt})},G.start=function(pt){var Ve=new Promise(function(Ge,Er){Ge=be(Ge),X.onerror=Xe(Er),G.fail=Er,G.stop=function(Qa){G.stop=G.continue=G.continuePrimaryKey=G.advance=We,Ge(Qa)}}),Vt=function(){if(X.result)try{pt()}catch(Ge){G.fail(Ge)}else G.done=!0,G.start=function(){throw new Error("Cursor behind last entry")},G.stop()};return X.onsuccess=be(function(Ge){X.onsuccess=Vt,Vt()}),G.continue=we,G.continuePrimaryKey=Ee,G.advance=Je,Vt(),Ve},z(G)},F)})}function b(P){return function(I){return new Promise(function(T,E){T=be(T);var j=I.trans,N=I.values,z=I.limit,F=I.query,L=z===1/0?void 0:z,Y=F.index,oe=F.range,W=j.objectStore(O),re=Y.isPrimaryKey?W:W.index(Y.name),X=i(oe);if(z===0)return T({result:[]});if(P){var ue=N?re.getAll(X,L):re.getAllKeys(X,L);ue.onsuccess=function(Je){return T({result:Je.target.result})},ue.onerror=Xe(E)}else{var G=0,we=N||!("openKeyCursor"in re)?re.openCursor(X):re.openKeyCursor(X),Ee=[];we.onsuccess=function(Je){var Be=we.result;if(!Be)return T({result:Ee});if(Ee.push(N?Be.value:Be.primaryKey),++G===z)return T({result:Ee});Be.continue()},we.onerror=Xe(E)}})}}return{name:O,schema:h,mutate:K,getMany:function(P){var I=P.trans,T=P.keys;return new Promise(function(E,j){E=be(E);for(var N=I.objectStore(O),z=T.length,F=new Array(z),L=0,Y=0,oe,W=function(G){var we=G.target;(F[we._pos]=we.result)!=null,++Y===L&&E(F)},re=Xe(j),X=0;X<z;++X){var ue=T[X];ue!=null&&(oe=N.get(T[X]),oe._pos=X,oe.onsuccess=W,oe.onerror=re,++L)}L===0&&E(F)})},get:function(P){var I=P.trans,T=P.key;return new Promise(function(E,j){E=be(E);var N=I.objectStore(O),z=N.get(T);z.onsuccess=function(F){return E(F.target.result)},z.onerror=Xe(j)})},query:b(f),openCursor:m,count:function(P){var I=P.query,T=P.trans,E=I.index,j=I.range;return new Promise(function(N,z){var F=T.objectStore(O),L=E.isPrimaryKey?F:F.index(E.name),Y=i(j),oe=Y?L.count(Y):L.count();oe.onsuccess=be(function(W){return N(W.target.result)}),oe.onerror=Xe(z)})}}}var c=o(e,r),l=c.schema,f=c.hasGetAll,p=l.tables.map(function(h){return s(h)}),y={};return p.forEach(function(h){return y[h.name]=h}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(h){var O=y[h];if(!O)throw new Error("Table '".concat(h,"' not found"));return y[h]},MIN_KEY:-1/0,MAX_KEY:Qt(t),schema:l}}function ua(e,t){return t.reduce(function(r,o){var i=o.create;return d(d({},r),i(r))},e)}function la(e,t,r,o){var i=r.IDBKeyRange;r.indexedDB;var s=ua(ca(t,i,o),e.dbcore);return{dbcore:s}}function _r(e,t){var r=t.db,o=la(e._middlewares,r,e._deps,t);e.core=o.dbcore,e.tables.forEach(function(i){var s=i.name;e.core.schema.tables.some(function(c){return c.name===s})&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function wr(e,t,r,o){r.forEach(function(i){var s=o[i];t.forEach(function(c){var l=$(c,i);(!l||"value"in l&&l.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?C(c,i,{get:function(){return this.table(i)},set:function(f){B(this,i,{value:f,writable:!0,configurable:!0,enumerable:!0})}}):c[i]=new e.Table(i,s))})})}function hn(e,t){t.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function fa(e,t){return e._cfg.version-t._cfg.version}function pa(e,t,r,o){var i=e._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=pn("$meta",ho("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(r),s._completion.catch(o);var c=s._reject.bind(s),l=Z.transless||Z;at(function(){if(Z.trans=s,Z.transless=l,t===0)_(i).forEach(function(f){yn(r,f,i[f].primKey,i[f].indexes)}),_r(e,r),q.follow(function(){return e.on.populate.fire(s)}).catch(c);else return _r(e,r),ha(e,s,t).then(function(f){return ma(e,f,s,r)}).catch(c)})}function da(e,t){po(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=kr(e,e.idbdb,t);Sr(e,e._dbSchema,t);for(var o=mn(r,e._dbSchema),i=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var y=t.objectStore(p.name);p.add.forEach(function(h){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(h.src)),xr(y,h)})},s=0,c=o.change;s<c.length;s++){var l=c[s],f=i(l);if(typeof f=="object")return f.value}}function ha(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(o){return o??r}):q.resolve(r)}function ma(e,t,r,o){var i=[],s=e._versions,c=e._dbSchema=kr(e,e.idbdb,o),l=s.filter(function(p){return p._cfg.version>=t});if(l.length===0)return q.resolve();l.forEach(function(p){i.push(function(){var y=c,h=p._cfg.dbschema;Sr(e,y,o),Sr(e,h,o),c=e._dbSchema=h;var O=mn(y,h);O.add.forEach(function(T){yn(o,T[0],T[1].primKey,T[1].indexes)}),O.change.forEach(function(T){if(T.recreate)throw new Q.Upgrade("Not yet support for changing primary key");var E=o.objectStore(T.name);T.add.forEach(function(j){return xr(E,j)}),T.change.forEach(function(j){E.deleteIndex(j.name),xr(E,j)}),T.del.forEach(function(j){return E.deleteIndex(j)})});var K=p._cfg.contentUpgrade;if(K&&p._cfg.version>t){_r(e,o),r._memoizedTables={};var m=de(h);O.del.forEach(function(T){m[T]=y[T]}),hn(e,[e.Transaction.prototype]),wr(e,[e.Transaction.prototype],_(m),m),r.schema=m;var b=Qe(K);b&&Nt();var P,I=q.follow(function(){if(P=K(r),P&&b){var T=st.bind(null,null);P.then(T,T)}});return P&&typeof P.then=="function"?q.resolve(P):I.then(function(){return P})}}),i.push(function(y){var h=p._cfg.dbschema;ya(h,y),hn(e,[e.Transaction.prototype]),wr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}),i.push(function(y){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===p._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(h){return h!=="$meta"})):y.objectStore("$meta").put(p._cfg.version,"version"))})});function f(){return i.length?q.resolve(i.shift()(r.idbtrans)).then(f):q.resolve()}return f().then(function(){po(c,o)})}function mn(e,t){var r={del:[],add:[],change:[]},o;for(o in e)t[o]||r.del.push(o);for(o in t){var i=e[o],s=t[o];if(!i)r.add.push([o,s]);else{var c={name:o,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)c.recreate=!0,r.change.push(c);else{var l=i.idxByName,f=s.idxByName,p=void 0;for(p in l)f[p]||c.del.push(p);for(p in f){var y=l[p],h=f[p];y?y.src!==h.src&&c.change.push(h):c.add.push(h)}(c.del.length>0||c.add.length>0||c.change.length>0)&&r.change.push(c)}}}return r}function yn(e,t,r,o){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(s){return xr(i,s)}),i}function po(e,t){_(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(Ye&&console.debug("Dexie: Creating missing table",r),yn(t,r,e[r].primKey,e[r].indexes))})}function ya(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(r){return e[r]==null&&t.db.deleteObjectStore(r)})}function xr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function kr(e,t,r){var o={},i=ee(t.objectStoreNames,0);return i.forEach(function(s){for(var c=r.objectStore(s),l=c.keyPath,f=fn(lo(l),l||"",!0,!1,!!c.autoIncrement,l&&typeof l!="string",!0),p=[],y=0;y<c.indexNames.length;++y){var h=c.index(c.indexNames[y]);l=h.keyPath;var O=fn(h.name,l,!!h.unique,!!h.multiEntry,!1,l&&typeof l!="string",!1);p.push(O)}o[s]=pn(s,f,p)}),o}function va(e,t,r){e.verno=t.version/10;var o=e._dbSchema=kr(e,t,r);e._storeNames=ee(t.objectStoreNames,0),wr(e,[e._allTables],_(o),o)}function ga(e,t){var r=kr(e,e.idbdb,t),o=mn(r,e._dbSchema);return!(o.add.length||o.change.some(function(i){return i.add.length||i.change.length}))}function Sr(e,t,r){for(var o=r.db.objectStoreNames,i=0;i<o.length;++i){var s=o[i],c=r.objectStore(s);e._hasGetAll="getAll"in c;for(var l=0;l<c.indexNames.length;++l){var f=c.indexNames[l],p=c.index(f).keyPath,y=typeof p=="string"?p:"["+ee(p).join("+")+"]";if(t[s]){var h=t[s].idxByName[y];h&&(h.name=f,delete t[s].idxByName[y],t[s].idxByName[f]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ho(e){return e.split(",").map(function(t,r){t=t.trim();var o=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return fn(o,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),w(i),r===0)})}var ba=function(){function e(){}return e.prototype._parseStoresSpec=function(t,r){_(t).forEach(function(o){if(t[o]!==null){var i=ho(t[o]),s=i.shift();if(s.unique=!0,s.multi)throw new Q.Schema("Primary key cannot be multi-valued");i.forEach(function(c){if(c.auto)throw new Q.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new Q.Schema("Index must have a name and cannot be an empty string")}),r[o]=pn(o,s,i)}})},e.prototype.stores=function(t){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,t):t;var o=r._versions,i={},s={};return o.forEach(function(c){x(i,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(i,s)}),r._dbSchema=s,hn(r,[r._allTables,r,r.Transaction.prototype]),wr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],_(s),s),r._storeNames=_(s),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Hr(this._cfg.contentUpgrade||me,t),this},e}();function _a(e){return Wt(ba.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function vn(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rt(mr,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function gn(e){return e&&typeof e.databases=="function"}function wa(e){var t=e.indexedDB,r=e.IDBKeyRange;return gn(t)?Promise.resolve(t.databases()).then(function(o){return o.map(function(i){return i.name}).filter(function(i){return i!==mr})}):vn(t,r).toCollection().primaryKeys()}function xa(e,t){var r=e.indexedDB,o=e.IDBKeyRange;!gn(r)&&t!==mr&&vn(r,o).put({name:t}).catch(me)}function ka(e,t){var r=e.indexedDB,o=e.IDBKeyRange;!gn(r)&&t!==mr&&vn(r,o).delete(t).catch(me)}function bn(e){return at(function(){return Z.letThrough=!0,e()})}function Sa(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(r){var o=function(){return indexedDB.databases().finally(r)};t=setInterval(o,100),o()}).finally(function(){return clearInterval(t)})}var _n;function wn(e){return!("from"in e)}var Te=function(e,t){if(this)x(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var r=new Te;return e&&"d"in e&&x(r,e),r}};M(Te.prototype,(_n={add:function(e){return Jt(this,e),this},addKey:function(e){return Xt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(r){return Xt(t,r,r)}),this},hasKey:function(e){var t=Cr(this).next(e).value;return t&&ce(t.from,e)<=0&&ce(t.to,e)>=0}},_n[Ue]=function(){return Cr(this)},_n));function Xt(e,t,r){var o=ce(t,r);if(!isNaN(o)){if(o>0)throw RangeError();if(wn(e))return x(e,{from:t,to:r,d:1});var i=e.l,s=e.r;if(ce(r,e.from)<0)return i?Xt(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},yo(e);if(ce(t,e.to)>0)return s?Xt(s,t,r):e.r={from:t,to:r,d:1,l:null,r:null},yo(e);ce(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),ce(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);var c=!e.r;i&&!e.l&&Jt(e,i),s&&c&&Jt(e,s)}}function Jt(e,t){function r(o,i){var s=i.from,c=i.to,l=i.l,f=i.r;Xt(o,s,c),l&&r(o,l),f&&r(o,f)}wn(t)||r(e,t)}function mo(e,t){var r=Cr(t),o=r.next();if(o.done)return!1;for(var i=o.value,s=Cr(e),c=s.next(i.from),l=c.value;!o.done&&!c.done;){if(ce(l.from,i.to)<=0&&ce(l.to,i.from)>=0)return!0;ce(i.from,l.from)<0?i=(o=r.next(l.from)).value:l=(c=s.next(i.from)).value}return!1}function Cr(e){var t=wn(e)?null:{s:0,n:e};return{next:function(r){for(var o=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&ce(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||ce(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function yo(e){var t,r,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),i=o>1?"r":o<-1?"l":"";if(i){var s=i==="r"?"l":"r",c=d({},e),l=e[i];e.from=l.from,e.to=l.to,e[i]=l[i],c[i]=l[s],e[s]=c,c.d=vo(c)}e.d=vo(e)}function vo(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function Pr(e,t){return _(t).forEach(function(r){e[r]?Jt(e[r],t[r]):e[r]=ye(t[r])}),e}function xn(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&mo(t[r],e[r])})}var _t={},kn={},Sn=!1;function Or(e,t){Pr(kn,e),Sn||(Sn=!0,setTimeout(function(){Sn=!1;var r=kn;kn={},Cn(r,!1)},0))}function Cn(e,t){t===void 0&&(t=!1);var r=new Set;if(e.all)for(var o=0,i=Object.values(_t);o<i.length;o++){var s=i[o];go(s,e,r,t)}else for(var c in e){var l=/^idb\:\/\/(.*)\/(.*)\//.exec(c);if(l){var f=l[1],p=l[2],s=_t["idb://".concat(f,"/").concat(p)];s&&go(s,e,r,t)}}r.forEach(function(y){return y()})}function go(e,t,r,o){for(var i=[],s=0,c=Object.entries(e.queries.query);s<c.length;s++){for(var l=c[s],f=l[0],p=l[1],y=[],h=0,O=p;h<O.length;h++){var K=O[h];xn(t,K.obsSet)?K.subscribers.forEach(function(I){return r.add(I)}):o&&y.push(K)}o&&i.push([f,y])}if(o)for(var m=0,b=i;m<b.length;m++){var P=b[m],f=P[0],y=P[1];e.queries.query[f]=y}}function Ca(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ke(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,i=Math.round(e.verno*10),s=!1;function c(){if(t.openCanceller!==o)throw new Q.DatabaseClosed("db.open() was cancelled")}var l=t.dbReadyResolve,f=null,p=!1,y=function(){return new q(function(h,O){if(c(),!r)throw new Q.MissingAPI;var K=e.name,m=t.autoSchema||!i?r.open(K):r.open(K,i);if(!m)throw new Q.MissingAPI;m.onerror=Xe(O),m.onblocked=be(e._fireOnBlocked),m.onupgradeneeded=be(function(b){if(f=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Zt,f.abort(),m.result.close();var P=r.deleteDatabase(K);P.onsuccess=P.onerror=be(function(){O(new Q.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{f.onerror=Xe(O);var I=b.oldVersion>Math.pow(2,62)?0:b.oldVersion;p=I<1,e.idbdb=m.result,s&&da(e,f),pa(e,I/10,f,O)}},O),m.onsuccess=be(function(){f=null;var b=e.idbdb=m.result,P=ee(b.objectStoreNames);if(P.length>0)try{var I=b.transaction(ia(P),"readonly");if(t.autoSchema)va(e,b,I);else if(Sr(e,e._dbSchema,I),!ga(e,I)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),b.close(),i=b.version+1,s=!0,h(y());_r(e,I)}catch{}Dt.push(e),b.onversionchange=be(function(T){t.vcFired=!0,e.on("versionchange").fire(T)}),b.onclose=be(function(T){e.on("close").fire(T)}),p&&xa(e._deps,K),h()},O)}).catch(function(h){switch(h?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),y();break;case"VersionError":if(i>0)return i=0,y();break}return q.reject(h)})};return q.race([o,(typeof navigator>"u"?q.resolve():Sa()).then(y)]).then(function(){return c(),t.onReadyBeingFired=[],q.resolve(bn(function(){return e.on.ready.fire(e.vip)})).then(function h(){if(t.onReadyBeingFired.length>0){var O=t.onReadyBeingFired.reduce(Hr,me);return t.onReadyBeingFired=[],q.resolve(bn(function(){return O(e.vip)})).then(h)}})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(h){t.dbOpenError=h;try{f&&f.abort()}catch{}return o===t.openCanceller&&e._close(),ke(h)}).finally(function(){t.openComplete=!0,l()}).then(function(){if(p){var h={};e.tables.forEach(function(O){O.schema.indexes.forEach(function(K){K.name&&(h["idb://".concat(e.name,"/").concat(O.name,"/").concat(K.name)]=new Te(-1/0,[[[]]]))}),h["idb://".concat(e.name,"/").concat(O.name,"/")]=h["idb://".concat(e.name,"/").concat(O.name,"/:dels")]=new Te(-1/0,[[[]]])}),lt(Gt).fire(h),Cn(h,!0)}return e})}function Pn(e){var t=function(c){return e.next(c)},r=function(c){return e.throw(c)},o=s(t),i=s(r);function s(c){return function(l){var f=c(l),p=f.value;return f.done?p:!p||typeof p.then!="function"?w(p)?Promise.all(p).then(o,i):o(p):p.then(o,i)}}return s(t)()}function Pa(e,t,r){var o=arguments.length;if(o<2)throw new Q.InvalidArgument("Too few arguments");for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];r=i.pop();var s=ae(i);return[e,s,r]}function bo(e,t,r,o,i){return q.resolve().then(function(){var s=Z.transless||Z,c=e._createTransaction(t,r,e._dbSchema,o);c.explicit=!0;var l={trans:c,transless:s};if(o)c.idbtrans=o.idbtrans;else try{c.create(),c.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(h){return h.name===Wr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return bo(e,t,r,null,i)})):ke(h)}var f=Qe(i);f&&Nt();var p,y=q.follow(function(){if(p=i.call(c,c),p)if(f){var h=st.bind(null,null);p.then(h,h)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=Pn(p))},l);return(p&&typeof p.then=="function"?q.resolve(p).then(function(h){return c.active?h:ke(new Q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):y.then(function(){return p})).then(function(h){return o&&c._resolve(),c._completion.then(function(){return h})}).catch(function(h){return c._reject(h),ke(h)})})}function Nr(e,t,r){for(var o=w(e)?e.slice():[e],i=0;i<r;++i)o.push(t);return o}function Oa(e){return d(d({},e),{table:function(t){var r=e.table(t),o=r.schema,i={},s=[];function c(b,P,I){var T=Yt(b),E=i[T]=i[T]||[],j=b==null?0:typeof b=="string"?1:b.length,N=P>0,z=d(d({},I),{name:N?"".concat(T,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:N,keyTail:P,keyLength:j,extractKey:dn(b),unique:!N&&I.unique});if(E.push(z),z.isPrimaryKey||s.push(z),j>1){var F=j===2?b[0]:b.slice(0,j-1);c(F,P+1,I)}return E.sort(function(L,Y){return L.keyTail-Y.keyTail}),z}var l=c(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[l];for(var f=0,p=o.indexes;f<p.length;f++){var y=p[f];c(y.keyPath,0,y)}function h(b){var P=i[Yt(b)];return P&&P[0]}function O(b,P){return{type:b.type===1?2:b.type,lower:Nr(b.lower,b.lowerOpen?e.MAX_KEY:e.MIN_KEY,P),lowerOpen:!0,upper:Nr(b.upper,b.upperOpen?e.MIN_KEY:e.MAX_KEY,P),upperOpen:!0}}function K(b){var P=b.query.index;return P.isVirtual?d(d({},b),{query:{index:P.lowLevelIndex,range:O(b.query.range,P.keyTail)}}):b}var m=d(d({},r),{schema:d(d({},o),{primaryKey:l,indexes:s,getIndexByKeyPath:h}),count:function(b){return r.count(K(b))},query:function(b){return r.query(K(b))},openCursor:function(b){var P=b.query.index,I=P.keyTail,T=P.isVirtual,E=P.keyLength;if(!T)return r.openCursor(b);function j(N){function z(L){L!=null?N.continue(Nr(L,b.reverse?e.MAX_KEY:e.MIN_KEY,I)):b.unique?N.continue(N.key.slice(0,E).concat(b.reverse?e.MIN_KEY:e.MAX_KEY,I)):N.continue()}var F=Object.create(N,{continue:{value:z},continuePrimaryKey:{value:function(L,Y){N.continuePrimaryKey(Nr(L,e.MAX_KEY,I),Y)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var L=N.key;return E===1?L[0]:L.slice(0,E)}},value:{get:function(){return N.value}}});return F}return r.openCursor(K(b)).then(function(N){return N&&j(N)})}});return m}})}var Na={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Oa};function On(e,t,r,o){return r=r||{},o=o||"",_(e).forEach(function(i){if(!S(t,i))r[o+i]=void 0;else{var s=e[i],c=t[i];if(typeof s=="object"&&typeof c=="object"&&s&&c){var l=et(s),f=et(c);l!==f?r[o+i]=t[i]:l==="Object"?On(s,c,r,o+i+"."):s!==c&&(r[o+i]=t[i])}else s!==c&&(r[o+i]=t[i])}}),_(t).forEach(function(i){S(e,i)||(r[o+i]=t[i])}),r}function Nn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Da={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return d(d({},e),{table:function(t){var r=e.table(t),o=r.schema.primaryKey,i=d(d({},r),{mutate:function(s){var c=Z.trans,l=c.table(t).hook,f=l.deleting,p=l.creating,y=l.updating;switch(s.type){case"add":if(p.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"put":if(p.fire===me&&y.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"delete":if(f.fire===me)break;return c._promise("readwrite",function(){return h(s)},!0);case"deleteRange":if(f.fire===me)break;return c._promise("readwrite",function(){return O(s)},!0)}return r.mutate(s);function h(m){var b=Z.trans,P=m.keys||Nn(o,m);if(!P)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?d(d({},m),{keys:P}):d({},m),m.type!=="delete"&&(m.values=k([],m.values,!0)),m.keys&&(m.keys=k([],m.keys,!0)),Ta(r,m,P).then(function(I){var T=P.map(function(E,j){var N=I[j],z={onerror:null,onsuccess:null};if(m.type==="delete")f.fire.call(z,E,N,b);else if(m.type==="add"||N===void 0){var F=p.fire.call(z,E,m.values[j],b);E==null&&F!=null&&(E=F,m.keys[j]=E,o.outbound||ne(m.values[j],o.keyPath,E))}else{var L=On(N,m.values[j]),Y=y.fire.call(z,L,E,N,b);if(Y){var oe=m.values[j];Object.keys(Y).forEach(function(W){S(oe,W)?oe[W]=Y[W]:ne(oe,W,Y[W])})}}return z});return r.mutate(m).then(function(E){for(var j=E.failures,N=E.results,z=E.numFailures,F=E.lastResult,L=0;L<P.length;++L){var Y=N?N[L]:P[L],oe=T[L];Y==null?oe.onerror&&oe.onerror(j[L]):oe.onsuccess&&oe.onsuccess(m.type==="put"&&I[L]?m.values[L]:Y)}return{failures:j,results:N,numFailures:z,lastResult:F}}).catch(function(E){return T.forEach(function(j){return j.onerror&&j.onerror(E)}),Promise.reject(E)})})}function O(m){return K(m.trans,m.range,1e4)}function K(m,b,P){return r.query({trans:m,values:!1,query:{index:o,range:b},limit:P}).then(function(I){var T=I.result;return h({type:"delete",keys:T,trans:m}).then(function(E){return E.numFailures>0?Promise.reject(E.failures[0]):T.length<P?{failures:[],numFailures:0,lastResult:void 0}:K(m,d(d({},b),{lower:T[T.length-1],lowerOpen:!0}),P)})})}}});return i}})}};function Ta(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function _o(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var o=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)ce(t.keys[i],e[s])===0&&(o.push(r?_e(t.values[i]):t.values[i]),++s);return o.length===e.length?o:null}catch{return null}}var Ea={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return d(d({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var i=_o(o.keys,o.trans._cache,o.cache==="clone");return i?q.resolve(i):r.getMany(o).then(function(s){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?_e(s):s},s})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function wo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function xo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Ia={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new Te(e.MIN_KEY,e.MAX_KEY);return d(d({},e),{transaction:function(o,i,s){if(Z.subscr&&i!=="readonly")throw new Q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Z.querier));return e.transaction(o,i,s)},table:function(o){var i=e.table(o),s=i.schema,c=s.primaryKey,l=s.indexes,f=c.extractKey,p=c.outbound,y=c.autoIncrement&&l.filter(function(m){return m.compound&&m.keyPath.includes(c.keyPath)}),h=d(d({},i),{mutate:function(m){var b,P,I=m.trans,T=m.mutatedParts||(m.mutatedParts={}),E=function(X){var ue="idb://".concat(t,"/").concat(o,"/").concat(X);return T[ue]||(T[ue]=new Te)},j=E(""),N=E(":dels"),z=m.type,F=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[Nn(c,m).filter(function(X){return X}),m.values]:[],L=F[0],Y=F[1],oe=m.trans._cache;if(w(L)){j.addKeys(L);var W=z==="delete"||L.length===Y.length?_o(L,oe):null;W||N.addKeys(L),(W||Y)&&Ra(E,s,W,Y)}else if(L){var re={from:(b=L.lower)!==null&&b!==void 0?b:e.MIN_KEY,to:(P=L.upper)!==null&&P!==void 0?P:e.MAX_KEY};N.add(re),j.add(re)}else j.add(r),N.add(r),s.indexes.forEach(function(X){return E(X.name).add(r)});return i.mutate(m).then(function(X){return L&&(m.type==="add"||m.type==="put")&&(j.addKeys(X.results),y&&y.forEach(function(ue){for(var G=m.values.map(function(Be){return ue.extractKey(Be)}),we=ue.keyPath.findIndex(function(Be){return Be===c.keyPath}),Ee=0,Je=X.results.length;Ee<Je;++Ee)G[Ee][we]=X.results[Ee];E(ue.name).addKeys(G)})),I.mutatedParts=Pr(I.mutatedParts||{},T),X})}}),O=function(m){var b,P,I=m.query,T=I.index,E=I.range;return[T,new Te((b=E.lower)!==null&&b!==void 0?b:e.MIN_KEY,(P=E.upper)!==null&&P!==void 0?P:e.MAX_KEY)]},K={get:function(m){return[c,new Te(m.key)]},getMany:function(m){return[c,new Te().addKeys(m.keys)]},count:O,query:O,openCursor:O};return _(K).forEach(function(m){h[m]=function(b){var P=Z.subscr,I=!!P,T=wo(Z,i)&&xo(m,b),E=T?b.obsSet={}:P;if(I){var j=function(W){var re="idb://".concat(t,"/").concat(o,"/").concat(W);return E[re]||(E[re]=new Te)},N=j(""),z=j(":dels"),F=K[m](b),L=F[0],Y=F[1];if(m==="query"&&L.isPrimaryKey&&!b.values?z.add(Y):j(L.name||"").add(Y),!L.isPrimaryKey)if(m==="count")z.add(r);else{var oe=m==="query"&&p&&b.values&&i.query(d(d({},b),{values:!1}));return i[m].apply(this,arguments).then(function(W){if(m==="query"){if(p&&b.values)return oe.then(function(G){var we=G.result;return N.addKeys(we),W});var re=b.values?W.result.map(f):W.result;b.values?N.addKeys(re):z.addKeys(re)}else if(m==="openCursor"){var X=W,ue=b.values;return X&&Object.create(X,{key:{get:function(){return z.addKey(X.primaryKey),X.key}},primaryKey:{get:function(){var G=X.primaryKey;return z.addKey(G),G}},value:{get:function(){return ue&&N.addKey(X.primaryKey),X.value}}})}return W})}}return i[m].apply(this,arguments)}}),h}})}};function Ra(e,t,r,o){function i(s){var c=e(s.name||"");function l(p){return p!=null?s.extractKey(p):null}var f=function(p){return s.multiEntry&&w(p)?p.forEach(function(y){return c.addKey(y)}):c.addKey(p)};(r||o).forEach(function(p,y){var h=r&&l(r[y]),O=o&&l(o[y]);ce(h,O)!==0&&(h!=null&&f(h),O!=null&&f(O))})}t.indexes.forEach(i)}function ko(e,t,r){if(r.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===o)return null;var i=d({},t);return w(i.keys)&&(i.keys=i.keys.filter(function(s,c){return!(c in r.failures)})),"values"in i&&w(i.values)&&(i.values=i.values.filter(function(s,c){return!(c in r.failures)})),i}function Aa(e,t){return t.lower===void 0?!0:t.lowerOpen?ce(e,t.lower)>0:ce(e,t.lower)>=0}function ja(e,t){return t.upper===void 0?!0:t.upperOpen?ce(e,t.upper)<0:ce(e,t.upper)<=0}function Dn(e,t){return Aa(e,t)&&ja(e,t)}function So(e,t,r,o,i,s){if(!r||r.length===0)return e;var c=t.query.index,l=c.multiEntry,f=t.query.range,p=o.schema.primaryKey,y=p.extractKey,h=c.extractKey,O=(c.lowLevelIndex||c).extractKey,K=r.reduce(function(m,b){var P=m,I=[];if(b.type==="add"||b.type==="put")for(var T=new Te,E=b.values.length-1;E>=0;--E){var j=b.values[E],N=y(j);if(!T.hasKey(N)){var z=h(j);(l&&w(z)?z.some(function(W){return Dn(W,f)}):Dn(z,f))&&(T.addKey(N),I.push(j))}}switch(b.type){case"add":{var F=new Te().addKeys(t.values?m.map(function(W){return y(W)}):m);P=m.concat(t.values?I.filter(function(W){var re=y(W);return F.hasKey(re)?!1:(F.addKey(re),!0)}):I.map(function(W){return y(W)}).filter(function(W){return F.hasKey(W)?!1:(F.addKey(W),!0)}));break}case"put":{var L=new Te().addKeys(b.values.map(function(W){return y(W)}));P=m.filter(function(W){return!L.hasKey(t.values?y(W):W)}).concat(t.values?I:I.map(function(W){return y(W)}));break}case"delete":var Y=new Te().addKeys(b.keys);P=m.filter(function(W){return!Y.hasKey(t.values?y(W):W)});break;case"deleteRange":var oe=b.range;P=m.filter(function(W){return!Dn(y(W),oe)});break}return P},e);return K===e?e:(K.sort(function(m,b){return ce(O(m),O(b))||ce(y(m),y(b))}),t.limit&&t.limit<1/0&&(K.length>t.limit?K.length=t.limit:e.length===t.limit&&K.length<t.limit&&(i.dirty=!0)),s?Object.freeze(K):K)}function Co(e,t){return ce(e.lower,t.lower)===0&&ce(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ma(e,t,r,o){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=ce(e,t);if(i===0){if(r&&o)return 0;if(r)return 1;if(o)return-1}return i}function Ka(e,t,r,o){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=ce(e,t);if(i===0){if(r&&o)return 0;if(r)return-1;if(o)return 1}return i}function Ba(e,t){return Ma(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Ka(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function za(e,t,r,o){var i=_t["idb://".concat(e,"/").concat(t)];if(!i)return[];var s=i.queries[r];if(!s)return[null,!1,i,null];var c=o.query?o.query.index.name:null,l=s[c||""];if(!l)return[null,!1,i,null];switch(r){case"query":var f=l.find(function(h){return h.req.limit===o.limit&&h.req.values===o.values&&Co(h.req.query.range,o.query.range)});if(f)return[f,!0,i,l];var p=l.find(function(h){var O="limit"in h.req?h.req.limit:1/0;return O>=o.limit&&(o.values?h.req.values:!0)&&Ba(h.req.query.range,o.query.range)});return[p,!1,i,l];case"count":var y=l.find(function(h){return Co(h.req.query.range,o.query.range)});return[y,!!y,i,l]}}function $a(e,t,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){e.subscribers.delete(r),e.subscribers.size===0&&La(e,t)})}function La(e,t){setTimeout(function(){e.subscribers.size===0&&je(t,e)},3e3)}var qa={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=d(d({},e),{transaction:function(o,i,s){var c=e.transaction(o,i,s);if(i==="readwrite"){var l=new AbortController,f=l.signal,p=function(y){return function(){if(l.abort(),i==="readwrite"){for(var h=new Set,O=0,K=o;O<K.length;O++){var m=K[O],b=_t["idb://".concat(t,"/").concat(m)];if(b){var P=e.table(m),I=b.optimisticOps.filter(function(ue){return ue.trans===c});if(c._explicit&&y&&c.mutatedParts)for(var T=0,E=Object.values(b.queries.query);T<E.length;T++)for(var j=E[T],N=0,z=j.slice();N<z.length;N++){var F=z[N];xn(F.obsSet,c.mutatedParts)&&(je(j,F),F.subscribers.forEach(function(ue){return h.add(ue)}))}else if(I.length>0){b.optimisticOps=b.optimisticOps.filter(function(ue){return ue.trans!==c});for(var L=0,Y=Object.values(b.queries.query);L<Y.length;L++)for(var j=Y[L],oe=0,W=j.slice();oe<W.length;oe++){var F=W[oe];if(F.res!=null&&c.mutatedParts)if(y&&!F.dirty){var re=Object.isFrozen(F.res),X=So(F.res,F.req,I,P,F,re);F.dirty?(je(j,F),F.subscribers.forEach(function(we){return h.add(we)})):X!==F.res&&(F.res=X,F.promise=q.resolve({result:X}))}else F.dirty&&je(j,F),F.subscribers.forEach(function(we){return h.add(we)})}}}}h.forEach(function(ue){return ue()})}}};c.addEventListener("abort",p(!1),{signal:f}),c.addEventListener("error",p(!1),{signal:f}),c.addEventListener("complete",p(!0),{signal:f})}return c},table:function(o){var i=e.table(o),s=i.schema.primaryKey,c=d(d({},i),{mutate:function(l){var f=Z.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return i.mutate(l);var p=_t["idb://".concat(t,"/").concat(o)];if(!p)return i.mutate(l);var y=i.mutate(l);return(l.type==="add"||l.type==="put")&&(l.values.length>=50||Nn(s,l).some(function(h){return h==null}))?y.then(function(h){var O=d(d({},l),{values:l.values.map(function(m,b){var P;if(h.failures[b])return m;var I=!((P=s.keyPath)===null||P===void 0)&&P.includes(".")?_e(m):d({},m);return ne(I,s.keyPath,h.results[b]),I})}),K=ko(p,O,h);p.optimisticOps.push(K),queueMicrotask(function(){return l.mutatedParts&&Or(l.mutatedParts)})}):(p.optimisticOps.push(l),l.mutatedParts&&Or(l.mutatedParts),y.then(function(h){if(h.numFailures>0){je(p.optimisticOps,l);var O=ko(p,l,h);O&&p.optimisticOps.push(O),l.mutatedParts&&Or(l.mutatedParts)}}),y.catch(function(){je(p.optimisticOps,l),l.mutatedParts&&Or(l.mutatedParts)})),y},query:function(l){var f;if(!wo(Z,i)||!xo("query",l))return i.query(l);var p=((f=Z.trans)===null||f===void 0?void 0:f.db._options.cache)==="immutable",y=Z,h=y.requery,O=y.signal,K=za(t,o,"query",l),m=K[0],b=K[1],P=K[2],I=K[3];if(m&&b)m.obsSet=l.obsSet;else{var T=i.query(l).then(function(E){var j=E.result;if(m&&(m.res=j),p){for(var N=0,z=j.length;N<z;++N)Object.freeze(j[N]);Object.freeze(j)}else E.result=_e(j);return E}).catch(function(E){return I&&m&&je(I,m),Promise.reject(E)});m={obsSet:l.obsSet,promise:T,subscribers:new Set,type:"query",req:l,dirty:!1},I?I.push(m):(I=[m],P||(P=_t["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),P.queries.query[l.query.index.name||""]=I)}return $a(m,I,h,O),m.promise.then(function(E){return{result:So(E.result,l,P?.optimisticOps,i,m,p)}})}});return c}});return r}};function Dr(e,t){return new Proxy(e,{get:function(r,o,i){return o==="db"?t:Reflect.get(r,o,i)}})}var rt=function(){function e(t,r){var o=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=r=d({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};c.dbReadyPromise=new q(function(f){c.dbReadyResolve=f}),c.openCanceller=new q(function(f,p){c.cancelOpen=p}),this._state=c,this.name=t,this.on=Ut(this,"populate","blocked","versionchange","close",{ready:[Hr,me]}),this.on.ready.subscribe=J(this.on.ready.subscribe,function(f){return function(p,y){e.vip(function(){var h=o._state;if(h.openComplete)h.dbOpenError||q.resolve().then(p),y&&f(p);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(p),y&&f(p);else{f(p);var O=o;y||f(function K(){O.on.ready.unsubscribe(p),O.on.ready.unsubscribe(K)})}})}}),this.Collection=Yi(this),this.Table=Zi(this),this.Transaction=oa(this),this.Version=_a(this),this.WhereClause=ra(this),this.on("versionchange",function(f){f.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(f){!f.newVersion||f.newVersion<f.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(f.oldVersion/10))}),this._maxKey=Qt(r.IDBKeyRange),this._createTransaction=function(f,p,y,h){return new o.Transaction(f,p,y,o._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(f){o.on("blocked").fire(f),Dt.filter(function(p){return p.name===o.name&&p!==o&&!p._state.vcFired}).map(function(p){return p.on("versionchange").fire(f)})},this.use(Ea),this.use(qa),this.use(Ia),this.use(Na),this.use(Da);var l=new Proxy(this,{get:function(f,p,y){if(p==="_vip")return!0;if(p==="table")return function(O){return Dr(o.table(O),l)};var h=Reflect.get(f,p,y);return h instanceof io?Dr(h,l):p==="tables"?h.map(function(O){return Dr(O,l)}):p==="_createTransaction"?function(){var O=h.apply(this,arguments);return Dr(O,l)}:h}});this.vip=l,s.forEach(function(f){return f(o)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Q.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new Q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,o=r.filter(function(i){return i._cfg.version===t})[0];return o||(o=new this.Version(t),r.push(o),r.sort(fa),o.stores({}),this._state.autoSchema=!1,o)},e.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||Z.letThrough||this._vip)?t():new q(function(o,i){if(r._state.openComplete)return i(new Q.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){i(new Q.DatabaseClosed);return}r.open().catch(me)}r._state.dbReadyPromise.then(o,i)}).then(t)},e.prototype.use=function(t){var r=t.stack,o=t.create,i=t.level,s=t.name;s&&this.unuse({stack:r,name:s});var c=this._middlewares[r]||(this._middlewares[r]=[]);return c.push({stack:r,create:o,level:i??10,name:s}),c.sort(function(l,f){return l.level-f.level}),this},e.prototype.unuse=function(t){var r=t.stack,o=t.name,i=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(s){return i?s.create!==i:o?s.name!==o:!1})),this},e.prototype.open=function(){var t=this;return vt(it,function(){return Ca(t)})},e.prototype._close=function(){var t=this._state,r=Dt.indexOf(this);if(r>=0&&Dt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new q(function(o){t.dbReadyResolve=o}),t.openCanceller=new q(function(o,i){t.cancelOpen=i}))},e.prototype.close=function(t){var r=t===void 0?{disableAutoOpen:!0}:t,o=r.disableAutoOpen,i=this._state;o?(i.isBeingOpened&&i.cancelOpen(new Q.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new Q.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new q(function(s,c){var l=function(){r.close(t);var f=r._deps.indexedDB.deleteDatabase(r.name);f.onsuccess=be(function(){ka(r._deps,r.name),s()}),f.onerror=Xe(c),f.onblocked=r._fireOnBlocked};if(o)throw new Q.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(l):l()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return _(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Pa.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,r,o){var i=this,s=Z.trans;(!s||s.db!==this||t.indexOf("!")!==-1)&&(s=null);var c=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var l,f;try{if(f=r.map(function(y){var h=y instanceof i.Table?y.name:y;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),t=="r"||t===on)l=on;else if(t=="rw"||t==an)l=an;else throw new Q.InvalidArgument("Invalid transaction mode: "+t);if(s){if(s.mode===on&&l===an)if(c)s=null;else throw new Q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&f.forEach(function(y){if(s&&s.storeNames.indexOf(y)===-1)if(c)s=null;else throw new Q.SubTransaction("Table "+y+" not included in parent transaction.")}),c&&s&&!s.active&&(s=null)}}catch(y){return s?s._promise(null,function(h,O){O(y)}):ke(y)}var p=bo.bind(null,this,l,f,s,o);return s?s._promise(l,p,"lock"):Z.trans?vt(Z.transless,function(){return i._whenReady(p)}):this._whenReady(p)},e.prototype.table=function(t){if(!S(this._allTables,t))throw new Q.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),Fa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ua=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,r,o){return this._subscribe(!t||typeof t=="function"?{next:t,error:r,complete:o}:t)},e.prototype[Fa]=function(){return this},e}(),Tr;try{Tr={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Tr={indexedDB:null,IDBKeyRange:null}}function Po(e){var t=!1,r,o=new Ua(function(i){var s=Qe(e);function c(I){var T=Pt();try{s&&Nt();var E=at(e,I);return s&&(E=E.finally(st)),E}finally{T&&Ot()}}var l=!1,f,p={},y={},h={get closed(){return l},unsubscribe:function(){l||(l=!0,f&&f.abort(),O&&lt.storagemutated.unsubscribe(b))}};i.start&&i.start(h);var O=!1,K=function(){return tn(P)};function m(){return xn(y,p)}var b=function(I){Pr(p,I),m()&&K()},P=function(){if(!(l||!Tr.indexedDB)){p={};var I={};f&&f.abort(),f=new AbortController;var T={subscr:I,signal:f.signal,requery:K,querier:e,trans:null},E=c(T);Promise.resolve(E).then(function(j){t=!0,r=j,!(l||T.signal.aborted)&&(p={},y=I,!ge(y)&&!O&&(lt(Gt,b),O=!0),tn(function(){return!l&&i.next&&i.next(j)}))},function(j){t=!1,["DatabaseClosedError","AbortError"].includes(j?.name)||l||tn(function(){l||i.error&&i.error(j)})})}};return setTimeout(K,0),h});return o.hasValue=function(){return t},o.getValue=function(){return r},o}var wt=rt;M(wt,d(d({},ar),{delete:function(e){var t=new wt(e,{addons:[]});return t.delete()},exists:function(e){return new wt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return wa(wt.dependencies).then(e)}catch{return ke(new Q.MissingAPI)}},defineClass:function(){function e(t){x(this,t)}return e},ignoreTransaction:function(e){return Z.trans?vt(Z.transless,e):e()},vip:bn,async:function(e){return function(){try{var t=Pn(e.apply(this,arguments));return!t||typeof t.then!="function"?q.resolve(t):t}catch(r){return ke(r)}}},spawn:function(e,t,r){try{var o=Pn(e.apply(r,t||[]));return!o||typeof o.then!="function"?q.resolve(o):o}catch(i){return ke(i)}},currentTransaction:{get:function(){return Z.trans||null}},waitFor:function(e,t){var r=q.resolve(typeof e=="function"?wt.ignoreTransaction(e):e).timeout(t||6e4);return Z.trans?Z.trans.waitFor(r):r},Promise:q,debug:{get:function(){return Ye},set:function(e){Un(e)}},derive:U,extend:x,props:M,override:J,Events:Ut,on:lt,liveQuery:Po,extendObservabilitySet:Pr,getByKeyPath:ie,setByKeyPath:ne,delByKeyPath:he,shallowClone:de,deepClone:_e,getObjectDiff:On,cmp:ce,asap:pe,minKey:nn,addons:[],connections:Dt,errnames:Wr,dependencies:Tr,cache:_t,semVer:Vn,version:Vn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,r*2)})})),wt.maxKey=Qt(wt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(lt(Gt,function(e){if(!ft){var t;t=new CustomEvent(ln,{detail:e}),ft=!0,dispatchEvent(t),ft=!1}}),addEventListener(ln,function(e){var t=e.detail;ft||Tn(t)}));function Tn(e){var t=ft;try{ft=!0,lt.storagemutated.fire(e),Cn(e,!0)}finally{ft=t}}var ft=!1,It,En=function(){};typeof BroadcastChannel<"u"&&(En=function(){It=new BroadcastChannel(ln),It.onmessage=function(e){return e.data&&Tn(e.data)}},En(),typeof It.unref=="function"&&It.unref(),lt(Gt,function(e){ft||It.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!rt.disableBfCache&&e.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),It?.close();for(var t=0,r=Dt;t<r.length;t++){var o=r[t];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!rt.disableBfCache&&e.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),En(),Tn({all:new Te(-1/0,[[]])}))}));function Wa(e){return new Ht({add:e})}function Ha(e){return new Ht({remove:e})}function Za(e,t){return new Ht({replacePrefix:[e,t]})}q.rejectionMapper=Oi,Un(Ye);var Ga=Object.freeze({__proto__:null,Dexie:rt,liveQuery:Po,Entity:ro,cmp:ce,PropModification:Ht,replacePrefix:Za,add:Wa,remove:Ha,default:rt,RangeSet:Te,mergeRanges:Jt,rangesOverlap:mo});return d(rt,Ga,{default:rt}),rt})}),$n=pc(dc(),1),$o=Symbol.for("Dexie"),Br=globalThis[$o]||(globalThis[$o]=$n.default);if($n.default.semVer!==Br.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$n.default.semVer} and ${Br.semVer}`);var{liveQuery:hu,mergeRanges:mu,rangesOverlap:yu,RangeSet:vu,cmp:gu,Entity:bu,PropModification:_u,replacePrefix:wu,add:xu,remove:ku}=Br,Ln=Br;Ae();var hc=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function qo(){return(await hc.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var mc=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Fo(u){return{items:(await mc.getContents(u,{offset:0,limit:-1})).items}}async function Uo(u){let n=new Map,a=Array.from(u).map(async g=>{let k=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:g,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(k)for(let v of k){let _=v?.track?.uri;_&&n.set(_,v.track)}});return await Promise.all(a),n}async function Wo(u){let n=new Map,a=new Map;for(let k of u)if(k){let v=Spicetify.URI.fromString(k).id;v&&a.set(k,v)}let g=50,d=Array.from(a.values()).reduce((k,v,_)=>{let w=Math.floor(_/g);return k[w]=k[w]||[],k[w].push(v),k},[]).map(async k=>{let v=`https://api.spotify.com/v1/tracks?ids=${k.join(",")}`,_=await Spicetify.CosmosAsync.get(v);if(_?.tracks)for(let w of _.tracks){let x=w?.uri;x&&n.set(x,w)}});return await Promise.all(d),n}Ae();var Ho=webpackChunkclient_web.push([[Symbol()],{},u=>u]),yc=Object.entries(Ho.m),vc=yc.filter(([u,n])=>typeof n=="function"&&n.toString().includes("main-confirmDialog-container")),gc=vc.flatMap(([u])=>Object.values(Ho(u)))[0];Spicetify.ReactComponent.ConfirmDialog=gc;function zr({titleText:u,descriptionText:n,cancelText:a="Cancel",confirmText:g="Confirm",onConfirm:d,onClose:k,onOpen:v,onOutside:_,allowHTML:w,confirmLabel:x,shouldCloseOnEsc:D,shouldCloseOnOverlayClick:R,shouldFocusAfterRender:S,width:M}){let B=document.createElement("div");document.body.appendChild(B);let C=Kr(B),U=()=>{let[H,$]=Pe(!0),V=qe(null);ze(()=>{v?.()},[v]),ze(()=>{if(H)return;let J=()=>{C.unmount(),B.remove()},le=V.current;if(le)return le.addEventListener("animationend",J,{once:!0}),()=>{le.removeEventListener("animationend",J)};J()},[H]);let ee=J=>()=>{J?.(),$(!1)};return A(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:w,cancelText:a,confirmLabel:x,confirmText:g,descriptionText:n,isOpen:H,onClose:ee(k),onConfirm:ee(d),onOutside:ee(_),ref:V,shouldCloseOnEsc:D,shouldCloseOnOverlayClick:R,shouldFocusAfterRender:S,titleText:u,width:M})};C.render(A(U,{}))}var Qo=He(Fe());Ae();var Zo=new CSSStyleSheet;Zo.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var Go=Zo;document.adoptedStyleSheets.push(Go);var $r=ve(u=>{let n=(0,Qo.c)(43),{value:a,options:g,onChange:d,disabled:k}=u,v=An(),_=qe(null),w=`--dropdown-anchor-${v.replace(/:/g,"id")}`,x,D,R,S,M,B,C,U,H;if(n[0]!==w||n[1]!==k||n[2]!==d||n[3]!==g||n[4]!==v||n[5]!==a){let ee=se=>{d?.(se.value),_.current?.hidePopover()},J;n[15]!==g||n[16]!==a?(J=g.find(se=>se.value===a)?.label||"Select...",n[15]=g,n[16]=a,n[17]=J):J=n[17];let le=J;C="dropdown",U=k;let pe;n[18]!==w?(pe={anchorName:w},n[18]=w,n[19]=pe):pe=n[19];let fe;n[20]!==le?(fe=A("div",{className:"dropdown__text",children:le}),n[20]=le,n[21]=fe):fe=n[21];let ie;n[22]===Symbol.for("react.memo_cache_sentinel")?(ie=A("div",{className:"dropdown__arrow",children:A(Ie.React.dropdown,{size:12})}),n[22]=ie):ie=n[22],n[23]!==v||n[24]!==pe||n[25]!==fe?(H=te("button",{className:"dropdown__button",popoverTarget:v,popoverTargetAction:"toggle",style:pe,children:[fe,ie]}),n[23]=v,n[24]=pe,n[25]=fe,n[26]=H):H=n[26],x="dropdown__menu",D=v,R="auto",S=_;let ne=`calc(anchor(${w} bottom) + 4px)`,he=`anchor(${w} left)`,de=`anchor-size(${w} width)`;n[27]!==ne||n[28]!==he||n[29]!==de?(M={top:ne,left:he,width:de},n[27]=ne,n[28]=he,n[29]=de,n[30]=M):M=n[30],B=g.map(se=>A("div",{className:`dropdown__option${a===se.value?" dropdown__option--selected":""}`,onClick:()=>ee(se),onKeyDown:ae=>ae.key==="Enter"&&ee(se),role:"option",tabIndex:0,children:se.label},se.value)),n[0]=w,n[1]=k,n[2]=d,n[3]=g,n[4]=v,n[5]=a,n[6]=x,n[7]=D,n[8]=R,n[9]=S,n[10]=M,n[11]=B,n[12]=C,n[13]=U,n[14]=H}else x=n[6],D=n[7],R=n[8],S=n[9],M=n[10],B=n[11],C=n[12],U=n[13],H=n[14];let $;n[31]!==x||n[32]!==D||n[33]!==R||n[34]!==S||n[35]!==M||n[36]!==B?($=A("div",{className:x,id:D,popover:R,ref:S,style:M,children:B}),n[31]=x,n[32]=D,n[33]=R,n[34]=S,n[35]=M,n[36]=B,n[37]=$):$=n[37];let V;return n[38]!==$||n[39]!==C||n[40]!==U||n[41]!==H?(V=te("div",{className:C,disabled:U,children:[H,$]}),n[38]=$,n[39]=C,n[40]=U,n[41]=H,n[42]=V):V=n[42],V});var Jo=He(Fe());Ae();var Yo=new CSSStyleSheet;Yo.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Xo=Yo;document.adoptedStyleSheets.push(Xo);var Lr=ve(u=>{let n=(0,Jo.c)(28),{value:a,min:g,max:d,step:k,defaultValue:v,onChange:_,onRelease:w,disabled:x}=u,D=g===void 0?0:g,R=d===void 0?100:d,S=k===void 0?1:k,M=qe(null),B=qe(!1),C=a!==void 0?a:v,U=R>D&&C!==void 0?(C-D)/(R-D)*100:0,H;n[0]!==x||n[1]!==R||n[2]!==D||n[3]!==_||n[4]!==S?(H=xe=>{if(!M.current||x)return;let ye=M.current.getBoundingClientRect(),ge=xe.clientX,_e=Math.max(0,Math.min(ge-ye.left,ye.width))/ye.width*(R-D)+D;_e=Math.round(_e/S)*S,_e=Math.max(D,Math.min(_e,R)),_(_e)},n[0]=x,n[1]=R,n[2]=D,n[3]=_,n[4]=S,n[5]=H):H=n[5];let $=H,V;n[6]!==x||n[7]!==$?(V=xe=>{x||!M.current||(B.current=!0,M.current.setPointerCapture(xe.pointerId),$(xe.nativeEvent))},n[6]=x,n[7]=$,n[8]=V):V=n[8];let ee=V,J;n[9]!==$?(J=xe=>{B.current&&$(xe.nativeEvent)},n[9]=$,n[10]=J):J=n[10];let le=J,pe;n[11]!==w?(pe=xe=>{!B.current||!M.current||(B.current=!1,M.current.releasePointerCapture(xe.pointerId),w?.())},n[11]=w,n[12]=pe):pe=n[12];let fe=pe,ie=`${U}%`,ne;n[13]!==ie?(ne=A("div",{className:"slider__fill",style:{width:ie}}),n[13]=ie,n[14]=ne):ne=n[14];let he=`${U}%`,de;n[15]!==he?(de=A("div",{className:"slider__thumb",style:{left:he}}),n[15]=he,n[16]=de):de=n[16];let se;n[17]!==de||n[18]!==ne?(se=te("div",{className:"slider__track",children:[ne,de]}),n[17]=de,n[18]=ne,n[19]=se):se=n[19];let ae;n[20]!==ee||n[21]!==le||n[22]!==fe||n[23]!==se?(ae=A("div",{className:"slider-container",onPointerCancel:fe,onPointerDown:ee,onPointerMove:le,onPointerUp:fe,ref:M,children:se}),n[20]=ee,n[21]=le,n[22]=fe,n[23]=se,n[24]=ae):ae=n[24];let Ne;return n[25]!==x||n[26]!==ae?(Ne=A("div",{className:"slider",disabled:x,children:ae}),n[25]=x,n[26]=ae,n[27]=Ne):Ne=n[27],Ne});Ae();var qr=0,or=null,bc=()=>{or||(or=setInterval(()=>{let u=Spicetify.Platform.PlayerAPI._state;Spicetify.Platform.PlayerAPI._events.emit("progress",u)},100))},_c=()=>{or&&(clearInterval(or),or=null)},Vo=(u,n)=>{let[a,g]=Pe(Spicetify.Platform.PlayerAPI._state),[d,k]=Pe(0),[v,_]=Pe(n),w=qe(!1),x=qe(0),D=Rt((C,U=!1)=>{if(g(C),C.item?.uri===u){if(!U&&x.current!==0&&C.positionAsOfTimestamp<500&&(Spicetify.Platform.PlayerAPI.seekTo(x.current),x.current=0),!w.current){let $=U&&!C.isPaused?C.positionAsOfTimestamp+(Date.now()-C.timestamp):C.positionAsOfTimestamp;k(Math.min($,C.duration))}_(C.duration)}else k(0),_(n)},[u,n]);ze(()=>{qr===0&&bc(),qr++;let C=Spicetify.Platform.PlayerAPI._state;D(C);let U=$=>D($.data),H=$=>D($.data,!0);return Spicetify.Platform.PlayerAPI._events.addListener("update",U,{}),Spicetify.Platform.PlayerAPI._events.addListener("progress",H,{}),()=>{qr--,qr===0&&_c(),Spicetify.Platform.PlayerAPI._events.removeListener("update",U,{}),Spicetify.Platform.PlayerAPI._events.removeListener("progress",H,{})}},[D]);let R=Rt(()=>{a.item?.uri===u?a.isPaused?Spicetify.Platform.PlayerAPI.resume({}):Spicetify.Platform.PlayerAPI.pause({}):Spicetify.Platform.PlayerAPI.play({uri:u},{})},[a,u]),S=Rt(C=>{w.current=!0,k(C),x.current=C},[]),M=Rt(()=>{w.current&&(a.item?.uri===u?Spicetify.Platform.PlayerAPI.seekTo(d):Spicetify.Platform.PlayerAPI.play({uri:u},{}),w.current=!1)},[d,u,a]),B=jn(()=>!a.isPaused&&a.item?.uri===u,[a,u]);return{position:d,duration:v,isCurrentlyPlayingThisTrack:B,togglePlay:R,handleSliderChange:S,handleSliderRelease:M}};var vi=He(Fe());Ae();var ri=He(Fe());Ae();var ei=new CSSStyleSheet;ei.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var ti=ei;document.adoptedStyleSheets.push(ti);var Fr=ve(u=>{let n=(0,ri.c)(7),{value:a,onChange:g,placeholder:d,disabled:k}=u,v=k===void 0?!1:k,_;n[0]!==g?(_=D=>{g(D.target.value)},n[0]=g,n[1]=_):_=n[1];let w=_,x;return n[2]!==v||n[3]!==w||n[4]!==d||n[5]!==a?(x=A("input",{className:"input",disabled:v,onChange:w,placeholder:d,type:"text",value:a}),n[2]=v,n[3]=w,n[4]=d,n[5]=a,n[6]=x):x=n[6],x});var mi=He(Fe());Ae();var ni=new CSSStyleSheet;ni.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var oi=ni;var ui=He(Fe());Ae();var si=He(Fe());Ae();var ii=new CSSStyleSheet;ii.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var ai=ii;document.adoptedStyleSheets.push(ai);var ci=ve(u=>{let n=(0,si.c)(10),{value:a,onChange:g,disabled:d}=u,k;n[0]!==d||n[1]!==g||n[2]!==a?(k=()=>{d||g(!a)},n[0]=d,n[1]=g,n[2]=a,n[3]=k):k=n[3];let v=k,_=`toggle__slider${a?" toggle__slider--enabled":""}${d?" toggle__slider--disabled":""}`,w;n[4]!==_?(w=A("span",{className:"toggle__background",children:A("span",{className:_})}),n[4]=_,n[5]=w):w=n[5];let x;return n[6]!==d||n[7]!==v||n[8]!==w?(x=A("button",{className:"toggle",disabled:d,onClick:v,role:"switch",children:w}),n[6]=d,n[7]=v,n[8]=w,n[9]=x):x=n[9],x});var li=ve(u=>{let n=(0,ui.c)(23),{option:a,value:g,onChange:d,disabled:k}=u;switch(a.type){case"toggle":{let v=g,_;return n[0]!==k||n[1]!==d||n[2]!==v?(_=A(ci,{disabled:k,onChange:d,value:v}),n[0]=k,n[1]=d,n[2]=v,n[3]=_):_=n[3],_}case"input":{let v=g,_;return n[4]!==k||n[5]!==d||n[6]!==a.placeholder||n[7]!==v?(_=A(Fr,{disabled:k,onChange:d,placeholder:a.placeholder,value:v}),n[4]=k,n[5]=d,n[6]=a.placeholder,n[7]=v,n[8]=_):_=n[8],_}case"dropdown":{let v;n[9]!==a.options?(v=a.options||[],n[9]=a.options,n[10]=v):v=n[10];let _=g,w;return n[11]!==k||n[12]!==d||n[13]!==v||n[14]!==_?(w=A($r,{disabled:k,onChange:d,options:v,value:_}),n[11]=k,n[12]=d,n[13]=v,n[14]=_,n[15]=w):w=n[15],w}case"slider":{let v=g,_;return n[16]!==k||n[17]!==d||n[18]!==a.max||n[19]!==a.min||n[20]!==a.step||n[21]!==v?(_=A(Lr,{disabled:k,max:a.max,min:a.min,onChange:d,step:a.step,value:v}),n[16]=k,n[17]=d,n[18]=a.max,n[19]=a.min,n[20]=a.step,n[21]=v,n[22]=_):_=n[22],_}default:return console.warn(`Unknown option type for option "${a.name||"N/A"}"`),null}});var fi=He(Fe());Ae();var pi=ve(u=>{let n=(0,fi.c)(6),{name:a,popupModal:g}=u,d;n[0]!==g||n[1]!==a?(d=()=>nr({title:a,content:A(g,{}),isLarge:!1}),n[0]=g,n[1]=a,n[2]=d):d=n[2];let k;n[3]===Symbol.for("react.memo_cache_sentinel")?(k=A(Ie.React.editButton,{size:16}),n[3]=k):k=n[3];let v;return n[4]!==d?(v=A("button",{className:"popup-button",onClick:d,children:k}),n[4]=d,n[5]=v):v=n[5],v});var di=He(Fe());Ae();var hi=ve(u=>{let n=(0,di.c)(3),{tippy:a}=u,g;n[0]===Symbol.for("react.memo_cache_sentinel")?(g=A("div",{className:"info-tippy",children:A(Ie.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),n[0]=g):g=n[0];let d;return n[1]!==a?(d=A(Spicetify.ReactComponent.TooltipWrapper,{label:a,placement:"top",showDelay:0,children:g}),n[1]=a,n[2]=d):d=n[2],d});document.adoptedStyleSheets.push(oi);var yi=ve(u=>{let n=(0,mi.c)(21),{name:a,desc:g,tippy:d,popupModal:k,option:v,value:_,onChange:w,disabled:x}=u,D;n[0]!==g?(D=A("div",{className:"option__desc",children:g}),n[0]=g,n[1]=D):D=n[1];let R;n[2]!==d?(R=d&&A(hi,{tippy:d}),n[2]=d,n[3]=R):R=n[3];let S;n[4]!==D||n[5]!==R?(S=te("div",{className:"option__content",children:[D,R]}),n[4]=D,n[5]=R,n[6]=S):S=n[6];let M;n[7]!==a||n[8]!==k?(M=k&&A(pi,{name:a,popupModal:k}),n[7]=a,n[8]=k,n[9]=M):M=n[9];let B;n[10]!==x||n[11]!==w||n[12]!==v||n[13]!==_?(B=v&&A(li,{disabled:x,onChange:w||wc,option:v,value:_}),n[10]=x,n[11]=w,n[12]=v,n[13]=_,n[14]=B):B=n[14];let C;n[15]!==M||n[16]!==B?(C=te("div",{className:"option__control",children:[M,B]}),n[15]=M,n[16]=B,n[17]=C):C=n[17];let U;return n[18]!==S||n[19]!==C?(U=te("div",{className:"option__row",children:[S,C]}),n[18]=S,n[19]=C,n[20]=U):U=n[20],U});function wc(){}var gi=["live","remix","mix","acoustic","instrumental","radio","version","ver","edit","mono","stereo","deluxe","intro","outro","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],bi="findDupeTracks",xc="findDupeTracks:settingsChanged",Kt={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0},defaultNormalizeWords:[...gi],customNormalizeWords:[]},_i=()=>{let u=localStorage.getItem(bi);if(u){let n=JSON.parse(u);n.defaultNormalizeWords||(n.defaultNormalizeWords=[...gi]);let a={...Kt,...n};return a.groupSettings={...Kt.groupSettings,...n.groupSettings||{}},a.confirmSettings={...Kt.confirmSettings,...n.confirmSettings||{}},a}return JSON.parse(JSON.stringify(Kt))},kc=u=>{localStorage.setItem(bi,JSON.stringify(u)),window.dispatchEvent(new CustomEvent(xc))},Ur=()=>_i(),Sc=()=>{let u=(0,vi.c)(43),n;u[0]===Symbol.for("react.memo_cache_sentinel")?(n=_i(),u[0]=n):n=u[0];let[a,g]=Pe(n),[d,k]=Pe(""),v,_;u[1]!==a?(v=()=>{kc(a)},_=[a],u[1]=a,u[2]=v,u[3]=_):(v=u[2],_=u[3]),ze(v,_);let w;u[4]!==a?(w=(ye,ge,Se)=>te("section",{className:"duplicate-settings__section",children:[A("h3",{className:"duplicate-settings__section-title",children:ye}),A("div",{className:"duplicate-settings__options",children:Object.entries(Se).map(_e=>{let[Re,nt]=_e,et={type:"toggle",name:`${Re}-${ge}`,desc:nt,defaultVal:Kt[ge][Re]};return A(yi,{desc:nt,name:`${Re}-${ge}`,onChange:Ue=>g(Ze=>({...Ze,[ge]:{...Ze[ge],[Re]:Ue}})),option:et,value:a[ge][Re]},Re)})})]}),u[4]=a,u[5]=w):w=u[5];let x=w,D;u[6]!==d||u[7]!==a.customNormalizeWords||u[8]!==a.defaultNormalizeWords?(D=()=>{let ye=d.trim().toLowerCase();ye&&((a.customNormalizeWords||[]).includes(ye)||(a.defaultNormalizeWords||[]).includes(ye)||(g(ge=>({...ge,customNormalizeWords:[...ge.customNormalizeWords||[],ye]})),k("")))},u[6]=d,u[7]=a.customNormalizeWords,u[8]=a.defaultNormalizeWords,u[9]=D):D=u[9];let R=D,S;u[10]===Symbol.for("react.memo_cache_sentinel")?(S=(ye,ge)=>{g(Se=>ge?{...Se,defaultNormalizeWords:(Se.defaultNormalizeWords||[]).filter(_e=>_e!==ye)}:{...Se,customNormalizeWords:(Se.customNormalizeWords||[]).filter(_e=>_e!==ye)})},u[10]=S):S=u[10];let M=S,B;u[11]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{zr({titleText:"Are you sure?",descriptionText:"This will reset all settings to default!",confirmText:"Reset",onConfirm:()=>g(JSON.parse(JSON.stringify(Kt)))})},u[11]=B):B=u[11];let C=B,U;u[12]!==a.customNormalizeWords||u[13]!==a.defaultNormalizeWords?(U=[...(a.defaultNormalizeWords||[]).map(Cc),...(a.customNormalizeWords||[]).map(Pc)],u[12]=a.customNormalizeWords,u[13]=a.defaultNormalizeWords,u[14]=U):U=u[14];let H=U,$,V;u[15]!==x?($=x("Duplicate Groups to Display","groupSettings",{exact:"Exact Duplicates (Same URI)",isrc:"ISRC Duplicates (Same Recording)",probable:"Probable Duplicates (Same Name + Artist)",likely:"Likely Duplicates (Same Name)",possible:"Possible Duplicates (Similar Name)"}),V=x("Confirm Before Deleting","confirmSettings",{exact:"Exact Duplicates",isrc:"ISRC Duplicates",probable:"Probable Duplicates",likely:"Likely Duplicates",possible:"Possible Duplicates"}),u[15]=x,u[16]=$,u[17]=V):($=u[16],V=u[17]);let ee,J;u[18]===Symbol.for("react.memo_cache_sentinel")?(ee=A("h3",{className:"duplicate-settings__section-title",children:"Normalization Words"}),J=A("p",{className:"duplicate-settings__description",children:"Add or remove words to be ignored when comparing track names for similarity."}),u[18]=ee,u[19]=J):(ee=u[18],J=u[19]);let le;u[20]===Symbol.for("react.memo_cache_sentinel")?(le=A("div",{className:"option__content",children:A("div",{className:"option__desc",children:"Add a word to normalization list"})}),u[20]=le):le=u[20];let pe;u[21]===Symbol.for("react.memo_cache_sentinel")?(pe=ye=>k(ye),u[21]=pe):pe=u[21];let fe;u[22]!==d?(fe=A(Fr,{disabled:!1,onChange:pe,placeholder:"Enter word to normalize",value:d}),u[22]=d,u[23]=fe):fe=u[23];let ie;u[24]!==R?(ie=ye=>ye.key==="Enter"&&R(),u[24]=R,u[25]=ie):ie=u[25];let ne;u[26]===Symbol.for("react.memo_cache_sentinel")?(ne={marginLeft:8},u[26]=ne):ne=u[26];let he;u[27]!==R||u[28]!==ie?(he=A("button",{onClick:R,onKeyDown:ie,style:ne,type:"button",children:"Add"}),u[27]=R,u[28]=ie,u[29]=he):he=u[29];let de;u[30]!==fe||u[31]!==he?(de=te("div",{className:"option__row",children:[le,te("div",{className:"option__control",children:[fe,he]})]}),u[30]=fe,u[31]=he,u[32]=de):de=u[32];let se;u[33]!==H?(se=A("div",{className:"duplicate-settings__words-list",children:H.length>0?A("div",{className:"duplicate-settings__words-ul",children:H.map(ye=>{let{word:ge,isDefault:Se}=ye;return te("div",{className:"duplicate-settings__word-item",children:[ge,A("button",{className:"duplicate-settings__word-remove",onClick:()=>M(ge,Se),type:"button",children:"Remove"})]},ge)})}):A("p",{className:"duplicate-settings__no-words",children:"No normalization words"})}),u[33]=H,u[34]=se):se=u[34];let ae;u[35]!==de||u[36]!==se?(ae=te("section",{className:"duplicate-settings__section",children:[ee,J,de,se]}),u[35]=de,u[36]=se,u[37]=ae):ae=u[37];let Ne;u[38]===Symbol.for("react.memo_cache_sentinel")?(Ne=A("div",{className:"duplicate-settings__actions",children:A("button",{className:"duplicate-settings__reset",onClick:C,type:"button",children:"Reset to Defaults"})}),u[38]=Ne):Ne=u[38];let xe;return u[39]!==ae||u[40]!==$||u[41]!==V?(xe=te("div",{className:"duplicate-settings",children:[$,V,ae,Ne]}),u[39]=ae,u[40]=$,u[41]=V,u[42]=xe):xe=u[42],xe},wi=Sc;function Cc(u){return{word:u,isDefault:!0}}function Pc(u){return{word:u,isDefault:!1}}var qn=class extends Ln{constructor(){super("findDupeTracks"),this.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, albumUri, trackPlayCount, trackIsrc, ignoreDuplicates"})}},Bt=new qn;async function Oc(){return(await qo()).filter(n=>n.type==="playlist"&&!!n.canAddTo)}async function Nc(u){let a=(await Fo(u)).items,g=a.map(_=>_.uri),d=await Bt.tracks.bulkGet(g),k=new Map(d.filter(_=>!!_).map(_=>[_.trackUri,_])),v=a.flatMap(_=>{let w=k.get(_.uri);return!w||w.trackName!==_.name||w.albumUri!==_.album.uri?[{trackUri:_.uri,trackName:_.name,albumUri:_.album.uri,trackDuration:w?.trackDuration??null,trackPlayCount:w?.trackPlayCount??null,trackIsrc:w?.trackIsrc??null}]:[]});return v.length>0&&await Bt.tracks.bulkPut(v),{items:a}}async function Dc(u){let n=new Map,a=[],g=u.filter(_=>_?.uri),d=g.map(_=>_.uri);if(d.length===0)return{isrcMap:n};let k=await Bt.tracks.bulkGet(d),v=new Map(k.filter(_=>!!_).map(_=>[_.trackUri,_]));for(let _ of g){let w=v.get(_.uri);w?.trackIsrc?n.set(_.uri,w.trackIsrc):a.push(_)}if(a.length>0){let _=await Wo(a.map(x=>x.uri)),w=[];for(let[x,D]of _.entries()){let R=D?.external_ids?.isrc;R&&(n.set(x,R),w.push({key:x,changes:{trackIsrc:R}}))}w.length>0&&await Bt.tracks.bulkUpdate(w)}return{isrcMap:n}}async function Tc(u){let n=new Map,a=new Map,g=[],d=u.filter(w=>w?.uri),k=d.map(w=>w.uri);if(k.length===0)return{trackPlayCountMap:n,trackDurationMap:a};let v=await Bt.tracks.bulkGet(k),_=new Map(v.filter(w=>!!w).map(w=>[w.trackUri,w]));for(let w of d){let x=_.get(w.uri);x?.trackPlayCount!=null&&n.set(w.uri,x.trackPlayCount),x?.trackDuration!=null&&a.set(w.uri,x.trackDuration),(x?.trackPlayCount==null||x?.trackDuration==null)&&g.push(w)}if(g.length>0){let w=new Set(g.map(R=>R.album.uri).filter(Boolean)),x=await Uo(w),D=[];for(let[R,S]of x.entries()){let M=S,B=M.playcount!=null?Number.parseInt(String(M.playcount),10):null,C=M.duration?.totalMilliseconds??null;B!==null&&n.set(R,B),C!==null&&a.set(R,C),D.push({key:R,changes:{trackPlayCount:B,trackDuration:C}})}D.length>0&&await Bt.tracks.bulkUpdate(D)}return{trackPlayCountMap:n,trackDurationMap:a}}var Ec=u=>{let n=Ur(),a=[...n.defaultNormalizeWords,...n.customNormalizeWords],g=new RegExp(`\\b(${a.join("|")})\\b`,"gi");return u.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(g,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim()},Ic=ve(function(n){let a=(0,xt.c)(25),{track:g,trackPlayCounts:d,trackIsrcs:k}=n,v;if(a[0]!==g.uri||a[1]!==d){let ee=d.get(g.uri);v=ee!=null?ee.toLocaleString():"N/A",a[0]=g.uri,a[1]=d,a[2]=v}else v=a[2];let _=v,w;a[3]!==g.uri||a[4]!==k?(w=k.get(g.uri)||"N/A",a[3]=g.uri,a[4]=k,a[5]=w):w=a[5];let x=w,D=g.album?.name||"N/A",R;a[6]!==g.artists?(R=g.artists?.map(Bc).join(", ")||"N/A",a[6]=g.artists,a[7]=R):R=a[7];let S=R,M;a[8]!==S?(M=te("span",{className:"track-details__artists",children:["Artists: ",S]}),a[8]=S,a[9]=M):M=a[9];let B;a[10]!==D?(B=te("span",{className:"track-details__album",children:["Album: ",D]}),a[10]=D,a[11]=B):B=a[11];let C;a[12]!==M||a[13]!==B?(C=te("div",{className:"track-details__line",children:[M,B]}),a[12]=M,a[13]=B,a[14]=C):C=a[14];let U;a[15]!==_?(U=te("span",{className:"track-details__playcount",children:["Plays: ",_]}),a[15]=_,a[16]=U):U=a[16];let H;a[17]!==x?(H=te("span",{className:"track-details__isrc",children:["ISRC: ",x]}),a[17]=x,a[18]=H):H=a[18];let $;a[19]!==U||a[20]!==H?($=te("div",{className:"track-details__line",children:[U,H]}),a[19]=U,a[20]=H,a[21]=$):$=a[21];let V;return a[22]!==C||a[23]!==$?(V=te("div",{className:"track-details",children:[C,$]}),a[22]=C,a[23]=$,a[24]=V):V=a[24],V}),Rc=ve(function(n){let a=(0,xt.c)(19),{trackUri:g,trackDuration:d}=n,{position:k,duration:v,isCurrentlyPlayingThisTrack:_,togglePlay:w,handleSliderChange:x,handleSliderRelease:D}=Vo(g,d),R=zc,S=R(k),M=R(v),B;a[0]!==_?(B=_?A(Ie.React.pause,{}):A(Ie.React.play,{}),a[0]=_,a[1]=B):B=a[1];let C;a[2]!==B||a[3]!==w?(C=A("button",{className:"duplicate-group__playback-button",onClick:w,type:"button",children:B}),a[2]=B,a[3]=w,a[4]=C):C=a[4];let U;a[5]!==S?(U=A("span",{className:"slider-time",children:S}),a[5]=S,a[6]=U):U=a[6];let H=v||0,$=k||0,V;a[7]!==x||a[8]!==D||a[9]!==H||a[10]!==$?(V=A(Lr,{max:H,min:0,onChange:x,onRelease:D,step:1,value:$}),a[7]=x,a[8]=D,a[9]=H,a[10]=$,a[11]=V):V=a[11];let ee;a[12]!==M?(ee=A("span",{className:"slider-time",children:M}),a[12]=M,a[13]=ee):ee=a[13];let J;return a[14]!==C||a[15]!==U||a[16]!==V||a[17]!==ee?(J=te("div",{className:"duplicate-group__playback-controls",children:[C,U,V,ee]}),a[14]=C,a[15]=U,a[16]=V,a[17]=ee,a[18]=J):J=a[18],J}),xi=ve(function(n){let a=(0,xt.c)(27),{track:g,category:d,onDelete:k,isSource:v,trackPlayCounts:_,trackIsrcs:w,trackDurations:x}=n,D=`duplicate-group__duplicate-item duplicate-group__item--${d}`,R=v?"Source: ":"",S;a[0]!==R||a[1]!==g.name?(S=te("span",{className:"duplicate-group__duplicate-name",children:[R,g.name]}),a[0]=R,a[1]=g.name,a[2]=S):S=a[2];let M;a[3]!==g||a[4]!==w||a[5]!==_?(M=A(Ic,{track:g,trackIsrcs:w,trackPlayCounts:_}),a[3]=g,a[4]=w,a[5]=_,a[6]=M):M=a[6];let B;a[7]!==S||a[8]!==M?(B=te("div",{className:"duplicate-group__duplicate-content",children:[S,M]}),a[7]=S,a[8]=M,a[9]=B):B=a[9];let C;a[10]!==d||a[11]!==k||a[12]!==g?(C=A("button",{className:"duplicate-group__delete-button",onClick:()=>k(d,g),type:"button",children:"Delete"}),a[10]=d,a[11]=k,a[12]=g,a[13]=C):C=a[13];let U;a[14]!==B||a[15]!==C?(U=te("div",{className:"duplicate-group__duplicate-info",children:[B,C]}),a[14]=B,a[15]=C,a[16]=U):U=a[16];let H;a[17]!==g.uri||a[18]!==x?(H=x.get(g.uri),a[17]=g.uri,a[18]=x,a[19]=H):H=a[19];let $;a[20]!==H||a[21]!==g.uri?($=A("div",{className:"duplicate-group__actions",children:A(Rc,{trackDuration:H,trackUri:g.uri})}),a[20]=H,a[21]=g.uri,a[22]=$):$=a[22];let V;return a[23]!==D||a[24]!==U||a[25]!==$?(V=te("div",{className:D,children:[U,$]}),a[23]=D,a[24]=U,a[25]=$,a[26]=V):V=a[26],V}),Ac=ve(function(n){let a=(0,xt.c)(31),{group:g,category:d,groupIndex:k,onDelete:v,trackPlayCounts:_,trackIsrcs:w,trackDurations:x}=n,D=`duplicate-group__item duplicate-group__item--${d}`,R=`${g.mainTrack.uri}-${g.mainTrack.uid||k}`,S;a[0]!==d||a[1]!==g.mainTrack||a[2]!==k||a[3]!==v||a[4]!==x||a[5]!==w||a[6]!==_?(S=A(xi,{category:d,groupIndex:k,isSource:!0,onDelete:v,track:g.mainTrack,trackDurations:x,trackIsrcs:w,trackPlayCounts:_}),a[0]=d,a[1]=g.mainTrack,a[2]=k,a[3]=v,a[4]=x,a[5]=w,a[6]=_,a[7]=S):S=a[7];let M;a[8]===Symbol.for("react.memo_cache_sentinel")?(M=A("div",{className:"duplicate-group__duplicates-label",children:"Duplicates:"}),a[8]=M):M=a[8];let B;if(a[9]!==d||a[10]!==g.duplicates||a[11]!==k||a[12]!==v||a[13]!==x||a[14]!==w||a[15]!==_){let H;a[17]!==d||a[18]!==k||a[19]!==v||a[20]!==x||a[21]!==w||a[22]!==_?(H=$=>A(xi,{category:d,groupIndex:k,onDelete:v,track:$,trackDurations:x,trackIsrcs:w,trackPlayCounts:_},`${$.uri}-${$.uid||$.uri}`),a[17]=d,a[18]=k,a[19]=v,a[20]=x,a[21]=w,a[22]=_,a[23]=H):H=a[23],B=g.duplicates.map(H),a[9]=d,a[10]=g.duplicates,a[11]=k,a[12]=v,a[13]=x,a[14]=w,a[15]=_,a[16]=B}else B=a[16];let C;a[24]!==B?(C=A("div",{className:"duplicate-group__duplicates-list",children:B}),a[24]=B,a[25]=C):C=a[25];let U;return a[26]!==D||a[27]!==R||a[28]!==S||a[29]!==C?(U=te("div",{className:D,children:[S,M,C]},R),a[26]=D,a[27]=R,a[28]=S,a[29]=C,a[30]=U):U=a[30],U}),ir=ve(function(n){let a=(0,xt.c)(17),{title:g,groups:d,category:k,onDelete:v,trackPlayCounts:_,trackIsrcs:w,trackDurations:x}=n;if(!Ur().groupSettings[k])return null;let R;a[0]!==g?(R=A("div",{className:"duplicate-group__heading-title",children:g}),a[0]=g,a[1]=R):R=a[1];let S;a[2]!==d.length?(S=te("div",{className:"duplicate-group__heading-length",children:[d.length," found"]}),a[2]=d.length,a[3]=S):S=a[3];let M;a[4]!==R||a[5]!==S?(M=te("div",{className:"duplicate-group__heading",children:[R,S]}),a[4]=R,a[5]=S,a[6]=M):M=a[6];let B;a[7]!==k||a[8]!==d||a[9]!==v||a[10]!==x||a[11]!==w||a[12]!==_?(B=d.length>0?A("div",{className:"duplicate-group__list",children:d.map((U,H)=>A(Ac,{category:k,group:U,groupIndex:H,onDelete:v,trackDurations:x,trackIsrcs:w,trackPlayCounts:_},`${U.mainTrack.uri}-${H}`))}):A("div",{className:"duplicate-group__empty",children:"No duplicates found in this category."}),a[7]=k,a[8]=d,a[9]=v,a[10]=x,a[11]=w,a[12]=_,a[13]=B):B=a[13];let C;return a[14]!==M||a[15]!==B?(C=te("div",{className:"duplicate-group",children:[M,B]}),a[14]=M,a[15]=B,a[16]=C):C=a[16],C}),jc=(u,n,a)=>{let g=new Set,d=(k,v,_)=>{let x=k.filter(S=>!g.has(S.uri)).filter(S=>{let M=_(v(S));return M!=null&&M!==""}),D=Object.groupBy(x,S=>_(v(S))),R=[];for(let S of Object.values(D))if(S&&S.length>1){let M=S.toSorted((B,C)=>(n.get(C.uri)??0)-(n.get(B.uri)??0));for(let B of M)g.add(B.uri);R.push({mainTrack:M[0],duplicates:M.slice(1)})}return R.sort((S,M)=>{let B=n.get(S.mainTrack.uri)??0,C=n.get(M.mainTrack.uri)??0;return C!==B?C-B:S.mainTrack.name.localeCompare(M.mainTrack.name)})};return{exact:d(u,k=>k.uri,k=>k),isrc:d(u,k=>a.get(k.uri),k=>k),probable:d(u,k=>{let v=k.artists.map(_=>_.name).sort();return`${k.name}|${v[0]||""}`},k=>k?.toLowerCase().trim()),likely:d(u,k=>k.name,k=>k?.trim()),possible:d(u,k=>k.name,k=>k?Ec(k):void 0)}};function Mc(u){let n=(0,xt.c)(68),{selectedPlaylist:a}=u,g;n[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],n[0]=g):g=n[0];let[d,k]=Pe(g),[v,_]=Pe(a||null),w;n[1]===Symbol.for("react.memo_cache_sentinel")?(w=[],n[1]=w):w=n[1];let[x,D]=Pe(w),R;n[2]===Symbol.for("react.memo_cache_sentinel")?(R=new Map,n[2]=R):R=n[2];let[S,M]=Pe(R),B;n[3]===Symbol.for("react.memo_cache_sentinel")?(B=new Map,n[3]=B):B=n[3];let[C,U]=Pe(B),H;n[4]===Symbol.for("react.memo_cache_sentinel")?(H=new Map,n[4]=H):H=n[4];let[$,V]=Pe(H),ee;n[5]===Symbol.for("react.memo_cache_sentinel")?(ee={exact:[],isrc:[],probable:[],likely:[],possible:[]},n[5]=ee):ee=n[5];let[J,le]=Pe(ee),pe,fe;n[6]!==a?(pe=()=>{let Oe=!1;return(async()=>{let Me=await Oc();Oe||(k(Me),_(a||Me.at(0)||null))})(),()=>{Oe=!0}},fe=[a],n[6]=a,n[7]=pe,n[8]=fe):(pe=n[7],fe=n[8]),ze(pe,fe);let ie;n[9]!==d?(ie=Oe=>{let Me=d.find(ot=>ot.uri===Oe)??null;_(Me)},n[9]=d,n[10]=ie):ie=n[10];let ne=ie,he;n[11]!==v?(he=async Oe=>{if(!v)return;await(Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"))).remove(v.uri,[{uid:Oe.uid}]),D(ot=>ot.filter(Ke=>!(Ke.uri===Oe.uri&&Ke.uid===Oe.uid)))},n[11]=v,n[12]=he):he=n[12];let de=he,se;n[13]!==de?(se=async(Oe,Me)=>{if(!Ur().confirmSettings[Oe]){await de(Me);return}zr({titleText:"Remove Track",descriptionText:`Are you sure you want to remove "${Me.name}"? This cannot be undone.`,confirmText:"Remove",onConfirm:()=>void de(Me),confirmLabel:"Remove",allowHTML:!1})},n[13]=de,n[14]=se):se=n[14];let ae=se,Ne,xe;n[15]!==v?(Ne=()=>{D([]),le({exact:[],isrc:[],probable:[],likely:[],possible:[]}),M(new Map),V(new Map),U(new Map);let Oe=!1;return(async()=>{if(!v?.uri)return;let ot=await Nc(v.uri);if(Oe)return;let Ke=ot.items;if(D(Ke),Ke.length>0){let[zt,St]=await Promise.all([Tc(Ke),Dc(Ke)]);if(Oe)return;M(zt.trackPlayCountMap),U(zt.trackDurationMap),V(St.isrcMap)}})(),()=>{Oe=!0}},xe=[v],n[15]=v,n[16]=Ne,n[17]=xe):(Ne=n[16],xe=n[17]),ze(Ne,xe);let ye,ge;n[18]!==x||n[19]!==$||n[20]!==S?(ye=()=>{x.length===0?le({exact:[],isrc:[],probable:[],likely:[],possible:[]}):(S.size>0||$.size>0)&&le(jc(x,S,$))},ge=[x,S,$],n[18]=x,n[19]=$,n[20]=S,n[21]=ye,n[22]=ge):(ye=n[21],ge=n[22]),ze(ye,ge);let Se;n[23]!==d?(Se=d.map(Kc),n[23]=d,n[24]=Se):Se=n[24];let _e=Se,Re;n[25]===Symbol.for("react.memo_cache_sentinel")?(Re=A("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),n[25]=Re):Re=n[25];let nt=d.length===0,et=v?.uri||"",Ue;n[26]!==ne||n[27]!==_e||n[28]!==nt||n[29]!==et?(Ue=te("div",{className:"find-duplicates__header",children:[Re,A($r,{disabled:nt,onChange:ne,options:_e,value:et})]}),n[26]=ne,n[27]=_e,n[28]=nt,n[29]=et,n[30]=Ue):Ue=n[30];let Ze;n[31]!==J.exact||n[32]!==ae||n[33]!==C||n[34]!==$||n[35]!==S?(Ze=A(ir,{category:"exact",groups:J.exact,onDelete:ae,title:"Exact URI Matches",trackDurations:C,trackIsrcs:$,trackPlayCounts:S}),n[31]=J.exact,n[32]=ae,n[33]=C,n[34]=$,n[35]=S,n[36]=Ze):Ze=n[36];let je;n[37]!==J.isrc||n[38]!==ae||n[39]!==C||n[40]!==$||n[41]!==S?(je=A(ir,{category:"isrc",groups:J.isrc,onDelete:ae,title:"Same ISRC",trackDurations:C,trackIsrcs:$,trackPlayCounts:S}),n[37]=J.isrc,n[38]=ae,n[39]=C,n[40]=$,n[41]=S,n[42]=je):je=n[42];let $e;n[43]!==J.probable||n[44]!==ae||n[45]!==C||n[46]!==$||n[47]!==S?($e=A(ir,{category:"probable",groups:J.probable,onDelete:ae,title:"Same Title + Same artist (Probable Duplicates)",trackDurations:C,trackIsrcs:$,trackPlayCounts:S}),n[43]=J.probable,n[44]=ae,n[45]=C,n[46]=$,n[47]=S,n[48]=$e):$e=n[48];let De;n[49]!==J.likely||n[50]!==ae||n[51]!==C||n[52]!==$||n[53]!==S?(De=A(ir,{category:"likely",groups:J.likely,onDelete:ae,title:"Same Title (Likely Duplicates)",trackDurations:C,trackIsrcs:$,trackPlayCounts:S}),n[49]=J.likely,n[50]=ae,n[51]=C,n[52]=$,n[53]=S,n[54]=De):De=n[54];let Qe;n[55]!==J.possible||n[56]!==ae||n[57]!==C||n[58]!==$||n[59]!==S?(Qe=A(ir,{category:"possible",groups:J.possible,onDelete:ae,title:"Similar Title (Possible Duplicates)",trackDurations:C,trackIsrcs:$,trackPlayCounts:S}),n[55]=J.possible,n[56]=ae,n[57]=C,n[58]=$,n[59]=S,n[60]=Qe):Qe=n[60];let kt;return n[61]!==Ue||n[62]!==Ze||n[63]!==je||n[64]!==$e||n[65]!==De||n[66]!==Qe?(kt=te("div",{className:"find-duplicates",children:[Ue,Ze,je,$e,De,Qe]}),n[61]=Ue,n[62]=Ze,n[63]=je,n[64]=$e,n[65]=De,n[66]=Qe,n[67]=kt):kt=n[67],kt}function Kc(u){return{value:u.uri,label:u.name}}var ki=Mc;function Bc(u){return u.name}function zc(u){if(u==null||Number.isNaN(u)||u<0)return"N/A";let n=Math.floor(u/1e3),a=Math.floor(n/60),g=n%60;return`${a}:${g.toString().padStart(2,"0")}`}var Si=new CSSStyleSheet;Si.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-player);--fdp-surface-2: var(--spice-player);--fdp-overlay: rgba(255, 255, 255, .02);--fdp-shadow: 0 4px 12px rgba(0, 0, 0, .28);--fdp-shadow-sm: 0 2px 6px rgba(0, 0, 0, .2);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-primary, #1db954);--fdp-exact: 255 90 90;--fdp-isrc: 255 144 80;--fdp-likely: 234 234 102;--fdp-possible: 128 239 128;display:flex;flex-direction:column;gap:var(--fdp-gap);width:100%;animation:fdp-fade-in .24s ease-out both;.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius);box-shadow:none;.find-duplicates__header-label{font-weight:700;color:var(--fdp-text);letter-spacing:.2px}}.find-duplicates__details{font-size:1.1rem;color:var(--fdp-subtext)}}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg);box-shadow:none;transition:border-color .2s ease,background-color .2s ease;&:hover{background-color:var(--fdp-surface);border-color:var(--fdp-border-strong)}.duplicate-group__heading{display:flex;gap:12px;align-items:center;justify-content:space-between;font-size:1.05rem;font-weight:800;color:var(--fdp-text);.duplicate-group__heading-length{align-content:center;padding:2px 10px;font-size:12px;font-weight:600;color:var(--fdp-text);background:#ffffff0a;border:1px solid var(--fdp-border);border-radius:999px;box-shadow:none}}.duplicate-group__list{display:flex;flex-direction:column;gap:12px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;background:transparent;border:1px solid var(--fdp-border);border-left:4px solid;border-radius:var(--fdp-radius);transition:background-color .16s ease,border-color .16s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.06);border-color:var(--fdp-border-strong)}&.duplicate-group__item--exact{border-left-color:rgb(var(--fdp-exact));box-shadow:none}&.duplicate-group__item--isrc{border-left-color:rgb(var(--fdp-isrc));box-shadow:none}&.duplicate-group__item--likely{border-left-color:rgb(var(--fdp-likely));box-shadow:none}&.duplicate-group__item--possible{border-left-color:rgb(var(--fdp-possible));box-shadow:none}}.duplicate-group__playback-controls{display:flex;flex-grow:1;gap:10px;align-items:center;width:100%}.duplicate-group__playback-button{display:flex;flex-shrink:0;align-items:center;justify-content:center;width:32px;height:32px;padding:0;color:#fff;cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%;transition:background-color .14s ease,border-color .14s ease;&:hover{background-color:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}&:active{background-color:rgba(var(--spice-rgb-selected-row),.12)}svg{width:18px;height:18px}}.slider-time{min-width:38px;font-size:13px;color:var(--fdp-subtext);text-align:center}.duplicate-group__duplicates-label{padding-left:15px;font-size:14px;font-weight:700;color:var(--fdp-subtext)}.duplicate-group__duplicates-list{padding-left:15px}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:700;color:var(--fdp-text);letter-spacing:.2px;white-space:nowrap}.duplicate-group__duplicate-item{display:flex;flex-direction:column;gap:10px;font-size:1rem;border-bottom:1px solid var(--fdp-border);&:last-child{border-bottom:none}}.duplicate-group__actions{padding-bottom:8px}.duplicate-group__duplicate-info{display:flex;flex-direction:row;flex-wrap:nowrap;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex:1 1 auto;flex-direction:column;gap:6px;min-width:0}.duplicate-group__delete-button{padding:8px 14px;font-size:.9rem;font-weight:700;line-height:1;color:#fff;cursor:pointer;background-color:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:20px;transition:filter .14s ease,background-color .14s ease,border-color .14s ease;&:hover{border-color:#e9142999;filter:brightness(1.05)}&:active{background-color:#c71124}}}.track-details{display:flex;flex-direction:column;font-size:.92rem;color:var(--fdp-subtext);.track-details__line{display:flex;flex-wrap:wrap;gap:10px}}.duplicate-settings{width:100%;.duplicate-settings__section{margin-bottom:24px;.duplicate-settings__section-title{padding-bottom:8px;margin-bottom:16px;font-size:16px;font-weight:800;border-bottom:1px solid var(--fdp-border)}}.duplicate-settings__description{margin-bottom:12px;font-size:13px;color:var(--fdp-subtext)}.duplicate-settings__options{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}.duplicate-settings__option{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}.duplicate-settings__words-list{max-height:200px;overflow-y:auto;.duplicate-settings__no-words{padding:12px;color:var(--fdp-subtext);text-align:center;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm)}}.duplicate-settings__words-ul{padding:0;margin:0}.duplicate-settings__word-item{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;margin-bottom:8px;background:linear-gradient(180deg,#ffffff08,#ffffff04);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-sm);.duplicate-settings__word-remove{padding:6px 10px;font-size:12px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ff5a5ae6,#ff3c3ce6);border:1px solid rgba(255,90,90,.35);border-radius:999px;transition:transform .14s ease,box-shadow .16s ease,filter .16s ease;&:hover{box-shadow:0 6px 16px #ff5a5a40;filter:brightness(1.06)}}}.duplicate-settings__actions{display:flex;justify-content:flex-end;margin-top:24px;.duplicate-settings__reset{padding:8px 14px;color:#fff;cursor:pointer;background:linear-gradient(180deg,#ffffff0f,#ffffff05);border:1px solid var(--fdp-border);border-radius:999px;transition:filter .16s ease,transform .14s ease,border-color .16s ease;&:hover{border-color:var(--fdp-border-strong);filter:brightness(1.08)}}}}.find-duplicates :is(button,[role=button],a,input,select,textarea):focus-visible{outline:none;border-color:color-mix(in srgb,var(--fdp-accent),transparent 40%);box-shadow:0 0 0 3px color-mix(in srgb,var(--fdp-accent),transparent 50%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 820px){.duplicate-group{padding:12px;.duplicate-group__empty,.duplicate-group__heading{flex-direction:column;gap:6px;align-items:flex-start}}}");var Ci=Si;document.adoptedStyleSheets.push(Ci);var $c=(u,n="main")=>{let a=g=>{let d=g==="settings";nr({title:d?"Find Duplicates Settings":"Find Duplicates",content:d?A(wi,{}):A(ki,{selectedPlaylist:u}),isLarge:!0,buttons:te(jo,{children:[A(Spicetify.ReactComponent.TooltipWrapper,{label:d?"Back to Duplicates":"Settings",placement:"top",children:A("button",{className:`modal__button modal__button--${d?"back":"settings"}`,onClick:()=>a(d?"main":"settings"),children:d?A(Ie.React.duplicate,{size:18}):A(Ie.React.settings,{size:18})})}),A(Spicetify.ReactComponent.TooltipWrapper,{label:"GitHub",placement:"top",children:A("button",{className:"modal__button modal__button--github",onClick:()=>window.open("https://github.com/veryboringhwl/spicetify-extensions"),children:A(Ie.React.github,{size:18})})})]})})};a(n)},Lc=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:Ie.HTML.duplicate,onClick:async(u,n,a)=>{let g=In(u.props),d=g.uri,k=g.name,v=Spicetify.URI.from(d)?.type,_=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI")),w={uri:d,name:k||(await _.getMetadata(d,{}))?.name||"",type:v||""};$c(w)},divider:"after",shouldAdd:(u,n,a)=>{let g=In(u),d=Spicetify.URI.from(g.uri)?.type;return d===Spicetify.URI.Type.PLAYLIST||d===Spicetify.URI.Type.PLAYLIST_V2}});Lc.register();
