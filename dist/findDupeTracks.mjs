await new Promise((resolve) => Spicetify.Events.webpackLoaded.on(resolve));
var Zf=Object.create;var ua=Object.defineProperty;var Wf=Object.getOwnPropertyDescriptor;var Gf=Object.getOwnPropertyNames;var Hf=Object.getPrototypeOf,Xf=Object.prototype.hasOwnProperty;var Jf=(t,e)=>()=>(t&&(e=t(t=0)),e);var Bc=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Qf=(t,e)=>{for(var n in e)ua(t,n,{get:e[n],enumerable:!0})},Yc=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Gf(e))!Xf.call(t,a)&&a!==n&&ua(t,a,{get:()=>e[a],enumerable:!(i=Wf(e,a))||i.enumerable});return t};var Xt=(t,e,n)=>(n=t!=null?Zf(Hf(t)):{},Yc(e||!t||!t.__esModule?ua(n,"default",{value:t,enumerable:!0}):n,t)),Vf=t=>Yc(ua({},"__esModule",{value:!0}),t);var zc={};Qf(zc,{Children:()=>em,Component:()=>tm,Fragment:()=>nm,Profiler:()=>rm,PureComponent:()=>om,StrictMode:()=>im,Suspense:()=>am,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>sm,act:()=>um,cloneElement:()=>cm,createContext:()=>lm,createElement:()=>dm,createFactory:()=>hm,createRef:()=>fm,default:()=>Tm,forwardRef:()=>mm,isValidElement:()=>$s,lazy:()=>pm,memo:()=>ut,startTransition:()=>ym,unstable_act:()=>gm,useCallback:()=>vm,useContext:()=>_m,useDebugValue:()=>bm,useDeferredValue:()=>wm,useEffect:()=>un,useId:()=>As,useImperativeHandle:()=>xm,useInsertionEffect:()=>km,useLayoutEffect:()=>Dm,useMemo:()=>Ls,useReducer:()=>Cm,useRef:()=>xt,useState:()=>Jt,useSyncExternalStore:()=>No,useTransition:()=>Sm,version:()=>Em});var em,tm,nm,rm,om,im,am,sm,um,cm,lm,dm,hm,fm,mm,$s,pm,ut,ym,gm,vm,_m,bm,wm,un,As,xm,km,Dm,Ls,Cm,xt,Jt,No,Sm,Em,Tm,Ft=Jf(()=>{({Children:em,Component:tm,Fragment:nm,Profiler:rm,PureComponent:om,StrictMode:im,Suspense:am,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:sm,act:um,cloneElement:cm,createContext:lm,createElement:dm,createFactory:hm,createRef:fm,forwardRef:mm,isValidElement:$s,lazy:pm,memo:ut,startTransition:ym,unstable_act:gm,useCallback:vm,useContext:_m,useDebugValue:bm,useDeferredValue:wm,useEffect:un,useId:As,useImperativeHandle:xm,useInsertionEffect:km,useLayoutEffect:Dm,useMemo:Ls,useReducer:Cm,useRef:xt,useState:Jt,useSyncExternalStore:No,useTransition:Sm,version:Em}=Spicetify.React),Tm=Spicetify.React});var Qt=Bc((R0,Wc)=>{"use no memo";"use strict";var Im=Object.create,da=Object.defineProperty,Mm=Object.getOwnPropertyDescriptor,Om=Object.getOwnPropertyNames,Rm=Object.getPrototypeOf,Pm=Object.prototype.hasOwnProperty,jm=(t,e)=>{for(var n in e)da(t,n,{get:e[n],enumerable:!0})},Kc=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Om(e))!Pm.call(t,a)&&a!==n&&da(t,a,{get:()=>e[a],enumerable:!(i=Mm(e,a))||i.enumerable});return t},Nm=(t,e,n)=>(n=t!=null?Im(Rm(t)):{},Kc(e||!t||!t.__esModule?da(n,"default",{value:t,enumerable:!0}):n,t)),$m=t=>Kc(da({},"__esModule",{value:!0}),t),Zc={};jm(Zc,{$dispatcherGuard:()=>Ym,$makeReadOnly:()=>Fm,$reset:()=>zm,$structuralCheck:()=>Wm,c:()=>Bm,clearRenderCounterRegistry:()=>qm,renderCounterRegistry:()=>Ao,useRenderCounter:()=>Zm});Wc.exports=$m(Zc);var Xr=Nm((Ft(),Vf(zc))),{useRef:Am,useEffect:Lm,isValidElement:Gr}=Xr,Fc,Bs=(Fc=Xr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?Fc:Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.memo_cache_sentinel"),qc,Bm=typeof((qc=Xr.__COMPILER_RUNTIME)==null?void 0:qc.c)=="function"?Xr.__COMPILER_RUNTIME.c:function(e){return Xr.useMemo(()=>{let n=new Array(e);for(let i=0;i<e;i++)n[i]=Ys;return n[Ys]=!0,n},[])},la={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(t=>{la[t]=()=>{throw new Error(`[React] Unexpected React hook call (${t}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var $o=null;la.useMemoCache=t=>{if($o==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return $o.useMemoCache(t)};function ca(t){return Bs.ReactCurrentDispatcher.current=t,Bs.ReactCurrentDispatcher.current}var Hr=[];function Ym(t){let e=Bs.ReactCurrentDispatcher.current;if(t===0){if(Hr.push(e),Hr.length===1&&($o=e),e===la)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");ca(la)}else if(t===1){let n=Hr.pop();if(n==null)throw new Error("React Compiler internal error: unexpected null in guard stack");Hr.length===0&&($o=null),ca(n)}else if(t===2)Hr.push(e),ca($o);else if(t===3){let n=Hr.pop();if(n==null)throw new Error("React Compiler internal error: unexpected null in guard stack");ca(n)}else throw new Error("React Compiler internal error: unreachable block"+t)}function zm(t){for(let e=0;e<t.length;e++)t[e]=Ys}function Fm(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var Ao=new Map;function qm(){for(let t of Ao.values())t.forEach(e=>{e.count=0})}function Um(t,e){let n=Ao.get(t);n==null&&(n=new Set,Ao.set(t,n)),n.add(e)}function Km(t,e){let n=Ao.get(t);n?.delete(e)}function Zm(t){let e=Am(null);e.current!=null&&(e.current.count+=1),Lm(()=>{if(e.current==null){let n={count:0};Um(t,n),e.current=n}return()=>{e.current!==null&&Km(t,e.current)}})}var Uc=new Set;function Wm(t,e,n,i,a,s){function c(m,g,b,w){let E=`${i}:${s} [${a}] ${n}${b} changed from ${m} to ${g} at depth ${w}`;Uc.has(E)||(Uc.add(E),console.error(E))}let l=2;function p(m,g,b,w){if(!(w>l)){if(m===g)return;if(typeof m!=typeof g)c(`type ${typeof m}`,`type ${typeof g}`,b,w);else if(typeof m=="object"){let E=Array.isArray(m),M=Array.isArray(g);if(m===null&&g!==null)c("null",`type ${typeof g}`,b,w);else if(g===null)c(`type ${typeof m}`,"null",b,w);else if(m instanceof Map)if(!(g instanceof Map))c("Map instance","other value",b,w);else if(m.size!==g.size)c(`Map instance with size ${m.size}`,`Map instance with size ${g.size}`,b,w);else for(let[P,N]of m)g.has(P)?p(N,g.get(P),`${b}.get(${P})`,w+1):c(`Map instance with key ${P}`,`Map instance without key ${P}`,b,w);else if(g instanceof Map)c("other value","Map instance",b,w);else if(m instanceof Set)if(!(g instanceof Set))c("Set instance","other value",b,w);else if(m.size!==g.size)c(`Set instance with size ${m.size}`,`Set instance with size ${g.size}`,b,w);else for(let P of g)m.has(P)||c(`Set instance without element ${P}`,`Set instance with element ${P}`,b,w);else if(g instanceof Set)c("other value","Set instance",b,w);else if(E||M)if(E!==M)c(`type ${E?"array":"object"}`,`type ${M?"array":"object"}`,b,w);else if(m.length!==g.length)c(`array with length ${m.length}`,`array with length ${g.length}`,b,w);else for(let P=0;P<m.length;P++)p(m[P],g[P],`${b}[${P}]`,w+1);else if(Gr(m)||Gr(g))Gr(m)!==Gr(g)?c(`type ${Gr(m)?"React element":"object"}`,`type ${Gr(g)?"React element":"object"}`,b,w):m.type!==g.type?c(`React element of type ${m.type}`,`React element of type ${g.type}`,b,w):p(m.props,g.props,`[props of ${b}]`,w+1);else{for(let P in g)P in m||c(`object without key ${P}`,`object with key ${P}`,b,w);for(let P in m)P in g?p(m[P],g[P],`${b}.${P}`,w+1):c(`object with key ${P}`,`object without key ${P}`,b,w)}}else{if(typeof m=="function")return;isNaN(m)||isNaN(g)?isNaN(m)!==isNaN(g)&&c(`${isNaN(m)?"NaN":"non-NaN value"}`,`${isNaN(g)?"NaN":"non-NaN value"}`,b,w):m!==g&&c(m,g,b,w)}}}p(t,e,"",0)}});var Vc=Bc((qs,Us)=>{(function(t,e){typeof qs=="object"&&typeof Us<"u"?Us.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.JSBI=e())})(qs,function(){"use strict";var t=Math.imul,e=Math.clz32;function n(z,J){(J==null||J>z.length)&&(J=z.length);for(var G=0,le=Array(J);G<J;G++)le[G]=z[G];return le}function i(z){if(Array.isArray(z))return z}function a(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function s(z,J,G){return J=b(J),K(z,M()?Reflect.construct(J,G||[],b(z).constructor):J.apply(z,G))}function c(z,J){if(!(z instanceof J))throw new TypeError("Cannot call a class as a function")}function l(z,J,G){if(M())return Reflect.construct.apply(null,arguments);var le=[null];le.push.apply(le,J);var k=new(z.bind.apply(z,le));return G&&Q(k,G.prototype),k}function p(z,J){for(var G,le=0;le<J.length;le++)G=J[le],G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(z,de(G.key),G)}function m(z,J,G){return J&&p(z.prototype,J),G&&p(z,G),Object.defineProperty(z,"prototype",{writable:!1}),z}function g(z,J){var G=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!G){if(Array.isArray(z)||(G=Se(z))||J&&z&&typeof z.length=="number"){G&&(z=G);var le=0,k=function(){};return{s:k,n:function(){return le>=z.length?{done:!0}:{done:!1,value:z[le++]}},e:function(C){throw C},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,h=!0,y=!1;return{s:function(){G=G.call(z)},n:function(){var C=G.next();return h=C.done,C},e:function(C){y=!0,q=C},f:function(){try{h||G.return==null||G.return()}finally{if(y)throw q}}}}function b(z){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)},b(z)}function w(z,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(J&&J.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),Object.defineProperty(z,"prototype",{writable:!1}),J&&Q(z,J)}function E(z){try{return Function.toString.call(z).indexOf("[native code]")!==-1}catch{return typeof z=="function"}}function M(){try{var z=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!z})()}function P(z,J){var G=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(G!=null){var le,k,q,h,y=[],C=!0,I=!1;try{if(q=(G=G.call(z)).next,J===0){if(Object(G)!==G)return;C=!1}else for(;!(C=(le=q.call(G)).done)&&(y.push(le.value),y.length!==J);C=!0);}catch(T){I=!0,k=T}finally{try{if(!C&&G.return!=null&&(h=G.return(),Object(h)!==h))return}finally{if(I)throw k}}return y}}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(z,J){if(J&&(typeof J=="object"||typeof J=="function"))return J;if(J!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(z)}function Q(z,J){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,le){return G.__proto__=le,G},Q(z,J)}function oe(z,J){return i(z)||P(z,J)||Se(z,J)||N()}function se(z,J){if(typeof z!="object"||!z)return z;var G=z[Symbol.toPrimitive];if(G!==void 0){var le=G.call(z,J||"default");if(typeof le!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(z)}function de(z){var J=se(z,"string");return typeof J=="symbol"?J:J+""}function he(z){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},he(z)}function Se(z,J){if(z){if(typeof z=="string")return n(z,J);var G={}.toString.call(z).slice(8,-1);return G==="Object"&&z.constructor&&(G=z.constructor.name),G==="Map"||G==="Set"?Array.from(z):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?n(z,J):void 0}}function Me(z){var J=typeof Map=="function"?new Map:void 0;return Me=function(G){function le(){return l(G,arguments,b(this).constructor)}if(G===null||!E(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(J!==void 0){if(J.has(G))return J.get(G);J.set(G,le)}return le.prototype=Object.create(G.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),Q(le,G)},Me(z)}var me=(function(z){var J=Math.abs,G=Math.max,le=Math.floor;function k(q,h){var y;if(c(this,k),y=s(this,k,[q]),y.sign=h,Object.setPrototypeOf(y,k.prototype),q>k.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return y}return w(k,z),m(k,[{key:"toDebugString",value:function(){var h,y=["BigInt["],C=g(this);try{for(C.s();!(h=C.n()).done;){var I=h.value;y.push((I&&(I>>>0).toString(16))+", ")}}catch(T){C.e(T)}finally{C.f()}return y.push("]"),y.join("")}},{key:"toString",value:function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>h||36<h)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(h&h-1)==0?k.__toStringBasePowerOfTwo(this,h):k.__toStringGeneric(this,h,!1)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var h=new k(this.length,this.sign),y=0;y<this.length;y++)h[y]=this[y];return h}},{key:"__trim",value:function(){for(var h=this.length,y=this[h-1];y===0;)h--,y=this[h-1],this.pop();return h===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var h=0;h<this.length;h++)this[h]=0}},{key:"__clzmsd",value:function(){return k.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(h,y,C){C>this.length&&(C=this.length);for(var I=32767&h,T=h>>>15,R=0,F=y,B=0;B<C;B++){var re=this.__digit(B),X=32767&re,ye=re>>>15,we=k.__imul(X,I),ge=k.__imul(X,T),ue=k.__imul(ye,I),Ie=k.__imul(ye,T),Pe=F+we+R;R=Pe>>>30,Pe&=1073741823,Pe+=((32767&ge)<<15)+((32767&ue)<<15),R+=Pe>>>30,F=Ie+(ge>>>15)+(ue>>>15),this.__setDigit(B,1073741823&Pe)}if(R!==0||F!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(h,y,C){for(var I,T=0,R=0;R<C;R++)I=this.__halfDigit(y+R)+h.__halfDigit(R)+T,T=I>>>15,this.__setHalfDigit(y+R,32767&I);return T}},{key:"__inplaceSub",value:function(h,y,C){var I=C-1>>>1,T=0;if(1&y){y>>=1;for(var R=this.__digit(y),F=32767&R,B=0;B<I;B++){var re=h.__digit(B),X=(R>>>15)-(32767&re)-T;T=1&X>>>15,this.__setDigit(y+B,(32767&X)<<15|32767&F),R=this.__digit(y+B+1),F=(32767&R)-(re>>>15)-T,T=1&F>>>15}var ye=h.__digit(B),we=(R>>>15)-(32767&ye)-T;T=1&we>>>15,this.__setDigit(y+B,(32767&we)<<15|32767&F);var ge=ye>>>15;if(y+B+1>=this.length)throw new RangeError("out of bounds");(1&C)==0&&(R=this.__digit(y+B+1),F=(32767&R)-ge-T,T=1&F>>>15,this.__setDigit(y+h.length,1073709056&R|32767&F))}else{y>>=1;for(var ue=0;ue<h.length-1;ue++){var Ie=this.__digit(y+ue),Pe=h.__digit(ue),Ye=(32767&Ie)-(32767&Pe)-T;T=1&Ye>>>15;var Ue=(Ie>>>15)-(Pe>>>15)-T;T=1&Ue>>>15,this.__setDigit(y+ue,(32767&Ue)<<15|32767&Ye)}var We=this.__digit(y+ue),at=h.__digit(ue),st=(32767&We)-(32767&at)-T;T=1&st>>>15;var yt=0;(1&C)==0&&(yt=(We>>>15)-(at>>>15)-T,T=1&yt>>>15),this.__setDigit(y+ue,(32767&yt)<<15|32767&st)}return T}},{key:"__inplaceRightShift",value:function(h){if(h!==0){for(var y,C=this.__digit(0)>>>h,I=this.length-1,T=0;T<I;T++)y=this.__digit(T+1),this.__setDigit(T,1073741823&y<<30-h|C),C=y>>>h;this.__setDigit(I,C)}}},{key:"__digit",value:function(h){return this[h]}},{key:"__unsignedDigit",value:function(h){return this[h]>>>0}},{key:"__setDigit",value:function(h,y){this[h]=0|y}},{key:"__setDigitGrow",value:function(h,y){this[h]=0|y}},{key:"__halfDigitLength",value:function(){var h=this.length;return 32767>=this.__unsignedDigit(h-1)?2*h-1:2*h}},{key:"__halfDigit",value:function(h){return 32767&this[h>>>1]>>>15*(1&h)}},{key:"__setHalfDigit",value:function(h,y){var C=h>>>1,I=this.__digit(C),T=1&h?32767&I|y<<15:1073709056&I|32767&y;this.__setDigit(C,T)}}],[{key:"BigInt",value:function(h){var y=Number.isFinite;if(typeof h=="number"){if(h===0)return k.__zero();if(k.__isOneDigitInt(h))return 0>h?k.__oneDigit(-h,!0):k.__oneDigit(h,!1);if(!y(h)||le(h)!==h)throw new RangeError("The number "+h+" cannot be converted to BigInt because it is not an integer");return k.__fromDouble(h)}if(typeof h=="string"){var C=k.__fromString(h);if(C===null)throw new SyntaxError("Cannot convert "+h+" to a BigInt");return C}if(typeof h=="boolean")return h===!0?k.__oneDigit(1,!1):k.__zero();if(he(h)==="object"){if(h.constructor===k)return h;var I=k.__toPrimitive(h);return k.BigInt(I)}throw new TypeError("Cannot convert "+h+" to a BigInt")}},{key:"toNumber",value:function(h){var y=h.length;if(y===0)return 0;if(y===1){var C=h.__unsignedDigit(0);return h.sign?-C:C}var I=h.__digit(y-1),T=k.__clz30(I),R=30*y-T;if(1024<R)return h.sign?-1/0:1/0;var F=R-1,B=I,re=y-1,X=T+3,ye=X===32?0:B<<X;ye>>>=12;var we=X-12,ge=12<=X?0:B<<20+X,ue=20+X;for(0<we&&0<re&&(re--,B=h.__digit(re),ye|=B>>>30-we,ge=B<<we+2,ue=we+2);0<ue&&0<re;)re--,B=h.__digit(re),ge|=30<=ue?B<<ue-30:B>>>30-ue,ue-=30;var Ie=k.__decideRounding(h,ue,re,B);if((Ie===1||Ie===0&&(1&ge)==1)&&(ge=ge+1>>>0,ge===0&&(ye++,ye>>>20!=0&&(ye=0,F++,1023<F))))return h.sign?-1/0:1/0;var Pe=h.sign?-2147483648:0;return F=F+1023<<20,k.__kBitConversionInts[k.__kBitConversionIntHigh]=Pe|F|ye,k.__kBitConversionInts[k.__kBitConversionIntLow]=ge,k.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(h){if(h.length===0)return h;var y=h.__copy();return y.sign=!h.sign,y}},{key:"bitwiseNot",value:function(h){return h.sign?k.__absoluteSubOne(h).__trim():k.__absoluteAddOne(h,!0)}},{key:"exponentiate",value:function(h,y){if(y.sign)throw new RangeError("Exponent must be positive");if(y.length===0)return k.__oneDigit(1,!1);if(h.length===0)return h;if(h.length===1&&h.__digit(0)===1)return h.sign&&(1&y.__digit(0))==0?k.unaryMinus(h):h;if(1<y.length)throw new RangeError("BigInt too big");var C=y.__unsignedDigit(0);if(C===1)return h;if(C>=k.__kMaxLengthBits)throw new RangeError("BigInt too big");if(h.length===1&&h.__digit(0)===2){var I=1+(0|C/30),T=h.sign&&(1&C)!=0,R=new k(I,T);R.__initializeDigits();var F=1<<C%30;return R.__setDigit(I-1,F),R}var B=null,re=h;for((1&C)!=0&&(B=h),C>>=1;C!==0;C>>=1)re=k.multiply(re,re),(1&C)!=0&&(B===null?B=re:B=k.multiply(B,re));return B}},{key:"multiply",value:function(h,y){if(h.length===0)return h;if(y.length===0)return y;var C=h.length+y.length;30<=h.__clzmsd()+y.__clzmsd()&&C--;var I=new k(C,h.sign!==y.sign);I.__initializeDigits();for(var T=0;T<h.length;T++)k.__multiplyAccumulate(y,h.__digit(T),I,T);return I.__trim()}},{key:"divide",value:function(h,y){if(y.length===0)throw new RangeError("Division by zero");if(0>k.__absoluteCompare(h,y))return k.__zero();var C,I=h.sign!==y.sign,T=y.__unsignedDigit(0);if(y.length===1&&32767>=T){if(T===1)return I===h.sign?h:k.unaryMinus(h);C=k.__absoluteDivSmall(h,T,null)}else C=k.__absoluteDivLarge(h,y,!0,!1);return C.sign=I,C.__trim()}},{key:"remainder",value:function(h,y){if(y.length===0)throw new RangeError("Division by zero");if(0>k.__absoluteCompare(h,y))return h;var C=y.__unsignedDigit(0);if(y.length===1&&32767>=C){if(C===1)return k.__zero();var I=k.__absoluteModSmall(h,C);return I===0?k.__zero():k.__oneDigit(I,h.sign)}var T=k.__absoluteDivLarge(h,y,!1,!0);return T.sign=h.sign,T.__trim()}},{key:"add",value:function(h,y){var C=h.sign;return C===y.sign?k.__absoluteAdd(h,y,C):0<=k.__absoluteCompare(h,y)?k.__absoluteSub(h,y,C):k.__absoluteSub(y,h,!C)}},{key:"subtract",value:function(h,y){var C=h.sign;return C===y.sign?0<=k.__absoluteCompare(h,y)?k.__absoluteSub(h,y,C):k.__absoluteSub(y,h,!C):k.__absoluteAdd(h,y,C)}},{key:"leftShift",value:function(h,y){return y.length===0||h.length===0?h:y.sign?k.__rightShiftByAbsolute(h,y):k.__leftShiftByAbsolute(h,y)}},{key:"signedRightShift",value:function(h,y){return y.length===0||h.length===0?h:y.sign?k.__leftShiftByAbsolute(h,y):k.__rightShiftByAbsolute(h,y)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(h,y){return 0>k.__compareToBigInt(h,y)}},{key:"lessThanOrEqual",value:function(h,y){return 0>=k.__compareToBigInt(h,y)}},{key:"greaterThan",value:function(h,y){return 0<k.__compareToBigInt(h,y)}},{key:"greaterThanOrEqual",value:function(h,y){return 0<=k.__compareToBigInt(h,y)}},{key:"equal",value:function(h,y){if(h.sign!==y.sign||h.length!==y.length)return!1;for(var C=0;C<h.length;C++)if(h.__digit(C)!==y.__digit(C))return!1;return!0}},{key:"notEqual",value:function(h,y){return!k.equal(h,y)}},{key:"bitwiseAnd",value:function(h,y){if(!h.sign&&!y.sign)return k.__absoluteAnd(h,y).__trim();if(h.sign&&y.sign){var C=G(h.length,y.length)+1,I=k.__absoluteSubOne(h,C),T=k.__absoluteSubOne(y);return I=k.__absoluteOr(I,T,I),k.__absoluteAddOne(I,!0,I).__trim()}if(h.sign){var R=[y,h];h=R[0],y=R[1]}return k.__absoluteAndNot(h,k.__absoluteSubOne(y)).__trim()}},{key:"bitwiseXor",value:function(h,y){if(!h.sign&&!y.sign)return k.__absoluteXor(h,y).__trim();if(h.sign&&y.sign){var C=G(h.length,y.length),I=k.__absoluteSubOne(h,C),T=k.__absoluteSubOne(y);return k.__absoluteXor(I,T,I).__trim()}var R=G(h.length,y.length)+1;if(h.sign){var F=[y,h];h=F[0],y=F[1]}var B=k.__absoluteSubOne(y,R);return B=k.__absoluteXor(B,h,B),k.__absoluteAddOne(B,!0,B).__trim()}},{key:"bitwiseOr",value:function(h,y){var C=G(h.length,y.length);if(!h.sign&&!y.sign)return k.__absoluteOr(h,y).__trim();if(h.sign&&y.sign){var I=k.__absoluteSubOne(h,C),T=k.__absoluteSubOne(y);return I=k.__absoluteAnd(I,T,I),k.__absoluteAddOne(I,!0,I).__trim()}if(h.sign){var R=[y,h];h=R[0],y=R[1]}var F=k.__absoluteSubOne(y,C);return F=k.__absoluteAndNot(F,h,F),k.__absoluteAddOne(F,!0,F).__trim()}},{key:"asIntN",value:function(h,y){if(y.length===0)return y;if(h=le(h),0>h)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(h===0)return k.__zero();if(h>=k.__kMaxLengthBits)return y;var C=0|(h+29)/30;if(y.length<C)return y;var I=y.__unsignedDigit(C-1),T=1<<(h-1)%30;if(y.length===C&&I<T)return y;var R=(I&T)===T;if(!R)return k.__truncateToNBits(h,y);if(!y.sign)return k.__truncateAndSubFromPowerOfTwo(h,y,!0);if((I&T-1)==0){for(var F=C-2;0<=F;F--)if(y.__digit(F)!==0)return k.__truncateAndSubFromPowerOfTwo(h,y,!1);return y.length===C&&I===T?y:k.__truncateToNBits(h,y)}return k.__truncateAndSubFromPowerOfTwo(h,y,!1)}},{key:"asUintN",value:function(h,y){if(y.length===0)return y;if(h=le(h),0>h)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(h===0)return k.__zero();if(y.sign){if(h>k.__kMaxLengthBits)throw new RangeError("BigInt too big");return k.__truncateAndSubFromPowerOfTwo(h,y,!1)}if(h>=k.__kMaxLengthBits)return y;var C=0|(h+29)/30;if(y.length<C)return y;var I=h%30;if(y.length==C){if(I===0)return y;var T=y.__digit(C-1);if(!(T>>>I))return y}return k.__truncateToNBits(h,y)}},{key:"ADD",value:function(h,y){if(h=k.__toPrimitive(h),y=k.__toPrimitive(y),typeof h=="string")return typeof y!="string"&&(y=y.toString()),h+y;if(typeof y=="string")return h.toString()+y;if(h=k.__toNumeric(h),y=k.__toNumeric(y),k.__isBigInt(h)&&k.__isBigInt(y))return k.add(h,y);if(typeof h=="number"&&typeof y=="number")return h+y;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(h,y){return k.__compare(h,y,0)}},{key:"LE",value:function(h,y){return k.__compare(h,y,1)}},{key:"GT",value:function(h,y){return k.__compare(h,y,2)}},{key:"GE",value:function(h,y){return k.__compare(h,y,3)}},{key:"EQ",value:function(h,y){for(;;){if(k.__isBigInt(h))return k.__isBigInt(y)?k.equal(h,y):k.EQ(y,h);if(typeof h=="number"){if(k.__isBigInt(y))return k.__equalToNumber(y,h);if(he(y)!=="object")return h==y;y=k.__toPrimitive(y)}else if(typeof h=="string"){if(k.__isBigInt(y))return h=k.__fromString(h),h!==null&&k.equal(h,y);if(he(y)!=="object")return h==y;y=k.__toPrimitive(y)}else if(typeof h=="boolean"){if(k.__isBigInt(y))return k.__equalToNumber(y,+h);if(he(y)!=="object")return h==y;y=k.__toPrimitive(y)}else if(he(h)==="symbol"){if(k.__isBigInt(y))return!1;if(he(y)!=="object")return h==y;y=k.__toPrimitive(y)}else if(he(h)==="object"){if(he(y)==="object"&&y.constructor!==k)return h==y;h=k.__toPrimitive(h)}else return h==y}}},{key:"NE",value:function(h,y){return!k.EQ(h,y)}},{key:"DataViewGetBigInt64",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return k.asIntN(64,k.DataViewGetBigUint64(h,y,C))}},{key:"DataViewGetBigUint64",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0&&arguments[2],I=C?[4,0]:[0,4],T=oe(I,2),R=T[0],F=T[1],B=h.getUint32(y+R,C),re=h.getUint32(y+F,C),X=new k(3,!1);return X.__setDigit(0,1073741823&re),X.__setDigit(1,(268435455&B)<<2|re>>>30),X.__setDigit(2,B>>>28),X.__trim()}},{key:"DataViewSetBigInt64",value:function(h,y,C){var I=3<arguments.length&&arguments[3]!==void 0&&arguments[3];k.DataViewSetBigUint64(h,y,C,I)}},{key:"DataViewSetBigUint64",value:function(h,y,C){var I=3<arguments.length&&arguments[3]!==void 0&&arguments[3];C=k.asUintN(64,C);var T=0,R=0;if(0<C.length&&(R=C.__digit(0),1<C.length)){var F=C.__digit(1);R|=F<<30,T=F>>>2,2<C.length&&(T|=C.__digit(2)<<28)}var B=I?[4,0]:[0,4],re=oe(B,2),X=re[0],ye=re[1];h.setUint32(y+X,T,I),h.setUint32(y+ye,R,I)}},{key:"__zero",value:function(){return new k(0,!1)}},{key:"__oneDigit",value:function(h,y){var C=new k(1,y);return C.__setDigit(0,h),C}},{key:"__decideRounding",value:function(h,y,C,I){if(0<y)return-1;var T;if(0>y)T=-y-1;else{if(C===0)return-1;C--,I=h.__digit(C),T=29}var R=1<<T;if((I&R)==0)return-1;if(R-=1,(I&R)!=0)return 1;for(;0<C;)if(C--,h.__digit(C)!==0)return 1;return 0}},{key:"__fromDouble",value:function(h){var y=0>h;k.__kBitConversionDouble[0]=h;var C,I=2047&k.__kBitConversionInts[k.__kBitConversionIntHigh]>>>20,T=I-1023,R=(0|T/30)+1,F=new k(R,y),B=1048576,re=1048575&k.__kBitConversionInts[k.__kBitConversionIntHigh]|B,X=k.__kBitConversionInts[k.__kBitConversionIntLow],ye=20,we=T%30,ge=0;if(we<ye){var ue=ye-we;ge=ue+32,C=re>>>ue,re=re<<32-ue|X>>>ue,X<<=32-ue}else if(we===ye)ge=32,C=re,re=X,X=0;else{var Ie=we-ye;ge=32-Ie,C=re<<Ie|X>>>32-Ie,re=X<<Ie,X=0}F.__setDigit(R-1,C);for(var Pe=R-2;0<=Pe;Pe--)0<ge?(ge-=30,C=re>>>2,re=re<<30|X>>>2,X<<=30):C=0,F.__setDigit(Pe,C);return F.__trim()}},{key:"__isWhitespace",value:function(h){return 13>=h&&9<=h||(159>=h?h==32:131071>=h?h==160||h==5760:196607>=h?(h&=131071,10>=h||h==40||h==41||h==47||h==95||h==4096):h==65279)}},{key:"__fromString",value:function(h){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,C=0,I=h.length,T=0;if(T===I)return k.__zero();for(var R=h.charCodeAt(T);k.__isWhitespace(R);){if(++T===I)return k.__zero();R=h.charCodeAt(T)}if(R===43){if(++T===I)return null;R=h.charCodeAt(T),C=1}else if(R===45){if(++T===I)return null;R=h.charCodeAt(T),C=-1}if(y===0){if(y=10,R===48){if(++T===I)return k.__zero();if(R=h.charCodeAt(T),R===88||R===120){if(y=16,++T===I)return null;R=h.charCodeAt(T)}else if(R===79||R===111){if(y=8,++T===I)return null;R=h.charCodeAt(T)}else if(R===66||R===98){if(y=2,++T===I)return null;R=h.charCodeAt(T)}}}else if(y===16&&R===48){if(++T===I)return k.__zero();if(R=h.charCodeAt(T),R===88||R===120){if(++T===I)return null;R=h.charCodeAt(T)}}if(C!==0&&y!==10)return null;for(;R===48;){if(++T===I)return k.__zero();R=h.charCodeAt(T)}var F=I-T,B=k.__kMaxBitsPerChar[y],re=k.__kBitsPerCharTableMultiplier-1;if(F>1073741824/B)return null;var X=B*F+re>>>k.__kBitsPerCharTableShift,ye=0|(X+29)/30,we=new k(ye,!1),ge=10>y?y:10,ue=10<y?y-10:0;if((y&y-1)==0){B>>=k.__kBitsPerCharTableShift;var Ie=[],Pe=[],Ye=!1;do{for(var Ue,We=0,at=0;;){if(Ue=void 0,R-48>>>0<ge)Ue=R-48;else if((32|R)-97>>>0<ue)Ue=(32|R)-87;else{Ye=!0;break}if(at+=B,We=We<<B|Ue,++T===I){Ye=!0;break}if(R=h.charCodeAt(T),30<at+B)break}Ie.push(We),Pe.push(at)}while(!Ye);k.__fillFromParts(we,Ie,Pe)}else{we.__initializeDigits();var st=!1,yt=0;do{for(var Hn,_o=0,xe=1;;){if(Hn=void 0,R-48>>>0<ge)Hn=R-48;else if((32|R)-97>>>0<ue)Hn=(32|R)-87;else{st=!0;break}var bo=xe*y;if(1073741823<bo)break;if(xe=bo,_o=_o*y+Hn,yt++,++T===I){st=!0;break}R=h.charCodeAt(T)}re=30*k.__kBitsPerCharTableMultiplier-1;var Xa=0|(B*yt+re>>>k.__kBitsPerCharTableShift)/30;we.__inplaceMultiplyAdd(xe,_o,Xa)}while(!st)}if(T!==I){if(!k.__isWhitespace(R))return null;for(T++;T<I;T++)if(R=h.charCodeAt(T),!k.__isWhitespace(R))return null}return we.sign=C===-1,we.__trim()}},{key:"__fillFromParts",value:function(h,y,C){for(var I=0,T=0,R=0,F=y.length-1;0<=F;F--){var B=y[F],re=C[F];T|=B<<R,R+=re,R===30?(h.__setDigit(I++,T),R=0,T=0):30<R&&(h.__setDigit(I++,1073741823&T),R-=30,T=B>>>re-R)}if(T!==0){if(I>=h.length)throw new Error("implementation bug");h.__setDigit(I++,T)}for(;I<h.length;I++)h.__setDigit(I,0)}},{key:"__toStringBasePowerOfTwo",value:function(h,y){var C=h.length,I=y-1;I=(85&I>>>1)+(85&I),I=(51&I>>>2)+(51&I),I=(15&I>>>4)+(15&I);var T=I,R=y-1,F=h.__digit(C-1),B=k.__clz30(F),re=30*C-B,X=0|(re+T-1)/T;if(h.sign&&X++,268435456<X)throw new Error("string too long");for(var ye=Array(X),we=X-1,ge=0,ue=0,Ie=0;Ie<C-1;Ie++){var Pe=h.__digit(Ie),Ye=(ge|Pe<<ue)&R;ye[we--]=k.__kConversionChars[Ye];var Ue=T-ue;for(ge=Pe>>>Ue,ue=30-Ue;ue>=T;)ye[we--]=k.__kConversionChars[ge&R],ge>>>=T,ue-=T}var We=(ge|F<<ue)&R;for(ye[we--]=k.__kConversionChars[We],ge=F>>>T-ue;ge!==0;)ye[we--]=k.__kConversionChars[ge&R],ge>>>=T;if(h.sign&&(ye[we--]="-"),we!==-1)throw new Error("implementation bug");return ye.join("")}},{key:"__toStringGeneric",value:function(h,y,C){var I=h.length;if(I===0)return"";if(I===1){var T=h.__unsignedDigit(0).toString(y);return C===!1&&h.sign&&(T="-"+T),T}var R=30*I-k.__clz30(h.__digit(I-1)),F=k.__kMaxBitsPerChar[y],B=F-1,re=R*k.__kBitsPerCharTableMultiplier;re+=B-1,re=0|re/B;var X,ye,we=re+1>>1,ge=k.exponentiate(k.__oneDigit(y,!1),k.__oneDigit(we,!1)),ue=ge.__unsignedDigit(0);if(ge.length===1&&32767>=ue){X=new k(h.length,!1),X.__initializeDigits();for(var Ie,Pe=0,Ye=2*h.length-1;0<=Ye;Ye--)Ie=Pe<<15|h.__halfDigit(Ye),X.__setHalfDigit(Ye,0|Ie/ue),Pe=0|Ie%ue;ye=Pe.toString(y)}else{var Ue=k.__absoluteDivLarge(h,ge,!0,!0);X=Ue.quotient;var We=Ue.remainder.__trim();ye=k.__toStringGeneric(We,y,!0)}X.__trim();for(var at=k.__toStringGeneric(X,y,!0);ye.length<we;)ye="0"+ye;return C===!1&&h.sign&&(at="-"+at),at+ye}},{key:"__unequalSign",value:function(h){return h?-1:1}},{key:"__absoluteGreater",value:function(h){return h?-1:1}},{key:"__absoluteLess",value:function(h){return h?1:-1}},{key:"__compareToBigInt",value:function(h,y){var C=h.sign;if(C!==y.sign)return k.__unequalSign(C);var I=k.__absoluteCompare(h,y);return 0<I?k.__absoluteGreater(C):0>I?k.__absoluteLess(C):0}},{key:"__compareToNumber",value:function(h,y){if(k.__isOneDigitInt(y)){var C=h.sign,I=0>y;if(C!==I)return k.__unequalSign(C);if(h.length===0){if(I)throw new Error("implementation bug");return y===0?0:-1}if(1<h.length)return k.__absoluteGreater(C);var T=J(y),R=h.__unsignedDigit(0);return R>T?k.__absoluteGreater(C):R<T?k.__absoluteLess(C):0}return k.__compareToDouble(h,y)}},{key:"__compareToDouble",value:function(h,y){if(y!==y)return y;if(y===1/0)return-1;if(y===-1/0)return 1;var C=h.sign,I=0>y;if(C!==I)return k.__unequalSign(C);if(y===0)throw new Error("implementation bug: should be handled elsewhere");if(h.length===0)return-1;k.__kBitConversionDouble[0]=y;var T=2047&k.__kBitConversionInts[k.__kBitConversionIntHigh]>>>20;if(T==2047)throw new Error("implementation bug: handled elsewhere");var R=T-1023;if(0>R)return k.__absoluteGreater(C);var F=h.length,B=h.__digit(F-1),re=k.__clz30(B),X=30*F-re,ye=R+1;if(X<ye)return k.__absoluteLess(C);if(X>ye)return k.__absoluteGreater(C);var we=1048576,ge=1048576|1048575&k.__kBitConversionInts[k.__kBitConversionIntHigh],ue=k.__kBitConversionInts[k.__kBitConversionIntLow],Ie=20,Pe=29-re;if(Pe!==(0|(X-1)%30))throw new Error("implementation bug");var Ye,Ue=0;if(Pe<Ie){var We=Ie-Pe;Ue=We+32,Ye=ge>>>We,ge=ge<<32-We|ue>>>We,ue<<=32-We}else if(Pe===Ie)Ue=32,Ye=ge,ge=ue,ue=0;else{var at=Pe-Ie;Ue=32-at,Ye=ge<<at|ue>>>32-at,ge=ue<<at,ue=0}if(B>>>=0,Ye>>>=0,B>Ye)return k.__absoluteGreater(C);if(B<Ye)return k.__absoluteLess(C);for(var st=F-2;0<=st;st--){0<Ue?(Ue-=30,Ye=ge>>>2,ge=ge<<30|ue>>>2,ue<<=30):Ye=0;var yt=h.__unsignedDigit(st);if(yt>Ye)return k.__absoluteGreater(C);if(yt<Ye)return k.__absoluteLess(C)}if(ge!==0||ue!==0){if(Ue===0)throw new Error("implementation bug");return k.__absoluteLess(C)}return 0}},{key:"__equalToNumber",value:function(h,y){return k.__isOneDigitInt(y)?y===0?h.length===0:h.length===1&&h.sign===0>y&&h.__unsignedDigit(0)===J(y):k.__compareToDouble(h,y)===0}},{key:"__comparisonResultToBool",value:function(h,y){return y===0?0>h:y===1?0>=h:y===2?0<h:y===3?0<=h:void 0}},{key:"__compare",value:function(h,y,C){if(h=k.__toPrimitive(h),y=k.__toPrimitive(y),typeof h=="string"&&typeof y=="string")switch(C){case 0:return h<y;case 1:return h<=y;case 2:return h>y;case 3:return h>=y}if(k.__isBigInt(h)&&typeof y=="string")return y=k.__fromString(y),y!==null&&k.__comparisonResultToBool(k.__compareToBigInt(h,y),C);if(typeof h=="string"&&k.__isBigInt(y))return h=k.__fromString(h),h!==null&&k.__comparisonResultToBool(k.__compareToBigInt(h,y),C);if(h=k.__toNumeric(h),y=k.__toNumeric(y),k.__isBigInt(h)){if(k.__isBigInt(y))return k.__comparisonResultToBool(k.__compareToBigInt(h,y),C);if(typeof y!="number")throw new Error("implementation bug");return k.__comparisonResultToBool(k.__compareToNumber(h,y),C)}if(typeof h!="number")throw new Error("implementation bug");if(k.__isBigInt(y))return k.__comparisonResultToBool(k.__compareToNumber(y,h),2^C);if(typeof y!="number")throw new Error("implementation bug");return C===0?h<y:C===1?h<=y:C===2?h>y:C===3?h>=y:void 0}},{key:"__absoluteAdd",value:function(h,y,C){if(h.length<y.length)return k.__absoluteAdd(y,h,C);if(h.length===0)return h;if(y.length===0)return h.sign===C?h:k.unaryMinus(h);var I=h.length;(h.__clzmsd()===0||y.length===h.length&&y.__clzmsd()===0)&&I++;for(var T,R=new k(I,C),F=0,B=0;B<y.length;B++)T=h.__digit(B)+y.__digit(B)+F,F=T>>>30,R.__setDigit(B,1073741823&T);for(;B<h.length;B++){var re=h.__digit(B)+F;F=re>>>30,R.__setDigit(B,1073741823&re)}return B<R.length&&R.__setDigit(B,F),R.__trim()}},{key:"__absoluteSub",value:function(h,y,C){if(h.length===0)return h;if(y.length===0)return h.sign===C?h:k.unaryMinus(h);for(var I,T=new k(h.length,C),R=0,F=0;F<y.length;F++)I=h.__digit(F)-y.__digit(F)-R,R=1&I>>>30,T.__setDigit(F,1073741823&I);for(;F<h.length;F++){var B=h.__digit(F)-R;R=1&B>>>30,T.__setDigit(F,1073741823&B)}return T.__trim()}},{key:"__absoluteAddOne",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=h.length;C===null?C=new k(I,y):C.sign=y;for(var T,R=1,F=0;F<I;F++)T=h.__digit(F)+R,R=T>>>30,C.__setDigit(F,1073741823&T);return R!==0&&C.__setDigitGrow(I,1),C}},{key:"__absoluteSubOne",value:function(h,y){var C=h.length;y=y||C;for(var I,T=new k(y,!1),R=1,F=0;F<C;F++)I=h.__digit(F)-R,R=1&I>>>30,T.__setDigit(F,1073741823&I);if(R!==0)throw new Error("implementation bug");for(var B=C;B<y;B++)T.__setDigit(B,0);return T}},{key:"__absoluteAnd",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=h.length,T=y.length,R=T;if(I<T){R=I;var F=h,B=I;h=y,I=T,y=F,T=B}var re=R;C===null?C=new k(re,!1):re=C.length;for(var X=0;X<R;X++)C.__setDigit(X,h.__digit(X)&y.__digit(X));for(;X<re;X++)C.__setDigit(X,0);return C}},{key:"__absoluteAndNot",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=h.length,T=y.length,R=T;I<T&&(R=I);var F=I;C===null?C=new k(F,!1):F=C.length;for(var B=0;B<R;B++)C.__setDigit(B,h.__digit(B)&~y.__digit(B));for(;B<I;B++)C.__setDigit(B,h.__digit(B));for(;B<F;B++)C.__setDigit(B,0);return C}},{key:"__absoluteOr",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=h.length,T=y.length,R=T;if(I<T){R=I;var F=h,B=I;h=y,I=T,y=F,T=B}var re=I;C===null?C=new k(re,!1):re=C.length;for(var X=0;X<R;X++)C.__setDigit(X,h.__digit(X)|y.__digit(X));for(;X<I;X++)C.__setDigit(X,h.__digit(X));for(;X<re;X++)C.__setDigit(X,0);return C}},{key:"__absoluteXor",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,I=h.length,T=y.length,R=T;if(I<T){R=I;var F=h,B=I;h=y,I=T,y=F,T=B}var re=I;C===null?C=new k(re,!1):re=C.length;for(var X=0;X<R;X++)C.__setDigit(X,h.__digit(X)^y.__digit(X));for(;X<I;X++)C.__setDigit(X,h.__digit(X));for(;X<re;X++)C.__setDigit(X,0);return C}},{key:"__absoluteCompare",value:function(h,y){var C=h.length-y.length;if(C!=0)return C;for(var I=h.length-1;0<=I&&h.__digit(I)===y.__digit(I);)I--;return 0>I?0:h.__unsignedDigit(I)>y.__unsignedDigit(I)?1:-1}},{key:"__multiplyAccumulate",value:function(h,y,C,I){if(y!==0){for(var T=32767&y,R=y>>>15,F=0,B=0,re=0;re<h.length;re++,I++){var X=C.__digit(I),ye=h.__digit(re),we=32767&ye,ge=ye>>>15,ue=k.__imul(we,T),Ie=k.__imul(we,R),Pe=k.__imul(ge,T),Ye=k.__imul(ge,R);X+=B+ue+F,F=X>>>30,X&=1073741823,X+=((32767&Ie)<<15)+((32767&Pe)<<15),F+=X>>>30,B=Ye+(Ie>>>15)+(Pe>>>15),C.__setDigit(I,1073741823&X)}for(;F!==0||B!==0;I++){var Ue=C.__digit(I);Ue+=F+B,B=0,F=Ue>>>30,C.__setDigit(I,1073741823&Ue)}}}},{key:"__internalMultiplyAdd",value:function(h,y,C,I,T){for(var R=C,F=0,B=0;B<I;B++){var re=h.__digit(B),X=k.__imul(32767&re,y),ye=k.__imul(re>>>15,y),we=X+((32767&ye)<<15)+F+R;R=we>>>30,F=ye>>>15,T.__setDigit(B,1073741823&we)}if(T.length>I)for(T.__setDigit(I++,R+F);I<T.length;)T.__setDigit(I++,0);else if(R+F!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(h,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;C===null&&(C=new k(h.length,!1));for(var I=0,T=2*h.length-1;0<=T;T-=2){var R=(I<<15|h.__halfDigit(T))>>>0,F=0|R/y;I=0|R%y,R=(I<<15|h.__halfDigit(T-1))>>>0;var B=0|R/y;I=0|R%y,C.__setDigit(T>>>1,F<<15|B)}return C}},{key:"__absoluteModSmall",value:function(h,y){for(var C,I=0,T=2*h.length-1;0<=T;T--)C=(I<<15|h.__halfDigit(T))>>>0,I=0|C%y;return I}},{key:"__absoluteDivLarge",value:function(h,y,C,I){var T=y.__halfDigitLength(),R=y.length,F=h.__halfDigitLength()-T,B=null;C&&(B=new k(F+2>>>1,!1),B.__initializeDigits());var re=new k(T+2>>>1,!1);re.__initializeDigits();var X=k.__clz15(y.__halfDigit(T-1));0<X&&(y=k.__specialLeftShift(y,X,0));for(var ye=k.__specialLeftShift(h,X,1),we=y.__halfDigit(T-1),ge=0,ue=F;0<=ue;ue--){var Ie=32767,Pe=ye.__halfDigit(ue+T);if(Pe!==we){var Ye=(Pe<<15|ye.__halfDigit(ue+T-1))>>>0;Ie=0|Ye/we;for(var Ue=0|Ye%we,We=y.__halfDigit(T-2),at=ye.__halfDigit(ue+T-2);k.__imul(Ie,We)>>>0>(Ue<<16|at)>>>0&&(Ie--,Ue+=we,!(32767<Ue)););}k.__internalMultiplyAdd(y,Ie,0,R,re);var st=ye.__inplaceSub(re,ue,T+1);st!==0&&(st=ye.__inplaceAdd(y,ue,T),ye.__setHalfDigit(ue+T,32767&ye.__halfDigit(ue+T)+st),Ie--),C&&(1&ue?ge=Ie<<15:B.__setDigit(ue>>>1,ge|Ie))}if(I)return ye.__inplaceRightShift(X),C?{quotient:B,remainder:ye}:ye;if(C)return B;throw new Error("unreachable")}},{key:"__clz15",value:function(h){return k.__clz30(h)-15}},{key:"__specialLeftShift",value:function(h,y,C){var I=h.length,T=I+C,R=new k(T,!1);if(y===0){for(var F=0;F<I;F++)R.__setDigit(F,h.__digit(F));return 0<C&&R.__setDigit(I,0),R}for(var B,re=0,X=0;X<I;X++)B=h.__digit(X),R.__setDigit(X,1073741823&B<<y|re),re=B>>>30-y;return 0<C&&R.__setDigit(I,re),R}},{key:"__leftShiftByAbsolute",value:function(h,y){var C=k.__toShiftAmount(y);if(0>C)throw new RangeError("BigInt too big");var I=0|C/30,T=C%30,R=h.length,F=T!==0&&h.__digit(R-1)>>>30-T!=0,B=R+I+(F?1:0),re=new k(B,h.sign);if(T===0){for(var X=0;X<I;X++)re.__setDigit(X,0);for(;X<B;X++)re.__setDigit(X,h.__digit(X-I))}else{for(var ye=0,we=0;we<I;we++)re.__setDigit(we,0);for(var ge,ue=0;ue<R;ue++)ge=h.__digit(ue),re.__setDigit(ue+I,1073741823&ge<<T|ye),ye=ge>>>30-T;if(F)re.__setDigit(R+I,ye);else if(ye!==0)throw new Error("implementation bug")}return re.__trim()}},{key:"__rightShiftByAbsolute",value:function(h,y){var C=h.length,I=h.sign,T=k.__toShiftAmount(y);if(0>T)return k.__rightShiftByMaximum(I);var R=0|T/30,F=T%30,B=C-R;if(0>=B)return k.__rightShiftByMaximum(I);var re=!1;if(I){var X=(1<<F)-1;if((h.__digit(R)&X)!=0)re=!0;else for(var ye=0;ye<R;ye++)if(h.__digit(ye)!==0){re=!0;break}}if(re&&F===0){var we=h.__digit(C-1),ge=~we==0;ge&&B++}var ue=new k(B,I);if(F===0){ue.__setDigit(B-1,0);for(var Ie=R;Ie<C;Ie++)ue.__setDigit(Ie-R,h.__digit(Ie))}else{for(var Pe,Ye=h.__digit(R)>>>F,Ue=C-R-1,We=0;We<Ue;We++)Pe=h.__digit(We+R+1),ue.__setDigit(We,1073741823&Pe<<30-F|Ye),Ye=Pe>>>F;ue.__setDigit(Ue,Ye)}return re&&(ue=k.__absoluteAddOne(ue,!0,ue)),ue.__trim()}},{key:"__rightShiftByMaximum",value:function(h){return h?k.__oneDigit(1,!0):k.__zero()}},{key:"__toShiftAmount",value:function(h){if(1<h.length)return-1;var y=h.__unsignedDigit(0);return y>k.__kMaxLengthBits?-1:y}},{key:"__toPrimitive",value:function(h){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(he(h)!=="object"||h.constructor===k)return h;if(typeof Symbol<"u"&&he(Symbol.toPrimitive)==="symbol"&&h[Symbol.toPrimitive]){var C=h[Symbol.toPrimitive](y);if(he(C)!=="object")return C;throw new TypeError("Cannot convert object to primitive value")}var I=h.valueOf;if(I){var T=I.call(h);if(he(T)!=="object")return T}var R=h.toString;if(R){var F=R.call(h);if(he(F)!=="object")return F}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(h){return k.__isBigInt(h)?h:+h}},{key:"__isBigInt",value:function(h){return he(h)==="object"&&h!==null&&h.constructor===k}},{key:"__truncateToNBits",value:function(h,y){for(var C=0|(h+29)/30,I=new k(C,y.sign),T=C-1,R=0;R<T;R++)I.__setDigit(R,y.__digit(R));var F=y.__digit(T);if(h%30!=0){var B=32-h%30;F=F<<B>>>B}return I.__setDigit(T,F),I.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(h,y,C){for(var I=Math.min,T,R=0|(h+29)/30,F=new k(R,C),B=0,re=R-1,X=0,ye=I(re,y.length);B<ye;B++)T=0-y.__digit(B)-X,X=1&T>>>30,F.__setDigit(B,1073741823&T);for(;B<re;B++)F.__setDigit(B,0|1073741823&-X);var we,ge=re<y.length?y.__digit(re):0,ue=h%30;if(ue===0)we=0-ge-X,we&=1073741823;else{var Ie=32-ue;ge=ge<<Ie>>>Ie;var Pe=1<<32-Ie;we=Pe-ge-X,we&=Pe-1}return F.__setDigit(re,we),F.__trim()}},{key:"__digitPow",value:function(h,y){for(var C=1;0<y;)1&y&&(C*=h),y>>>=1,h*=h;return C}},{key:"__detectBigEndian",value:function(){return k.__kBitConversionDouble[0]=-0,k.__kBitConversionInts[0]!==0}},{key:"__isOneDigitInt",value:function(h){return(1073741823&h)===h}}])})(Me(Array));return me.__kMaxLength=33554432,me.__kMaxLengthBits=me.__kMaxLength<<5,me.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],me.__kBitsPerCharTableShift=5,me.__kBitsPerCharTableMultiplier=1<<me.__kBitsPerCharTableShift,me.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],me.__kBitConversionBuffer=new ArrayBuffer(8),me.__kBitConversionDouble=new Float64Array(me.__kBitConversionBuffer),me.__kBitConversionInts=new Int32Array(me.__kBitConversionBuffer),me.__kBitConversionIntHigh=me.__detectBigEndian()?0:1,me.__kBitConversionIntLow=me.__detectBigEndian()?1:0,me.__clz30=e?function(z){return e(z)-2}:function(z){var J=Math.LN2,G=Math.log;return z===0?30:0|29-(0|G(z>>>0)/J)},me.__imul=t||function(z,J){return 0|z*J},me})});function Ns(t){if(!t)return{};let e={},n=(i,a)=>{if(!(!i||typeof i!="object"))for(let s in i)Object.hasOwn(i,s)&&a[s]===void 0&&(a[s]=i[s])};return n(t,e),n(t.item,e),n(t.reference,e),e}var Hc=Xt(Qt());var{Fragment:Gc,jsx:ce,jsxs:Be}=Spicetify.ReactJSX;var ha={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},power:{path:"M11.6081 2.2045c1.394.8028 2.484 2.0434 3.101 3.529.6169 1.4856.7264 3.1334.3112 4.6877-.4152 1.5542-1.3317 2.928-2.6072 3.9081-1.2755.9801-2.8389 1.5119-4.4478 1.5126-1.6086.0009-3.1726-.5292-4.4492-1.508S1.3216 11.9823.9049 10.4286c-.4168-1.5538-.3091-3.2017.3064-4.6879.6153-1.4863 1.704-2.728 3.0972-3.5323.3495-.2018.7963-.0821.998.2674.2018.3495.0821.7963-.2674.998-1.1146.6434-1.9855 1.6368-2.4779 2.8258-.4923 1.1891-.5785 2.5074-.2451 3.7504.3334 1.2429 1.0677 2.3412 2.0891 3.1243 1.0213.783 2.2725 1.2071 3.5593 1.2064 1.287-.0007 2.5377-.426 3.5582-1.2102 1.0204-.7842 1.7537-1.8832 2.0858-3.1264.3321-1.2433.2445-2.5616-.249-3.75-.4937-1.1885-1.3657-2.1809-2.4808-2.8232-.3497-.2014-.4699-.6481-.2685-.9978.2014-.3496.6481-.4699.9978-.2685ZM8.6922.7424v5.845c0 .4035-.3271.7306-.7306.7306s-.7306-.3271-.7306-.7306V.7424c0-.4035.3271-.7306.7306-.7306s.7306.3271.7306.7306Z",size:16},restart:{path:"M12.5002 8C12.5002 5.51472 10.4855 3.5 8.0002 3.5C6.66806 3.5 5.47057 4.07854 4.64593 5H6.2502C6.66441 5 7.0002 5.33579 7.0002 5.75C7.0002 6.16421 6.66441 6.5 6.2502 6.5H3.2502C2.83598 6.5 2.5002 6.16421 2.5002 5.75V2.75C2.5002 2.33579 2.83598 2 3.2502 2C3.66441 2 4.0002 2.33579 4.0002 2.75V3.52793C5.06126 2.57829 6.46302 2 8.0002 2C11.3139 2 14.0002 4.68629 14.0002 8C14.0002 11.3137 11.3139 14 8.0002 14C4.97538 14 2.47448 11.7624 2.06031 8.85192C2.00195 8.44184 2.28708 8.0621 2.69717 8.00374C3.10725 7.94538 3.48699 8.23052 3.54535 8.6406C3.8558 10.8222 5.73271 12.5 8.0002 12.5C10.4855 12.5 12.5002 10.4853 12.5002 8Z",size:16},reload:{path:"M3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.33213 3.5 10.5296 4.07854 11.3543 5H9.75C9.33579 5 9 5.33579 9 5.75C9 6.16421 9.33579 6.5 9.75 6.5H12.75C13.1642 6.5 13.5 6.16421 13.5 5.75V2.75C13.5 2.33579 13.1642 2 12.75 2C12.3358 2 12 2.33579 12 2.75V3.52793C10.9389 2.57829 9.53718 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.0248 14 13.5257 11.7624 13.9399 8.85192C13.9982 8.44184 13.7131 8.0621 13.303 8.00374C12.8929 7.94538 12.5132 8.23052 12.4548 8.6406C12.1444 10.8222 10.2675 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8Z",size:16},book:{path:"M2.75 2C1.7835 2 1 2.7835 1 3.75V12.25C1 13.2165 1.7835 14 2.75 14H6C6.78802 14 7.49862 13.6686 8 13.1375C8.50139 13.6686 9.21198 14 10 14H13.25C14.2165 14 15 13.2165 15 12.25V3.75C15 2.7835 14.2165 2 13.25 2H10C9.21199 2 8.50138 2.33144 8 2.86253C7.49862 2.33144 6.78801 2 6 2H2.75ZM7.25 4.75V11.25C7.25 11.9404 6.69036 12.5 6 12.5H2.75C2.61193 12.5 2.5 12.3881 2.5 12.25V3.75C2.5 3.61193 2.61193 3.5 2.75 3.5H6C6.69036 3.5 7.25 4.05964 7.25 4.75ZM8.75 11.25V4.75C8.75 4.05964 9.30964 3.5 10 3.5H13.25C13.3881 3.5 13.5 3.61193 13.5 3.75V12.25C13.5 12.3881 13.3881 12.5 13.25 12.5H10C9.30964 12.5 8.75 11.9404 8.75 11.25Z",size:16},code:{path:"M10.2912 2.2089c.4315.1918.6259.6971.4341 1.1286l-4.56 10.26c-.1918.4315-.6971.6259-1.1286.434-.4315-.1917-.6258-.697-.4341-1.1285l4.56-10.26c.1918-.4315.6971-.6258 1.1286-.4341ZM4.128 4.9162c.3529.3137.3847.8541.071 1.2071L2.424 8.1202l1.7751 1.997c.3137.3529.2819.8934-.071 1.207-.3529.3137-.8933.2819-1.2071-.0709L.641 8.6882c-.288-.3239-.288-.8121 0-1.1361l2.28-2.565c.3137-.3529.8541-.3847 1.2071-.071Zm7.9839 0c.3529-.3137.8934-.2819 1.2071.071l2.28 2.565c.2878.324.2878.8121 0 1.1361l-2.28 2.565c-.3137.3528-.8542.3846-1.2071.0709-.3529-.3136-.3846-.8541-.071-1.207l1.7751-1.997-1.7751-1.997c-.3136-.3529-.2819-.8933.071-1.2071Z",size:16},person:{path:"M8.11 1.325c1.2275-0 2.2225.995 2.2225 2.2225S9.3375 5.77 8.11 5.77c-1.2275 0-2.2225-.995-2.2225-2.2225 0-1.2275.995-2.2225 2.2225-2.2225Zm0-1.27c-1.9289 0-3.4925 1.5636-3.4925 3.4925S6.1811 7.04 8.11 7.04c1.9289 0 3.4925-1.5636 3.4925-3.4925C11.6025 1.6186 10.0389.055 8.11.055ZM12.555 9.58c.3506 0 .635.2843.635.635v.635c0 1.8258-1.8189 3.81-5.08 3.81-3.2612 0-5.08-1.9842-5.08-3.81v-.635c0-.3507.2843-.635.635-.635h8.89Zm0-1.27H3.665c-1.0521 0-1.905.8529-1.905 1.905v.635c0 2.5037 2.3616 5.08 6.35 5.08s6.35-2.5763 6.35-5.08v-.635c0-1.0521-.8529-1.905-1.905-1.905Z",size:16}},Gm=t=>{let{path:e,size:n}=ha[t],i=a=>{let s=(0,Hc.c)(4),{size:c,fill:l}=a,p=c===void 0?n:c,m=l===void 0?"currentColor":l,g;s[0]===Symbol.for("react.memo_cache_sentinel")?(g=ce("path",{d:e}),s[0]=g):g=s[0];let b;return s[1]!==m||s[2]!==p?(b=ce("svg",{fill:m,height:p,role:"img",viewBox:`0 0 ${n} ${n}`,width:p,children:g}),s[1]=m,s[2]=p,s[3]=b):b=s[3],b};return i.defaultProps={size:n,fill:"currentColor"},i},{raw:Hm,react:Xm,html:Jm}=Object.keys(ha).reduce((t,e)=>(t.raw[e]=ha[e].path,t.react[e]=Gm(e),t.html[e]=`<path d="${ha[e].path}"/>`,t),{raw:{},react:{},html:{}}),kt={React:Xm,HTML:Jm,RAW:Hm};var Qc=Xt(Qt());Ft();var{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:$0,createPortal:A0,createRoot:fa,findDOMNode:L0,flushSync:B0,hydrate:Y0,hydrateRoot:z0,render:F0,unmountComponentAtNode:q0,unstable_batchedUpdates:U0,unstable_renderSubtreeIntoContainer:K0,version:Z0}=Spicetify.ReactDOM,W0=Spicetify.ReactDOM;var Xc=new CSSStyleSheet;Xc.replaceSync(".modal{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--spice-rgb-shadow),.5)}.modal__container{display:flex;flex-direction:column;width:500px;max-height:500px;background-color:rgba(var(--spice-rgb-main),.9);border-radius:6px;box-shadow:0 0 20px rgba(var(--spice-rgb-shadow),.5);backdrop-filter:blur(20px) saturate(1.4) brightness(1.2)}.modal__container--large{width:clamp(550px,60vw,650px);max-height:80vh}.modal__header{display:flex;justify-content:space-between;padding:32px 32px 8px;border-bottom:1px solid rgba(var(--spice-rgb-selected-row),.1)}.modal__titleContainer{display:flex;gap:8px}.modal__icon{display:flex;align-items:center}.modal__title{display:flex}.modal__buttonContainer{display:flex;gap:8px;align-items:center}.modal__buttonContainer .modal__button{height:32px;padding:8px;cursor:pointer;background-color:var(--spice-highlight);border:0;border-radius:8px}.modal__buttonContainer .modal__button:hover{transform:scale(1.1)}.modal__buttonContainer .modal__button:active{transform:scale(.9)}.modal__content{display:flex;padding:16px 24px;overflow:auto;scrollbar-gutter:stable both-edges}.modal__content>*{width:100%}");var Jc=Xc;document.adoptedStyleSheets.push(Jc);var Lo=null,zs="popup-modal-container",Fs=()=>{let t=document.getElementById(zs);Lo&&(Lo.unmount(),Lo=null),t&&t.remove(),document.body.style.overflow="auto"},Qm=ut(t=>{let e=(0,Qc.c)(44),{title:n,content:i,isLarge:a,buttons:s,icon:c,template:l,onClose:p}=t,m=xt(null),g,b;e[0]!==p?(g=()=>{document.body.style.overflow="hidden";let he=Se=>{Se.key==="Escape"&&(Se.preventDefault(),p())};return document.addEventListener("keydown",he),()=>{document.removeEventListener("keydown",he)}},b=[p],e[0]=p,e[1]=g,e[2]=b):(g=e[1],b=e[2]),un(g,b);let w;e[3]!==p?(w=()=>{p()},e[3]=p,e[4]=w):w=e[4];let E=w,M;e[5]!==E?(M=he=>{he.target===m.current&&E()},e[5]=E,e[6]=M):M=e[6];let P=M,N;e[7]!==i?(N=()=>$s(i)?i:typeof i=="function"?ce(i,{}):i,e[7]=i,e[8]=N):N=e[8];let K=N;if(l===!0){let he=`modal__container${a?" modal__container--large":""}`,Se;e[9]!==c?(Se=c&&ce("div",{className:"modal__icon",children:c}),e[9]=c,e[10]=Se):Se=e[10];let Me;e[11]!==n?(Me=n&&ce("h1",{className:"modal__title",children:n}),e[11]=n,e[12]=Me):Me=e[12];let me;e[13]!==Se||e[14]!==Me?(me=Be("div",{className:"modal__titleContainer",children:[Se,Me]}),e[13]=Se,e[14]=Me,e[15]=me):me=e[15];let z;e[16]===Symbol.for("react.memo_cache_sentinel")?(z=ce(kt.React.close,{size:18}),e[16]=z):z=e[16];let J;e[17]!==E?(J=ce(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:ce("button",{className:"modal__button modal__button--close",onClick:E,children:z})}),e[17]=E,e[18]=J):J=e[18];let G;e[19]!==s||e[20]!==J?(G=Be("div",{className:"modal__buttonContainer",children:[s,J]}),e[19]=s,e[20]=J,e[21]=G):G=e[21];let le;e[22]!==G||e[23]!==me?(le=Be("div",{className:"modal__header",children:[me,G]}),e[22]=G,e[23]=me,e[24]=le):le=e[24];let k;e[25]!==K?(k=K(),e[25]=K,e[26]=k):k=e[26];let q;e[27]!==k?(q=ce("div",{className:"modal__content",children:k}),e[27]=k,e[28]=q):q=e[28];let h;e[29]!==le||e[30]!==q||e[31]!==he?(h=Be("div",{className:he,children:[le,q]}),e[29]=le,e[30]=q,e[31]=he,e[32]=h):h=e[32];let y;return e[33]!==P||e[34]!==h?(y=ce("div",{className:"modal",onClick:P,ref:m,children:h}),e[33]=P,e[34]=h,e[35]=y):y=e[35],y}let Q=`modal__container${a?" modal__container--large":""}`,oe;e[36]!==K?(oe=K(),e[36]=K,e[37]=oe):oe=e[37];let se;e[38]!==Q||e[39]!==oe?(se=ce("div",{className:Q,children:oe}),e[38]=Q,e[39]=oe,e[40]=se):se=e[40];let de;return e[41]!==P||e[42]!==se?(de=ce("div",{className:"modal",onClick:P,ref:m,children:se}),e[41]=P,e[42]=se,e[43]=de):de=e[43],de}),Er=t=>{document.getElementById(zs)&&Fs();let e=document.createElement("div");e.id=zs,document.body.appendChild(e),Lo=fa(e),Lo.render(ce(Qm,{...t,onClose:Fs}))};Er.hide=Fs;var gr=Xt(Qt());var Y=Xt(Vc()),tn=Y.default.BigInt(0),ni=Y.default.BigInt(1),$u=Y.default.BigInt(2),Vm=Y.default.BigInt(10),ep=Y.default.BigInt(24),tp=Y.default.BigInt(60),np=Y.default.BigInt(1e3),bi=Y.default.BigInt(1e6),Xo=Y.default.BigInt(1e9),jl=Y.default.multiply(Y.default.BigInt(3600),Xo),rp=Y.default.multiply(tp,Xo),cr=Y.default.multiply(jl,ep);function $n(t){return typeof t=="bigint"?Y.default.BigInt(t.toString(10)):t}function Nl(t){return Y.default.equal(Y.default.remainder(t,$u),tn)}function Tr(t){return Y.default.lessThan(t,tn)?Y.default.unaryMinus(t):t}function ya(t,e){return Y.default.lessThan(t,e)?-1:Y.default.greaterThan(t,e)?1:0}function Fo(t,e){return{quotient:Y.default.divide(t,e),remainder:Y.default.remainder(t,e)}}var el,tl,Oe="slot-epochNanoSeconds",Re="slot-iso-date",Je="slot-iso-date-time",tt="slot-time",ae="slot-calendar",$l="slot-date-brand",Al="slot-year-month-brand",Ll="slot-month-day-brand",Ze="slot-time-zone",Et="slot-years",Tt="slot-months",qt="slot-weeks",It="slot-days",Mt="slot-hours",Ot="slot-minutes",Rt="slot-seconds",Pt="slot-milliseconds",jt="slot-microseconds",Ut="slot-nanoseconds",Bl="date",Yl="ym",zl="md",Fl="time",ql="datetime",Ul="instant",Br="original",eo="timezone-canonical",Xs="timezone-original",qo="calendar-id",Kl="locale",Js="options",Zl=new WeakMap,Qs=Symbol.for("@@Temporal__GetSlots");(el=globalThis)[Qs]||(el[Qs]=function(t){return Zl.get(t)});var Ra=globalThis[Qs],Vs=Symbol.for("@@Temporal__CreateSlots");(tl=globalThis)[Vs]||(tl[Vs]=function(t){Zl.set(t,Object.create(null))});var Wn=globalThis[Vs];function Bt(t,...e){if(!t||typeof t!="object")return!1;let n=Ra(t);return!!n&&e.every(i=>i in n)}function _(t,e){let n=Ra(t)?.[e];if(n===void 0)throw new TypeError(`Missing internal slot ${e}`);return n}function Ae(t,e,n){let i=Ra(t);if(i===void 0)throw new TypeError("Missing slots for the given container");if(i[e])throw new TypeError(`${e} already has set`);i[e]=n}var eu={};function Gn(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});let n=Object.getOwnPropertyNames(t);for(let a=0;a<n.length;a++){let s=n[a],c=Object.getOwnPropertyDescriptor(t,s);c.configurable&&c.enumerable&&(c.enumerable=!1,Object.defineProperty(t,s,c))}let i=Object.getOwnPropertyNames(t.prototype);for(let a=0;a<i.length;a++){let s=i[a],c=Object.getOwnPropertyDescriptor(t.prototype,s);c.configurable&&c.enumerable&&(c.enumerable=!1,Object.defineProperty(t.prototype,s,c))}tu(e,t),tu(`${e}.prototype`,t.prototype)}function tu(t,e){let n=`%${t}%`;if(eu[n]!==void 0)throw new Error(`intrinsic ${t} already exists`);eu[n]=e}function pt(t){return eu[t]}function no(t,e){let n=t;if(n===0)return{div:n,mod:n};let i=Math.sign(n);n=Math.abs(n);let a=Math.trunc(1+Math.log10(n));if(e>=a)return{div:0*i,mod:i*n};if(e===0)return{div:i*n,mod:0*i};let s=n.toPrecision(a);return{div:i*Number.parseInt(s.slice(0,a-e),10),mod:i*Number.parseInt(s.slice(a-e),10)}}function Ks(t,e,n){let i=t,a=n;if(i===0)return a;let s=Math.sign(i)||Math.sign(a);i=Math.abs(i),a=Math.abs(a);let c=i.toPrecision(Math.trunc(1+Math.log10(i)));if(a===0)return s*Number.parseInt(c+"0".repeat(e),10);let l=c+a.toPrecision(Math.trunc(1+Math.log10(a))).padStart(e,"0");return s*Number.parseInt(l,10)}function Pa(t,e){let n=e==="negative";switch(t){case"ceil":return n?"zero":"infinity";case"floor":return n?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return n?"half-zero":"half-infinity";case"halfFloor":return n?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function ja(t,e,n,i,a){return a==="zero"?t:a==="infinity"?e:n<0?t:n>0?e:a==="half-zero"?t:a==="half-infinity"?e:i?t:e}var He=class t{constructor(e){this.totalNs=$n(e),this.sec=Y.default.toNumber(Y.default.divide(this.totalNs,Xo)),this.subsec=Y.default.toNumber(Y.default.remainder(this.totalNs,Xo))}static validateNew(e,n){if(Y.default.greaterThan(Tr(e),t.MAX))throw new RangeError(`${n} of duration time units cannot exceed ${t.MAX} s`);return new t(e)}static fromEpochNsDiff(e,n){let i=Y.default.subtract($n(e),$n(n));return new t(i)}static fromComponents(e,n,i,a,s,c){let l=Y.default.add(Y.default.add(Y.default.add(Y.default.add(Y.default.add(Y.default.BigInt(c),Y.default.multiply(Y.default.BigInt(s),np)),Y.default.multiply(Y.default.BigInt(a),bi)),Y.default.multiply(Y.default.BigInt(i),Xo)),Y.default.multiply(Y.default.BigInt(n),rp)),Y.default.multiply(Y.default.BigInt(e),jl));return t.validateNew(l,"total")}abs(){return new t(Tr(this.totalNs))}add(e){return t.validateNew(Y.default.add(this.totalNs,e.totalNs),"sum")}add24HourDays(e){return t.validateNew(Y.default.add(this.totalNs,Y.default.multiply(Y.default.BigInt(e),cr)),"sum")}addToEpochNs(e){return Y.default.add($n(e),this.totalNs)}cmp(e){return ya(this.totalNs,e.totalNs)}divmod(e){let{quotient:n,remainder:i}=Fo(this.totalNs,Y.default.BigInt(e));return{quotient:Y.default.toNumber(n),remainder:new t(i)}}fdiv(e){let n=$n(e),i=Y.default.BigInt(n),{quotient:a,remainder:s}=Fo(this.totalNs,i),c=[],l,p=(Y.default.lessThan(this.totalNs,tn)?-1:1)*Math.sign(Y.default.toNumber(n));for(;!Y.default.equal(s,tn)&&c.length<50;)s=Y.default.multiply(s,Vm),{quotient:l,remainder:s}=Fo(s,i),c.push(Math.abs(Y.default.toNumber(l)));return p*+(Tr(a).toString()+"."+c.join(""))}isZero(){return Y.default.equal(this.totalNs,tn)}round(e,n){let i=$n(e);if(Y.default.equal(i,ni))return this;let{quotient:a,remainder:s}=Fo(this.totalNs,i),c=Y.default.lessThan(this.totalNs,tn)?"negative":"positive",l=Y.default.multiply(Tr(a),i),p=Y.default.add(l,i),m=ya(Tr(Y.default.multiply(s,$u)),i),g=Pa(n,c),b=Y.default.equal(Tr(this.totalNs),l)?l:ja(l,p,m,Nl(a),g),w=c==="positive"?b:Y.default.unaryMinus(b);return t.validateNew(w,"rounding")}sign(){return this.cmp(new t(tn))}subtract(e){return t.validateNew(Y.default.subtract(this.totalNs,e.totalNs),"difference")}};He.MAX=Y.default.BigInt("9007199254740991999999999"),He.ZERO=new He(tn);var nl=/[A-Za-z._][A-Za-z._0-9+-]*/,wi=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${nl.source})(?:\\/(?:${nl.source}))*)`),Wl=/(?:[+-]\d{6}|\d{4})/,ga=/(?:0[1-9]|1[0-2])/,nu=/(?:0[1-9]|[12]\d|3[01])/,op=new RegExp(`(${Wl.source})(?:-(${ga.source})-(${nu.source})|(${ga.source})(${nu.source}))`),Gl=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,Hl=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,Xl=new RegExp(`([zZ])|${Hl.source}?`),ao=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,ip=new RegExp([`^${op.source}`,`(?:(?:[tT]|\\s+)${Gl.source}(?:${Xl.source})?)?`,`(?:\\[!?(${wi.source})\\])?`,`((?:${ao.source})*)$`].join("")),ap=new RegExp([`^[tT]?${Gl.source}`,`(?:${Xl.source})?`,`(?:\\[!?${wi.source}\\])?`,`((?:${ao.source})*)$`].join("")),sp=new RegExp(`^(${Wl.source})-?(${ga.source})(?:\\[!?${wi.source}\\])?((?:${ao.source})*)$`),up=new RegExp(`^(?:--)?(${ga.source})-?(${nu.source})(?:\\[!?${wi.source}\\])?((?:${ao.source})*)$`),Zs=/(\d+)(?:[.,](\d{1,9}))?/,cp=new RegExp(`(?:${Zs.source}H)?(?:${Zs.source}M)?(?:${Zs.source}S)?`),lp=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${cp.source})?$`,"i"),lr=864e5,va=1e6*lr,dp=6e10,Jl=1e8*lr,so=gn(Jl),ri=Y.default.unaryMinus(so),hp=Y.default.add(Y.default.subtract(ri,cr),ni),fp=Y.default.subtract(Y.default.add(so,cr),ni),mp=146097*lr,rl=-271821,ol=275760,Jo=Date.UTC(1847,0,1),pp=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],yp=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function nt(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Na(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(t)}function $a(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(t)}function je(t){let e=Na(t);if(e===0)return 0;if(Number.isNaN(e)||e===1/0||e===-1/0)throw new RangeError("invalid number value");let n=Math.trunc(e);return n===0?0:n}function il(t,e){let n=je(t);if(n<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function pn(t){let e=Na(t);if(Number.isNaN(e))throw new RangeError("not a number");if(e===1/0||e===-1/0)throw new RangeError("infinity is out of range");if(!(function(n){if(typeof n!="number"||Number.isNaN(n)||n===1/0||n===-1/0)return!1;let i=Math.abs(n);return Math.floor(i)===i})(e))throw new RangeError(`unsupported fractional value ${t}`);return e===0?0:e}function oi(t,e){return String(t).padStart(e,"0")}function ct(t){if(typeof t!="string")throw new TypeError(`expected a string, not ${String(t)}`);return t}function ru(t,e){if(nt(t)){let n=t?.toString();if(typeof n=="string"||typeof n=="number")return n;throw new TypeError("Cannot convert object to primitive value")}return t}var ou=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],gp={era:$a,eraYear:je,year:je,month:il,monthCode:function(t){let e=ct(ru(t));if(e.length<3||e.length>4||e[0]!=="M"||"0123456789".indexOf(e[1])===-1||"0123456789".indexOf(e[2])===-1||e[1]+e[2]==="00"&&e[3]!=="L"||e[3]!=="L"&&e[3]!==void 0)throw new RangeError(`bad month code ${e}; must match M01-M99 or M00L-M99L`);return e},day:il,hour:je,minute:je,second:je,millisecond:je,microsecond:je,nanosecond:je,offset:function(t){let e=ct(ru(t));return go(e),e},timeZone:At},vp={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},uo=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],al=Object.fromEntries(uo.map(t=>[t[0],t[1]])),_p=Object.fromEntries(uo.map(([t,e])=>[e,t])),Qo=uo.map(([,t])=>t),co={day:va,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},_a=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],bp=Intl.DateTimeFormat,sl=new Map;function Ql(t){let e=ci(t),n=sl.get(e);return n===void 0&&(n=new bp("en-us",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),sl.set(e,n)),n}function ht(t){return Bt(t,Oe)&&!Bt(t,Ze,ae)}function Ve(t){return Bt(t,Et,Tt,It,Mt,Ot,Rt,Pt,jt,Ut)}function et(t){return Bt(t,$l)}function ot(t){return Bt(t,tt)}function Xe(t){return Bt(t,Je)}function ft(t){return Bt(t,Al)}function en(t){return Bt(t,Ll)}function Le(t){return Bt(t,Oe,Ze,ae)}function U(t,e){if(!e(t))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function mo(t){if(Bt(t,ae)||Bt(t,Ze))throw new TypeError("with() does not support a calendar or timeZone property");if(ot(t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function xi(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${t}]`}function Aa(t){let e,n,i=!1;for(ao.lastIndex=0;n=ao.exec(t);){let{1:a,2:s,3:c}=n;if(s==="u-ca"){if(e===void 0)e=c,i=a==="!";else if(a==="!"||i)throw new RangeError(`Invalid annotations in ${t}: more than one u-ca present with critical flag`)}else if(a==="!")throw new RangeError(`Unrecognized annotation: !${s}=${c}`)}return e}function On(t){let e=ip.exec(t);if(!e)throw new RangeError(`invalid RFC 9557 string: ${t}`);let n=Aa(e[16]),i=e[1];if(i==="-000000")throw new RangeError(`invalid RFC 9557 string: ${t}`);let a=+i,s=+(e[2]??e[4]??1),c=+(e[3]??e[5]??1),l=e[6]!==void 0,p=+(e[6]??0),m=+(e[7]??e[10]??0),g=+(e[8]??e[11]??0);g===60&&(g=59);let b=(e[9]??e[12]??"")+"000000000",w=+b.slice(0,3),E=+b.slice(3,6),M=+b.slice(6,9),P,N=!1;e[13]?(P=void 0,N=!0):e[14]&&(P=e[14]);let K=e[15];return Fu(a,s,c,p,m,g,w,E,M),{year:a,month:s,day:c,time:l?{hour:p,minute:m,second:g,millisecond:w,microsecond:E,nanosecond:M}:"start-of-day",tzAnnotation:K,offset:P,z:N,calendar:n}}function Vl(t){let e=ap.exec(t),n,i,a,s,c,l,p;if(e){p=Aa(e[10]),n=+(e[1]??0),i=+(e[2]??e[5]??0),a=+(e[3]??e[6]??0),a===60&&(a=59);let m=(e[4]??e[7]??"")+"000000000";if(s=+m.slice(0,3),c=+m.slice(3,6),l=+m.slice(6,9),e[8])throw new RangeError("Z designator not supported for PlainTime")}else{let m,g;if({time:m,z:g,calendar:p}=On(t),m==="start-of-day")throw new RangeError(`time is missing in string: ${t}`);if(g)throw new RangeError("Z designator not supported for PlainTime");({hour:n,minute:i,second:a,millisecond:s,microsecond:c,nanosecond:l}=m)}if(za(n,i,a,s,c,l),/[tT ][0-9][0-9]/.test(t))return{hour:n,minute:i,second:a,millisecond:s,microsecond:c,nanosecond:l,calendar:p};try{let{month:m,day:g}=Lu(t);Pr(1972,m,g)}catch{try{let{year:m,month:g}=Au(t);Pr(m,g,1)}catch{return{hour:n,minute:i,second:a,millisecond:s,microsecond:c,nanosecond:l,calendar:p}}}throw new RangeError(`invalid RFC 9557 time-only string ${t}; may need a T prefix`)}function Au(t){let e=sp.exec(t),n,i,a,s;if(e){a=Aa(e[3]);let c=e[1];if(c==="-000000")throw new RangeError(`invalid RFC 9557 string: ${t}`);if(n=+c,i=+e[2],s=1,a!==void 0&&a!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let c;if({year:n,month:i,calendar:a,day:s,z:c}=On(t),c)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:i,calendar:a,referenceISODay:s}}function Lu(t){let e=up.exec(t),n,i,a,s;if(e){if(a=Aa(e[3]),n=+e[1],i=+e[2],a!==void 0&&a!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let c;if({month:n,day:i,calendar:a,year:s,z:c}=On(t),c)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:i,calendar:a,referenceISOYear:s}}var ed=new RegExp(`^${wi.source}$`,"i"),td=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function nd(t){let e=xp.test(t)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${e}: ${t}`)}function ur(t){return ed.test(t)||nd(t),td.test(t)?{offsetMinutes:go(t)/6e10}:{tzName:t}}function Vo(t,e,n,i){let a=t,s=e,c=n;switch(i){case"reject":Pr(a,s,c);break;case"constrain":({year:a,month:s,day:c}=_d(a,s,c))}return{year:a,month:s,day:c}}function La(t,e,n,i,a,s,c){let l=t,p=e,m=n,g=i,b=a,w=s;switch(c){case"reject":za(l,p,m,g,b,w);break;case"constrain":l=Nt(l,0,23),p=Nt(p,0,59),m=Nt(m,0,59),g=Nt(g,0,999),b=Nt(b,0,999),w=Nt(w,0,999)}return{hour:l,minute:p,second:m,millisecond:g,microsecond:b,nanosecond:w}}function rd(t){if(!nt(t))throw new TypeError("invalid duration-like");let e={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0},n=!1;for(let i=0;i<_a.length;i++){let a=_a[i],s=t[a];s!==void 0&&(n=!0,e[a]=pn(s))}if(!n)throw new TypeError("invalid duration-like");return e}function bt({years:t,months:e,weeks:n,days:i},a,s,c){return{years:t,months:c??e,weeks:s??n,days:a??i}}function Ke(t,e){return{isoDate:t,time:e}}function qe(t){return qn(t,"overflow",["constrain","reject"],"constrain")}function ei(t){return qn(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function vn(t,e){return qn(t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function pa(t,e){return qn(t,"offset",["prefer","use","ignore","reject"],e)}function ki(t){return qn(t,"calendarName",["auto","always","never","critical"],"auto")}function po(t){let e=t.roundingIncrement;if(e===void 0)return 1;let n=je(e);if(n<1||n>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return n}function yo(t,e,n){let i=n?e:e-1;if(t>i)throw new RangeError(`roundingIncrement must be at least 1 and less than ${i}, not ${t}`);if(e%t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function Di(t){let e=t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if($a(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}let n=Math.floor(e);if(!Number.isFinite(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return n}function Ci(t,e){switch(t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}var Kn=Symbol("~required~");function Zt(t,e,n,i,a=[]){let s=[];for(let m=0;m<uo.length;m++){let g=uo[m],b=g[1],w=g[2];n!=="datetime"&&n!==w||s.push(b)}s=s.concat(a);let c=i;c===Kn?c=void 0:c!==void 0&&s.push(c);let l=[];l=l.concat(s);for(let m=0;m<s.length;m++){let g=s[m],b=_p[g];b!==void 0&&l.push(b)}let p=qn(t,e,l,c);if(p===void 0&&i===Kn)throw new RangeError(`${e} is required`);return p&&p in al?al[p]:p}function Ws(t){let e=t.relativeTo;if(e===void 0)return{};let n,i,a,s,c,l="option",p=!1;if(nt(e)){if(Le(e))return{zonedRelativeTo:e};if(et(e))return{plainRelativeTo:e};if(Xe(e))return{plainRelativeTo:$t(_(e,Je).isoDate,_(e,ae))};a=Mi(e);let m=an(a,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:n,time:i}=Ei(a,m,"constrain")),{offset:c,timeZone:s}=m,c===void 0&&(l="wall")}else{let m,g,b,w,E;if({year:b,month:w,day:E,time:i,calendar:a,tzAnnotation:m,offset:c,z:g}=On(ct(e)),m)s=At(m),g?l="exact":c||(l="wall"),p=!0;else if(g)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");a||(a="iso8601"),a=Yt(a),n={year:b,month:w,day:E}}return s===void 0?{plainRelativeTo:$t(n,a)}:{zonedRelativeTo:_t(ba(n,i,l,l==="option"?go(c):0,s,"compatible","reject",p),s,a)}}function An(t){return _(t,Et)!==0?"year":_(t,Tt)!==0?"month":_(t,qt)!==0?"week":_(t,It)!==0?"day":_(t,Mt)!==0?"hour":_(t,Ot)!==0?"minute":_(t,Rt)!==0?"second":_(t,Pt)!==0?"millisecond":_(t,jt)!==0?"microsecond":"nanosecond"}function zn(t,e){return Qo.indexOf(t)>Qo.indexOf(e)?e:t}function Dn(t){return t==="year"||t==="month"||t==="week"}function Ln(t){return Dn(t)||t==="day"?"date":"time"}function fr(t){return pt("%calendarImpl%")(t)}function Si(t){return pt("%calendarImpl%")(_(t,ae))}function Lt(t,e,n="date"){let i=Object.create(null),a=fr(t).isoToDate(e,{year:!0,monthCode:!0,day:!0});return i.monthCode=a.monthCode,n!=="month-day"&&n!=="date"||(i.day=a.day),n!=="year-month"&&n!=="date"||(i.year=a.year),i}function an(t,e,n,i,a){let s=fr(t).extraFields(n),c=n.concat(i,s),l=Object.create(null),p=!1;c.sort();for(let m=0;m<c.length;m++){let g=c[m],b=e[g];if(b!==void 0)p=!0,l[g]=(0,gp[g])(b);else if(a!=="partial"){if(a.includes(g))throw new TypeError(`required property '${g}' missing or undefined`);l[g]=vp[g]}}if(a==="partial"&&!p)throw new TypeError("no supported properties found");return l}function iu(t,e="complete"){let n=["hour","microsecond","millisecond","minute","nanosecond","second"],i=!1,a=Object.create(null);for(let s=0;s<n.length;s++){let c=n[s],l=t[c];l!==void 0?(a[c]=je(l),i=!0):e==="complete"&&(a[c]=0)}if(!i)throw new TypeError("invalid time-like");return a}function Uo(t,e){if(nt(t)){if(et(t))return qe(De(e)),$t(_(t,Re),_(t,ae));if(Le(t)){let p=hn(_(t,Ze),_(t,Oe));return qe(De(e)),$t(p.isoDate,_(t,ae))}if(Xe(t))return qe(De(e)),$t(_(t,Je).isoDate,_(t,ae));let l=Mi(t);return $t(dr(l,an(l,t,["year","month","monthCode","day"],[],[]),qe(De(e))),l)}let{year:n,month:i,day:a,calendar:s,z:c}=On(ct(t));if(c)throw new RangeError("Z designator not supported for PlainDate");return s||(s="iso8601"),s=Yt(s),qe(De(e)),$t({year:n,month:i,day:a},s)}function Ei(t,e,n){return Ke(dr(t,e,n),La(e.hour,e.minute,e.second,e.millisecond,e.microsecond,e.nanosecond,n))}function Ko(t,e){let n,i,a;if(nt(t)){if(Xe(t))return qe(De(e)),cn(_(t,Je),_(t,ae));if(Le(t)){let l=hn(_(t,Ze),_(t,Oe));return qe(De(e)),cn(l,_(t,ae))}if(et(t))return qe(De(e)),cn(Ke(_(t,Re),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),_(t,ae));a=Mi(t);let s=an(a,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),c=qe(De(e));({isoDate:n,time:i}=Ei(a,s,c))}else{let s,c,l,p;if({year:c,month:l,day:p,time:i,calendar:a,z:s}=On(ct(t)),s)throw new RangeError("Z designator not supported for PlainDateTime");i==="start-of-day"&&(i={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Fu(c,l,p,i.hour,i.minute,i.second,i.millisecond,i.microsecond,i.nanosecond),a||(a="iso8601"),a=Yt(a),qe(De(e)),n={year:c,month:l,day:p}}return cn(Ke(n,i),a)}function dn(t){let e=pt("%Temporal.Duration%");if(Ve(t))return new e(_(t,Et),_(t,Tt),_(t,qt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Pt),_(t,jt),_(t,Ut));if(!nt(t))return(function(a){let{years:s,months:c,weeks:l,days:p,hours:m,minutes:g,seconds:b,milliseconds:w,microseconds:E,nanoseconds:M}=(function(P){let N=lp.exec(P);if(!N)throw new RangeError(`invalid duration: ${P}`);if(N.every((C,I)=>I<2||C===void 0))throw new RangeError(`invalid duration: ${P}`);let K=N[1]==="-"?-1:1,Q=N[2]===void 0?0:je(N[2])*K,oe=N[3]===void 0?0:je(N[3])*K,se=N[4]===void 0?0:je(N[4])*K,de=N[5]===void 0?0:je(N[5])*K,he=N[6]===void 0?0:je(N[6])*K,Se=N[7],Me=N[8],me=N[9],z=N[10],J=N[11],G=0,le=0,k=0;if(Se!==void 0){if(Me??me??z??J)throw new RangeError("only the smallest unit can be fractional");k=3600*je((Se+"000000000").slice(0,9))*K}else if(G=Me===void 0?0:je(Me)*K,me!==void 0){if(z??J)throw new RangeError("only the smallest unit can be fractional");k=60*je((me+"000000000").slice(0,9))*K}else le=z===void 0?0:je(z)*K,J!==void 0&&(k=je((J+"000000000").slice(0,9))*K);let q=k%1e3,h=Math.trunc(k/1e3)%1e3,y=Math.trunc(k/1e6)%1e3;return le+=Math.trunc(k/1e9)%60,G+=Math.trunc(k/6e10),Fa(Q,oe,se,de,he,G,le,y,h,q),{years:Q,months:oe,weeks:se,days:de,hours:he,minutes:G,seconds:le,milliseconds:y,microseconds:h,nanoseconds:q}})(a);return new(pt("%Temporal.Duration%"))(s,c,l,p,m,g,b,w,E,M)})(ct(t));let n={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0},i=rd(t);for(let a=0;a<_a.length;a++){let s=_a[a],c=i[s];c!==void 0&&(n[s]=c)}return new e(n.years,n.months,n.weeks,n.days,n.hours,n.minutes,n.seconds,n.milliseconds,n.microseconds,n.nanoseconds)}function Zo(t){let e;if(nt(t)){if(ht(t)||Le(t))return yn(_(t,Oe));e=ru(t)}else e=t;let{year:n,month:i,day:a,time:s,offset:c,z:l}=(function(P){let N=On(P);if(!N.z&&!N.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return N})(ct(e)),{hour:p=0,minute:m=0,second:g=0,millisecond:b=0,microsecond:w=0,nanosecond:E=0}=s==="start-of-day"?{}:s,M=ui(n,i,a,p,m,g,b,w,E-(l?0:go(c)));return io(M.isoDate),yn(mt(M))}function ul(t,e){if(nt(t)){if(en(t))return qe(De(e)),ro(_(t,Re),_(t,ae));let l;return Bt(t,ae)?l=_(t,ae):(l=t.calendar,l===void 0&&(l="iso8601"),l=Ii(l)),ro(wa(l,an(l,t,["year","month","monthCode","day"],[],[]),qe(De(e))),l)}let{month:n,day:i,referenceISOYear:a,calendar:s}=Lu(ct(t));if(s===void 0&&(s="iso8601"),s=Yt(s),qe(De(e)),s==="iso8601")return ro({year:1972,month:n,day:i},s);let c={year:a,month:n,day:i};return Yr(c),c=wa(s,Lt(s,c,"month-day"),"constrain"),ro(c,s)}function ar(t,e){let n;if(nt(t)){if(ot(t))return qe(De(e)),Bn(_(t,tt));if(Xe(t))return qe(De(e)),Bn(_(t,Je).time);if(Le(t)){let m=hn(_(t,Ze),_(t,Oe));return qe(De(e)),Bn(m.time)}let{hour:i,minute:a,second:s,millisecond:c,microsecond:l,nanosecond:p}=iu(t);n=La(i,a,s,c,l,p,qe(De(e)))}else n=Vl(ct(t)),qe(De(e));return Bn(n)}function od(t){return t===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:_(ar(t),tt)}function Wo(t,e){if(nt(t)){if(ft(t))return qe(De(e)),oo(_(t,Re),_(t,ae));let l=Mi(t);return oo(ii(l,an(l,t,["year","month","monthCode"],[],[]),qe(De(e))),l)}let{year:n,month:i,referenceISODay:a,calendar:s}=Au(ct(t));s===void 0&&(s="iso8601"),s=Yt(s),qe(De(e));let c={year:n,month:i,day:a};return qu(c),c=ii(s,Lt(s,c,"year-month"),"constrain"),oo(c,s)}function ba(t,e,n,i,a,s,c,l){if(e==="start-of-day")return or(a,t);let p=Ke(t,e);if(n==="wall"||c==="ignore")return wt(a,p,s);if(n==="exact"||c==="use"){let b=ui(t.year,t.month,t.day,e.hour,e.minute,e.second,e.millisecond,e.microsecond,e.nanosecond-i);io(b.isoDate);let w=mt(b);return In(w),w}io(t);let m=mt(p),g=ai(a,p);for(let b=0;b<g.length;b++){let w=g[b],E=Y.default.toNumber(Y.default.subtract(m,w)),M=sr(E,6e10,"halfExpand");if(E===i||l&&M===i)return w}if(c==="reject"){let b=au(i),w=si(p,"iso8601","auto");throw new RangeError(`Offset ${b} is invalid for ${w} in ${a}`)}return fd(g,a,p,s)}function Go(t,e){let n,i,a,s,c,l,p,m=!1,g="option";if(nt(t)){if(Le(t)){let P=De(e);return ei(P),pa(P,"reject"),qe(P),_t(_(t,Oe),_(t,Ze),_(t,ae))}c=Mi(t);let w=an(c,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:s,timeZone:a}=w),s===void 0&&(g="wall");let E=De(e);l=ei(E),p=pa(E,"reject");let M=qe(E);({isoDate:n,time:i}=Ei(c,w,M))}else{let w,E,M,P,N;({year:M,month:P,day:N,time:i,tzAnnotation:w,offset:s,z:E,calendar:c}=(function(Q){let oe=On(Q);if(!oe.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return oe})(ct(t))),a=At(w),E?g="exact":s||(g="wall"),c||(c="iso8601"),c=Yt(c),m=!0;let K=De(e);l=ei(K),p=pa(K,"reject"),qe(K),n={year:M,month:P,day:N}}let b=0;return g==="option"&&(b=go(s)),_t(ba(n,i,g,b,a,l,p,m),a,c)}function id(t,e,n){Yr(e),Wn(t),Ae(t,Re,e),Ae(t,ae,n),Ae(t,$l,!0)}function $t(t,e){let n=pt("%Temporal.PlainDate%"),i=Object.create(n.prototype);return id(i,t,e),i}function ad(t,e,n){jr(e),Wn(t),Ae(t,Je,e),Ae(t,ae,n)}function cn(t,e){let n=pt("%Temporal.PlainDateTime%"),i=Object.create(n.prototype);return ad(i,t,e),i}function sd(t,e,n){Yr(e),Wn(t),Ae(t,Re,e),Ae(t,ae,n),Ae(t,Ll,!0)}function ro(t,e){let n=pt("%Temporal.PlainMonthDay%"),i=Object.create(n.prototype);return sd(i,t,e),i}function ud(t,e){Wn(t),Ae(t,tt,e)}function Bn(t){let e=pt("%Temporal.PlainTime%"),n=Object.create(e.prototype);return ud(n,t),n}function cd(t,e,n){qu(e),Wn(t),Ae(t,Re,e),Ae(t,ae,n),Ae(t,Al,!0)}function oo(t,e){let n=pt("%Temporal.PlainYearMonth%"),i=Object.create(n.prototype);return cd(i,t,e),i}function ld(t,e){In(e),Wn(t),Ae(t,Oe,e)}function yn(t){let e=pt("%Temporal.Instant%"),n=Object.create(e.prototype);return ld(n,t),n}function dd(t,e,n,i){In(e),Wn(t),Ae(t,Oe,e),Ae(t,Ze,n),Ae(t,ae,i)}function _t(t,e,n="iso8601"){let i=pt("%Temporal.ZonedDateTime%"),a=Object.create(i.prototype);return dd(a,t,e,n),a}function cl(t){return ou.filter(e=>t[e]!==void 0)}function Rr(t,e,n){let i=cl(n),a=fr(t).fieldKeysToIgnore(i),s=Object.create(null),c=cl(e);for(let l=0;l<ou.length;l++){let p,m=ou[l];c.includes(m)&&!a.includes(m)&&(p=e[m]),i.includes(m)&&(p=n[m]),p!==void 0&&(s[m]=p)}return s}function rn(t,e,n,i){let a=fr(t).dateAdd(e,n,i);return Yr(a),a}function Ti(t,e,n,i){return fr(t).dateUntil(e,n,i)}function Ii(t){if(nt(t)&&Bt(t,ae))return _(t,ae);let e=ct(t);try{return Yt(e)}catch{}let n;try{({calendar:n}=On(e))}catch{try{({calendar:n}=Vl(e))}catch{try{({calendar:n}=Au(e))}catch{({calendar:n}=Lu(e))}}}return n||(n="iso8601"),Yt(n)}function Mi(t){if(Bt(t,ae))return _(t,ae);let{calendar:e}=t;return e===void 0?"iso8601":Ii(e)}function Tn(t,e){return Yt(t)===Yt(e)}function dr(t,e,n){let i=fr(t);i.resolveFields(e,"date");let a=i.dateToISO(e,n);return Yr(a),a}function ii(t,e,n){let i=fr(t);i.resolveFields(e,"year-month"),e.day=1;let a=i.dateToISO(e,n);return qu(a),a}function wa(t,e,n){let i=fr(t);i.resolveFields(e,"month-day");let a=i.monthDayToISOReferenceDate(e,n);return Yr(a),a}function At(t){if(nt(t)&&Le(t))return _(t,Ze);let e=ct(t);if(e==="UTC")return"UTC";let{tzName:n,offsetMinutes:i}=(function(s){let{tzAnnotation:c,offset:l,z:p}=(function(m){if(ed.test(m))return{tzAnnotation:m,offset:void 0,z:!1};try{let{tzAnnotation:g,offset:b,z:w}=On(m);if(w||g||b)return{tzAnnotation:g,offset:b,z:w}}catch{}nd(m)})(s);return c?ur(c):p?ur("UTC"):l?ur(l):void 0})(e);if(i!==void 0)return Bu(i);let a=xa(n);if(!a)throw new RangeError(`Unrecognized time zone ${n}`);return a.identifier}function hd(t,e){if(t===e)return!0;let n=ur(t).offsetMinutes,i=ur(e).offsetMinutes;if(n===void 0&&i===void 0){let a=xa(e);if(!a)return!1;let s=xa(t);return!!s&&s.primaryIdentifier===a.primaryIdentifier}return n===i}function Yn(t,e){let n=ur(t).offsetMinutes;return n!==void 0?6e10*n:su(t,e)}function au(t){let e=t<0?"-":"+",n=Math.abs(t),i=Math.floor(n/36e11),a=Math.floor(n/6e10)%60,s=Math.floor(n/1e9)%60,c=n%1e9;return`${e}${Ba(i,a,s,c,s===0&&c===0?"minute":"auto")}`}function hn(t,e){let n=Yn(t,e),{isoDate:{year:i,month:a,day:s},time:{hour:c,minute:l,second:p,millisecond:m,microsecond:g,nanosecond:b}}=yd(e);return ui(i,a,s,c,l,p,m,g,b+n)}function wt(t,e,n){return fd(ai(t,e),t,e,n)}function fd(t,e,n,i){let a=t.length;if(a===1)return t[0];if(a)switch(i){case"compatible":case"earlier":return t[0];case"later":return t[a-1];case"reject":throw new RangeError("multiple instants found")}if(i==="reject")throw new RangeError("multiple instants found");let s=mt(n),c=Y.default.subtract(s,cr);In(c);let l=Yn(e,c),p=Y.default.add(s,cr);In(p);let m=Yn(e,p)-l;switch(i){case"earlier":{let g=He.fromComponents(0,0,0,0,0,-m),b=lo(n.time,g);return ai(e,Ke(Wt(n.isoDate.year,n.isoDate.month,n.isoDate.day+b.deltaDays),b))[0]}case"compatible":case"later":{let g=He.fromComponents(0,0,0,0,0,m),b=lo(n.time,g),w=ai(e,Ke(Wt(n.isoDate.year,n.isoDate.month,n.isoDate.day+b.deltaDays),b));return w[w.length-1]}}}function ai(t,e){if(t==="UTC")return io(e.isoDate),[mt(e)];let n=ur(t).offsetMinutes;if(n!==void 0){let i=ui(e.isoDate.year,e.isoDate.month,e.isoDate.day,e.time.hour,e.time.minute-n,e.time.second,e.time.millisecond,e.time.microsecond,e.time.nanosecond);io(i.isoDate);let a=mt(i);return In(a),[a]}return io(e.isoDate),(function(i,a){let s=mt(a),c=Y.default.subtract(s,cr);Y.default.lessThan(c,ri)&&(c=s);let l=Y.default.add(s,cr);Y.default.greaterThan(l,so)&&(l=s);let p=su(i,c),m=su(i,l);return(p===m?[p]:[p,m]).map(b=>{let w=Y.default.subtract(s,Y.default.BigInt(b)),E=(function(M,P){let{epochMilliseconds:N,time:{millisecond:K,microsecond:Q,nanosecond:oe}}=yd(P),{year:se,month:de,day:he,hour:Se,minute:Me,second:me}=gd(M,N);return ui(se,de,he,Se,Me,me,K,Q,oe)})(i,w);if(ho(a,E)===0)return In(w),w}).filter(b=>b!==void 0)})(t,e)}function or(t,e){let n=Ke(e,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),i=ai(t,n);if(i.length)return i[0];let a=mt(n),s=Y.default.subtract(a,cr);return In(s),zu(t,s)}function Oi(t){let e;return e=t<0||t>9999?(t<0?"-":"+")+oi(Math.abs(t),6):oi(t,4),e}function on(t){return oi(t,2)}function md(t,e){let n;if(e==="auto"){if(t===0)return"";n=oi(t,9).replace(/0+$/,"")}else{if(e===0)return"";n=oi(t,9).slice(0,e)}return`.${n}`}function Ba(t,e,n,i,a){let s=`${on(t)}:${on(e)}`;return a==="minute"||(s+=`:${on(n)}`,s+=md(i,a)),s}function ll(t,e,n){let i=e;i===void 0&&(i="UTC");let a=_(t,Oe),s=si(hn(i,a),"iso8601",n,"never"),c="Z";return e!==void 0&&(c=pd(Yn(i,a))),`${s}${c}`}function ma(t,e){let n=_(t,Et),i=_(t,Tt),a=_(t,qt),s=_(t,It),c=_(t,Mt),l=_(t,Ot),p=Da(t),m="";n!==0&&(m+=`${Math.abs(n)}Y`),i!==0&&(m+=`${Math.abs(i)}M`),a!==0&&(m+=`${Math.abs(a)}W`),s!==0&&(m+=`${Math.abs(s)}D`);let g="";c!==0&&(g+=`${Math.abs(c)}H`),l!==0&&(g+=`${Math.abs(l)}M`);let b=He.fromComponents(0,0,_(t,Rt),_(t,Pt),_(t,jt),_(t,Ut));b.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(An(t))&&e==="auto"||(g+=`${Math.abs(b.sec)}${md(Math.abs(b.subsec),e)}S`);let w=`${p<0?"-":""}P${m}`;return g&&(w=`${w}T${g}`),w}function dl(t,e="auto"){let{year:n,month:i,day:a}=_(t,Re);return`${Oi(n)}-${on(i)}-${on(a)}${xi(_(t,ae),e)}`}function hl({hour:t,minute:e,second:n,millisecond:i,microsecond:a,nanosecond:s},c){return Ba(t,e,n,1e6*i+1e3*a+s,c)}function si(t,e,n,i="auto"){let{isoDate:{year:a,month:s,day:c},time:{hour:l,minute:p,second:m,millisecond:g,microsecond:b,nanosecond:w}}=t;return`${Oi(a)}-${on(s)}-${on(c)}T${Ba(l,p,m,1e6*g+1e3*b+w,n)}${xi(e,i)}`}function fl(t,e="auto"){let{year:n,month:i,day:a}=_(t,Re),s=`${on(i)}-${on(a)}`,c=_(t,ae);e!=="always"&&e!=="critical"&&c==="iso8601"||(s=`${Oi(n)}-${s}`);let l=xi(c,e);return l&&(s+=l),s}function ml(t,e="auto"){let{year:n,month:i,day:a}=_(t,Re),s=`${Oi(n)}-${on(i)}`,c=_(t,ae);e!=="always"&&e!=="critical"&&c==="iso8601"||(s+=`-${on(a)}`);let l=xi(c,e);return l&&(s+=l),s}function pl(t,e,n="auto",i="auto",a="auto",s=void 0){let c=_(t,Oe);if(s){let{unit:g,increment:b,roundingMode:w}=s;c=du(c,b,g,w)}let l=_(t,Ze),p=Yn(l,c),m=si(hn(l,c),"iso8601",e,"never");return a!=="never"&&(m+=pd(p)),i!=="never"&&(m+=`[${i==="critical"?"!":""}${l}]`),m+=xi(_(t,ae),n),m}function yl(t){return td.test(t)}function go(t){let e=kp.exec(t);if(!e)throw new RangeError(`invalid time zone offset: ${t}; must match \xB1HH:MM[:SS.SSSSSSSSS]`);return(e[1]==="-"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}var Bo,wp=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function xa(t){if(Bo===void 0){let s=Intl.supportedValuesOf?.("timeZone");if(s){Bo=new Map;for(let c=0;c<s.length;c++){let l=s[c];Bo.set(ci(l),l)}}else Bo=null}let e=ci(t),n=Bo?.get(e);if(n)return{identifier:n,primaryIdentifier:n};try{n=Ql(t).resolvedOptions().timeZone}catch{return}if(e==="antarctica/south_pole"&&(n="Antarctica/McMurdo"),yp.has(t))throw new RangeError(`${t} is a legacy time zone identifier from ICU. Use ${n} instead`);let i=[...e].map((s,c)=>c===0||wp[e[c-1]]?s.toUpperCase():s).join("").split("/");if(i.length===1)return e==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:n}:{identifier:e.length<=3||/[-0-9]/.test(e)?e.toUpperCase():i[0],primaryIdentifier:n};if(i[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(i[1])?i[1]:i[1].toUpperCase()}`,primaryIdentifier:n};if(i[0]==="Us")return{identifier:`US/${i[1]}`,primaryIdentifier:n};let a=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return i[1]=a.get(i[1])??i[1],i.length>2&&(i[2]=a.get(i[2])??i[2]),{identifier:i.join("/"),primaryIdentifier:n}}function Mr(t,e){let{year:n,month:i,day:a,hour:s,minute:c,second:l}=gd(t,e),p=e%1e3;return p<0&&(p+=1e3),1e6*(Yu({isoDate:{year:n,month:i,day:a},time:{hour:s,minute:c,second:l,millisecond:p}})-e)}function su(t,e){return Mr(t,fn(e,"floor"))}function Bu(t){let e=t<0?"-":"+",n=Math.abs(t);return`${e}${Ba(Math.floor(n/60),n%60,0,0,"minute")}`}function pd(t){return Bu(sr(t,dp,"halfExpand")/6e10)}function Yu({isoDate:{year:t,month:e,day:n},time:{hour:i,minute:a,second:s,millisecond:c}}){let l=t%400,p=(t-l)/400,m=new Date;return m.setUTCHours(i,a,s,c),m.setUTCFullYear(l,e-1,n),m.getTime()+mp*p}function mt(t){let e=Yu(t),n=1e3*t.time.microsecond+t.time.nanosecond;return Y.default.add(gn(e),Y.default.BigInt(n))}function yd(t){let e=fn(t,"trunc"),n=Y.default.toNumber(Y.default.remainder(t,bi));n<0&&(n+=1e6,e-=1);let i=Math.floor(n/1e3)%1e3,a=n%1e3,s=new Date(e);return{epochMilliseconds:e,isoDate:{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate()},time:{hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),microsecond:i,nanosecond:a}}}function zu(t,e){if(t==="UTC")return null;let n=fn(e,"floor");if(n<Jo)return zu(t,gn(Jo));let i=Date.now(),a=Math.max(n,i)+366*lr*3,s=n,c=Mr(t,s),l=s,p=c;for(;c===p&&s<a;){if(l=s+2*lr*7,l>Jl)return null;p=Mr(t,l),c===p&&(s=l)}return c===p?null:gn(Ed(m=>Mr(t,m),s,l,c,p))}function uu(t,e){if(t==="UTC")return null;let n=fn(e,"ceil"),i=Date.now(),a=i+366*lr*3;if(n>a){let m=uu(t,gn(a));if(m===null||Y.default.lessThan(m,gn(i)))return m}if(t==="Africa/Casablanca"||t==="Africa/El_Aaiun"){let m=Date.UTC(2088,0,1);if(m<n)return uu(t,gn(m))}let s=n-1;if(s<Jo)return null;let c=Mr(t,s),l=s,p=c;for(;c===p&&s>Jo;){if(l=s-2*lr*7,l<Jo)return null;p=Mr(t,l),c===p&&(s=l)}return c===p?null:gn(Ed(m=>Mr(t,m),l,s,p,c))}function gd(t,e){return(function(n){let i=n.split(/[^\w]+/);if(i.length!==7)throw new RangeError(`expected 7 parts in "${n}`);let a=+i[0],s=+i[1],c=+i[2],l=i[3];if(l[0]==="b"||l[0]==="B")c=1-c;else if(l[0]!=="a"&&l[0]!=="A")throw new RangeError(`Unknown era ${l} in "${n}`);let p=i[4]==="24"?0:+i[4],m=+i[5],g=+i[6];if(!(Number.isFinite(c)&&Number.isFinite(a)&&Number.isFinite(s)&&Number.isFinite(p)&&Number.isFinite(m)&&Number.isFinite(g)))throw new RangeError(`Invalid number in "${n}`);return{year:c,month:a,day:s,hour:p,minute:m,second:g}})(Ql(t).format(e))}function ka(t){return t!==void 0&&!(t%4!=0||t%100==0&&t%400!=0)}function Or(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[ka(t)?"leapyear":"standard"][e-1]}function Da(t){let e=[_(t,Et),_(t,Tt),_(t,qt),_(t,It),_(t,Mt),_(t,Ot),_(t,Rt),_(t,Pt),_(t,jt),_(t,Ut)];for(let n=0;n<e.length;n++){let i=e[n];if(i!==0)return i<0?-1:1}return 0}function Ya(t){let e=["years","months","weeks","days"];for(let n=0;n<e.length;n++){let i=t[e[n]];if(i!==0)return i<0?-1:1}return 0}function vd(t){let e=Ya(t.date);return e!==0?e:t.time.sign()}function Ir(t,e){let n=t,i=e;if(!Number.isFinite(n)||!Number.isFinite(i))throw new RangeError("infinity is out of range");return i-=1,n+=Math.floor(i/12),i%=12,i<0&&(i+=12),i+=1,{year:n,month:i}}function Wt(t,e,n){let i=t,a=e,s=n;if(!Number.isFinite(s))throw new RangeError("infinity is out of range");({year:i,month:a}=Ir(i,a));let c=146097;if(Math.abs(s)>c){let m=Math.trunc(s/c);i+=400*m,s-=m*c}let l=0,p=a>2?i:i-1;for(;l=ka(p)?366:365,s<-l;)i-=1,p-=1,s+=l;for(p+=1;l=ka(p)?366:365,s>l;)i+=1,p+=1,s-=l;for(;s<1;)({year:i,month:a}=Ir(i,a-1)),s+=Or(i,a);for(;s>Or(i,a);)s-=Or(i,a),{year:i,month:a}=Ir(i,a+1);return{year:i,month:a,day:s}}function ui(t,e,n,i,a,s,c,l,p){let m=ir(i,a,s,c,l,p);return Ke(Wt(t,e,n+m.deltaDays),m)}function ir(t,e,n,i,a,s){let c,l=t,p=e,m=n,g=i,b=a,w=s;({div:c,mod:w}=no(w,3)),b+=c,w<0&&(b-=1,w+=1e3),{div:c,mod:b}=no(b,3),g+=c,b<0&&(g-=1,b+=1e3),m+=Math.trunc(g/1e3),g%=1e3,g<0&&(m-=1,g+=1e3),p+=Math.trunc(m/60),m%=60,m<0&&(p-=1,m+=60),l+=Math.trunc(p/60),p%=60,p<0&&(l-=1,p+=60);let E=Math.trunc(l/24);return l%=24,l<0&&(E-=1,l+=24),E+=0,l+=0,p+=0,m+=0,g+=0,b+=0,w+=0,{deltaDays:E,hour:l,minute:p,second:m,millisecond:g,microsecond:b,nanosecond:w}}function gl(t,e){let n=bt(t,0);if(Ya(n)===0)return t.days;let i=_(e,Re),a=rn(_(e,ae),i,n,"constrain"),s=Nr(i.year,i.month-1,i.day),c=Nr(a.year,a.month-1,a.day)-s;return t.days+c}function Gt(t){return new(pt("%Temporal.Duration%"))(-_(t,Et),-_(t,Tt),-_(t,qt),-_(t,It),-_(t,Mt),-_(t,Ot),-_(t,Rt),-_(t,Pt),-_(t,jt),-_(t,Ut))}function Nt(t,e,n){return Math.min(n,Math.max(e,t))}function _d(t,e,n){let i=Nt(e,1,12);return{year:t,month:i,day:Nt(n,1,Or(t,i))}}function dt(t,e,n){if(t<e||t>n)throw new RangeError(`value out of range: ${e} <= ${t} <= ${n}`)}function Pr(t,e,n){dt(e,1,12),dt(n,1,Or(t,e))}function Yr(t){jr(Ke(t,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function za(t,e,n,i,a,s){dt(t,0,23),dt(e,0,59),dt(n,0,59),dt(i,0,999),dt(a,0,999),dt(s,0,999)}function Fu(t,e,n,i,a,s,c,l,p){Pr(t,e,n),za(i,a,s,c,l,p)}function jr(t){let e=mt(t);(Y.default.lessThan(e,hp)||Y.default.greaterThan(e,fp))&&In(e)}function cu(t){mt(t)}function In(t){if(Y.default.lessThan(t,ri)||Y.default.greaterThan(t,so))throw new RangeError("date/time value is outside of supported range")}function qu({year:t,month:e}){dt(t,rl,ol),t===rl?dt(e,4,12):t===ol&&dt(e,1,9)}function Fa(t,e,n,i,a,s,c,l,p,m){let g=0,b=[t,e,n,i,a,s,c,l,p,m];for(let K=0;K<b.length;K++){let Q=b[K];if(Q===1/0||Q===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(Q!==0){let oe=Q<0?-1:1;if(g!==0&&oe!==g)throw new RangeError("mixed-sign values not allowed as duration fields");g=oe}}if(Math.abs(t)>=2**32||Math.abs(e)>=2**32||Math.abs(n)>=2**32)throw new RangeError("years, months, and weeks must be < 2\xB3\xB2");let w=no(l,3),E=no(p,6),M=no(m,9),P=no(1e6*w.mod+1e3*E.mod+M.mod,9).div,N=86400*i+3600*a+60*s+c+w.div+E.div+M.div+P;if(!Number.isSafeInteger(N))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function to(t){return{date:{years:_(t,Et),months:_(t,Tt),weeks:_(t,qt),days:_(t,It)},time:He.fromComponents(_(t,Mt),_(t,Ot),_(t,Rt),_(t,Pt),_(t,jt),_(t,Ut))}}function Sn(t){let e=He.fromComponents(_(t,Mt),_(t,Ot),_(t,Rt),_(t,Pt),_(t,jt),_(t,Ut)).add24HourDays(_(t,It));return{date:{years:_(t,Et),months:_(t,Tt),weeks:_(t,qt),days:0},time:e}}function bd(t){let e=Sn(t),n=Math.trunc(e.time.sec/86400);return Fa(e.date.years,e.date.months,e.date.weeks,n,0,0,0,0,0,0),{...e.date,days:n}}function ln(t,e){let n=t.time.sign(),i=t.time.abs().subsec,a=0,s=0,c=t.time.abs().sec,l=0,p=0,m=0;switch(e){case"year":case"month":case"week":case"day":a=Math.trunc(i/1e3),i%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60,p=Math.trunc(l/60),l%=60,m=Math.trunc(p/24),p%=24;break;case"hour":a=Math.trunc(i/1e3),i%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60,p=Math.trunc(l/60),l%=60;break;case"minute":a=Math.trunc(i/1e3),i%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3,l=Math.trunc(c/60),c%=60;break;case"second":a=Math.trunc(i/1e3),i%=1e3,s=Math.trunc(a/1e3),a%=1e3,c+=Math.trunc(s/1e3),s%=1e3;break;case"millisecond":a=Math.trunc(i/1e3),i%=1e3,s=Ks(c,3,Math.trunc(a/1e3)),a%=1e3,c=0;break;case"microsecond":a=Ks(c,6,Math.trunc(i/1e3)),i%=1e3,c=0;break;case"nanosecond":i=Ks(c,9,i),c=0}return new(pt("%Temporal.Duration%"))(t.date.years,t.date.months,t.date.weeks,t.date.days+n*m,n*p,n*l,n*c,n*s,n*a,n*i)}function Fn(t,e){return Ya(t),e.sign(),{date:t,time:e}}function Nr(t,e,n){return Yu({isoDate:{year:t,month:e+1,day:n},time:{hour:0,minute:0,second:0,millisecond:0}})/lr}function io({year:t,month:e,day:n}){if(Math.abs(Nr(t,e-1,n))>1e8)throw new RangeError("date/time value is outside the supported range")}function Uu(t,e){let n=e.hour-t.hour,i=e.minute-t.minute,a=e.second-t.second,s=e.millisecond-t.millisecond,c=e.microsecond-t.microsecond,l=e.nanosecond-t.nanosecond;return He.fromComponents(n,i,a,s,c,l)}function Ku(t,e,n,i,a){let s=He.fromEpochNsDiff(e,t);return s=Ca(s,n,i,a),Fn({years:0,months:0,weeks:0,days:0},s)}function wd(t,e,n,i){cu(t),cu(e);let a=Uu(t.time,e.time),s=a.sign(),c=Mn(t.isoDate,e.isoDate),l=e.isoDate;c===s&&(l=Wt(l.year,l.month,l.day+s),a=a.add24HourDays(-s));let p=zn("day",i),m=Ti(n,t.isoDate,l,p);return i!==p&&(a=a.add24HourDays(m.days),m.days=0),Fn(m,a)}function xd(t,e,n,i,a){let s=Y.default.subtract(e,t);if(Y.default.equal(s,tn))return{date:{years:0,months:0,weeks:0,days:0},time:He.ZERO};let c=Y.default.lessThan(s,tn)?-1:1,l=hn(n,t),p=hn(n,e),m,g=0,b=c===1?2:1,w=Uu(l.time,p.time);for(w.sign()===-c&&g++;g<=b;g++){m=Ke(Wt(p.isoDate.year,p.isoDate.month,p.isoDate.day-g*c),l.time);let M=wt(n,m,"compatible");if(w=He.fromEpochNsDiff(e,M),w.sign()!==-c)break}let E=zn("day",a);return Fn(Ti(i,l.isoDate,m.isoDate,E),w)}function kd(t,e,n,i,a,s,c,l,p){let m,g,b,w,E=e;switch(l){case"year":{let G=sr(E.date.years,c,"trunc");m=G,g=G+c*t,b={years:m,months:0,weeks:0,days:0},w={...b,years:g};break}case"month":{let G=sr(E.date.months,c,"trunc");m=G,g=G+c*t,b=bt(E.date,0,0,m),w=bt(E.date,0,0,g);break}case"week":{let G=bt(E.date,0,0),le=rn(s,i.isoDate,G,"constrain"),k=Ti(s,le,Wt(le.year,le.month,le.day+E.date.days),"week"),q=sr(E.date.weeks+k.weeks,c,"trunc");m=q,g=q+c*t,b=bt(E.date,0,m),w=bt(E.date,0,g);break}case"day":{let G=sr(E.date.days,c,"trunc");m=G,g=G+c*t,b=bt(E.date,m),w=bt(E.date,g);break}}let M=rn(s,i.isoDate,b,"constrain"),P=rn(s,i.isoDate,w,"constrain"),N,K,Q=Ke(M,i.time),oe=Ke(P,i.time);a?(N=wt(a,Q,"compatible"),K=wt(a,oe,"compatible")):(N=mt(Q),K=mt(oe));let se=He.fromEpochNsDiff(n,N),de=He.fromEpochNsDiff(K,N),he=Pa(p,t<0?"negative":"positive"),Se=se.add(se).abs().subtract(de.abs()).sign(),Me=Math.abs(m)/c%2==0,me=se.isZero()?Math.abs(m):se.cmp(de)?ja(Math.abs(m),Math.abs(g),Se,Me,he):Math.abs(g),z=new He(Y.default.add(Y.default.multiply(de.totalNs,Y.default.BigInt(m)),Y.default.multiply(se.totalNs,Y.default.BigInt(c*t)))).fdiv(de.totalNs),J=me===Math.abs(g);return E={date:J?w:b,time:He.ZERO},{nudgeResult:{duration:E,nudgedEpochNs:J?K:N,didExpandCalendarUnit:J},total:z}}function qa(t,e,n,i,a,s,c,l,p){let m=t,g=Dn(l)||i&&l==="day",b=vd(m)<0?-1:1,w;return g?{nudgeResult:w}=kd(b,m,e,n,i,a,c,l,p):w=i?(function(E,M,P,N,K,Q,oe,se){let de=M,he=rn(K,P.isoDate,de.date,"constrain"),Se=Ke(he,P.time),Me=Ke(Wt(he.year,he.month,he.day+E),P.time),me=wt(N,Se,"compatible"),z=wt(N,Me,"compatible"),J=He.fromEpochNsDiff(z,me);if(J.sign()!==E)throw new RangeError("time zone returned inconsistent Instants");let G=Y.default.BigInt(co[oe]*Q),le=de.time.round(G,se),k=le.subtract(J),q=k.sign()!==-E,h,y;return q?(h=E,le=k.round(G,se),y=le.addToEpochNs(z)):(h=0,y=le.addToEpochNs(me)),{duration:Fn(bt(de.date,de.date.days+h),le),nudgedEpochNs:y,didExpandCalendarUnit:q}})(b,m,n,i,a,c,l,p):(function(E,M,P,N,K,Q){let oe=E,se=oe.time.add24HourDays(oe.date.days),de=se.round(Y.default.BigInt(N*co[K]),Q),he=de.subtract(se),{quotient:Se}=se.divmod(va),{quotient:Me}=de.divmod(va),me=Math.sign(Me-Se)===se.sign(),z=he.addToEpochNs(M),J=0,G=de;return Ln(P)==="date"&&(J=Me,G=de.add(He.fromComponents(24*-Me,0,0,0,0,0))),{duration:{date:bt(oe.date,J),time:G},nudgedEpochNs:z,didExpandCalendarUnit:me}})(m,e,s,c,l,p),m=w.duration,w.didExpandCalendarUnit&&l!=="week"&&(m=(function(E,M,P,N,K,Q,oe,se){let de=M;if(se===oe)return de;let he=Qo.indexOf(oe);for(let Se=Qo.indexOf(se)-1;Se>=he;Se--){let Me=Qo[Se];if(Me==="week"&&oe!=="week")continue;let me;switch(Me){case"year":me={years:de.date.years+E,months:0,weeks:0,days:0};break;case"month":{let G=de.date.months+E;me=bt(de.date,0,0,G);break}case"week":{let G=de.date.weeks+E;me=bt(de.date,0,G);break}}let z=Ke(rn(Q,N.isoDate,me,"constrain"),N.time),J;if(J=K?wt(K,z,"compatible"):mt(z),ya(P,J)===-E)break;de={date:me,time:He.ZERO}}return de})(b,m,w.nudgedEpochNs,n,i,a,s,zn(l,"day"))),m}function vl(t,e,n,i,a,s){return Dn(s)||i&&s==="day"?kd(vd(t)<0?-1:1,t,e,n,i,a,1,s,"trunc").total:ti(t.time.add24HourDays(t.date.days),s)}function Dd(t,e,n,i,a,s,c){if(ho(t,e)==0)return{date:{years:0,months:0,weeks:0,days:0},time:He.ZERO};jr(t),jr(e);let l=wd(t,e,n,i);return s==="nanosecond"&&a===1?l:qa(l,mt(e),t,null,n,i,a,s,c)}function Cd(t,e,n,i,a,s,c,l){if(Ln(a)==="time")return Ku(t,e,s,c,l);let p=xd(t,e,n,i,a);return c==="nanosecond"&&s===1?p:qa(p,e,hn(n,t),n,i,a,s,c,l)}function vo(t,e,n,i,a,s){let c=uo.reduce((E,M)=>{let P=M[0],N=M[1],K=M[2];return n!=="datetime"&&K!==n||i.includes(N)||E.push(N,P),E},[]),l=Zt(e,"largestUnit",n,"auto");if(i.includes(l))throw new RangeError(`largestUnit must be one of ${c.join(", ")}, not ${l}`);let p=po(e),m=vn(e,"trunc");t==="since"&&(m=(function(E){switch(E){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return E}})(m));let g=Zt(e,"smallestUnit",n,a);if(i.includes(g))throw new RangeError(`smallestUnit must be one of ${c.join(", ")}, not ${g}`);let b=zn(s,g);if(l==="auto"&&(l=b),zn(l,g)!==l)throw new RangeError(`largestUnit ${l} cannot be smaller than smallestUnit ${g}`);let w={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];return w!==void 0&&yo(p,w,!1),{largestUnit:l,roundingIncrement:p,roundingMode:m,smallestUnit:g}}function _l(t,e,n,i){let a=Zo(n),s=vo(t,De(i),"time",[],"nanosecond","second"),c=ln(Ku(_(e,Oe),_(a,Oe),s.roundingIncrement,s.smallestUnit,s.roundingMode),s.largestUnit);return t==="since"&&(c=Gt(c)),c}function bl(t,e,n,i){let a=Uo(n),s=_(e,ae),c=_(a,ae);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vo(t,De(i),"date",[],"day","day"),p=pt("%Temporal.Duration%"),m=_(e,Re),g=_(a,Re);if(Mn(m,g)===0)return new p;let b={date:Ti(s,m,g,l.largestUnit),time:He.ZERO};if(l.smallestUnit!=="day"||l.roundingIncrement!==1){let E=Ke(m,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});b=qa(b,mt(Ke(g,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),E,null,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode)}let w=ln(b,"day");return t==="since"&&(w=Gt(w)),w}function wl(t,e,n,i){let a=Ko(n),s=_(e,ae),c=_(a,ae);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vo(t,De(i),"datetime",[],"nanosecond","day"),p=pt("%Temporal.Duration%"),m=_(e,Je),g=_(a,Je);if(ho(m,g)===0)return new p;let b=ln(Dd(m,g,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode),l.largestUnit);return t==="since"&&(b=Gt(b)),b}function xl(t,e,n,i){let a=ar(n),s=vo(t,De(i),"time",[],"nanosecond","hour"),c=Uu(_(e,tt),_(a,tt));c=Ca(c,s.roundingIncrement,s.smallestUnit,s.roundingMode);let l=ln(Fn({years:0,months:0,weeks:0,days:0},c),s.largestUnit);return t==="since"&&(l=Gt(l)),l}function kl(t,e,n,i){let a=Wo(n),s=_(e,ae),c=_(a,ae);if(!Tn(s,c))throw new RangeError(`cannot compute difference between months of ${s} and ${c} calendars`);let l=vo(t,De(i),"date",["week","day"],"month","year"),p=pt("%Temporal.Duration%");if(Mn(_(e,Re),_(a,Re))==0)return new p;let m=Lt(s,_(e,Re),"year-month");m.day=1;let g=dr(s,m,"constrain"),b=Lt(s,_(a,Re),"year-month");b.day=1;let w=dr(s,b,"constrain"),E={date:bt(Ti(s,g,w,l.largestUnit),0,0),time:He.ZERO};if(l.smallestUnit!=="month"||l.roundingIncrement!==1){let P=Ke(g,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});E=qa(E,mt(Ke(w,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),P,null,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode)}let M=ln(E,"day");return t==="since"&&(M=Gt(M)),M}function Dl(t,e,n,i){let a=Go(n),s=_(e,ae),c=_(a,ae);if(!Tn(s,c))throw new RangeError(`cannot compute difference between dates of ${s} and ${c} calendars`);let l=vo(t,De(i),"datetime",[],"nanosecond","hour"),p=_(e,Oe),m=_(a,Oe),g=pt("%Temporal.Duration%"),b;if(Ln(l.largestUnit)!=="date")b=ln(Ku(p,m,l.roundingIncrement,l.smallestUnit,l.roundingMode),l.largestUnit);else{let w=_(e,Ze);if(!hd(w,_(a,Ze)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(Y.default.equal(p,m))return new g;b=ln(Cd(p,m,w,s,l.largestUnit,l.roundingIncrement,l.smallestUnit,l.roundingMode),"hour")}return t==="since"&&(b=Gt(b)),b}function lo({hour:t,minute:e,second:n,millisecond:i,microsecond:a,nanosecond:s},c){let l=n,p=s;return l+=c.sec,p+=c.subsec,ir(t,e,l,i,a,p)}function lu(t,e){let n=e.addToEpochNs(t);return In(n),n}function Ho(t,e,n,i,a="constrain"){if(Ya(i.date)===0)return lu(t,i.time);let s=hn(e,t);return lu(wt(e,Ke(rn(n,s.isoDate,i.date,a),s.time),"compatible"),i.time)}function Cl(t,e,n){let i=dn(n);t==="subtract"&&(i=Gt(i));let a=zn(An(e),An(i));if(Dn(a))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");let s=Sn(e),c=Sn(i);return ln(Fn({years:0,months:0,weeks:0,days:0},s.time.add(c.time)),a)}function Sl(t,e,n){let i=dn(n);t==="subtract"&&(i=Gt(i));let a=An(i);if(Ln(a)==="date")throw new RangeError(`Duration field ${a} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);let s=Sn(i);return yn(lu(_(e,Oe),s.time))}function El(t,e,n,i){let a=_(e,ae),s=dn(n);t==="subtract"&&(s=Gt(s));let c=bd(s),l=qe(De(i));return $t(rn(a,_(e,Re),c,l),a)}function Tl(t,e,n,i){let a=dn(n);t==="subtract"&&(a=Gt(a));let s=qe(De(i)),c=_(e,ae),l=Sn(a),p=_(e,Je),m=lo(p.time,l.time),g=bt(l.date,m.deltaDays);return Fa(g.years,g.months,g.weeks,g.days,0,0,0,0,0,0),cn(Ke(rn(c,p.isoDate,g,s),m),c)}function Il(t,e,n){let i=dn(n);t==="subtract"&&(i=Gt(i));let a=Sn(i),{hour:s,minute:c,second:l,millisecond:p,microsecond:m,nanosecond:g}=lo(_(e,tt),a.time);return Bn(La(s,c,l,p,m,g,"reject"))}function Ml(t,e,n,i){let a=dn(n);t==="subtract"&&(a=Gt(a));let s=qe(De(i)),c=Da(a),l=_(e,ae),p=Lt(l,_(e,Re),"year-month");p.day=1;let m=dr(l,p,"constrain");if(c<0){let b=rn(l,m,{months:1},"constrain");m=Wt(b.year,b.month,b.day-1)}let g=bd(a);return Yr(m),oo(ii(l,Lt(l,rn(l,m,g,s),"year-month"),s),l)}function Ol(t,e,n,i){let a=dn(n);t==="subtract"&&(a=Gt(a));let s=qe(De(i)),c=_(e,Ze),l=_(e,ae),p=to(a);return _t(Ho(_(e,Oe),c,l,p,s),c,l)}function sr(t,e,n){let i=Math.trunc(t/e),a=t%e,s=t<0?"negative":"positive",c=Math.abs(i),l=c+1,p=Kt(Math.abs(2*a)-e),m=c%2==0,g=Pa(n,s),b=a===0?c:ja(c,l,p,m,g);return e*(s==="positive"?b:-b)}function du(t,e,n,i){let a=co[n]*e;return(function(s,c,l){let p=$n(s),m=$n(c),g=Y.default.divide(p,m),b=Y.default.remainder(p,m),w=Pa(l,"positive"),E,M;Y.default.lessThan(p,tn)?(E=Y.default.subtract(g,ni),M=g):(E=g,M=Y.default.add(g,ni));let P=ya(Tr(Y.default.multiply(b,$u)),m)*(Y.default.lessThan(p,tn)?-1:1)+0,N=Y.default.equal(b,tn)?g:ja(E,M,P,Nl(E),w);return Y.default.multiply(N,m)})(t,Y.default.BigInt(a),i)}function hu(t,e,n,i){cu(t);let{year:a,month:s,day:c}=t.isoDate,l=fu(t.time,e,n,i);return Ke(Wt(a,s,c+l.deltaDays),l)}function fu({hour:t,minute:e,second:n,millisecond:i,microsecond:a,nanosecond:s},c,l,p){let m;switch(l){case"day":case"hour":m=1e3*(1e3*(1e3*(60*(60*t+e)+n)+i)+a)+s;break;case"minute":m=1e3*(1e3*(1e3*(60*e+n)+i)+a)+s;break;case"second":m=1e3*(1e3*(1e3*n+i)+a)+s;break;case"millisecond":m=1e3*(1e3*i+a)+s;break;case"microsecond":m=1e3*a+s;break;case"nanosecond":m=s}let g=co[l],b=sr(m,g*c,p)/g;switch(l){case"day":return{deltaDays:b,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return ir(b,0,0,0,0,0);case"minute":return ir(t,b,0,0,0,0);case"second":return ir(t,e,b,0,0,0);case"millisecond":return ir(t,e,n,b,0,0);case"microsecond":return ir(t,e,n,i,b,0);case"nanosecond":return ir(t,e,n,i,a,b);default:throw new Error(`Invalid unit ${l}`)}}function Ca(t,e,n,i){let a=co[n];return t.round(Y.default.BigInt(a*e),i)}function ti(t,e){let n=co[e];return t.fdiv(Y.default.BigInt(n))}function Mn(t,e){return t.year!==e.year?Kt(t.year-e.year):t.month!==e.month?Kt(t.month-e.month):t.day!==e.day?Kt(t.day-e.day):0}function mu(t,e){return t.hour!==e.hour?Kt(t.hour-e.hour):t.minute!==e.minute?Kt(t.minute-e.minute):t.second!==e.second?Kt(t.second-e.second):t.millisecond!==e.millisecond?Kt(t.millisecond-e.millisecond):t.microsecond!==e.microsecond?Kt(t.microsecond-e.microsecond):t.nanosecond!==e.nanosecond?Kt(t.nanosecond-e.nanosecond):0}function ho(t,e){let n=Mn(t.isoDate,e.isoDate);return n!==0?n:mu(t.time,e.time)}function Sd(t){let e=Sa(t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function fn(t,e){let n=$n(t),{quotient:i,remainder:a}=Fo(n,bi),s=Y.default.toNumber(i);return e==="floor"&&Y.default.toNumber(a)<0&&(s-=1),e==="ceil"&&Y.default.toNumber(a)>0&&(s+=1),s}function gn(t){if(!Number.isInteger(t))throw new RangeError("epoch milliseconds must be an integer");return Y.default.multiply(Y.default.BigInt(t),bi)}function Sa(t){let e=t;if(typeof t=="object"){let n=t[Symbol.toPrimitive];n&&typeof n=="function"&&(e=n.call(t,"number"))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?Y.default.BigInt(e.toString(10)):Y.default.BigInt(e)}var pu=(()=>{let t=Y.default.BigInt(Date.now()%1e6);return()=>{let e=Date.now(),n=Y.default.BigInt(e),i=Y.default.add(gn(e),t);return t=Y.default.remainder(n,bi),Y.default.greaterThan(i,so)?so:Y.default.lessThan(i,ri)?ri:i}})();function Yo(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Kt(t){return t<0?-1:t>0?1:t}function De(t){if(t===void 0)return Object.create(null);if(nt(t)&&t!==null)return t;throw new TypeError("Options parameter must be an object, not "+(t===null?"null":typeof t))}function $r(t,e){let n=Object.create(null);return n[t]=e,n}function qn(t,e,n,i){let a=t[e];if(a!==void 0){if(a=$a(a),!n.includes(a))throw new RangeError(`${e} must be one of ${n.join(", ")}, not ${a}`);return a}if(i===Kn)throw new RangeError(`${e} option is required`);return i}function Yt(t){let e=ci(t);if(!pp.includes(ci(e)))throw new RangeError(`invalid calendar identifier ${e}`);switch(e){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return e}function ci(t){let e="";for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);e+=i>=65&&i<=90?String.fromCharCode(i+32):String.fromCharCode(i)}return e}function mr(t){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${t==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${t}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}var xp=new RegExp(`^${Hl.source}$`),kp=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function Ed(t,e,n,i=t(e),a=t(n)){let s=e,c=n,l=i,p=a;for(;c-s>1;){let m=Math.trunc((s+c)/2),g=t(m);g===l?(s=m,l=g):g===p&&(c=m,p=g)}return c}function Td(t){return[...t]}function Id(t,e){if(t!=="gregory"&&t!=="iso8601")return;let n=Ri[t],i=e.year,{dayOfWeek:a,dayOfYear:s,daysInYear:c}=n.isoToDate(e,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),l=n.getFirstDayOfWeek(),p=n.getMinimalDaysInFirstWeek(),m=(a+7-l)%7,g=(a-s+7001-l)%7,b=Math.floor((s-1+g)/7);if(7-g>=p&&++b,b==0)b=(function(w,E,M,P){let N=(P-w-M+1)%7;N<0&&(N+=7);let K=Math.floor((M+N-1)/7);return 7-N>=E&&++K,K})(l,p,s+n.isoToDate(n.dateAdd(e,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,a),i--;else if(s>=c-5){let w=(m+c-s)%7;w<0&&(w+=7),6-w>=p&&s+7-m>c&&(b=1,i++)}return{week:b,year:i}}function Rl(t,e,n,i,a){if(e!==a.year){if(t*(e-a.year)>0)return!0}else if(n!==a.month){if(t*(n-a.month)>0)return!0}else if(i!==a.day&&t*(i-a.day)>0)return!0;return!1}var Ri={};function Ar(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);let e=+t.slice(1);if(Number.isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function En(t,e=!1){return`M${`${t}`.padStart(2,"0")}${e?"L":""}`}function Zu(t,e=void 0,n=12){let{month:i,monthCode:a}=t;if(a===void 0){if(i===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&dt(i,1,n),e==="constrain"&&(i=Nt(i,1,n)),a=En(i)}else{let s=Ar(a);if(a!==En(s))throw new RangeError(`Invalid month code: ${a}`);if(i!==void 0&&i!==s)throw new RangeError(`monthCode ${a} and month ${i} must match if both are present`);if(i=s,i<1||i>n)throw new RangeError(`Invalid monthCode: ${a}`)}return{...t,month:i,monthCode:a}}Ri.iso8601={resolveFields(t,e){if((e==="date"||e==="year-month")&&t.year===void 0)throw new TypeError("year is required");if((e==="date"||e==="month-day")&&t.day===void 0)throw new TypeError("day is required");Object.assign(t,Zu(t))},dateToISO:(t,e)=>Vo(t.year,t.month,t.day,e),monthDayToISOReferenceDate(t,e){let{month:n,day:i}=Vo(t.year??1972,t.month,t.day,e);return{month:n,day:i,year:1972}},extraFields:()=>[],fieldKeysToIgnore(t){let e=new Set;for(let n=0;n<t.length;n++){let i=t[n];e.add(i),i==="month"?e.add("monthCode"):i==="monthCode"&&e.add("month")}return Td(e)},dateAdd(t,{years:e=0,months:n=0,weeks:i=0,days:a=0},s){let{year:c,month:l,day:p}=t;return c+=e,l+=n,{year:c,month:l}=Ir(c,l),{year:c,month:l,day:p}=Vo(c,l,p,s),p+=a+7*i,Wt(c,l,p)},dateUntil(t,e,n){let i=-Mn(t,e);if(i===0)return{years:0,months:0,weeks:0,days:0};let a,s=0,c=0;if(n==="year"||n==="month"){let g=e.year-t.year;for(g!==0&&(g-=i);!Rl(i,t.year+g,t.month,t.day,e);)s=g,g+=i;let b=i;for(a=Ir(t.year+s,t.month+b);!Rl(i,a.year,a.month,t.day,e);)c=b,b+=i,a=Ir(a.year,a.month+i);n==="month"&&(c+=12*s,s=0)}a=Ir(t.year+s,t.month+c);let l=_d(a.year,a.month,t.day),p=0,m=Nr(e.year,e.month-1,e.day)-Nr(l.year,l.month-1,l.day);return n==="week"&&(p=Math.trunc(m/7),m%=7),{years:s,months:c,weeks:p,days:m}},isoToDate({year:t,month:e,day:n},i){let a={era:void 0,eraYear:void 0,year:t,month:e,day:n,daysInWeek:7,monthsInYear:12};if(i.monthCode&&(a.monthCode=En(e)),i.dayOfWeek){let s=e+(e<3?10:-2),c=t-(e<3?1:0),l=Math.floor(c/100),p=c-100*l,m=(n+Math.floor(2.6*s-.2)+(p+Math.floor(p/4))+(Math.floor(l/4)-2*l))%7;a.dayOfWeek=m+(m<=0?7:0)}if(i.dayOfYear){let s=n;for(let c=e-1;c>0;c--)s+=Or(t,c);a.dayOfYear=s}return i.weekOfYear&&(a.weekOfYear=Id("iso8601",{year:t,month:e,day:n})),i.daysInMonth&&(a.daysInMonth=Or(t,e)),(i.daysInYear||i.inLeapYear)&&(a.inLeapYear=ka(t),a.daysInYear=a.inLeapYear?366:365),a},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};var Vt=class t{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,e!==void 0){let n=0;for(let i of e.map.entries()){if(++n>t.MAX_CACHE_ENTRIES)break;this.map.set(...i)}}}get(e){let n=this.map.get(e);return n&&(this.hits++,this.report()),this.calls++,n}set(e,n){this.map.set(e,n),this.misses++,this.report()}report(){}setObject(e){if(t.objectMap.get(e))throw new RangeError("object already cached");t.objectMap.set(e,this),this.report()}static getCacheForObject(e){let n=t.objectMap.get(e);return n||(n=new t,t.objectMap.set(e,n)),n}};function Md({isoYear:t,isoMonth:e,isoDay:n}){return`${Oi(t)}-${on(e)}-${on(n)}T00:00Z`}function Gs(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}Vt.objectMap=new WeakMap,Vt.MAX_CACHE_ENTRIES=1e3;var Zn=class{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(e){let n=this.getFormatter(),i=new Date(e);if(e==="-271821-04-19T00:00Z"){let a=n.resolvedOptions();n=new Intl.DateTimeFormat(a.locale,{...a,timeZone:"Etc/GMT+1"}),i=new Date("-271821-04-20T00:00Z")}try{return n.formatToParts(i)}catch{throw new RangeError(`Invalid ISO date: ${e}`)}}isoToCalendarDate(e,n){let{year:i,month:a,day:s}=e,c=JSON.stringify({func:"isoToCalendarDate",isoYear:i,isoMonth:a,isoDay:s,id:this.id}),l=n.get(c);if(l)return l;let p=Md({isoYear:i,isoMonth:a,isoDay:s}),m=this.getCalendarParts(p),g={};for(let w=0;w<m.length;w++){let{type:E,value:M}=m[w];if(E!=="year"&&E!=="relatedYear"||(this.hasEra?g.eraYear=+M:g.year=+M),E==="month"){let P=/^([0-9]*)(.*?)$/.exec(M);if(!P||P.length!=3||!P[1]&&!P[2])throw new RangeError(`Unexpected month: ${M}`);if(g.month=P[1]?+P[1]:1,g.month<1)throw new RangeError(`Invalid month ${M} from ${p}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(g.month>13)throw new RangeError(`Invalid month ${M} from ${p}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);P[2]&&(g.monthExtra=P[2])}E==="day"&&(g.day=+M),this.hasEra&&E==="era"&&M!=null&&M!==""&&(g.era=M.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&g.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){let w=this.eras.find(E=>g.era===E.genericName);w&&(g.era=w.code)}if(this.reviseIntlEra){let{era:w,eraYear:E}=this.reviseIntlEra(g,e);g.era=w,g.eraYear=E}this.checkIcuBugs&&this.checkIcuBugs(e);let b=this.adjustCalendarDate(g,n,"constrain",!0);if(b.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(b.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(b.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return n.set(c,b),["constrain","reject"].forEach(w=>{let E=JSON.stringify({func:"calendarToIsoDate",year:b.year,month:b.month,day:b.day,overflow:w,id:this.id});n.set(E,e)}),b}validateCalendarDate(e){let{month:n,year:i,day:a,eraYear:s,monthCode:c,monthExtra:l}=e;if(l!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&s===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&c===void 0)throw new TypeError("month or monthCode is required");if(a===void 0)throw new RangeError("Missing day");if(c!==void 0){if(typeof c!="string")throw new RangeError("monthCode must be a string, not "+typeof c);if(!/^M([01]?\d)(L?)$/.test(c))throw new RangeError(`Invalid monthCode: ${c}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(e,n=void 0,i="constrain",a=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let s=e;this.validateCalendarDate(s);let c=this.monthsInYear(s,n),{month:l,monthCode:p}=s;return{month:l,monthCode:p}=Zu(s,i,c),{...s,month:l,monthCode:p}}regulateMonthDayNaive(e,n,i){let a=this.monthsInYear(e,i),{month:s,day:c}=e;return n==="reject"?(dt(s,1,a),dt(c,1,this.maximumMonthLength(e))):(s=Nt(s,1,a),c=Nt(c,1,this.maximumMonthLength({...e,month:s}))),{...e,month:s,day:c}}calendarToIsoDate(e,n="constrain",i){let a=e,s=this.adjustCalendarDate(e,i,n,!1);s=this.regulateMonthDayNaive(s,n,i);let{year:c,month:l,day:p}=s,m=JSON.stringify({func:"calendarToIsoDate",year:c,month:l,day:p,overflow:n,id:this.id}),g,b=i.get(m);if(b||a.year!==void 0&&a.month!==void 0&&a.day!==void 0&&(a.year!==s.year||a.month!==s.month||a.day!==s.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:a.year,month:a.month,day:a.day,overflow:n,id:this.id}),b=i.get(g),b))return b;let w=this.estimateIsoDate({year:c,month:l,day:p}),E=Q=>{let oe=this.addDaysIso(w,Q);if(s.day>this.minimumMonthLength(s)){let se=this.isoToCalendarDate(oe,i);for(;se.month!==l||se.year!==c;){if(n==="reject")throw new RangeError(`day ${p} does not exist in month ${l} of year ${c}`);oe=this.addDaysIso(oe,-1),se=this.isoToCalendarDate(oe,i)}}return oe},M=0,P=this.isoToCalendarDate(w,i),N=Gs(s,P);if(N.years!==0||N.months!==0||N.days!==0){let Q=365*N.years+30*N.months+N.days;w=this.addDaysIso(w,Q),P=this.isoToCalendarDate(w,i),N=Gs(s,P),N.years===0&&N.months===0?w=E(N.days):M=this.compareCalendarDates(s,P)}let K=8;for(;M;){w=this.addDaysIso(w,M*K);let Q=P;P=this.isoToCalendarDate(w,i);let oe=M;if(M=this.compareCalendarDates(s,P),M){if(N=Gs(s,P),N.years===0&&N.months===0)w=E(N.days),M=0;else if(oe&&M!==oe)if(K>1)K/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...a})}`);this.compareCalendarDates(P,Q)>0&&(w=this.addDaysIso(w,-1)),M=0}}}if(i.set(m,w),g&&i.set(g,w),s.year===void 0||s.month===void 0||s.day===void 0||s.monthCode===void 0||this.hasEra&&(s.era===void 0||s.eraYear===void 0))throw new RangeError("Unexpected missing property");return w}compareCalendarDates(e,n){return e.year!==n.year?Kt(e.year-n.year):e.month!==n.month?Kt(e.month-n.month):e.day!==n.day?Kt(e.day-n.day):0}regulateDate(e,n="constrain",i){let a=this.calendarToIsoDate(e,n,i);return this.isoToCalendarDate(a,i)}addDaysIso(e,n){return Wt(e.year,e.month,e.day+n)}addDaysCalendar(e,n,i){let a=this.calendarToIsoDate(e,"constrain",i),s=this.addDaysIso(a,n);return this.isoToCalendarDate(s,i)}addMonthsCalendar(e,n,i,a){let s=e,{day:c}=s;for(let l=0,p=Math.abs(n);l<p;l++){let{month:m}=s,g=s,b=n<0?-Math.max(c,this.daysInPreviousMonth(s,a)):this.daysInMonth(s,a),w=this.calendarToIsoDate(s,"constrain",a),E=this.addDaysIso(w,b);if(s=this.isoToCalendarDate(E,a),n>0){let M=this.monthsInYear(g,a);for(;s.month-1!=m%M;)E=this.addDaysIso(E,-1),s=this.isoToCalendarDate(E,a)}s.day!==c&&(s=this.regulateDate({...s,day:c},"constrain",a))}if(i==="reject"&&s.day!==c)throw new RangeError(`Day ${c} does not exist in resulting calendar month`);return s}addCalendar(e,{years:n=0,months:i=0,weeks:a=0,days:s=0},c,l){let{year:p,day:m,monthCode:g}=e,b=this.adjustCalendarDate({year:p+n,monthCode:g,day:m},l),w=this.addMonthsCalendar(b,i,c,l),E=s+7*a;return this.addDaysCalendar(w,E,l)}untilCalendar(e,n,i,a){let s=0,c=0,l=0,p=0;switch(i){case"day":s=this.calendarDaysUntil(e,n,a);break;case"week":{let m=this.calendarDaysUntil(e,n,a);s=m%7,c=(m-s)/7;break}case"month":case"year":{let m=this.compareCalendarDates(n,e);if(!m)return{years:0,months:0,weeks:0,days:0};let g=n.year-e.year,b=n.day-e.day;if(i==="year"&&g){let M=0;n.monthCode>e.monthCode&&(M=1),n.monthCode<e.monthCode&&(M=-1),M||(M=Math.sign(b)),p=M*m<0?g-m:g}let w,E=p?this.addCalendar(e,{years:p},"constrain",a):e;do l+=m,w=E,E=this.addMonthsCalendar(w,m,"constrain",a),E.day!==e.day&&(E=this.regulateDate({...E,day:e.day},"constrain",a));while(this.compareCalendarDates(n,E)*m>=0);l-=m,s=this.calendarDaysUntil(w,n,a);break}}return{years:p,months:l,weeks:c,days:s}}daysInMonth(e,n){let{day:i}=e,a=this.maximumMonthLength(e),s=this.minimumMonthLength(e);if(s===a)return s;let c=i<=a-s?a:s,l=this.calendarToIsoDate(e,"constrain",n),p=this.addDaysIso(l,c),m=this.isoToCalendarDate(p,n),g=this.addDaysIso(p,-m.day);return this.isoToCalendarDate(g,n).day}daysInPreviousMonth(e,n){let{day:i,month:a,year:s}=e,c={year:a>1?s:s-1,month:a,day:1},l=a>1?a-1:this.monthsInYear(c,n);c={...c,month:l};let p=this.minimumMonthLength(c),m=this.maximumMonthLength(c);if(p===m)return m;let g=this.calendarToIsoDate(e,"constrain",n),b=this.addDaysIso(g,-i);return this.isoToCalendarDate(b,n).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,n,i){let a=this.calendarToIsoDate(e,"constrain",i),s=this.calendarToIsoDate(n,"constrain",i);return Nr(s.year,s.month-1,s.day)-Nr(a.year,a.month-1,a.day)}monthDaySearchStartYear(e,n){return 1972}monthDayFromFields(e,n,i){let a,s,c,l,p,{era:m,eraYear:g,year:b,month:w,monthCode:E,day:M}=e;if(w!==void 0&&b===void 0&&(!this.hasEra||m===void 0||g===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(E===void 0||b!==void 0||this.hasEra&&g!==void 0)&&({monthCode:E,day:M}=this.isoToCalendarDate(this.calendarToIsoDate(e,n,i),i));let P={year:this.monthDaySearchStartYear(E,M),month:12,day:31},N=this.isoToCalendarDate(P,i),K=N.monthCode>E||N.monthCode===E&&N.day>=M?N.year:N.year-1;for(let Q=0;Q<20;Q++){let oe=this.adjustCalendarDate({day:M,monthCode:E,year:K-Q},i),se=this.calendarToIsoDate(oe,"constrain",i),de=this.isoToCalendarDate(se,i);if({year:a,month:s,day:c}=se,de.monthCode===E&&de.day===M)return{month:s,day:c,year:a};if(n==="constrain"){let he=this.maxLengthOfMonthCodeInAnyYear(de.monthCode);if(de.monthCode===E&&de.day===he&&M>he)return{month:s,day:c,year:a};(l===void 0||de.monthCode===l.monthCode&&de.day>l.day)&&(l=de,p=se)}}if(n==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${E} and day ${M}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}},yu=class extends Zn{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(e){let{year:n}=e;return(7*n+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,n){let{month:i,year:a}=e,s=this.getMonthCode(a,i),c=Object.entries(this.months).find(p=>p[1].monthCode===s);if(c===void 0)throw new RangeError(`unmatched Hebrew month: ${i}`);let l=c[1].days;return typeof l=="number"?l:l[n]}maxLengthOfMonthCodeInAnyYear(e){return["M04","M06","M08","M10","M12"].includes(e)?29:30}estimateIsoDate(e){let{year:n}=e;return{year:n-3760,month:1,day:1}}getMonthCode(e,n){return this.inLeapYear({year:e})?n===6?En(5,!0):En(n<6?n:n-1):En(n)}adjustCalendarDate(e,n,i="constrain",a=!1){let{year:s,month:c,monthCode:l,day:p,monthExtra:m}=e;if(s===void 0)throw new TypeError("Missing property: year");if(a){if(m){let g=this.months[m];if(!g)throw new RangeError(`Unrecognized month from formatToParts: ${m}`);c=this.inLeapYear({year:s})?g.leap:g.regular}return l=this.getMonthCode(s,c),{year:s,month:c,day:p,monthCode:l}}if(this.validateCalendarDate(e),c===void 0)if(l.endsWith("L")){if(l!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${l}`);if(c=6,!this.inLeapYear({year:s})){if(i==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${s} which is not a leap year`);c=6,l="M06"}}else{c=Ar(l),this.inLeapYear({year:s})&&c>=6&&c++;let g=this.monthsInYear({year:s});if(c<1||c>g)throw new RangeError(`Invalid monthCode: ${l}`)}else if(i==="reject"?(dt(c,1,this.monthsInYear({year:s})),dt(p,1,this.maximumMonthLength({year:s,month:c}))):(c=Nt(c,1,this.monthsInYear({year:s})),p=Nt(p,1,this.maximumMonthLength({year:s,month:c}))),l===void 0)l=this.getMonthCode(s,c);else if(this.getMonthCode(s,c)!==l)throw new RangeError(`monthCode ${l} doesn't correspond to month ${c} in Hebrew year ${s}`);return{...e,day:p,month:c,monthCode:l,year:s}}},hr=class extends Zn{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(e,n){let i={year:e.year,month:1,monthCode:"M01",day:1},a={year:e.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(i,a,n)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(e){let{year:n}=this.adjustCalendarDate(e);return{year:Math.floor(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}},gu=class extends hr{constructor(){super(...arguments),this.id="islamic"}},vu=class extends hr{constructor(){super(...arguments),this.id="islamic-umalqura"}},_u=class extends hr{constructor(){super(...arguments),this.id="islamic-tbla"}},bu=class extends hr{constructor(){super(...arguments),this.id="islamic-civil"}},wu=class extends hr{constructor(){super(...arguments),this.id="islamic-rgsa"}},xu=class extends hr{constructor(){super(...arguments),this.id="islamicc"}},ku=class extends Zn{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(e,n){return this.daysInMonth({year:e.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===12?29:n<=6?31:30}maximumMonthLength(e){let{month:n}=e;return n===12?30:n<=6?31:30}maxLengthOfMonthCodeInAnyYear(e){return Ar(e)<=6?31:30}estimateIsoDate(e){let{year:n}=this.adjustCalendarDate(e);return{year:n+621,month:1,day:1}}},Du=class extends Zn{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return Wu(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}maxLengthOfMonthCodeInAnyYear(e){let n=Ar(e),i=this.months[n];return i=i.leap??i,i.length}getMonthInfo(e){let{month:n}=e,i=this.months[n];if(i===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(e)&&i.leap&&(i=i.leap),i}estimateIsoDate(e){let n=this.adjustCalendarDate(e),i=this.getMonthInfo(n);return Wt(n.year+78+(i.nextYear?1:0),i.month,i.day+n.day-1)}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}};function Wu(t){return t%4==0&&(t%100!=0||t%400==0)}var Ea=class extends Zn{constructor(e,n){super(),this.calendarType="solar",this.id=e,this.isoEpoch=n}inLeapYear(e){let{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return Wu(n)}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}maxLengthOfMonthCodeInAnyYear(e){return[31,29,31,30,31,30,31,31,30,31,30,31][Ar(e)-1]}estimateIsoDate(e){let n=this.adjustCalendarDate(e);return Vo(n.year+this.isoEpoch.year,n.month+this.isoEpoch.month,n.day+this.isoEpoch.day,"constrain")}},Ta=class extends Zn{constructor(e,n){super(),this.hasEra=!0,this.calendarType="solar",this.id=e;let{eras:i,anchorEra:a}=(function(s){let c,l=s;if(l.length===0)throw new RangeError("Invalid era data: eras are required");if(l.length===1&&l[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(l.length===1&&!l[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(l.filter(m=>m.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");l.forEach(m=>{if(m.isAnchor||!m.anchorEpoch&&!m.reverseOf){if(c)throw new RangeError("Invalid era data: cannot have multiple anchor eras");c=m,m.anchorEpoch={year:m.hasYearZero?0:1}}else if(!m.code)throw new RangeError("If era name is blank, it must be the anchor era")}),l=l.filter(m=>m.code),l.forEach(m=>{let{reverseOf:g}=m;if(g){let b=l.find(w=>w.code===g);if(b===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${g}`);m.reverseOf=b,m.anchorEpoch=b.anchorEpoch,m.isoEpoch=b.isoEpoch}m.anchorEpoch.month===void 0&&(m.anchorEpoch.month=1),m.anchorEpoch.day===void 0&&(m.anchorEpoch.day=1)}),l.sort((m,g)=>{if(m.reverseOf)return 1;if(g.reverseOf)return-1;if(!m.isoEpoch||!g.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return g.isoEpoch.year-m.isoEpoch.year});let p=l[l.length-1].reverseOf;if(p&&p!==l[l.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return l.forEach((m,g)=>{m.genericName="era"+(l.length-1-g)}),{eras:l,anchorEra:c||l[0]}})(n);this.anchorEra=a,this.eras=i}inLeapYear(e){let{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return Wu(n)}monthsInYear(){return 12}minimumMonthLength(e){let{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}maxLengthOfMonthCodeInAnyYear(e){return[31,29,31,30,31,30,31,31,30,31,30,31][Ar(e)-1]}completeEraYear(e){let n=(l,p,m)=>{let g=e[l];if(g!=null&&g!=p&&!(m||[]).includes(g)){let b=m?.[0];throw new RangeError(`Input ${l} ${g} doesn't match calculated value ${b?`${p} (also called ${b})`:p}`)}},i=l=>{let p,m={...e,year:l},g=this.eras.find((b,w)=>{if(w===this.eras.length-1){if(b.reverseOf){if(l>0)throw new RangeError(`Signed year ${l} is invalid for era ${b.code}`);return p=b.anchorEpoch.year-l,!0}return p=l-b.anchorEpoch.year+(b.hasYearZero?0:1),!0}return this.compareCalendarDates(m,b.anchorEpoch)>=0&&(p=l-b.anchorEpoch.year+(b.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${l} was not matched by any era`);return{eraYear:p,era:g.code,eraNames:g.names}},{year:a,eraYear:s,era:c}=e;if(a!=null){let l=i(a);({eraYear:s,era:c}=l),n("era",c,l?.eraNames),n("eraYear",s)}else{if(s==null)throw new RangeError("Either year or eraYear and era are required");{if(c===void 0)throw new RangeError("era and eraYear must be provided together");let l=this.eras.find(({code:p,names:m=[]})=>p===c||m.includes(c));if(!l)throw new RangeError(`Era ${c} (ISO year ${s}) was not matched by any era`);a=l.reverseOf?l.anchorEpoch.year-s:s+l.anchorEpoch.year-(l.hasYearZero?0:1),n("year",a),{eraYear:s,era:c}=i(a)}}return{...e,year:a,eraYear:s,era:c}}adjustCalendarDate(e,n,i="constrain"){let a=e,{month:s,monthCode:c}=a;return s===void 0&&(a={...a,month:Ar(c)}),this.validateCalendarDate(a),a=this.completeEraYear(a),super.adjustCalendarDate(a,n,i)}estimateIsoDate(e){let n=this.adjustCalendarDate(e),{year:i,month:a,day:s}=n,{anchorEra:c}=this;return Vo(i+c.isoEpoch.year-(c.hasYearZero?0:1),a,s,"constrain")}},li=class extends Ta{constructor(e,n){super(e,n)}isoToCalendarDate(e){let{year:n,month:i,day:a}=e,s=En(i),c=n-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:c,month:i,monthCode:s,day:a})}},Cn={inLeapYear(t){let{year:e}=t;return(e+1)%4==0},monthsInYear:()=>13,minimumMonthLength(t){let{month:e}=t;return e===13?this.inLeapYear(t)?6:5:30},maximumMonthLength(t){return this.minimumMonthLength(t)},maxLengthOfMonthCodeInAnyYear:t=>t==="M13"?6:30},Cu=class extends Ea{constructor(e,n){super(e,n),this.inLeapYear=Cn.inLeapYear,this.monthsInYear=Cn.monthsInYear,this.minimumMonthLength=Cn.minimumMonthLength,this.maximumMonthLength=Cn.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=Cn.maxLengthOfMonthCodeInAnyYear}},Ia=class extends Ta{constructor(e,n){super(e,n),this.inLeapYear=Cn.inLeapYear,this.monthsInYear=Cn.monthsInYear,this.minimumMonthLength=Cn.minimumMonthLength,this.maximumMonthLength=Cn.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=Cn.maxLengthOfMonthCodeInAnyYear}},Su=class extends Cu{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}},Eu=class extends Ia{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}},Tu=class extends Ia{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}},Iu=class extends li{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}},Mu=class extends Ea{constructor(){super("buddhist",{year:-543,month:1,day:1})}},Ou=class extends li{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(e){let{era:n,eraYear:i}=e;return n==="b"&&(n="gregory-inverse"),n==="a"&&(n="gregory"),{era:n,eraYear:i}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}},Ru=class extends li{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(e,n){let{era:i,eraYear:a}=e,{year:s}=n;return this.eras.find(c=>c.code===i)?{era:i,eraYear:a}:s<1?{era:"japanese-inverse",eraYear:1-s}:{era:"japanese",eraYear:s}}},Ma=class extends Zn{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(e,n){let i=this.getMonthList(e.year,n);return Object.entries(i).length===13}monthsInYear(e,n){return this.inLeapYear(e,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(e){return["M01L","M09L","M10L","M11L","M12L"].includes(e)?29:30}monthDaySearchStartYear(e,n){let i={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[e]??[1972,1972];return n<30?i[0]:i[1]}getMonthList(e,n){if(e===void 0)throw new TypeError("Missing year");let i=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),a=n.get(i);if(a)return a;let s=this.getFormatter(),c=(N,K)=>{let Q=Md({isoYear:N,isoMonth:2,isoDay:1}),oe=new Date(Q);oe.setUTCDate(K+1);let se=s.formatToParts(oe),de=se.find(me=>me.type==="month").value,he=+se.find(me=>me.type==="day").value,Se=se.find(me=>me.type==="relatedYear"),Me;if(Se===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return Me=+Se.value,{calendarMonthString:de,calendarDay:he,calendarYearToVerify:Me}},l=17,{calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=c(e,l);p!=="1"&&(l+=29,{calendarMonthString:p,calendarDay:m}=c(e,l)),l-=m-5;let b={},w,E,M=1,P=!1;do({calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=c(e,l)),w&&(b[E].daysInMonth=w+30-m),g!==e?P=!0:(b[p]={monthIndex:M++},l+=30),w=m,E=p;while(!P);return b[E].daysInMonth=w+30-m,n.set(i,b),b}estimateIsoDate(e){let{year:n,month:i}=e;return{year:n,month:i>=12?12:i+1,day:1}}adjustCalendarDate(e,n,i="constrain",a=!1){let{year:s,month:c,monthExtra:l,day:p,monthCode:m}=e;if(s===void 0)throw new TypeError("Missing property: year");if(a){if(l&&l!=="bis")throw new RangeError(`Unexpected leap month suffix: ${l}`);let g=En(c,l!==void 0),b=`${c}${l||""}`,w=this.getMonthList(s,n)[b];if(w===void 0)throw new RangeError(`Unmatched month ${b} in Chinese year ${s}`);return c=w.monthIndex,{year:s,month:c,day:p,monthCode:g}}if(this.validateCalendarDate(e),c===void 0){let g=this.getMonthList(s,n),b=m.replace(/^M|L$/g,E=>E==="L"?"bis":"");b[0]==="0"&&(b=b.slice(1));let w=g[b];if(c=w&&w.monthIndex,c===void 0&&m.endsWith("L")&&m!="M13L"&&i==="constrain"){let E=+m.replace(/^M0?|L$/g,"");w=g[E],w&&(c=w.monthIndex,m=En(E))}if(c===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${s}`)}else if(m===void 0){let g=this.getMonthList(s,n),b=Object.entries(g),w=b.length;i==="reject"?(dt(c,1,w),dt(p,1,this.maximumMonthLength())):(c=Nt(c,1,w),p=Nt(p,1,this.maximumMonthLength()));let E=b.find(M=>M[1].monthIndex===c);if(E===void 0)throw new RangeError(`Invalid month ${c} in Chinese year ${s}`);m=En(+E[0].replace("bis",""),E[0].indexOf("bis")!==-1)}else{let g=this.getMonthList(s,n),b=m.replace(/^M|L$/g,E=>E==="L"?"bis":"");b[0]==="0"&&(b=b.slice(1));let w=g[b];if(!w)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${s}`);if(c!==w.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${c} in Chinese year ${s}`)}return{...e,year:s,month:c,monthCode:m,day:p}}},Pu=class extends Ma{constructor(){super(...arguments),this.id="chinese"}},ju=class extends Ma{constructor(){super(...arguments),this.id="dangi"}},Nu=class{constructor(e){this.helper=e}extraFields(e){return this.helper.hasEra&&e.includes("year")?["era","eraYear"]:[]}resolveFields(e){if(this.helper.calendarType!=="lunisolar"){let n=new Vt;Zu(e,void 0,this.helper.monthsInYear({year:e.year??1972},n))}}dateToISO(e,n){let i=new Vt,a=this.helper.calendarToIsoDate(e,n,i);return i.setObject(a),a}monthDayToISOReferenceDate(e,n){let i=new Vt,a=this.helper.monthDayFromFields(e,n,i);return i.setObject(a),a}fieldKeysToIgnore(e){let n=new Set;for(let i=0;i<e.length;i++){let a=e[i];switch(n.add(a),a){case"era":n.add("eraYear"),n.add("year");break;case"eraYear":n.add("era"),n.add("year");break;case"year":n.add("era"),n.add("eraYear");break;case"month":n.add("monthCode"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"monthCode":n.add("month"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"))}}return Td(n)}dateAdd(e,{years:n,months:i,weeks:a,days:s},c){let l=Vt.getCacheForObject(e),p=this.helper.isoToCalendarDate(e,l),m=this.helper.addCalendar(p,{years:n,months:i,weeks:a,days:s},c,l),g=this.helper.calendarToIsoDate(m,"constrain",l);return Vt.getCacheForObject(g)||new Vt(l).setObject(g),g}dateUntil(e,n,i){let a=Vt.getCacheForObject(e),s=Vt.getCacheForObject(n),c=this.helper.isoToCalendarDate(e,a),l=this.helper.isoToCalendarDate(n,s);return this.helper.untilCalendar(c,l,i,a)}isoToDate(e,n){let i=Vt.getCacheForObject(e),a=this.helper.isoToCalendarDate(e,i);if(n.dayOfWeek&&(a.dayOfWeek=Ri.iso8601.isoToDate(e,{dayOfWeek:!0}).dayOfWeek),n.dayOfYear){let s=this.helper.startOfCalendarYear(a),c=this.helper.calendarDaysUntil(s,a,i);a.dayOfYear=c+1}if(n.weekOfYear&&(a.weekOfYear=Id(this.helper.id,e)),a.daysInWeek=7,n.daysInMonth&&(a.daysInMonth=this.helper.daysInMonth(a,i)),n.daysInYear){let s=this.helper.startOfCalendarYear(a),c=this.helper.addCalendar(s,{years:1},"constrain",i);a.daysInYear=this.helper.calendarDaysUntil(s,c,i)}return n.monthsInYear&&(a.monthsInYear=this.helper.monthsInYear(a,i)),n.inLeapYear&&(a.inLeapYear=this.helper.inLeapYear(a,i)),a}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}};for(let t of[yu,ku,Tu,Su,Eu,Pu,ju,Iu,Du,Mu,Ou,Ru,gu,vu,_u,bu,wu,xu]){let e=new t;Ri[e.id]=new Nu(e)}tu("calendarImpl",function(t){return Ri[t]});var di=Intl.DateTimeFormat;function Jr(t,e){let n=_(t,e);return typeof n=="function"&&(n=new di(_(t,Kl),n(_(t,Js))),(function(i,a,s){let c=Ra(i);if(c===void 0)throw new TypeError("Missing slots for the given container");if(c[a]===void 0)throw new TypeError(`tried to reset ${a} which was not set`);c[a]=s})(t,e,n)),n}function zo(t){return Bt(t,Br)}var Lr=class{constructor(e=void 0,n=void 0){(function(i,a,s){let c=s!==void 0,l;if(c){let b=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];l=(function(E){if(E==null)throw new TypeError(`Expected object not ${E}`);return Object(E)})(s);let w=Object.create(null);for(let E=0;E<b.length;E++){let M=b[E];Object.prototype.hasOwnProperty.call(l,M)&&(w[M]=l[M])}l=w}else l=Object.create(null);let p=new di(a,l),m=p.resolvedOptions();if(Wn(i),c){let b=Object.assign(Object.create(null),m);for(let w in b)Object.prototype.hasOwnProperty.call(l,w)||delete b[w];b.hour12=l.hour12,b.hourCycle=l.hourCycle,Ae(i,Js,b)}else Ae(i,Js,l);Ae(i,Kl,m.locale),Ae(i,Br,p),Ae(i,eo,m.timeZone),Ae(i,qo,m.calendar),Ae(i,Bl,Rp),Ae(i,Yl,Mp),Ae(i,zl,Op),Ae(i,Fl,Ip),Ae(i,ql,Pp),Ae(i,Ul,jp);let g=c?l.timeZone:void 0;if(g===void 0)Ae(i,Xs,m.timeZone);else{let b=$a(g);if(b.startsWith("\u2212"))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");Ae(i,Xs,At(b))}})(this,e,n)}get format(){U(this,zo);let e=Cp.bind(this);return Object.defineProperties(e,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),e}formatRange(e,n){return U(this,zo),Ep.call(this,e,n)}formatToParts(e,...n){return U(this,zo),Sp.call(this,e,...n)}formatRangeToParts(e,n){return U(this,zo),Tp.call(this,e,n)}resolvedOptions(){return U(this,zo),Dp.call(this)}};"formatToParts"in di.prototype||delete Lr.prototype.formatToParts,"formatRangeToParts"in di.prototype||delete Lr.prototype.formatRangeToParts;var nn=function(t=void 0,e=void 0){return new Lr(t,e)};function Dp(){let t=_(this,Br).resolvedOptions();return t.timeZone=_(this,Xs),t}function Cp(t,...e){let n,i,a=fo(t,this);return a.formatter?(n=a.formatter,i=[fn(a.epochNs,"floor")]):(n=_(this,Br),i=[t,...e]),n.format(...i)}function Sp(t,...e){let n,i,a=fo(t,this);return a.formatter?(n=a.formatter,i=[fn(a.epochNs,"floor")]):(n=_(this,Br),i=[t,...e]),n.formatToParts(...i)}function Ep(t,e){if(t===void 0||e===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");let n=Oa(t),i=Oa(e),a,s=[n,i];if(Un(n)!==Un(i))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if(Un(n)){if(!Od(n,i))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");let{epochNs:c,formatter:l}=fo(n,this),{epochNs:p,formatter:m}=fo(i,this);l&&(a=l,s=[fn(c,"floor"),fn(p,"floor")])}return a||(a=_(this,Br)),a.formatRange(...s)}function Tp(t,e){if(t===void 0||e===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");let n=Oa(t),i=Oa(e),a,s=[n,i];if(Un(n)!==Un(i))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if(Un(n)){if(!Od(n,i))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");let{epochNs:c,formatter:l}=fo(n,this),{epochNs:p,formatter:m}=fo(i,this);l&&(a=l,s=[fn(c,"floor"),fn(p,"floor")])}return a||(a=_(this,Br)),a.formatRangeToParts(...s)}function Pi(t={},e={}){let n=Object.assign({},t),i=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let a=0;a<i.length;a++){let s=i[a];n[s]=s in e?e[s]:n[s],n[s]!==!1&&n[s]!==void 0||delete n[s]}return n}function Ip(t){let e=Pi(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(e.timeStyle!=="long"&&e.timeStyle!=="full"||(delete e.timeStyle,Object.assign(e,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!Ka(e)){if(ji(t))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(t)}]`);Object.assign(e,{hour:"numeric",minute:"numeric",second:"numeric"})}return e}function Mp(t){let e={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},n=Pi(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){let i=n.dateStyle;delete n.dateStyle,Object.assign(n,e[i])}if(!("year"in n||"month"in n||"era"in n)){if(ji(t))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(t)}]`);Object.assign(n,{year:"numeric",month:"numeric"})}return n}function Op(t){let e={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},n=Pi(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){let i=n.dateStyle;delete n.dateStyle,Object.assign(n,e[i])}if(!("month"in n)&&!("day"in n)){if(ji(t))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(t)}]`);Object.assign(n,{month:"numeric",day:"numeric"})}return n}function Rp(t){let e=Pi(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!Ua(e)){if(ji(t))throw new TypeError(`cannot format PlainDate with options [${Object.keys(t)}]`);Object.assign(e,{year:"numeric",month:"numeric",day:"numeric"})}return e}function Pp(t){let e=Pi(t,{timeZoneName:!1});if((e.timeStyle==="long"||e.timeStyle==="full")&&(delete e.timeStyle,Object.assign(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}),e.dateStyle)&&(Object.assign(e,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[e.dateStyle]),delete e.dateStyle),!Ka(e)&&!Ua(e)){if(ji(t))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(t)}]`);Object.assign(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return e}function jp(t){let e=t;return Ka(e)||Ua(e)||(e=Object.assign({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Ua(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t||"era"in t}function Ka(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t||"fractionalSecondDigits"in t}function ji(t){return Ua(t)||Ka(t)||"dateStyle"in t||"timeStyle"in t||"timeZoneName"in t}function Un(t){return et(t)||ot(t)||Xe(t)||Le(t)||ft(t)||en(t)||ht(t)}function Oa(t){return Un(t)?t:Na(t)}function Od(t,e){return!(!Un(t)||!Un(e)||ot(t)&&!ot(e)||et(t)&&!et(e)||Xe(t)&&!Xe(e)||Le(t)&&!Le(e)||ft(t)&&!ft(e)||en(t)&&!en(e)||ht(t)&&!ht(e))}function fo(t,e){if(ot(t)){let n={isoDate:{year:1970,month:1,day:1},time:_(t,tt)};return{epochNs:wt(_(e,eo),n,"compatible"),formatter:Jr(e,Fl)}}if(ft(t)){let n=_(t,ae),i=_(e,qo);if(n!==i)throw new RangeError(`cannot format PlainYearMonth with calendar ${n} in locale with calendar ${i}`);let a=Ke(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:wt(_(e,eo),a,"compatible"),formatter:Jr(e,Yl)}}if(en(t)){let n=_(t,ae),i=_(e,qo);if(n!==i)throw new RangeError(`cannot format PlainMonthDay with calendar ${n} in locale with calendar ${i}`);let a=Ke(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:wt(_(e,eo),a,"compatible"),formatter:Jr(e,zl)}}if(et(t)){let n=_(t,ae),i=_(e,qo);if(n!=="iso8601"&&n!==i)throw new RangeError(`cannot format PlainDate with calendar ${n} in locale with calendar ${i}`);let a=Ke(_(t,Re),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:wt(_(e,eo),a,"compatible"),formatter:Jr(e,Bl)}}if(Xe(t)){let n=_(t,ae),i=_(e,qo);if(n!=="iso8601"&&n!==i)throw new RangeError(`cannot format PlainDateTime with calendar ${n} in locale with calendar ${i}`);let a=_(t,Je);return{epochNs:wt(_(e,eo),a,"compatible"),formatter:Jr(e,ql)}}if(Le(t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return ht(t)?{epochNs:_(t,Oe),formatter:Jr(e,Ul)}:{}}function Rd(t){let e=Object.create(null);return e.years=_(t,Et),e.months=_(t,Tt),e.weeks=_(t,qt),e.days=_(t,It),e.hours=_(t,Mt),e.minutes=_(t,Ot),e.seconds=_(t,Rt),e.milliseconds=_(t,Pt),e.microseconds=_(t,jt),e.nanoseconds=_(t,Ut),e}Lr.prototype.constructor=nn,Object.defineProperty(nn,"prototype",{value:Lr.prototype,writable:!1,enumerable:!1,configurable:!1}),nn.supportedLocalesOf=di.supportedLocalesOf,Gn(nn,"Intl.DateTimeFormat");var{format:Np,formatToParts:$p}=Intl.DurationFormat?.prototype??Object.create(null);function Gu(t){Intl.DurationFormat.prototype.resolvedOptions.call(this);let e=Rd(dn(t));return Np.call(this,e)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=Gu,Intl.DurationFormat.prototype.formatToParts=function(t){Intl.DurationFormat.prototype.resolvedOptions.call(this);let e=Rd(dn(t));return $p.call(this,e)});var ny=Object.freeze({__proto__:null,DateTimeFormat:nn,ModifiedIntlDurationFormatPrototypeFormat:Gu}),hi=class{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");ld(this,Sa(e))}get epochMilliseconds(){return U(this,ht),fn(_(this,Oe),"floor")}get epochNanoseconds(){return U(this,ht),Sd(Y.default.BigInt(_(this,Oe)))}add(e){return U(this,ht),Sl("add",this,e)}subtract(e){return U(this,ht),Sl("subtract",this,e)}until(e,n=void 0){return U(this,ht),_l("until",this,e,n)}since(e,n=void 0){return U(this,ht),_l("since",this,e,n)}round(e){if(U(this,ht),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?$r("smallestUnit",e):De(e),i=po(n),a=vn(n,"halfExpand"),s=Zt(n,"smallestUnit","time",Kn);return yo(i,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[s],!0),yn(du(_(this,Oe),i,s,a))}equals(e){U(this,ht);let n=Zo(e),i=_(this,Oe),a=_(n,Oe);return Y.default.equal(Y.default.BigInt(i),Y.default.BigInt(a))}toString(e=void 0){U(this,ht);let n=De(e),i=Di(n),a=vn(n,"trunc"),s=Zt(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let c=n.timeZone;c!==void 0&&(c=At(c));let{precision:l,unit:p,increment:m}=Ci(s,i);return ll(yn(du(_(this,Oe),m,p,a)),c,l)}toJSON(){return U(this,ht),ll(this,void 0,"auto")}toLocaleString(e=void 0,n=void 0){return U(this,ht),new nn(e,n).format(this)}valueOf(){mr("Instant")}toZonedDateTimeISO(e){U(this,ht);let n=At(e);return _t(_(this,Oe),n,"iso8601")}static fromEpochMilliseconds(e){return yn(gn(Na(e)))}static fromEpochNanoseconds(e){return yn(Sa(e))}static from(e){return Zo(e)}static compare(e,n){let i=Zo(e),a=Zo(n),s=_(i,Oe),c=_(a,Oe);return Y.default.lessThan(s,c)?-1:Y.default.greaterThan(s,c)?1:0}};Gn(hi,"Temporal.Instant");var fi=class{constructor(e,n,i,a="iso8601"){let s=je(e),c=je(n),l=je(i),p=Yt(a===void 0?"iso8601":ct(a));Pr(s,c,l),id(this,{year:s,month:c,day:l},p)}get calendarId(){return U(this,et),_(this,ae)}get era(){return Dt(this,"era")}get eraYear(){return Dt(this,"eraYear")}get year(){return Dt(this,"year")}get month(){return Dt(this,"month")}get monthCode(){return Dt(this,"monthCode")}get day(){return Dt(this,"day")}get dayOfWeek(){return Dt(this,"dayOfWeek")}get dayOfYear(){return Dt(this,"dayOfYear")}get weekOfYear(){return Dt(this,"weekOfYear")?.week}get yearOfWeek(){return Dt(this,"weekOfYear")?.year}get daysInWeek(){return Dt(this,"daysInWeek")}get daysInMonth(){return Dt(this,"daysInMonth")}get daysInYear(){return Dt(this,"daysInYear")}get monthsInYear(){return Dt(this,"monthsInYear")}get inLeapYear(){return Dt(this,"inLeapYear")}with(e,n=void 0){if(U(this,et),!nt(e))throw new TypeError("invalid argument");mo(e);let i=_(this,ae),a=Lt(i,_(this,Re));return a=Rr(i,a,an(i,e,["year","month","monthCode","day"],[],"partial")),$t(dr(i,a,qe(De(n))),i)}withCalendar(e){U(this,et);let n=Ii(e);return $t(_(this,Re),n)}add(e,n=void 0){return U(this,et),El("add",this,e,n)}subtract(e,n=void 0){return U(this,et),El("subtract",this,e,n)}until(e,n=void 0){return U(this,et),bl("until",this,e,n)}since(e,n=void 0){return U(this,et),bl("since",this,e,n)}equals(e){U(this,et);let n=Uo(e);return Mn(_(this,Re),_(n,Re))===0&&Tn(_(this,ae),_(n,ae))}toString(e=void 0){return U(this,et),dl(this,ki(De(e)))}toJSON(){return U(this,et),dl(this)}toLocaleString(e=void 0,n=void 0){return U(this,et),new nn(e,n).format(this)}valueOf(){mr("PlainDate")}toPlainDateTime(e=void 0){U(this,et);let n=od(e);return cn(Ke(_(this,Re),n),_(this,ae))}toZonedDateTime(e){let n,i;if(U(this,et),nt(e)){let c=e.timeZone;c===void 0?n=At(e):(n=At(c),i=e.plainTime)}else n=At(e);let a=_(this,Re),s;return i===void 0?s=or(n,a):(i=ar(i),s=wt(n,Ke(a,_(i,tt)),"compatible")),_t(s,n,_(this,ae))}toPlainYearMonth(){U(this,et);let e=_(this,ae);return oo(ii(e,Lt(e,_(this,Re)),"constrain"),e)}toPlainMonthDay(){U(this,et);let e=_(this,ae);return ro(wa(e,Lt(e,_(this,Re)),"constrain"),e)}static from(e,n=void 0){return Uo(e,n)}static compare(e,n){let i=Uo(e),a=Uo(n);return Mn(_(i,Re),_(a,Re))}};function Dt(t,e){U(t,et);let n=_(t,Re);return Si(t).isoToDate(n,{[e]:!0})[e]}Gn(fi,"Temporal.PlainDate");var mi=class{constructor(e,n,i,a=0,s=0,c=0,l=0,p=0,m=0,g="iso8601"){let b=je(e),w=je(n),E=je(i),M=a===void 0?0:je(a),P=s===void 0?0:je(s),N=c===void 0?0:je(c),K=l===void 0?0:je(l),Q=p===void 0?0:je(p),oe=m===void 0?0:je(m),se=Yt(g===void 0?"iso8601":ct(g));Fu(b,w,E,M,P,N,K,Q,oe),ad(this,{isoDate:{year:b,month:w,day:E},time:{hour:M,minute:P,second:N,millisecond:K,microsecond:Q,nanosecond:oe}},se)}get calendarId(){return U(this,Xe),_(this,ae)}get year(){return Ct(this,"year")}get month(){return Ct(this,"month")}get monthCode(){return Ct(this,"monthCode")}get day(){return Ct(this,"day")}get hour(){return Qr(this,"hour")}get minute(){return Qr(this,"minute")}get second(){return Qr(this,"second")}get millisecond(){return Qr(this,"millisecond")}get microsecond(){return Qr(this,"microsecond")}get nanosecond(){return Qr(this,"nanosecond")}get era(){return Ct(this,"era")}get eraYear(){return Ct(this,"eraYear")}get dayOfWeek(){return Ct(this,"dayOfWeek")}get dayOfYear(){return Ct(this,"dayOfYear")}get weekOfYear(){return Ct(this,"weekOfYear")?.week}get yearOfWeek(){return Ct(this,"weekOfYear")?.year}get daysInWeek(){return Ct(this,"daysInWeek")}get daysInYear(){return Ct(this,"daysInYear")}get daysInMonth(){return Ct(this,"daysInMonth")}get monthsInYear(){return Ct(this,"monthsInYear")}get inLeapYear(){return Ct(this,"inLeapYear")}with(e,n=void 0){if(U(this,Xe),!nt(e))throw new TypeError("invalid argument");mo(e);let i=_(this,ae),a=_(this,Je),s={...Lt(i,a.isoDate),...a.time};return s=Rr(i,s,an(i,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),cn(Ei(i,s,qe(De(n))),i)}withPlainTime(e=void 0){U(this,Xe);let n=od(e);return cn(Ke(_(this,Je).isoDate,n),_(this,ae))}withCalendar(e){U(this,Xe);let n=Ii(e);return cn(_(this,Je),n)}add(e,n=void 0){return U(this,Xe),Tl("add",this,e,n)}subtract(e,n=void 0){return U(this,Xe),Tl("subtract",this,e,n)}until(e,n=void 0){return U(this,Xe),wl("until",this,e,n)}since(e,n=void 0){return U(this,Xe),wl("since",this,e,n)}round(e){if(U(this,Xe),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?$r("smallestUnit",e):De(e),i=po(n),a=vn(n,"halfExpand"),s=Zt(n,"smallestUnit","time",Kn,["day"]),c={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s];yo(i,c,c===1);let l=_(this,Je);return cn(i===1&&s==="nanosecond"?l:hu(l,i,s,a),_(this,ae))}equals(e){U(this,Xe);let n=Ko(e);return ho(_(this,Je),_(n,Je))===0&&Tn(_(this,ae),_(n,ae))}toString(e=void 0){U(this,Xe);let n=De(e),i=ki(n),a=Di(n),s=vn(n,"trunc"),c=Zt(n,"smallestUnit","time",void 0);if(c==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:l,unit:p,increment:m}=Ci(c,a),g=hu(_(this,Je),m,p,s);return jr(g),si(g,_(this,ae),l,i)}toJSON(){return U(this,Xe),si(_(this,Je),_(this,ae),"auto")}toLocaleString(e=void 0,n=void 0){return U(this,Xe),new nn(e,n).format(this)}valueOf(){mr("PlainDateTime")}toZonedDateTime(e,n=void 0){U(this,Xe);let i=At(e),a=ei(De(n));return _t(wt(i,_(this,Je),a),i,_(this,ae))}toPlainDate(){return U(this,Xe),$t(_(this,Je).isoDate,_(this,ae))}toPlainTime(){return U(this,Xe),Bn(_(this,Je).time)}static from(e,n=void 0){return Ko(e,n)}static compare(e,n){let i=Ko(e),a=Ko(n);return ho(_(i,Je),_(a,Je))}};function Ct(t,e){U(t,Xe);let n=_(t,Je).isoDate;return Si(t).isoToDate(n,{[e]:!0})[e]}function Qr(t,e){return U(t,Xe),_(t,Je).time[e]}Gn(mi,"Temporal.PlainDateTime");var pi=class t{constructor(e=0,n=0,i=0,a=0,s=0,c=0,l=0,p=0,m=0,g=0){let b=e===void 0?0:pn(e),w=n===void 0?0:pn(n),E=i===void 0?0:pn(i),M=a===void 0?0:pn(a),P=s===void 0?0:pn(s),N=c===void 0?0:pn(c),K=l===void 0?0:pn(l),Q=p===void 0?0:pn(p),oe=m===void 0?0:pn(m),se=g===void 0?0:pn(g);Fa(b,w,E,M,P,N,K,Q,oe,se),Wn(this),Ae(this,Et,b),Ae(this,Tt,w),Ae(this,qt,E),Ae(this,It,M),Ae(this,Mt,P),Ae(this,Ot,N),Ae(this,Rt,K),Ae(this,Pt,Q),Ae(this,jt,oe),Ae(this,Ut,se)}get years(){return U(this,Ve),_(this,Et)}get months(){return U(this,Ve),_(this,Tt)}get weeks(){return U(this,Ve),_(this,qt)}get days(){return U(this,Ve),_(this,It)}get hours(){return U(this,Ve),_(this,Mt)}get minutes(){return U(this,Ve),_(this,Ot)}get seconds(){return U(this,Ve),_(this,Rt)}get milliseconds(){return U(this,Ve),_(this,Pt)}get microseconds(){return U(this,Ve),_(this,jt)}get nanoseconds(){return U(this,Ve),_(this,Ut)}get sign(){return U(this,Ve),Da(this)}get blank(){return U(this,Ve),Da(this)===0}with(e){U(this,Ve);let n=rd(e),{years:i=_(this,Et),months:a=_(this,Tt),weeks:s=_(this,qt),days:c=_(this,It),hours:l=_(this,Mt),minutes:p=_(this,Ot),seconds:m=_(this,Rt),milliseconds:g=_(this,Pt),microseconds:b=_(this,jt),nanoseconds:w=_(this,Ut)}=n;return new t(i,a,s,c,l,p,m,g,b,w)}negated(){return U(this,Ve),Gt(this)}abs(){return U(this,Ve),new t(Math.abs(_(this,Et)),Math.abs(_(this,Tt)),Math.abs(_(this,qt)),Math.abs(_(this,It)),Math.abs(_(this,Mt)),Math.abs(_(this,Ot)),Math.abs(_(this,Rt)),Math.abs(_(this,Pt)),Math.abs(_(this,jt)),Math.abs(_(this,Ut)))}add(e){return U(this,Ve),Cl("add",this,e)}subtract(e){return U(this,Ve),Cl("subtract",this,e)}round(e){if(U(this,Ve),e===void 0)throw new TypeError("options parameter is required");let n=An(this),i=typeof e=="string"?$r("smallestUnit",e):De(e),a=Zt(i,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:s,zonedRelativeTo:c}=Ws(i),l=po(i),p=vn(i,"halfExpand"),m=Zt(i,"smallestUnit","datetime",void 0),g=!0;m||(g=!1,m="nanosecond");let b=zn(n,m),w=!0;if(a||(w=!1,a=b),a==="auto"&&(a=b),!g&&!w)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(zn(a,m)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${m}`);let E={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[m];if(E!==void 0&&yo(l,E,!1),l>1&&Ln(m)==="date"&&a!==m)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(c){let P=to(this),N=_(c,Ze),K=_(c,ae),Q=_(c,Oe);return P=Cd(Q,Ho(Q,N,K,P),N,K,a,l,m,p),Ln(a)==="date"&&(a="hour"),ln(P,a)}if(s){let P=Sn(this),N=lo({deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},P.time),K=_(s,Re),Q=_(s,ae),oe=rn(Q,K,bt(P.date,N.deltaDays),"constrain");return P=Dd(Ke(K,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Ke(oe,N),Q,a,l,m,p),ln(P,a)}if(Dn(n))throw new RangeError(`a starting point is required for ${n}s balancing`);if(Dn(a))throw new RangeError(`a starting point is required for ${a}s balancing`);let M=Sn(this);if(m==="day"){let{quotient:P,remainder:N}=M.time.divmod(va),K=M.date.days+P+ti(N,"day");K=sr(K,l,p),M=Fn({years:0,months:0,weeks:0,days:K},He.ZERO)}else M=Fn({years:0,months:0,weeks:0,days:0},Ca(M.time,l,m,p));return ln(M,a)}total(e){if(U(this,Ve),e===void 0)throw new TypeError("options argument is required");let n=typeof e=="string"?$r("unit",e):De(e),{plainRelativeTo:i,zonedRelativeTo:a}=Ws(n),s=Zt(n,"unit","datetime",Kn);if(a){let l=to(this),p=_(a,Ze),m=_(a,ae),g=_(a,Oe);return(function(b,w,E,M,P){return Ln(P)==="time"?ti(He.fromEpochNsDiff(w,b),P):vl(xd(b,w,E,M,P),w,hn(E,b),E,M,P)})(g,Ho(g,p,m,l),p,m,s)}if(i){let l=Sn(this),p=lo({deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},l.time),m=_(i,Re),g=_(i,ae),b=rn(g,m,bt(l.date,p.deltaDays),"constrain");return(function(w,E,M,P){if(ho(w,E)==0)return 0;jr(w),jr(E);let N=wd(w,E,M,P);return P==="nanosecond"?Y.default.toNumber(N.time.totalNs):vl(N,mt(E),w,null,M,P)})(Ke(m,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Ke(b,p),g,s)}let c=An(this);if(Dn(c))throw new RangeError(`a starting point is required for ${c}s total`);if(Dn(s))throw new RangeError(`a starting point is required for ${s}s total`);return ti(Sn(this).time,s)}toString(e=void 0){U(this,Ve);let n=De(e),i=Di(n),a=vn(n,"trunc"),s=Zt(n,"smallestUnit","time",void 0);if(s==="hour"||s==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');let{precision:c,unit:l,increment:p}=Ci(s,i);if(l==="nanosecond"&&p===1)return ma(this,c);let m=An(this),g=to(this),b=Ca(g.time,p,l,a);return g=Fn(g.date,b),ma(ln(g,zn(m,"second")),c)}toJSON(){return U(this,Ve),ma(this,"auto")}toLocaleString(e=void 0,n=void 0){if(U(this,Ve),typeof Intl.DurationFormat=="function"){let i=new Intl.DurationFormat(e,n);return Gu.call(i,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),ma(this,"auto")}valueOf(){mr("Duration")}static from(e){return dn(e)}static compare(e,n,i=void 0){let a=dn(e),s=dn(n),c=De(i),{plainRelativeTo:l,zonedRelativeTo:p}=Ws(c);if(_(a,Et)===_(s,Et)&&_(a,Tt)===_(s,Tt)&&_(a,qt)===_(s,qt)&&_(a,It)===_(s,It)&&_(a,Mt)===_(s,Mt)&&_(a,Ot)===_(s,Ot)&&_(a,Rt)===_(s,Rt)&&_(a,Pt)===_(s,Pt)&&_(a,jt)===_(s,jt)&&_(a,Ut)===_(s,Ut))return 0;let m=An(a),g=An(s),b=to(a),w=to(s);if(p&&(Ln(m)==="date"||Ln(g)==="date")){let K=_(p,Ze),Q=_(p,ae),oe=_(p,Oe),se=Ho(oe,K,Q,b),de=Ho(oe,K,Q,w);return Kt(Y.default.toNumber(Y.default.subtract(se,de)))}let E=b.date.days,M=w.date.days;if(Dn(m)||Dn(g)){if(!l)throw new RangeError("A starting point is required for years, months, or weeks comparison");E=gl(b.date,l),M=gl(w.date,l)}let P=b.time.add24HourDays(E),N=w.time.add24HourDays(M);return P.cmp(N)}};Gn(pi,"Temporal.Duration");var yi=class{constructor(e,n,i="iso8601",a=1972){let s=je(e),c=je(n),l=Yt(i===void 0?"iso8601":ct(i)),p=je(a);Pr(p,s,c),sd(this,{year:p,month:s,day:c},l)}get monthCode(){return Pl(this,"monthCode")}get day(){return Pl(this,"day")}get calendarId(){return U(this,en),_(this,ae)}with(e,n=void 0){if(U(this,en),!nt(e))throw new TypeError("invalid argument");mo(e);let i=_(this,ae),a=Lt(i,_(this,Re),"month-day");return a=Rr(i,a,an(i,e,["year","month","monthCode","day"],[],"partial")),ro(wa(i,a,qe(De(n))),i)}equals(e){U(this,en);let n=ul(e);return Mn(_(this,Re),_(n,Re))===0&&Tn(_(this,ae),_(n,ae))}toString(e=void 0){return U(this,en),fl(this,ki(De(e)))}toJSON(){return U(this,en),fl(this)}toLocaleString(e=void 0,n=void 0){return U(this,en),new nn(e,n).format(this)}valueOf(){mr("PlainMonthDay")}toPlainDate(e){if(U(this,en),!nt(e))throw new TypeError("argument should be an object");let n=_(this,ae);return $t(dr(n,Rr(n,Lt(n,_(this,Re),"month-day"),an(n,e,["year"],[],[])),"constrain"),n)}static from(e,n=void 0){return ul(e,n)}};function Pl(t,e){U(t,en);let n=_(t,Re);return Si(t).isoToDate(n,{[e]:!0})[e]}function Hs(t){return hn(t,pu())}Gn(yi,"Temporal.PlainMonthDay");var Pd={instant:()=>yn(pu()),plainDateTimeISO:(t=Yo())=>cn(Hs(At(t)),"iso8601"),plainDateISO:(t=Yo())=>$t(Hs(At(t)).isoDate,"iso8601"),plainTimeISO:(t=Yo())=>Bn(Hs(At(t)).time),timeZoneId:()=>Yo(),zonedDateTimeISO:(t=Yo())=>{let e=At(t);return _t(pu(),e,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Pd,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});var gi=class t{constructor(e=0,n=0,i=0,a=0,s=0,c=0){let l=e===void 0?0:je(e),p=n===void 0?0:je(n),m=i===void 0?0:je(i),g=a===void 0?0:je(a),b=s===void 0?0:je(s),w=c===void 0?0:je(c);za(l,p,m,g,b,w),ud(this,{hour:l,minute:p,second:m,millisecond:g,microsecond:b,nanosecond:w})}get hour(){return U(this,ot),_(this,tt).hour}get minute(){return U(this,ot),_(this,tt).minute}get second(){return U(this,ot),_(this,tt).second}get millisecond(){return U(this,ot),_(this,tt).millisecond}get microsecond(){return U(this,ot),_(this,tt).microsecond}get nanosecond(){return U(this,ot),_(this,tt).nanosecond}with(e,n=void 0){if(U(this,ot),!nt(e))throw new TypeError("invalid argument");mo(e);let i=iu(e,"partial"),a=iu(this),{hour:s,minute:c,second:l,millisecond:p,microsecond:m,nanosecond:g}=Object.assign(a,i),b=qe(De(n));return{hour:s,minute:c,second:l,millisecond:p,microsecond:m,nanosecond:g}=La(s,c,l,p,m,g,b),new t(s,c,l,p,m,g)}add(e){return U(this,ot),Il("add",this,e)}subtract(e){return U(this,ot),Il("subtract",this,e)}until(e,n=void 0){return U(this,ot),xl("until",this,e,n)}since(e,n=void 0){return U(this,ot),xl("since",this,e,n)}round(e){if(U(this,ot),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?$r("smallestUnit",e):De(e),i=po(n),a=vn(n,"halfExpand"),s=Zt(n,"smallestUnit","time",Kn);return yo(i,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s],!1),Bn(fu(_(this,tt),i,s,a))}equals(e){U(this,ot);let n=ar(e);return mu(_(this,tt),_(n,tt))===0}toString(e=void 0){U(this,ot);let n=De(e),i=Di(n),a=vn(n,"trunc"),s=Zt(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:c,unit:l,increment:p}=Ci(s,i);return hl(fu(_(this,tt),p,l,a),c)}toJSON(){return U(this,ot),hl(_(this,tt),"auto")}toLocaleString(e=void 0,n=void 0){return U(this,ot),new nn(e,n).format(this)}valueOf(){mr("PlainTime")}static from(e,n=void 0){return ar(e,n)}static compare(e,n){let i=ar(e),a=ar(n);return mu(_(i,tt),_(a,tt))}};Gn(gi,"Temporal.PlainTime");var vi=class{constructor(e,n,i="iso8601",a=1){let s=je(e),c=je(n),l=Yt(i===void 0?"iso8601":ct(i)),p=je(a);Pr(s,c,p),cd(this,{year:s,month:c,day:p},l)}get year(){return Nn(this,"year")}get month(){return Nn(this,"month")}get monthCode(){return Nn(this,"monthCode")}get calendarId(){return U(this,ft),_(this,ae)}get era(){return Nn(this,"era")}get eraYear(){return Nn(this,"eraYear")}get daysInMonth(){return Nn(this,"daysInMonth")}get daysInYear(){return Nn(this,"daysInYear")}get monthsInYear(){return Nn(this,"monthsInYear")}get inLeapYear(){return Nn(this,"inLeapYear")}with(e,n=void 0){if(U(this,ft),!nt(e))throw new TypeError("invalid argument");mo(e);let i=_(this,ae),a=Lt(i,_(this,Re),"year-month");return a=Rr(i,a,an(i,e,["year","month","monthCode"],[],"partial")),oo(ii(i,a,qe(De(n))),i)}add(e,n=void 0){return U(this,ft),Ml("add",this,e,n)}subtract(e,n=void 0){return U(this,ft),Ml("subtract",this,e,n)}until(e,n=void 0){return U(this,ft),kl("until",this,e,n)}since(e,n=void 0){return U(this,ft),kl("since",this,e,n)}equals(e){U(this,ft);let n=Wo(e);return Mn(_(this,Re),_(n,Re))===0&&Tn(_(this,ae),_(n,ae))}toString(e=void 0){return U(this,ft),ml(this,ki(De(e)))}toJSON(){return U(this,ft),ml(this)}toLocaleString(e=void 0,n=void 0){return U(this,ft),new nn(e,n).format(this)}valueOf(){mr("PlainYearMonth")}toPlainDate(e){if(U(this,ft),!nt(e))throw new TypeError("argument should be an object");let n=_(this,ae);return $t(dr(n,Rr(n,Lt(n,_(this,Re),"year-month"),an(n,e,["day"],[],[])),"constrain"),n)}static from(e,n=void 0){return Wo(e,n)}static compare(e,n){let i=Wo(e),a=Wo(n);return Mn(_(i,Re),_(a,Re))}};function Nn(t,e){U(t,ft);let n=_(t,Re);return Si(t).isoToDate(n,{[e]:!0})[e]}Gn(vi,"Temporal.PlainYearMonth");var Ap=nn.prototype.resolvedOptions,_i=class{constructor(e,n,i="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");let a=Sa(e),s=ct(n),{tzName:c,offsetMinutes:l}=ur(s);if(l===void 0){let p=xa(c);if(!p)throw new RangeError(`unknown time zone ${c}`);s=p.identifier}else s=Bu(l);dd(this,a,s,Yt(i===void 0?"iso8601":ct(i)))}get calendarId(){return U(this,Le),_(this,ae)}get timeZoneId(){return U(this,Le),_(this,Ze)}get year(){return St(this,"year")}get month(){return St(this,"month")}get monthCode(){return St(this,"monthCode")}get day(){return St(this,"day")}get hour(){return Vr(this,"hour")}get minute(){return Vr(this,"minute")}get second(){return Vr(this,"second")}get millisecond(){return Vr(this,"millisecond")}get microsecond(){return Vr(this,"microsecond")}get nanosecond(){return Vr(this,"nanosecond")}get era(){return St(this,"era")}get eraYear(){return St(this,"eraYear")}get epochMilliseconds(){return U(this,Le),fn(_(this,Oe),"floor")}get epochNanoseconds(){return U(this,Le),Sd(_(this,Oe))}get dayOfWeek(){return St(this,"dayOfWeek")}get dayOfYear(){return St(this,"dayOfYear")}get weekOfYear(){return St(this,"weekOfYear")?.week}get yearOfWeek(){return St(this,"weekOfYear")?.year}get hoursInDay(){U(this,Le);let e=_(this,Ze),n=kn(this).isoDate,i=Wt(n.year,n.month,n.day+1),a=or(e,n),s=or(e,i);return ti(He.fromEpochNsDiff(s,a),"hour")}get daysInWeek(){return St(this,"daysInWeek")}get daysInMonth(){return St(this,"daysInMonth")}get daysInYear(){return St(this,"daysInYear")}get monthsInYear(){return St(this,"monthsInYear")}get inLeapYear(){return St(this,"inLeapYear")}get offset(){return U(this,Le),au(Yn(_(this,Ze),_(this,Oe)))}get offsetNanoseconds(){return U(this,Le),Yn(_(this,Ze),_(this,Oe))}with(e,n=void 0){if(U(this,Le),!nt(e))throw new TypeError("invalid zoned-date-time-like");mo(e);let i=_(this,ae),a=_(this,Ze),s=Yn(a,_(this,Oe)),c=kn(this),l={...Lt(i,c.isoDate),...c.time,offset:au(s)};l=Rr(i,l,an(i,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));let p=De(n),m=ei(p),g=pa(p,"prefer"),b=Ei(i,l,qe(p)),w=go(l.offset);return _t(ba(b.isoDate,b.time,"option",w,a,m,g,!1),a,i)}withPlainTime(e=void 0){U(this,Le);let n=_(this,Ze),i=_(this,ae),a=kn(this).isoDate,s;return s=e===void 0?or(n,a):wt(n,Ke(a,_(ar(e),tt)),"compatible"),_t(s,n,i)}withTimeZone(e){U(this,Le);let n=At(e);return _t(_(this,Oe),n,_(this,ae))}withCalendar(e){U(this,Le);let n=Ii(e);return _t(_(this,Oe),_(this,Ze),n)}add(e,n=void 0){return U(this,Le),Ol("add",this,e,n)}subtract(e,n=void 0){return U(this,Le),Ol("subtract",this,e,n)}until(e,n=void 0){return U(this,Le),Dl("until",this,e,n)}since(e,n=void 0){return U(this,Le),Dl("since",this,e,n)}round(e){if(U(this,Le),e===void 0)throw new TypeError("options parameter is required");let n=typeof e=="string"?$r("smallestUnit",e):De(e),i=po(n),a=vn(n,"halfExpand"),s=Zt(n,"smallestUnit","time",Kn,["day"]),c={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[s];if(yo(i,c,c===1),s==="nanosecond"&&i===1)return _t(_(this,Oe),_(this,Ze),_(this,ae));let l=_(this,Ze),p=_(this,Oe),m=kn(this),g;if(s==="day"){let b=m.isoDate,w=Wt(b.year,b.month,b.day+1),E=or(l,b),M=or(l,w),P=Y.default.subtract(M,E);g=He.fromEpochNsDiff(p,E).round(P,a).addToEpochNs(E)}else{let b=hu(m,i,s,a),w=Yn(l,p);g=ba(b.isoDate,b.time,"option",w,l,"compatible","prefer",!1)}return _t(g,l,_(this,ae))}equals(e){U(this,Le);let n=Go(e),i=_(this,Oe),a=_(n,Oe);return!!Y.default.equal(Y.default.BigInt(i),Y.default.BigInt(a))&&!!hd(_(this,Ze),_(n,Ze))&&Tn(_(this,ae),_(n,ae))}toString(e=void 0){U(this,Le);let n=De(e),i=ki(n),a=Di(n),s=(function(w){return qn(w,"offset",["auto","never"],"auto")})(n),c=vn(n,"trunc"),l=Zt(n,"smallestUnit","time",void 0);if(l==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let p=(function(w){return qn(w,"timeZoneName",["auto","never","critical"],"auto")})(n),{precision:m,unit:g,increment:b}=Ci(l,a);return pl(this,m,i,p,s,{unit:g,increment:b,roundingMode:c})}toLocaleString(e=void 0,n=void 0){U(this,Le);let i=De(n),a=Object.create(null);if((function(p,m,g,b){if(m==null)return;let w=Reflect.ownKeys(m);for(let E=0;E<w.length;E++){let M=w[E];if(!g.some(P=>Object.is(P,M))&&Object.prototype.propertyIsEnumerable.call(m,M)){let P=m[M];p[M]=P}}})(a,i,["timeZone"]),i.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(a.year===void 0&&a.month===void 0&&a.day===void 0&&a.era===void 0&&a.weekday===void 0&&a.dateStyle===void 0&&a.hour===void 0&&a.minute===void 0&&a.second===void 0&&a.fractionalSecondDigits===void 0&&a.timeStyle===void 0&&a.dayPeriod===void 0&&a.timeZoneName===void 0&&(a.timeZoneName="short"),a.timeZone=_(this,Ze),yl(a.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");let s=new nn(e,a),c=Ap.call(s).calendar,l=_(this,ae);if(l!=="iso8601"&&c!=="iso8601"&&!Tn(c,l))throw new RangeError(`cannot format ZonedDateTime with calendar ${l} in locale with calendar ${c}`);return s.format(yn(_(this,Oe)))}toJSON(){return U(this,Le),pl(this,"auto")}valueOf(){mr("ZonedDateTime")}startOfDay(){U(this,Le);let e=_(this,Ze);return _t(or(e,kn(this).isoDate),e,_(this,ae))}getTimeZoneTransition(e){U(this,Le);let n=_(this,Ze);if(e===void 0)throw new TypeError("options parameter is required");let i=qn(typeof e=="string"?$r("direction",e):De(e),"direction",["next","previous"],Kn);if(i===void 0)throw new TypeError("direction option is required");if(yl(n)||n==="UTC")return null;let a=_(this,Oe),s=i==="next"?zu(n,a):uu(n,a);return s===null?null:_t(s,n,_(this,ae))}toInstant(){return U(this,Le),yn(_(this,Oe))}toPlainDate(){return U(this,Le),$t(kn(this).isoDate,_(this,ae))}toPlainTime(){return U(this,Le),Bn(kn(this).time)}toPlainDateTime(){return U(this,Le),cn(kn(this),_(this,ae))}static from(e,n=void 0){return Go(e,n)}static compare(e,n){let i=Go(e),a=Go(n),s=_(i,Oe),c=_(a,Oe);return Y.default.lessThan(Y.default.BigInt(s),Y.default.BigInt(c))?-1:Y.default.greaterThan(Y.default.BigInt(s),Y.default.BigInt(c))?1:0}};function kn(t){return hn(_(t,Ze),_(t,Oe))}function St(t,e){U(t,Le);let n=kn(t).isoDate;return Si(t).isoToDate(n,{[e]:!0})[e]}function Vr(t,e){return U(t,Le),kn(t).time[e]}Gn(_i,"Temporal.ZonedDateTime");var Hu=Object.freeze({__proto__:null,Duration:pi,Instant:hi,Now:Pd,PlainDate:fi,PlainDateTime:mi,PlainMonthDay:yi,PlainTime:gi,PlainYearMonth:vi,ZonedDateTime:_i}),ry=class{toTemporalInstant(){return yn(gn(Date.prototype.valueOf.call(this)))}}.prototype.toTemporalInstant,Lp=[hi,fi,mi,pi,yi,gi,vi,_i];for(let t of Lp){let e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}var Bp=(t,...e)=>({$t:setTimeout(t,0,...e),[Symbol.dispose](){clearTimeout(this.t)}}),Yp=Object.create,Nd=Object.defineProperty,zp=Object.getOwnPropertyDescriptor,Fp=Object.getOwnPropertyNames,qp=Object.getPrototypeOf,Up=Object.prototype.hasOwnProperty,Kp=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zp=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Fp(e))!Up.call(t,a)&&a!==n&&Nd(t,a,{get:()=>e[a],enumerable:!(i=zp(e,a))||i.enumerable});return t},Wp=(t,e,n)=>(n=t!=null?Yp(qp(t)):{},Zp(e||!t||!t.__esModule?Nd(n,"default",{value:t,enumerable:!0}):n,t)),Gp=Kp((t,e)=>{(function(n,i){typeof t=="object"&&typeof e<"u"?e.exports=i():typeof define=="function"&&define.amd?define(i):(n=typeof globalThis<"u"?globalThis:n||self,n.Dexie=i())})(t,(function(){"use strict";var n=function(o,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},n(o,r)};function i(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(o,r);function u(){this.constructor=o}o.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}var a=function(){return a=Object.assign||function(o){for(var r,u=1,d=arguments.length;u<d;u++){r=arguments[u];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(o[f]=r[f])}return o},a.apply(this,arguments)};function s(o,r,u){if(u||arguments.length===2)for(var d=0,f=r.length,v;d<f;d++)(v||!(d in r))&&(v||(v=Array.prototype.slice.call(r,0,d)),v[d]=r[d]);return o.concat(v||Array.prototype.slice.call(r))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,l=Object.keys,p=Array.isArray;typeof Promise<"u"&&!c.Promise&&(c.Promise=Promise);function m(o,r){return typeof r!="object"||l(r).forEach(function(u){o[u]=r[u]}),o}var g=Object.getPrototypeOf,b={}.hasOwnProperty;function w(o,r){return b.call(o,r)}function E(o,r){typeof r=="function"&&(r=r(g(o))),(typeof Reflect>"u"?l:Reflect.ownKeys)(r).forEach(function(u){P(o,u,r[u])})}var M=Object.defineProperty;function P(o,r,u,d){M(o,r,m(u&&w(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},d))}function N(o){return{from:function(r){return o.prototype=Object.create(r.prototype),P(o.prototype,"constructor",o),{extend:E.bind(null,o.prototype)}}}}var K=Object.getOwnPropertyDescriptor;function Q(o,r){var u=K(o,r),d;return u||(d=g(o))&&Q(d,r)}var oe=[].slice;function se(o,r,u){return oe.call(o,r,u)}function de(o,r){return r(o)}function he(o){if(!o)throw new Error("Assertion Failed")}function Se(o){c.setImmediate?Bp(o):setTimeout(o,0)}function Me(o,r){return o.reduce(function(u,d,f){var v=r(d,f);return v&&(u[v[0]]=v[1]),u},{})}function me(o,r){if(typeof r=="string"&&w(o,r))return o[r];if(!r)return o;if(typeof r!="string"){for(var u=[],d=0,f=r.length;d<f;++d){var v=me(o,r[d]);u.push(v)}return u}var x=r.indexOf(".");if(x!==-1){var D=o[r.substr(0,x)];return D==null?void 0:me(D,r.substr(x+1))}}function z(o,r,u){if(!(!o||r===void 0)&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof r!="string"&&"length"in r){he(typeof u!="string"&&"length"in u);for(var d=0,f=r.length;d<f;++d)z(o,r[d],u[d])}else{var v=r.indexOf(".");if(v!==-1){var x=r.substr(0,v),D=r.substr(v+1);if(D==="")u===void 0?p(o)&&!isNaN(parseInt(x))?o.splice(x,1):delete o[x]:o[x]=u;else{var S=o[x];(!S||!w(o,x))&&(S=o[x]={}),z(S,D,u)}}else u===void 0?p(o)&&!isNaN(parseInt(r))?o.splice(r,1):delete o[r]:o[r]=u}}function J(o,r){typeof r=="string"?z(o,r,void 0):"length"in r&&[].map.call(r,function(u){z(o,u,void 0)})}function G(o){var r={};for(var u in o)w(o,u)&&(r[u]=o[u]);return r}var le=[].concat;function k(o){return le.apply([],o)}var q="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(r){return r+o+"Array"})}))).filter(function(o){return c[o]}),h=new Set(q.map(function(o){return c[o]}));function y(o){var r={};for(var u in o)if(w(o,u)){var d=o[u];r[u]=!d||typeof d!="object"||h.has(d.constructor)?d:y(d)}return r}function C(o){for(var r in o)if(w(o,r))return!1;return!0}var I=null;function T(o){I=new WeakMap;var r=R(o);return I=null,r}function R(o){if(!o||typeof o!="object")return o;var r=I.get(o);if(r)return r;if(p(o)){r=[],I.set(o,r);for(var u=0,d=o.length;u<d;++u)r.push(R(o[u]))}else if(h.has(o.constructor))r=o;else{var f=g(o);r=f===Object.prototype?{}:Object.create(f),I.set(o,r);for(var v in o)w(o,v)&&(r[v]=R(o[v]))}return r}var F={}.toString;function B(o){return F.call(o).slice(8,-1)}var re=typeof Symbol<"u"?Symbol.iterator:"@@iterator",X=typeof re=="symbol"?function(o){var r;return o!=null&&(r=o[re])&&r.apply(o)}:function(){return null};function ye(o,r){var u=o.indexOf(r);return u>=0&&o.splice(u,1),u>=0}var we={};function ge(o){var r,u,d,f;if(arguments.length===1){if(p(o))return o.slice();if(this===we&&typeof o=="string")return[o];if(f=X(o)){for(u=[];d=f.next(),!d.done;)u.push(d.value);return u}if(o==null)return[o];if(r=o.length,typeof r=="number"){for(u=new Array(r);r--;)u[r]=o[r];return u}return[o]}for(r=arguments.length,u=new Array(r);r--;)u[r]=arguments[r];return u}var ue=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ie=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Pe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ye=Ie.concat(Pe),Ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(o,r){this.name=o,this.message=r}N(We).from(Error).extend({toString:function(){return this.name+": "+this.message}});function at(o,r){return o+". Errors: "+Object.keys(r).map(function(u){return r[u].toString()}).filter(function(u,d,f){return f.indexOf(u)===d}).join(`
`)}function st(o,r,u,d){this.failures=r,this.failedKeys=d,this.successCount=u,this.message=at(o,r)}N(st).from(We);function yt(o,r){this.name="BulkError",this.failures=Object.keys(r).map(function(u){return r[u]}),this.failuresByPos=r,this.message=at(o,this.failures)}N(yt).from(We);var Hn=Ye.reduce(function(o,r){return o[r]=r+"Error",o},{}),_o=We,xe=Ye.reduce(function(o,r){var u=r+"Error";function d(f,v){this.name=u,f?typeof f=="string"?(this.message="".concat(f).concat(v?`
 `+v:""),this.inner=v||null):typeof f=="object"&&(this.message="".concat(f.name," ").concat(f.message),this.inner=f):(this.message=Ue[r]||u,this.inner=null)}return N(d).from(_o),o[r]=d,o},{});xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError;var bo=Pe.reduce(function(o,r){return o[r+"Error"]=xe[r],o},{});function Xa(o,r){if(!o||o instanceof We||o instanceof TypeError||o instanceof SyntaxError||!o.name||!bo[o.name])return o;var u=new bo[o.name](r||o.message,o);return"stack"in o&&P(u,"stack",{get:function(){return this.inner.stack}}),u}var Ni=Ye.reduce(function(o,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(o[r+"Error"]=xe[r]),o},{});Ni.ModifyError=st,Ni.DexieError=We,Ni.BulkError=yt;function Ge(){}function wo(o){return o}function kh(o,r){return o==null||o===wo?r:function(u){return r(o(u))}}function vr(o,r){return function(){o.apply(this,arguments),r.apply(this,arguments)}}function Dh(o,r){return o===Ge?r:function(){var u=o.apply(this,arguments);u!==void 0&&(arguments[0]=u);var d=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var v=r.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?vr(d,this.onsuccess):d),f&&(this.onerror=this.onerror?vr(f,this.onerror):f),v!==void 0?v:u}}function Ch(o,r){return o===Ge?r:function(){o.apply(this,arguments);var u=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?vr(u,this.onsuccess):u),d&&(this.onerror=this.onerror?vr(d,this.onerror):d)}}function Sh(o,r){return o===Ge?r:function(u){var d=o.apply(this,arguments);m(u,d);var f=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var x=r.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?vr(f,this.onsuccess):f),v&&(this.onerror=this.onerror?vr(v,this.onerror):v),d===void 0?x===void 0?void 0:x:m(d,x)}}function Eh(o,r){return o===Ge?r:function(){return r.apply(this,arguments)===!1?!1:o.apply(this,arguments)}}function Ja(o,r){return o===Ge?r:function(){var u=o.apply(this,arguments);if(u&&typeof u.then=="function"){for(var d=this,f=arguments.length,v=new Array(f);f--;)v[f]=arguments[f];return u.then(function(){return r.apply(d,v)})}return r.apply(this,arguments)}}var _n=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function tc(o,r){_n=o}var xo={},nc=100,Qa=typeof Promise>"u"?[]:(function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,g(o),o];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,g(r),o]})(),rc=Qa[0],oc=Qa[1],Th=Qa[2],Ih=oc&&oc.then,_r=rc&&rc.constructor,Va=!!Th;function Mh(){queueMicrotask(Rh)}var ko=function(o,r){Do.push([o,r]),$i&&(Mh(),$i=!1)},es=!0,$i=!0,br=[],Ai=[],ts=wo,Xn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ge,pgp:!1,env:{},finalize:Ge},ke=Xn,Do=[],wr=0,Li=[];function ve(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=ke;if(typeof o!="function"){if(o!==xo)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&rs(this,this._value);return}this._state=null,this._value=null,++r.ref,ac(this,o)}var ns={get:function(){var o=ke,r=Fi;function u(d,f){var v=this,x=!o.global&&(o!==ke||r!==Fi),D=x&&!Qn(),S=new ve(function(O,A){os(v,new ic(cc(d,o,x,D),cc(f,o,x,D),O,A,o))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=xo,u},set:function(o){P(this,"then",o&&o.prototype===xo?ns:{get:function(){return o},set:ns.set})}};E(ve.prototype,{then:ns,_then:function(o,r){os(this,new ic(null,null,o,r,ke))},catch:function(o){if(arguments.length===1)return this.then(null,o);var r=arguments[0],u=arguments[1];return typeof r=="function"?this.then(null,function(d){return d instanceof r?u(d):Bi(d)}):this.then(null,function(d){return d&&d.name===r?u(d):Bi(d)})},finally:function(o){return this.then(function(r){return ve.resolve(o()).then(function(){return r})},function(r){return ve.resolve(o()).then(function(){return Bi(r)})})},timeout:function(o,r){var u=this;return o<1/0?new ve(function(d,f){var v=setTimeout(function(){return f(new xe.Timeout(r))},o);u.then(d,f).finally(clearTimeout.bind(null,v))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),Xn.env=uc();function ic(o,r,u,d,f){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof r=="function"?r:null,this.resolve=u,this.reject=d,this.psd=f}E(ve,{all:function(){var o=ge.apply(null,arguments).map(qi);return new ve(function(r,u){o.length===0&&r([]);var d=o.length;o.forEach(function(f,v){return ve.resolve(f).then(function(x){o[v]=x,--d||r(o)},u)})})},resolve:function(o){if(o instanceof ve)return o;if(o&&typeof o.then=="function")return new ve(function(u,d){o.then(u,d)});var r=new ve(xo,!0,o);return r},reject:Bi,race:function(){var o=ge.apply(null,arguments).map(qi);return new ve(function(r,u){o.map(function(d){return ve.resolve(d).then(r,u)})})},PSD:{get:function(){return ke},set:function(o){return ke=o}},totalEchoes:{get:function(){return Fi}},newPSD:Jn,usePSD:xr,scheduler:{get:function(){return ko},set:function(o){ko=o}},rejectionMapper:{get:function(){return ts},set:function(o){ts=o}},follow:function(o,r){return new ve(function(u,d){return Jn(function(f,v){var x=ke;x.unhandleds=[],x.onunhandled=v,x.finalize=vr(function(){var D=this;Ph(function(){D.unhandleds.length===0?f():v(D.unhandleds[0])})},x.finalize),o()},r,u,d)})}}),_r&&(_r.allSettled&&P(ve,"allSettled",function(){var o=ge.apply(null,arguments).map(qi);return new ve(function(r){o.length===0&&r([]);var u=o.length,d=new Array(u);o.forEach(function(f,v){return ve.resolve(f).then(function(x){return d[v]={status:"fulfilled",value:x}},function(x){return d[v]={status:"rejected",reason:x}}).then(function(){return--u||r(d)})})})}),_r.any&&typeof AggregateError<"u"&&P(ve,"any",function(){var o=ge.apply(null,arguments).map(qi);return new ve(function(r,u){o.length===0&&u(new AggregateError([]));var d=o.length,f=new Array(d);o.forEach(function(v,x){return ve.resolve(v).then(function(D){return r(D)},function(D){f[x]=D,--d||u(new AggregateError(f))})})})}),_r.withResolvers&&(ve.withResolvers=_r.withResolvers));function ac(o,r){try{r(function(u){if(o._state===null){if(u===o)throw new TypeError("A promise cannot be resolved with itself.");var d=o._lib&&zr();u&&typeof u.then=="function"?ac(o,function(f,v){u instanceof ve?u._then(f,v):u.then(f,v)}):(o._state=!0,o._value=u,sc(o)),d&&Fr()}},rs.bind(null,o))}catch(u){rs(o,u)}}function rs(o,r){if(Ai.push(r),o._state===null){var u=o._lib&&zr();r=ts(r),o._state=!1,o._value=r,jh(o),sc(o),u&&Fr()}}function sc(o){var r=o._listeners;o._listeners=[];for(var u=0,d=r.length;u<d;++u)os(o,r[u]);var f=o._PSD;--f.ref||f.finalize(),wr===0&&(++wr,ko(function(){--wr===0&&is()},[]))}function os(o,r){if(o._state===null){o._listeners.push(r);return}var u=o._state?r.onFulfilled:r.onRejected;if(u===null)return(o._state?r.resolve:r.reject)(o._value);++r.psd.ref,++wr,ko(Oh,[u,o,r])}function Oh(o,r,u){try{var d,f=r._value;!r._state&&Ai.length&&(Ai=[]),d=_n&&r._consoleTask?r._consoleTask.run(function(){return o(f)}):o(f),!r._state&&Ai.indexOf(f)===-1&&Nh(r),u.resolve(d)}catch(v){u.reject(v)}finally{--wr===0&&is(),--u.psd.ref||u.psd.finalize()}}function Rh(){xr(Xn,function(){zr()&&Fr()})}function zr(){var o=es;return es=!1,$i=!1,o}function Fr(){var o,r,u;do for(;Do.length>0;)for(o=Do,Do=[],u=o.length,r=0;r<u;++r){var d=o[r];d[0].apply(null,d[1])}while(Do.length>0);es=!0,$i=!0}function is(){var o=br;br=[],o.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var r=Li.slice(0),u=r.length;u;)r[--u]()}function Ph(o){function r(){o(),Li.splice(Li.indexOf(r),1)}Li.push(r),++wr,ko(function(){--wr===0&&is()},[])}function jh(o){br.some(function(r){return r._value===o._value})||br.push(o)}function Nh(o){for(var r=br.length;r;)if(br[--r]._value===o._value){br.splice(r,1);return}}function Bi(o){return new ve(xo,!1,o)}function Qe(o,r){var u=ke;return function(){var d=zr(),f=ke;try{return Vn(u,!0),o.apply(this,arguments)}catch(v){r&&r(v)}finally{Vn(f,!1),d&&Fr()}}}var lt={awaits:0,echoes:0,id:0},$h=0,Yi=[],zi=0,Fi=0,Ah=0;function Jn(o,r,u,d){var f=ke,v=Object.create(f);v.parent=f,v.ref=0,v.global=!1,v.id=++Ah,Xn.env,v.env=Va?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject}:{},r&&m(v,r),++f.ref,v.finalize=function(){--this.parent.ref||this.parent.finalize()};var x=xr(v,o,u,d);return v.ref===0&&v.finalize(),x}function qr(){return lt.id||(lt.id=++$h),++lt.awaits,lt.echoes+=nc,lt.id}function Qn(){return lt.awaits?(--lt.awaits===0&&(lt.id=0),lt.echoes=lt.awaits*nc,!0):!1}(""+Ih).indexOf("[native code]")===-1&&(qr=Qn=Ge);function qi(o){return lt.echoes&&o&&o.constructor===_r?(qr(),o.then(function(r){return Qn(),r},function(r){return Qn(),it(r)})):o}function Lh(o){++Fi,(!lt.echoes||--lt.echoes===0)&&(lt.echoes=lt.awaits=lt.id=0),Yi.push(ke),Vn(o,!0)}function Bh(){var o=Yi[Yi.length-1];Yi.pop(),Vn(o,!1)}function Vn(o,r){var u=ke;if((r?lt.echoes&&(!zi++||o!==ke):zi&&(!--zi||o!==ke))&&queueMicrotask(r?Lh.bind(null,o):Bh),o!==ke&&(ke=o,u===Xn&&(Xn.env=uc()),Va)){var d=Xn.env.Promise,f=o.env;(u.global||o.global)&&(Object.defineProperty(c,"Promise",f.PromiseProp),d.all=f.all,d.race=f.race,d.resolve=f.resolve,d.reject=f.reject,f.allSettled&&(d.allSettled=f.allSettled),f.any&&(d.any=f.any))}}function uc(){var o=c.Promise;return Va?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function xr(o,r,u,d,f){var v=ke;try{return Vn(o,!0),r(u,d,f)}finally{Vn(v,!1)}}function cc(o,r,u,d){return typeof o!="function"?o:function(){var f=ke;u&&qr(),Vn(r,!0);try{return o.apply(this,arguments)}finally{Vn(f,!1),d&&queueMicrotask(Qn)}}}function as(o){Promise===_r&&lt.echoes===0?zi===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}var it=ve.reject;function ss(o,r,u,d){if(!o.idbdb||!o._state.openComplete&&!ke.letThrough&&!o._vip){if(o._state.openComplete)return it(new xe.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return it(new xe.DatabaseClosed);o.open().catch(Ge)}return o._state.dbReadyPromise.then(function(){return ss(o,r,u,d)})}else{var f=o._createTransaction(r,u,o._dbSchema);try{f.create(),o._state.PR1398_maxLoop=3}catch(v){return v.name===Hn.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return ss(o,r,u,d)})):it(v)}return f._promise(r,function(v,x){return Jn(function(){return ke.trans=f,d(v,x,f)})}).then(function(v){if(r==="readwrite")try{f.idbtrans.commit()}catch{}return r==="readonly"?v:f._completion.then(function(){return v})})}}var lc="4.2.1",kr="\uFFFF",us=-1/0,Pn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",dc="String expected.",Ur=[],Ui="__dbnames",cs="readonly",ls="readwrite";function Dr(o,r){return o?r?function(){return o.apply(this,arguments)&&r.apply(this,arguments)}:o:r}var hc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ki(o){return typeof o=="string"&&!/\./.test(o)?function(r){return r[o]===void 0&&o in r&&(r=T(r),delete r[o]),r}:function(r){return r}}function fc(){throw xe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(o,r){try{var u=mc(o),d=mc(r);if(u!==d)return u==="Array"?1:d==="Array"?-1:u==="binary"?1:d==="binary"?-1:u==="string"?1:d==="string"?-1:u==="Date"?1:d!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o>r?1:o<r?-1:0;case"binary":return zh(pc(o),pc(r));case"Array":return Yh(o,r)}}catch{}return NaN}function Yh(o,r){for(var u=o.length,d=r.length,f=u<d?u:d,v=0;v<f;++v){var x=ze(o[v],r[v]);if(x!==0)return x}return u===d?0:u<d?-1:1}function zh(o,r){for(var u=o.length,d=r.length,f=u<d?u:d,v=0;v<f;++v)if(o[v]!==r[v])return o[v]<r[v]?-1:1;return u===d?0:u<d?-1:1}function mc(o){var r=typeof o;if(r!=="object")return r;if(ArrayBuffer.isView(o))return"binary";var u=B(o);return u==="ArrayBuffer"?"binary":u}function pc(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function Zi(o,r,u){var d=o.schema.yProps;return d?(r&&u.numFailures>0&&(r=r.filter(function(f,v){return!u.failures[v]})),Promise.all(d.map(function(f){var v=f.updatesTable;return r?o.db.table(v).where("k").anyOf(r).delete():o.db.table(v).clear()})).then(function(){return u})):u}var Co=(function(){function o(r){this["@@propmod"]=r}return o.prototype.execute=function(r){var u,d=this["@@propmod"];if(d.add!==void 0){var f=d.add;if(p(f))return s(s([],p(r)?r:[],!0),f,!0).sort();if(typeof f=="number")return(Number(r)||0)+f;if(typeof f=="bigint")try{return BigInt(r)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(d.remove!==void 0){var v=d.remove;if(p(v))return p(r)?r.filter(function(D){return!v.includes(D)}).sort():[];if(typeof v=="number")return Number(r)-v;if(typeof v=="bigint")try{return BigInt(r)-v}catch{return BigInt(0)-v}throw new TypeError("Invalid subtrahend ".concat(v))}var x=(u=d.replacePrefix)===null||u===void 0?void 0:u[0];return x&&typeof r=="string"&&r.startsWith(x)?d.replacePrefix[1]+r.substring(x.length):r},o})();function yc(o,r){for(var u=l(r),d=u.length,f=!1,v=0;v<d;++v){var x=u[v],D=r[x],S=me(o,x);D instanceof Co?(z(o,x,D.execute(S)),f=!0):S!==D&&(z(o,x,D),f=!0)}return f}var gc=(function(){function o(){}return o.prototype._trans=function(r,u,d){var f=this._tx||ke.trans,v=this.name,x=_n&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function D(A,j,W){if(!W.schema[v])throw new xe.NotFound("Table "+v+" not part of transaction");return u(W.idbtrans,W)}var S=zr();try{var O=f&&f.db._novip===this.db._novip?f===ke.trans?f._promise(r,D,d):Jn(function(){return f._promise(r,D,d)},{trans:f,transless:ke.transless||ke}):ss(this.db,r,[this.name],D);return x&&(O._consoleTask=x,O=O.catch(function(A){return console.trace(A),it(A)})),O}finally{S&&Fr()}},o.prototype.get=function(r,u){var d=this;return r&&r.constructor===Object?this.where(r).first(u):r==null?it(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:r}).then(function(v){return d.hook.reading.fire(v)})}).then(u)},o.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(p(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var u=l(r);if(u.length===1)return this.where(u[0]).equals(r[u[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&u.every(function(W){return A.keyPath.indexOf(W)>=0})){for(var j=0;j<u.length;++j)if(u.indexOf(A.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(A,j){return A.keyPath.length-j.keyPath.length})[0];if(d&&this.db._maxKey!==kr){var f=d.keyPath.slice(0,u.length);return this.where(f).equals(f.map(function(A){return r[A]}))}!d&&_n&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var v=this.schema.idxByName;function x(A,j){return ze(A,j)===0}var D=u.reduce(function(A,j){var W=A[0],ie=A[1],$=v[j],L=r[j];return[W||$,W||!$?Dr(ie,$&&$.multi?function(Z){var H=me(Z,j);return p(H)&&H.some(function(te){return x(L,te)})}:function(Z){return x(L,me(Z,j))}):ie]},[null,null]),S=D[0],O=D[1];return S?this.where(S.name).equals(r[S.keyPath]).filter(O):d?this.filter(O):this.where(u).equals("")},o.prototype.filter=function(r){return this.toCollection().and(r)},o.prototype.count=function(r){return this.toCollection().count(r)},o.prototype.offset=function(r){return this.toCollection().offset(r)},o.prototype.limit=function(r){return this.toCollection().limit(r)},o.prototype.each=function(r){return this.toCollection().each(r)},o.prototype.toArray=function(r){return this.toCollection().toArray(r)},o.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},o.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,p(r)?"[".concat(r.join("+"),"]"):r))},o.prototype.reverse=function(){return this.toCollection().reverse()},o.prototype.mapToClass=function(r){var u=this,d=u.db,f=u.name;this.schema.mappedClass=r,r.prototype instanceof fc&&(r=(function(S){i(O,S);function O(){return S!==null&&S.apply(this,arguments)||this}return Object.defineProperty(O.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),O.prototype.table=function(){return f},O})(r));for(var v=new Set,x=r.prototype;x;x=g(x))Object.getOwnPropertyNames(x).forEach(function(S){return v.add(S)});var D=function(S){if(!S)return S;var O=Object.create(r.prototype);for(var A in S)if(!v.has(A))try{O[A]=S[A]}catch{}return O};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),r},o.prototype.defineClass=function(){function r(u){m(this,u)}return this.mapToClass(r)},o.prototype.add=function(r,u){var d=this,f=this.schema.primKey,v=f.auto,x=f.keyPath,D=r;return x&&v&&(D=Ki(x)(r)),this._trans("readwrite",function(S){return d.core.mutate({trans:S,type:"add",keys:u!=null?[u]:null,values:[D]})}).then(function(S){return S.numFailures?ve.reject(S.failures[0]):S.lastResult}).then(function(S){if(x)try{z(r,x,S)}catch{}return S})},o.prototype.upsert=function(r,u){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(v){return d.core.get({trans:v,key:r}).then(function(x){var D=x??{};return yc(D,u),f&&z(D,f,r),d.core.mutate({trans:v,type:"put",values:[D],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[u]}}).then(function(S){return S.numFailures?ve.reject(S.failures[0]):!!x})})})},o.prototype.update=function(r,u){if(typeof r=="object"&&!p(r)){var d=me(r,this.schema.primKey.keyPath);return d===void 0?it(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(u)}else return this.where(":id").equals(r).modify(u)},o.prototype.put=function(r,u){var d=this,f=this.schema.primKey,v=f.auto,x=f.keyPath,D=r;return x&&v&&(D=Ki(x)(r)),this._trans("readwrite",function(S){return d.core.mutate({trans:S,type:"put",values:[D],keys:u!=null?[u]:null})}).then(function(S){return S.numFailures?ve.reject(S.failures[0]):S.lastResult}).then(function(S){if(x)try{z(r,x,S)}catch{}return S})},o.prototype.delete=function(r){var u=this;return this._trans("readwrite",function(d){return u.core.mutate({trans:d,type:"delete",keys:[r]}).then(function(f){return Zi(u,[r],f)}).then(function(f){return f.numFailures?ve.reject(f.failures[0]):void 0})})},o.prototype.clear=function(){var r=this;return this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"deleteRange",range:hc}).then(function(d){return Zi(r,null,d)})}).then(function(u){return u.numFailures?ve.reject(u.failures[0]):void 0})},o.prototype.bulkGet=function(r){var u=this;return this._trans("readonly",function(d){return u.core.getMany({keys:r,trans:d}).then(function(f){return f.map(function(v){return u.hook.reading.fire(v)})})})},o.prototype.bulkAdd=function(r,u,d){var f=this,v=Array.isArray(u)?u:void 0;d=d||(v?void 0:u);var x=d?d.allKeys:void 0;return this._trans("readwrite",function(D){var S=f.schema.primKey,O=S.auto,A=S.keyPath;if(A&&v)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==r.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var j=r.length,W=A&&O?r.map(Ki(A)):r;return f.core.mutate({trans:D,type:"add",keys:v,values:W,wantResults:x}).then(function(ie){var $=ie.numFailures,L=ie.results,Z=ie.lastResult,H=ie.failures,te=x?L:Z;if($===0)return te;throw new yt("".concat(f.name,".bulkAdd(): ").concat($," of ").concat(j," operations failed"),H)})})},o.prototype.bulkPut=function(r,u,d){var f=this,v=Array.isArray(u)?u:void 0;d=d||(v?void 0:u);var x=d?d.allKeys:void 0;return this._trans("readwrite",function(D){var S=f.schema.primKey,O=S.auto,A=S.keyPath;if(A&&v)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==r.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var j=r.length,W=A&&O?r.map(Ki(A)):r;return f.core.mutate({trans:D,type:"put",keys:v,values:W,wantResults:x}).then(function(ie){var $=ie.numFailures,L=ie.results,Z=ie.lastResult,H=ie.failures,te=x?L:Z;if($===0)return te;throw new yt("".concat(f.name,".bulkPut(): ").concat($," of ").concat(j," operations failed"),H)})})},o.prototype.bulkUpdate=function(r){var u=this,d=this.core,f=r.map(function(D){return D.key}),v=r.map(function(D){return D.changes}),x=[];return this._trans("readwrite",function(D){return d.getMany({trans:D,keys:f,cache:"clone"}).then(function(S){var O=[],A=[];r.forEach(function(W,ie){var $=W.key,L=W.changes,Z=S[ie];if(Z){for(var H=0,te=Object.keys(L);H<te.length;H++){var ee=te[H],ne=L[ee];if(ee===u.schema.primKey.keyPath){if(ze(ne,$)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else z(Z,ee,ne)}x.push(ie),O.push($),A.push(Z)}});var j=O.length;return d.mutate({trans:D,type:"put",keys:O,values:A,updates:{keys:f,changeSpecs:v}}).then(function(W){var ie=W.numFailures,$=W.failures;if(ie===0)return j;for(var L=0,Z=Object.keys($);L<Z.length;L++){var H=Z[L],te=x[Number(H)];if(te!=null){var ee=$[H];delete $[H],$[te]=ee}}throw new yt("".concat(u.name,".bulkUpdate(): ").concat(ie," of ").concat(j," operations failed"),$)})})})},o.prototype.bulkDelete=function(r){var u=this,d=r.length;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"delete",keys:r}).then(function(v){return Zi(u,r,v)})}).then(function(f){var v=f.numFailures,x=f.lastResult,D=f.failures;if(v===0)return x;throw new yt("".concat(u.name,".bulkDelete(): ").concat(v," of ").concat(d," operations failed"),D)})},o})();function So(o){var r={},u=function(D,S){if(S){for(var O=arguments.length,A=new Array(O-1);--O;)A[O-1]=arguments[O];return r[D].subscribe.apply(null,A),o}else if(typeof D=="string")return r[D]};u.addEventType=v;for(var d=1,f=arguments.length;d<f;++d)v(arguments[d]);return u;function v(D,S,O){if(typeof D=="object")return x(D);S||(S=Eh),O||(O=Ge);var A={subscribers:[],fire:O,subscribe:function(j){A.subscribers.indexOf(j)===-1&&(A.subscribers.push(j),A.fire=S(A.fire,j))},unsubscribe:function(j){A.subscribers=A.subscribers.filter(function(W){return W!==j}),A.fire=A.subscribers.reduce(S,O)}};return r[D]=u[D]=A,A}function x(D){l(D).forEach(function(S){var O=D[S];if(p(O))v(S,D[S][0],D[S][1]);else if(O==="asap")var A=v(S,wo,function(){for(var j=arguments.length,W=new Array(j);j--;)W[j]=arguments[j];A.subscribers.forEach(function(ie){Se(function(){ie.apply(null,W)})})});else throw new xe.InvalidArgument("Invalid event config")})}}function Eo(o,r){return N(r).from({prototype:o}),r}function Fh(o){return Eo(gc.prototype,function(r,u,d){this.db=o,this._tx=d,this.name=r,this.schema=u,this.hook=o._allTables[r]?o._allTables[r].hook:So(null,{creating:[Dh,Ge],reading:[kh,wo],updating:[Sh,Ge],deleting:[Ch,Ge]})})}function Kr(o,r){return!(o.filter||o.algorithm||o.or)&&(r?o.justLimit:!o.replayFilter)}function ds(o,r){o.filter=Dr(o.filter,r)}function hs(o,r,u){var d=o.replayFilter;o.replayFilter=d?function(){return Dr(d(),r())}:r,o.justLimit=u&&!d}function qh(o,r){o.isMatch=Dr(o.isMatch,r)}function Wi(o,r){if(o.isPrimKey)return r.primaryKey;var u=r.getIndexByKeyPath(o.index);if(!u)throw new xe.Schema("KeyPath "+o.index+" on object store "+r.name+" is not indexed");return u}function vc(o,r,u){var d=Wi(o,r.schema);return r.openCursor({trans:u,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:d,range:o.range}})}function Gi(o,r,u,d){var f=o.replayFilter?Dr(o.filter,o.replayFilter()):o.filter;if(o.or){var v={},x=function(D,S,O){if(!f||f(S,O,function(W){return S.stop(W)},function(W){return S.fail(W)})){var A=S.primaryKey,j=""+A;j==="[object ArrayBuffer]"&&(j=""+new Uint8Array(A)),w(v,j)||(v[j]=!0,r(D,S,O))}};return Promise.all([o.or._iterate(x,u),_c(vc(o,d,u),o.algorithm,x,!o.keysOnly&&o.valueMapper)])}else return _c(vc(o,d,u),Dr(o.algorithm,f),r,!o.keysOnly&&o.valueMapper)}function _c(o,r,u,d){var f=d?function(x,D,S){return u(d(x),D,S)}:u,v=Qe(f);return o.then(function(x){if(x)return x.start(function(){var D=function(){return x.continue()};(!r||r(x,function(S){return D=S},function(S){x.stop(S),D=Ge},function(S){x.fail(S),D=Ge}))&&v(x.value,x,function(S){return D=S}),D()})})}var Uh=(function(){function o(){}return o.prototype._read=function(r,u){var d=this._ctx;return d.error?d.table._trans(null,it.bind(null,d.error)):d.table._trans("readonly",r).then(u)},o.prototype._write=function(r){var u=this._ctx;return u.error?u.table._trans(null,it.bind(null,u.error)):u.table._trans("readwrite",r,"locked")},o.prototype._addAlgorithm=function(r){var u=this._ctx;u.algorithm=Dr(u.algorithm,r)},o.prototype._iterate=function(r,u){return Gi(this._ctx,r,u,this._ctx.table.core)},o.prototype.clone=function(r){var u=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return r&&m(d,r),u._ctx=d,u},o.prototype.raw=function(){return this._ctx.valueMapper=null,this},o.prototype.each=function(r){var u=this._ctx;return this._read(function(d){return Gi(u,r,d,u.table.core)})},o.prototype.count=function(r){var u=this;return this._read(function(d){var f=u._ctx,v=f.table.core;if(Kr(f,!0))return v.count({trans:d,query:{index:Wi(f,v.schema),range:f.range}}).then(function(D){return Math.min(D,f.limit)});var x=0;return Gi(f,function(){return++x,!1},d,v).then(function(){return x})}).then(r)},o.prototype.sortBy=function(r,u){var d=r.split(".").reverse(),f=d[0],v=d.length-1;function x(O,A){return A?x(O[d[A]],A-1):O[f]}var D=this._ctx.dir==="next"?1:-1;function S(O,A){var j=x(O,v),W=x(A,v);return ze(j,W)*D}return this.toArray(function(O){return O.sort(S)}).then(u)},o.prototype.toArray=function(r){var u=this;return this._read(function(d){var f=u._ctx;if(f.dir==="next"&&Kr(f,!0)&&f.limit>0){var v=f.valueMapper,x=Wi(f,f.table.core.schema);return f.table.core.query({trans:d,limit:f.limit,values:!0,query:{index:x,range:f.range}}).then(function(S){var O=S.result;return v?O.map(v):O})}else{var D=[];return Gi(f,function(S){return D.push(S)},d,f.table.core).then(function(){return D})}},r)},o.prototype.offset=function(r){var u=this._ctx;return r<=0?this:(u.offset+=r,Kr(u)?hs(u,function(){var d=r;return function(f,v){return d===0?!0:d===1?(--d,!1):(v(function(){f.advance(d),d=0}),!1)}}):hs(u,function(){var d=r;return function(){return--d<0}}),this)},o.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),hs(this._ctx,function(){var u=r;return function(d,f,v){return--u<=0&&f(v),u>=0}},!0),this},o.prototype.until=function(r,u){return ds(this._ctx,function(d,f,v){return r(d.value)?(f(v),u):!0}),this},o.prototype.first=function(r){return this.limit(1).toArray(function(u){return u[0]}).then(r)},o.prototype.last=function(r){return this.reverse().first(r)},o.prototype.filter=function(r){return ds(this._ctx,function(u){return r(u.value)}),qh(this._ctx,r),this},o.prototype.and=function(r){return this.filter(r)},o.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},o.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},o.prototype.desc=function(){return this.reverse()},o.prototype.eachKey=function(r){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,f){r(f.key,f)})},o.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},o.prototype.eachPrimaryKey=function(r){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,f){r(f.primaryKey,f)})},o.prototype.keys=function(r){var u=this._ctx;u.keysOnly=!u.isMatch;var d=[];return this.each(function(f,v){d.push(v.key)}).then(function(){return d}).then(r)},o.prototype.primaryKeys=function(r){var u=this._ctx;if(u.dir==="next"&&Kr(u,!0)&&u.limit>0)return this._read(function(f){var v=Wi(u,u.table.core.schema);return u.table.core.query({trans:f,values:!1,limit:u.limit,query:{index:v,range:u.range}})}).then(function(f){var v=f.result;return v}).then(r);u.keysOnly=!u.isMatch;var d=[];return this.each(function(f,v){d.push(v.primaryKey)}).then(function(){return d}).then(r)},o.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},o.prototype.firstKey=function(r){return this.limit(1).keys(function(u){return u[0]}).then(r)},o.prototype.lastKey=function(r){return this.reverse().firstKey(r)},o.prototype.distinct=function(){var r=this._ctx,u=r.index&&r.table.schema.idxByName[r.index];if(!u||!u.multi)return this;var d={};return ds(this._ctx,function(f){var v=f.primaryKey.toString(),x=w(d,v);return d[v]=!0,!x}),this},o.prototype.modify=function(r){var u=this,d=this._ctx;return this._write(function(f){var v;typeof r=="function"?v=r:v=function(H){return yc(H,r)};var x=d.table.core,D=x.schema.primaryKey,S=D.outbound,O=D.extractKey,A=200,j=u.db._options.modifyChunkSize;j&&(typeof j=="object"?A=j[x.name]||j["*"]||200:A=j);var W=[],ie=0,$=[],L=function(H,te){var ee=te.failures,ne=te.numFailures;ie+=H-ne;for(var V=0,fe=l(ee);V<fe.length;V++){var _e=fe[V];W.push(ee[_e])}},Z=r===bc;return u.clone().primaryKeys().then(function(H){var te=Kr(d)&&d.limit===1/0&&(typeof r!="function"||Z)&&{index:d.index,range:d.range},ee=function(ne){var V=Math.min(A,H.length-ne),fe=H.slice(ne,ne+V);return(Z?Promise.resolve([]):x.getMany({trans:f,keys:fe,cache:"immutable"})).then(function(_e){var pe=[],Ee=[],$e=S?[]:null,be=Z?fe:[];if(!Z)for(var Ne=0;Ne<V;++Ne){var Te=_e[Ne],Fe={value:T(Te),primKey:H[ne+Ne]};v.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?be.push(H[ne+Ne]):!S&&ze(O(Te),O(Fe.value))!==0?(be.push(H[ne+Ne]),pe.push(Fe.value)):(Ee.push(Fe.value),S&&$e.push(H[ne+Ne])))}return Promise.resolve(pe.length>0&&x.mutate({trans:f,type:"add",values:pe}).then(function(Ce){for(var rt in Ce.failures)be.splice(parseInt(rt),1);L(pe.length,Ce)})).then(function(){return(Ee.length>0||te&&typeof r=="object")&&x.mutate({trans:f,type:"put",keys:$e,values:Ee,criteria:te,changeSpec:typeof r!="function"&&r,isAdditionalChunk:ne>0}).then(function(Ce){return L(Ee.length,Ce)})}).then(function(){return(be.length>0||te&&Z)&&x.mutate({trans:f,type:"delete",keys:be,criteria:te,isAdditionalChunk:ne>0}).then(function(Ce){return Zi(d.table,be,Ce)}).then(function(Ce){return L(be.length,Ce)})}).then(function(){return H.length>ne+V&&ee(ne+A)})})};return ee(0).then(function(){if(W.length>0)throw new st("Error modifying one or more objects",W,ie,$);return H.length})})})},o.prototype.delete=function(){var r=this._ctx,u=r.range;return Kr(r)&&!r.table.schema.yProps&&(r.isPrimKey||u.type===3)?this._write(function(d){var f=r.table.core.schema.primaryKey,v=u;return r.table.core.count({trans:d,query:{index:f,range:v}}).then(function(x){return r.table.core.mutate({trans:d,type:"deleteRange",range:v}).then(function(D){var S=D.failures,O=D.numFailures;if(O)throw new st("Could not delete some values",Object.keys(S).map(function(A){return S[A]}),x-O);return x-O})})}):this.modify(bc)},o})(),bc=function(o,r){return r.value=null};function Kh(o){return Eo(Uh.prototype,function(r,u){this.db=o;var d=hc,f=null;if(u)try{d=u()}catch(S){f=S}var v=r._ctx,x=v.table,D=x.hook.reading.fire;this._ctx={table:x,index:v.index,isPrimKey:!v.index||x.schema.primKey.keyPath&&v.index===x.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:v.or,valueMapper:D!==wo?D:null}})}function Zh(o,r){return o<r?-1:o===r?0:1}function Wh(o,r){return o>r?-1:o===r?0:1}function Ht(o,r,u){var d=o instanceof xc?new o.Collection(o):o;return d._ctx.error=u?new u(r):new TypeError(r),d}function Zr(o){return new o.Collection(o,function(){return wc("")}).limit(0)}function Gh(o){return o==="next"?function(r){return r.toUpperCase()}:function(r){return r.toLowerCase()}}function Hh(o){return o==="next"?function(r){return r.toLowerCase()}:function(r){return r.toUpperCase()}}function Xh(o,r,u,d,f,v){for(var x=Math.min(o.length,d.length),D=-1,S=0;S<x;++S){var O=r[S];if(O!==d[S])return f(o[S],u[S])<0?o.substr(0,S)+u[S]+u.substr(S+1):f(o[S],d[S])<0?o.substr(0,S)+d[S]+u.substr(S+1):D>=0?o.substr(0,D)+r[D]+u.substr(D+1):null;f(o[S],O)<0&&(D=S)}return x<d.length&&v==="next"?o+u.substr(o.length):x<o.length&&v==="prev"?o.substr(0,u.length):D<0?null:o.substr(0,D)+d[D]+u.substr(D+1)}function Hi(o,r,u,d){var f,v,x,D,S,O,A,j=u.length;if(!u.every(function(L){return typeof L=="string"}))return Ht(o,dc);function W(L){f=Gh(L),v=Hh(L),x=L==="next"?Zh:Wh;var Z=u.map(function(H){return{lower:v(H),upper:f(H)}}).sort(function(H,te){return x(H.lower,te.lower)});D=Z.map(function(H){return H.upper}),S=Z.map(function(H){return H.lower}),O=L,A=L==="next"?"":d}W("next");var ie=new o.Collection(o,function(){return er(D[0],S[j-1]+d)});ie._ondirectionchange=function(L){W(L)};var $=0;return ie._addAlgorithm(function(L,Z,H){var te=L.key;if(typeof te!="string")return!1;var ee=v(te);if(r(ee,S,$))return!0;for(var ne=null,V=$;V<j;++V){var fe=Xh(te,ee,D[V],S[V],x,O);fe===null&&ne===null?$=V+1:(ne===null||x(ne,fe)>0)&&(ne=fe)}return Z(ne!==null?function(){L.continue(ne+A)}:H),!1}),ie}function er(o,r,u,d){return{type:2,lower:o,upper:r,lowerOpen:u,upperOpen:d}}function wc(o){return{type:1,lower:o,upper:o}}var xc=(function(){function o(){}return Object.defineProperty(o.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),o.prototype.between=function(r,u,d,f){d=d!==!1,f=f===!0;try{return this._cmp(r,u)>0||this._cmp(r,u)===0&&(d||f)&&!(d&&f)?Zr(this):new this.Collection(this,function(){return er(r,u,!d,!f)})}catch{return Ht(this,Pn)}},o.prototype.equals=function(r){return r==null?Ht(this,Pn):new this.Collection(this,function(){return wc(r)})},o.prototype.above=function(r){return r==null?Ht(this,Pn):new this.Collection(this,function(){return er(r,void 0,!0)})},o.prototype.aboveOrEqual=function(r){return r==null?Ht(this,Pn):new this.Collection(this,function(){return er(r,void 0,!1)})},o.prototype.below=function(r){return r==null?Ht(this,Pn):new this.Collection(this,function(){return er(void 0,r,!1,!0)})},o.prototype.belowOrEqual=function(r){return r==null?Ht(this,Pn):new this.Collection(this,function(){return er(void 0,r)})},o.prototype.startsWith=function(r){return typeof r!="string"?Ht(this,dc):this.between(r,r+kr,!0,!0)},o.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):Hi(this,function(u,d){return u.indexOf(d[0])===0},[r],kr)},o.prototype.equalsIgnoreCase=function(r){return Hi(this,function(u,d){return u===d[0]},[r],"")},o.prototype.anyOfIgnoreCase=function(){var r=ge.apply(we,arguments);return r.length===0?Zr(this):Hi(this,function(u,d){return d.indexOf(u)!==-1},r,"")},o.prototype.startsWithAnyOfIgnoreCase=function(){var r=ge.apply(we,arguments);return r.length===0?Zr(this):Hi(this,function(u,d){return d.some(function(f){return u.indexOf(f)===0})},r,kr)},o.prototype.anyOf=function(){var r=this,u=ge.apply(we,arguments),d=this._cmp;try{u.sort(d)}catch{return Ht(this,Pn)}if(u.length===0)return Zr(this);var f=new this.Collection(this,function(){return er(u[0],u[u.length-1])});f._ondirectionchange=function(x){d=x==="next"?r._ascending:r._descending,u.sort(d)};var v=0;return f._addAlgorithm(function(x,D,S){for(var O=x.key;d(O,u[v])>0;)if(++v,v===u.length)return D(S),!1;return d(O,u[v])===0?!0:(D(function(){x.continue(u[v])}),!1)}),f},o.prototype.notEqual=function(r){return this.inAnyRange([[us,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},o.prototype.noneOf=function(){var r=ge.apply(we,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Ht(this,Pn)}var u=r.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[us,f]]},null);return u.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},o.prototype.inAnyRange=function(r,u){var d=this,f=this._cmp,v=this._ascending,x=this._descending,D=this._min,S=this._max;if(r.length===0)return Zr(this);if(!r.every(function(V){return V[0]!==void 0&&V[1]!==void 0&&v(V[0],V[1])<=0}))return Ht(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var O=!u||u.includeLowers!==!1,A=u&&u.includeUppers===!0;function j(V,fe){for(var _e=0,pe=V.length;_e<pe;++_e){var Ee=V[_e];if(f(fe[0],Ee[1])<0&&f(fe[1],Ee[0])>0){Ee[0]=D(Ee[0],fe[0]),Ee[1]=S(Ee[1],fe[1]);break}}return _e===pe&&V.push(fe),V}var W=v;function ie(V,fe){return W(V[0],fe[0])}var $;try{$=r.reduce(j,[]),$.sort(ie)}catch{return Ht(this,Pn)}var L=0,Z=A?function(V){return v(V,$[L][1])>0}:function(V){return v(V,$[L][1])>=0},H=O?function(V){return x(V,$[L][0])>0}:function(V){return x(V,$[L][0])>=0};function te(V){return!Z(V)&&!H(V)}var ee=Z,ne=new this.Collection(this,function(){return er($[0][0],$[$.length-1][1],!O,!A)});return ne._ondirectionchange=function(V){V==="next"?(ee=Z,W=v):(ee=H,W=x),$.sort(ie)},ne._addAlgorithm(function(V,fe,_e){for(var pe=V.key;ee(pe);)if(++L,L===$.length)return fe(_e),!1;return te(pe)?!0:(d._cmp(pe,$[L][1])===0||d._cmp(pe,$[L][0])===0||fe(function(){W===v?V.continue($[L][0]):V.continue($[L][1])}),!1)}),ne},o.prototype.startsWithAnyOf=function(){var r=ge.apply(we,arguments);return r.every(function(u){return typeof u=="string"})?r.length===0?Zr(this):this.inAnyRange(r.map(function(u){return[u,u+kr]})):Ht(this,"startsWithAnyOf() only works with strings")},o})();function Jh(o){return Eo(xc.prototype,function(r,u,d){if(this.db=o,this._ctx={table:r,index:u===":id"?null:u,or:d},this._cmp=this._ascending=ze,this._descending=function(f,v){return ze(v,f)},this._max=function(f,v){return ze(f,v)>0?f:v},this._min=function(f,v){return ze(f,v)<0?f:v},this._IDBKeyRange=o._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})}function bn(o){return Qe(function(r){return To(r),o(r.target.error),!1})}function To(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Io="storagemutated",fs="x-storagemutated-1",tr=So(null,Io),Qh=(function(){function o(){}return o.prototype._lock=function(){return he(!ke.global),++this._reculock,this._reculock===1&&!ke.global&&(ke.lockOwnerFor=this),this},o.prototype._unlock=function(){if(he(!ke.global),--this._reculock===0)for(ke.global||(ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var r=this._blockedFuncs.shift();try{xr(r[1],r[0])}catch{}}return this},o.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},o.prototype.create=function(r){var u=this;if(!this.mode)return this;var d=this.db.idbdb,f=this.db._state.dbOpenError;if(he(!this.idbtrans),!r&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(f);case"MissingAPIError":throw new xe.MissingAPI(f.message,f);default:throw new xe.OpenFailed(f)}if(!this.active)throw new xe.TransactionInactive;return he(this._completion._state===null),r=this.idbtrans=r||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):d.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),r.onerror=Qe(function(v){To(v),u._reject(r.error)}),r.onabort=Qe(function(v){To(v),u.active&&u._reject(new xe.Abort(r.error)),u.active=!1,u.on("abort").fire(v)}),r.oncomplete=Qe(function(){u.active=!1,u._resolve(),"mutatedParts"in r&&tr.storagemutated.fire(r.mutatedParts)}),this},o.prototype._promise=function(r,u,d){var f=this;if(r==="readwrite"&&this.mode!=="readwrite")return it(new xe.ReadOnly("Transaction is readonly"));if(!this.active)return it(new xe.TransactionInactive);if(this._locked())return new ve(function(x,D){f._blockedFuncs.push([function(){f._promise(r,u,d).then(x,D)},ke])});if(d)return Jn(function(){var x=new ve(function(D,S){f._lock();var O=u(D,S,f);O&&O.then&&O.then(D,S)});return x.finally(function(){return f._unlock()}),x._lib=!0,x});var v=new ve(function(x,D){var S=u(x,D,f);S&&S.then&&S.then(x,D)});return v._lib=!0,v},o.prototype._root=function(){return this.parent?this.parent._root():this},o.prototype.waitFor=function(r){var u=this._root(),d=ve.resolve(r);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return d});else{u._waitingFor=d,u._waitingQueue=[];var f=u.idbtrans.objectStore(u.storeNames[0]);(function x(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(f.get(-1/0).onsuccess=x)})()}var v=u._waitingFor;return new ve(function(x,D){d.then(function(S){return u._waitingQueue.push(Qe(x.bind(null,S)))},function(S){return u._waitingQueue.push(Qe(D.bind(null,S)))}).finally(function(){u._waitingFor===v&&(u._waitingFor=null)})})},o.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},o.prototype.table=function(r){var u=this._memoizedTables||(this._memoizedTables={});if(w(u,r))return u[r];var d=this.schema[r];if(!d)throw new xe.NotFound("Table "+r+" not part of transaction");var f=new this.db.Table(r,d,this);return f.core=this.db.core.table(r),u[r]=f,f},o})();function Vh(o){return Eo(Qh.prototype,function(r,u,d,f,v){var x=this;r!=="readonly"&&u.forEach(function(D){var S,O=(S=d[D])===null||S===void 0?void 0:S.yProps;O&&(u=u.concat(O.map(function(A){return A.updatesTable})))}),this.db=o,this.mode=r,this.storeNames=u,this.schema=d,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=So(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve(function(D,S){x._resolve=D,x._reject=S}),this._completion.then(function(){x.active=!1,x.on.complete.fire()},function(D){var S=x.active;return x.active=!1,x.on.error.fire(D),x.parent?x.parent._reject(D):S&&x.idbtrans&&x.idbtrans.abort(),it(D)})})}function ms(o,r,u,d,f,v,x,D){return{name:o,keyPath:r,unique:u,multi:d,auto:f,compound:v,src:(u&&!x?"&":"")+(d?"*":"")+(f?"++":"")+kc(r),type:D}}function kc(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function ps(o,r,u){return{name:o,primKey:r,indexes:u,mappedClass:null,idxByName:Me(u,function(d){return[d.name,d]})}}function ef(o){return o.length===1?o[0]:o}var Mo=function(o){try{return o.only([[]]),Mo=function(){return[[]]},[[]]}catch{return Mo=function(){return kr},kr}};function ys(o){return o==null?function(){}:typeof o=="string"?tf(o):function(r){return me(r,o)}}function tf(o){var r=o.split(".");return r.length===1?function(u){return u[o]}:function(u){return me(u,o)}}function Dc(o){return[].slice.call(o)}var nf=0;function Oo(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function rf(o,r,u){function d(j,W){var ie=Dc(j.objectStoreNames);return{schema:{name:j.name,tables:ie.map(function($){return W.objectStore($)}).map(function($){var L=$.keyPath,Z=$.autoIncrement,H=p(L),te=L==null,ee={},ne={name:$.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:te,compound:H,keyPath:L,autoIncrement:Z,unique:!0,extractKey:ys(L)},indexes:Dc($.indexNames).map(function(V){return $.index(V)}).map(function(V){var fe=V.name,_e=V.unique,pe=V.multiEntry,Ee=V.keyPath,$e=p(Ee),be={name:fe,compound:$e,keyPath:Ee,unique:_e,multiEntry:pe,extractKey:ys(Ee)};return ee[Oo(Ee)]=be,be}),getIndexByKeyPath:function(V){return ee[Oo(V)]}};return ee[":id"]=ne.primaryKey,L!=null&&(ee[Oo(L)]=ne.primaryKey),ne})},hasGetAll:ie.length>0&&"getAll"in W.objectStore(ie[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function f(j){if(j.type===3)return null;if(j.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var W=j.lower,ie=j.upper,$=j.lowerOpen,L=j.upperOpen,Z=W===void 0?ie===void 0?null:r.upperBound(ie,!!L):ie===void 0?r.lowerBound(W,!!$):r.bound(W,ie,!!$,!!L);return Z}function v(j){var W=j.name;function ie(Z){var H=Z.trans,te=Z.type,ee=Z.keys,ne=Z.values,V=Z.range;return new Promise(function(fe,_e){fe=Qe(fe);var pe=H.objectStore(W),Ee=pe.keyPath==null,$e=te==="put"||te==="add";if(!$e&&te!=="delete"&&te!=="deleteRange")throw new Error("Invalid operation type: "+te);var be=(ee||ne||{length:1}).length;if(ee&&ne&&ee.length!==ne.length)throw new Error("Given keys array must have same length as given values array.");if(be===0)return fe({numFailures:0,failures:{},results:[],lastResult:void 0});var Ne,Te=[],Fe=[],Ce=0,rt=function(xn){++Ce,To(xn)};if(te==="deleteRange"){if(V.type===4)return fe({numFailures:Ce,failures:Fe,results:[],lastResult:void 0});V.type===3?Te.push(Ne=pe.clear()):Te.push(Ne=pe.delete(f(V)))}else{var vt=$e?Ee?[ne,ee]:[ne,null]:[ee,null],wn=vt[0],zt=vt[1];if($e)for(var sn=0;sn<be;++sn)Te.push(Ne=zt&&zt[sn]!==void 0?pe[te](wn[sn],zt[sn]):pe[te](wn[sn])),Ne.onerror=rt;else for(var sn=0;sn<be;++sn)Te.push(Ne=pe[te](wn[sn])),Ne.onerror=rt}var rr=function(xn){var jo=xn.target.result;Te.forEach(function(mn,sa){return mn.error!=null&&(Fe[sa]=mn.error)}),fe({numFailures:Ce,failures:Fe,results:te==="delete"?ee:Te.map(function(mn){return mn.result}),lastResult:jo})};Ne.onerror=function(xn){rt(xn),rr(xn)},Ne.onsuccess=rr})}function $(Z){var H=Z.trans,te=Z.values,ee=Z.query,ne=Z.reverse,V=Z.unique;return new Promise(function(fe,_e){fe=Qe(fe);var pe=ee.index,Ee=ee.range,$e=H.objectStore(W),be=pe.isPrimaryKey?$e:$e.index(pe.name),Ne=ne?V?"prevunique":"prev":V?"nextunique":"next",Te=te||!("openKeyCursor"in be)?be.openCursor(f(Ee),Ne):be.openKeyCursor(f(Ee),Ne);Te.onerror=bn(_e),Te.onsuccess=Qe(function(Fe){var Ce=Te.result;if(!Ce){fe(null);return}Ce.___id=++nf,Ce.done=!1;var rt=Ce.continue.bind(Ce),vt=Ce.continuePrimaryKey;vt&&(vt=vt.bind(Ce));var wn=Ce.advance.bind(Ce),zt=function(){throw new Error("Cursor not started")},sn=function(){throw new Error("Cursor not stopped")};Ce.trans=H,Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=zt,Ce.fail=Qe(_e),Ce.next=function(){var rr=this,xn=1;return this.start(function(){return xn--?rr.continue():rr.stop()}).then(function(){return rr})},Ce.start=function(rr){var xn=new Promise(function(mn,sa){mn=Qe(mn),Te.onerror=bn(sa),Ce.fail=sa,Ce.stop=function(Kf){Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=sn,mn(Kf)}}),jo=function(){if(Te.result)try{rr()}catch(mn){Ce.fail(mn)}else Ce.done=!0,Ce.start=function(){throw new Error("Cursor behind last entry")},Ce.stop()};return Te.onsuccess=Qe(function(mn){Te.onsuccess=jo,jo()}),Ce.continue=rt,Ce.continuePrimaryKey=vt,Ce.advance=wn,jo(),xn},fe(Ce)},_e)})}function L(Z){return function(H){return new Promise(function(te,ee){te=Qe(te);var ne=H.trans,V=H.values,fe=H.limit,_e=H.query,pe=fe===1/0?void 0:fe,Ee=_e.index,$e=_e.range,be=ne.objectStore(W),Ne=Ee.isPrimaryKey?be:be.index(Ee.name),Te=f($e);if(fe===0)return te({result:[]});if(Z){var Fe=V?Ne.getAll(Te,pe):Ne.getAllKeys(Te,pe);Fe.onsuccess=function(wn){return te({result:wn.target.result})},Fe.onerror=bn(ee)}else{var Ce=0,rt=V||!("openKeyCursor"in Ne)?Ne.openCursor(Te):Ne.openKeyCursor(Te),vt=[];rt.onsuccess=function(wn){var zt=rt.result;if(!zt)return te({result:vt});if(vt.push(V?zt.value:zt.primaryKey),++Ce===fe)return te({result:vt});zt.continue()},rt.onerror=bn(ee)}})}}return{name:W,schema:j,mutate:ie,getMany:function(Z){var H=Z.trans,te=Z.keys;return new Promise(function(ee,ne){ee=Qe(ee);for(var V=H.objectStore(W),fe=te.length,_e=new Array(fe),pe=0,Ee=0,$e,be=function(Ce){var rt=Ce.target;(_e[rt._pos]=rt.result)!=null,++Ee===pe&&ee(_e)},Ne=bn(ne),Te=0;Te<fe;++Te){var Fe=te[Te];Fe!=null&&($e=V.get(te[Te]),$e._pos=Te,$e.onsuccess=be,$e.onerror=Ne,++pe)}pe===0&&ee(_e)})},get:function(Z){var H=Z.trans,te=Z.key;return new Promise(function(ee,ne){ee=Qe(ee);var V=H.objectStore(W),fe=V.get(te);fe.onsuccess=function(_e){return ee(_e.target.result)},fe.onerror=bn(ne)})},query:L(S),openCursor:$,count:function(Z){var H=Z.query,te=Z.trans,ee=H.index,ne=H.range;return new Promise(function(V,fe){var _e=te.objectStore(W),pe=ee.isPrimaryKey?_e:_e.index(ee.name),Ee=f(ne),$e=Ee?pe.count(Ee):pe.count();$e.onsuccess=Qe(function(be){return V(be.target.result)}),$e.onerror=bn(fe)})}}}var x=d(o,u),D=x.schema,S=x.hasGetAll,O=D.tables.map(function(j){return v(j)}),A={};return O.forEach(function(j){return A[j.name]=j}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(j){var W=A[j];if(!W)throw new Error("Table '".concat(j,"' not found"));return A[j]},MIN_KEY:-1/0,MAX_KEY:Mo(r),schema:D}}function of(o,r){return r.reduce(function(u,d){var f=d.create;return a(a({},u),f(u))},o)}function af(o,r,u,d){var f=u.IDBKeyRange;u.indexedDB;var v=of(rf(r,f,d),o.dbcore);return{dbcore:v}}function Xi(o,r){var u=r.db,d=af(o._middlewares,u,o._deps,r);o.core=d.dbcore,o.tables.forEach(function(f){var v=f.name;o.core.schema.tables.some(function(x){return x.name===v})&&(f.core=o.core.table(v),o[v]instanceof o.Table&&(o[v].core=f.core))})}function Ji(o,r,u,d){u.forEach(function(f){var v=d[f];r.forEach(function(x){var D=Q(x,f);(!D||"value"in D&&D.value===void 0)&&(x===o.Transaction.prototype||x instanceof o.Transaction?P(x,f,{get:function(){return this.table(f)},set:function(S){M(this,f,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):x[f]=new o.Table(f,v))})})}function gs(o,r){r.forEach(function(u){for(var d in u)u[d]instanceof o.Table&&delete u[d]})}function sf(o,r){return o._cfg.version-r._cfg.version}function uf(o,r,u,d){var f=o._dbSchema;u.objectStoreNames.contains("$meta")&&!f.$meta&&(f.$meta=ps("$meta",Sc("")[0],[]),o._storeNames.push("$meta"));var v=o._createTransaction("readwrite",o._storeNames,f);v.create(u),v._completion.catch(d);var x=v._reject.bind(v),D=ke.transless||ke;Jn(function(){if(ke.trans=v,ke.transless=D,r===0)l(f).forEach(function(S){_s(u,S,f[S].primKey,f[S].indexes)}),Xi(o,u),ve.follow(function(){return o.on.populate.fire(v)}).catch(x);else return Xi(o,u),lf(o,v,r).then(function(S){return df(o,S,v,u)}).catch(x)})}function cf(o,r){Cc(o._dbSchema,r),r.db.version%10===0&&!r.objectStoreNames.contains("$meta")&&r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var u=Vi(o,o.idbdb,r);ea(o,o._dbSchema,r);for(var d=vs(u,o._dbSchema),f=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=r.objectStore(O.name);O.add.forEach(function(j){_n&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(j.src)),Qi(A,j)})},v=0,x=d.change;v<x.length;v++){var D=x[v],S=f(D);if(typeof S=="object")return S.value}}function lf(o,r,u){return r.storeNames.includes("$meta")?r.table("$meta").get("version").then(function(d){return d??u}):ve.resolve(u)}function df(o,r,u,d){var f=[],v=o._versions,x=o._dbSchema=Vi(o,o.idbdb,d),D=v.filter(function(O){return O._cfg.version>=r});if(D.length===0)return ve.resolve();D.forEach(function(O){f.push(function(){var A=x,j=O._cfg.dbschema;ea(o,A,d),ea(o,j,d),x=o._dbSchema=j;var W=vs(A,j);W.add.forEach(function(te){_s(d,te[0],te[1].primKey,te[1].indexes)}),W.change.forEach(function(te){if(te.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var ee=d.objectStore(te.name);te.add.forEach(function(ne){return Qi(ee,ne)}),te.change.forEach(function(ne){ee.deleteIndex(ne.name),Qi(ee,ne)}),te.del.forEach(function(ne){return ee.deleteIndex(ne)})});var ie=O._cfg.contentUpgrade;if(ie&&O._cfg.version>r){Xi(o,d),u._memoizedTables={};var $=G(j);W.del.forEach(function(te){$[te]=A[te]}),gs(o,[o.Transaction.prototype]),Ji(o,[o.Transaction.prototype],l($),$),u.schema=$;var L=ue(ie);L&&qr();var Z,H=ve.follow(function(){if(Z=ie(u),Z&&L){var te=Qn.bind(null,null);Z.then(te,te)}});return Z&&typeof Z.then=="function"?ve.resolve(Z):H.then(function(){return Z})}}),f.push(function(A){var j=O._cfg.dbschema;hf(j,A),gs(o,[o.Transaction.prototype]),Ji(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),u.schema=o._dbSchema}),f.push(function(A){o.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(o.idbdb.version/10)===O._cfg.version?(o.idbdb.deleteObjectStore("$meta"),delete o._dbSchema.$meta,o._storeNames=o._storeNames.filter(function(j){return j!=="$meta"})):A.objectStore("$meta").put(O._cfg.version,"version"))})});function S(){return f.length?ve.resolve(f.shift()(u.idbtrans)).then(S):ve.resolve()}return S().then(function(){Cc(x,d)})}function vs(o,r){var u={del:[],add:[],change:[]},d;for(d in o)r[d]||u.del.push(d);for(d in r){var f=o[d],v=r[d];if(!f)u.add.push([d,v]);else{var x={name:d,def:v,recreate:!1,del:[],add:[],change:[]};if(""+(f.primKey.keyPath||"")!=""+(v.primKey.keyPath||"")||f.primKey.auto!==v.primKey.auto)x.recreate=!0,u.change.push(x);else{var D=f.idxByName,S=v.idxByName,O=void 0;for(O in D)S[O]||x.del.push(O);for(O in S){var A=D[O],j=S[O];A?A.src!==j.src&&x.change.push(j):x.add.push(j)}(x.del.length>0||x.add.length>0||x.change.length>0)&&u.change.push(x)}}}return u}function _s(o,r,u,d){var f=o.db.createObjectStore(r,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return d.forEach(function(v){return Qi(f,v)}),f}function Cc(o,r){l(o).forEach(function(u){r.db.objectStoreNames.contains(u)||(_n&&console.debug("Dexie: Creating missing table",u),_s(r,u,o[u].primKey,o[u].indexes))})}function hf(o,r){[].slice.call(r.db.objectStoreNames).forEach(function(u){return o[u]==null&&r.db.deleteObjectStore(u)})}function Qi(o,r){o.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function Vi(o,r,u){var d={},f=se(r.objectStoreNames,0);return f.forEach(function(v){for(var x=u.objectStore(v),D=x.keyPath,S=ms(kc(D),D||"",!0,!1,!!x.autoIncrement,D&&typeof D!="string",!0),O=[],A=0;A<x.indexNames.length;++A){var j=x.index(x.indexNames[A]);D=j.keyPath;var W=ms(j.name,D,!!j.unique,!!j.multiEntry,!1,D&&typeof D!="string",!1);O.push(W)}d[v]=ps(v,S,O)}),d}function ff(o,r,u){o.verno=r.version/10;var d=o._dbSchema=Vi(o,r,u);o._storeNames=se(r.objectStoreNames,0),Ji(o,[o._allTables],l(d),d)}function mf(o,r){var u=Vi(o,o.idbdb,r),d=vs(u,o._dbSchema);return!(d.add.length||d.change.some(function(f){return f.add.length||f.change.length}))}function ea(o,r,u){for(var d=u.db.objectStoreNames,f=0;f<d.length;++f){var v=d[f],x=u.objectStore(v);o._hasGetAll="getAll"in x;for(var D=0;D<x.indexNames.length;++D){var S=x.indexNames[D],O=x.index(S).keyPath,A=typeof O=="string"?O:"["+se(O).join("+")+"]";if(r[v]){var j=r[v].idxByName[A];j&&(j.name=S,delete r[v].idxByName[A],r[v].idxByName[S]=j)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Sc(o){return o.split(",").map(function(r,u){var d,f=r.split(":"),v=(d=f[1])===null||d===void 0?void 0:d.trim();r=f[0].trim();var x=r.replace(/([&*]|\+\+)/g,""),D=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return ms(x,D||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),p(D),u===0,v)})}var pf=(function(){function o(){}return o.prototype._createTableSchema=function(r,u,d){return ps(r,u,d)},o.prototype._parseIndexSyntax=function(r){return Sc(r)},o.prototype._parseStoresSpec=function(r,u){var d=this;l(r).forEach(function(f){if(r[f]!==null){var v=d._parseIndexSyntax(r[f]),x=v.shift();if(!x)throw new xe.Schema("Invalid schema for table "+f+": "+r[f]);if(x.unique=!0,x.multi)throw new xe.Schema("Primary key cannot be multiEntry*");v.forEach(function(S){if(S.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!S.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")});var D=d._createTableSchema(f,x,v);u[f]=D}})},o.prototype.stores=function(r){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,r):r;var d=u._versions,f={},v={};return d.forEach(function(x){m(f,x._cfg.storesSource),v=x._cfg.dbschema={},x._parseStoresSpec(f,v)}),u._dbSchema=v,gs(u,[u._allTables,u,u.Transaction.prototype]),Ji(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],l(v),v),u._storeNames=l(v),this},o.prototype.upgrade=function(r){return this._cfg.contentUpgrade=Ja(this._cfg.contentUpgrade||Ge,r),this},o})();function yf(o){return Eo(pf.prototype,function(r){this.db=o,this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function bs(o,r){var u=o._dbNamesDB;return u||(u=o._dbNamesDB=new jn(Ui,{addons:[],indexedDB:o,IDBKeyRange:r}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function ws(o){return o&&typeof o.databases=="function"}function gf(o){var r=o.indexedDB,u=o.IDBKeyRange;return ws(r)?Promise.resolve(r.databases()).then(function(d){return d.map(function(f){return f.name}).filter(function(f){return f!==Ui})}):bs(r,u).toCollection().primaryKeys()}function vf(o,r){var u=o.indexedDB,d=o.IDBKeyRange;!ws(u)&&r!==Ui&&bs(u,d).put({name:r}).catch(Ge)}function _f(o,r){var u=o.indexedDB,d=o.IDBKeyRange;!ws(u)&&r!==Ui&&bs(u,d).delete(r).catch(Ge)}function xs(o){return Jn(function(){return ke.letThrough=!0,o()})}function bf(){var o=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!o||!indexedDB.databases)return Promise.resolve();var r;return new Promise(function(u){var d=function(){return indexedDB.databases().finally(u)};r=setInterval(d,100),d()}).finally(function(){return clearInterval(r)})}var ks;function Ds(o){return!("from"in o)}var gt=function(o,r){if(this)m(this,arguments.length?{d:1,from:o,to:arguments.length>1?r:o}:{d:0});else{var u=new gt;return o&&"d"in o&&m(u,o),u}};E(gt.prototype,(ks={add:function(o){return Po(this,o),this},addKey:function(o){return Ro(this,o,o),this},addKeys:function(o){var r=this;return o.forEach(function(u){return Ro(r,u,u)}),this},hasKey:function(o){var r=ta(this).next(o).value;return r&&ze(r.from,o)<=0&&ze(r.to,o)>=0}},ks[re]=function(){return ta(this)},ks));function Ro(o,r,u){var d=ze(r,u);if(!isNaN(d)){if(d>0)throw RangeError();if(Ds(o))return m(o,{from:r,to:u,d:1});var f=o.l,v=o.r;if(ze(u,o.from)<0)return f?Ro(f,r,u):o.l={from:r,to:u,d:1,l:null,r:null},Tc(o);if(ze(r,o.to)>0)return v?Ro(v,r,u):o.r={from:r,to:u,d:1,l:null,r:null},Tc(o);ze(r,o.from)<0&&(o.from=r,o.l=null,o.d=v?v.d+1:1),ze(u,o.to)>0&&(o.to=u,o.r=null,o.d=o.l?o.l.d+1:1);var x=!o.r;f&&!o.l&&Po(o,f),v&&x&&Po(o,v)}}function Po(o,r){function u(d,f){var v=f.from,x=f.to,D=f.l,S=f.r;Ro(d,v,x),D&&u(d,D),S&&u(d,S)}Ds(r)||u(o,r)}function Ec(o,r){var u=ta(r),d=u.next();if(d.done)return!1;for(var f=d.value,v=ta(o),x=v.next(f.from),D=x.value;!d.done&&!x.done;){if(ze(D.from,f.to)<=0&&ze(D.to,f.from)>=0)return!0;ze(f.from,D.from)<0?f=(d=u.next(D.from)).value:D=(x=v.next(f.from)).value}return!1}function ta(o){var r=Ds(o)?null:{s:0,n:o};return{next:function(u){for(var d=arguments.length>0;r;)switch(r.s){case 0:if(r.s=1,d)for(;r.n.l&&ze(u,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!d||ze(u,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function Tc(o){var r,u,d=(((r=o.r)===null||r===void 0?void 0:r.d)||0)-(((u=o.l)===null||u===void 0?void 0:u.d)||0),f=d>1?"r":d<-1?"l":"";if(f){var v=f==="r"?"l":"r",x=a({},o),D=o[f];o.from=D.from,o.to=D.to,o[f]=D[f],x[f]=D[v],o[v]=x,x.d=Ic(x)}o.d=Ic(o)}function Ic(o){var r=o.r,u=o.l;return(r?u?Math.max(r.d,u.d):r.d:u?u.d:0)+1}function na(o,r){return l(r).forEach(function(u){o[u]?Po(o[u],r[u]):o[u]=y(r[u])}),o}function Cs(o,r){return o.all||r.all||Object.keys(o).some(function(u){return r[u]&&Ec(r[u],o[u])})}var Cr={},Ss={},Es=!1;function ra(o,r){na(Ss,o),Es||(Es=!0,setTimeout(function(){Es=!1;var u=Ss;Ss={},Ts(u,!1)},0))}function Ts(o,r){r===void 0&&(r=!1);var u=new Set;if(o.all)for(var d=0,f=Object.values(Cr);d<f.length;d++){var v=f[d];Mc(v,o,u,r)}else for(var x in o){var D=/^idb\:\/\/(.*)\/(.*)\//.exec(x);if(D){var S=D[1],O=D[2],v=Cr["idb://".concat(S,"/").concat(O)];v&&Mc(v,o,u,r)}}u.forEach(function(A){return A()})}function Mc(o,r,u,d){for(var f=[],v=0,x=Object.entries(o.queries.query);v<x.length;v++){for(var D=x[v],S=D[0],O=D[1],A=[],j=0,W=O;j<W.length;j++){var ie=W[j];Cs(r,ie.obsSet)?ie.subscribers.forEach(function(H){return u.add(H)}):d&&A.push(ie)}d&&f.push([S,A])}if(d)for(var $=0,L=f;$<L.length;$++){var Z=L[$],S=Z[0],A=Z[1];o.queries.query[S]=A}}function wf(o){var r=o._state,u=o._deps.indexedDB;if(r.isBeingOpened||o.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?it(r.dbOpenError):o});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var d=r.openCanceller,f=Math.round(o.verno*10),v=!1;function x(){if(r.openCanceller!==d)throw new xe.DatabaseClosed("db.open() was cancelled")}var D=r.dbReadyResolve,S=null,O=!1,A=function(){return new ve(function(j,W){if(x(),!u)throw new xe.MissingAPI;var ie=o.name,$=r.autoSchema||!f?u.open(ie):u.open(ie,f);if(!$)throw new xe.MissingAPI;$.onerror=bn(W),$.onblocked=Qe(o._fireOnBlocked),$.onupgradeneeded=Qe(function(L){if(S=$.transaction,r.autoSchema&&!o._options.allowEmptyDB){$.onerror=To,S.abort(),$.result.close();var Z=u.deleteDatabase(ie);Z.onsuccess=Z.onerror=Qe(function(){W(new xe.NoSuchDatabase("Database ".concat(ie," doesnt exist")))})}else{S.onerror=bn(W);var H=L.oldVersion>Math.pow(2,62)?0:L.oldVersion;O=H<1,o.idbdb=$.result,v&&cf(o,S),uf(o,H/10,S,W)}},W),$.onsuccess=Qe(function(){S=null;var L=o.idbdb=$.result,Z=se(L.objectStoreNames);if(Z.length>0)try{var H=L.transaction(ef(Z),"readonly");if(r.autoSchema)ff(o,L,H);else if(ea(o,o._dbSchema,H),!mf(o,H)&&!v)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),L.close(),f=L.version+1,v=!0,j(A());Xi(o,H)}catch{}Ur.push(o),L.onversionchange=Qe(function(te){r.vcFired=!0,o.on("versionchange").fire(te)}),L.onclose=Qe(function(){o.close({disableAutoOpen:!1})}),O&&vf(o._deps,ie),j()},W)}).catch(function(j){switch(j?.name){case"UnknownError":if(r.PR1398_maxLoop>0)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(f>0)return f=0,A();break}return ve.reject(j)})};return ve.race([d,(typeof navigator>"u"?ve.resolve():bf()).then(A)]).then(function(){return x(),r.onReadyBeingFired=[],ve.resolve(xs(function(){return o.on.ready.fire(o.vip)})).then(function j(){if(r.onReadyBeingFired.length>0){var W=r.onReadyBeingFired.reduce(Ja,Ge);return r.onReadyBeingFired=[],ve.resolve(xs(function(){return W(o.vip)})).then(j)}})}).finally(function(){r.openCanceller===d&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(j){r.dbOpenError=j;try{S&&S.abort()}catch{}return d===r.openCanceller&&o._close(),it(j)}).finally(function(){r.openComplete=!0,D()}).then(function(){if(O){var j={};o.tables.forEach(function(W){W.schema.indexes.forEach(function(ie){ie.name&&(j["idb://".concat(o.name,"/").concat(W.name,"/").concat(ie.name)]=new gt(-1/0,[[[]]]))}),j["idb://".concat(o.name,"/").concat(W.name,"/")]=j["idb://".concat(o.name,"/").concat(W.name,"/:dels")]=new gt(-1/0,[[[]]])}),tr(Io).fire(j),Ts(j,!0)}return o})}function Is(o){var r=function(x){return o.next(x)},u=function(x){return o.throw(x)},d=v(r),f=v(u);function v(x){return function(D){var S=x(D),O=S.value;return S.done?O:!O||typeof O.then!="function"?p(O)?Promise.all(O).then(d,f):d(O):O.then(d,f)}}return v(r)()}function xf(o,r,u){var d=arguments.length;if(d<2)throw new xe.InvalidArgument("Too few arguments");for(var f=new Array(d-1);--d;)f[d-1]=arguments[d];u=f.pop();var v=k(f);return[o,v,u]}function Oc(o,r,u,d,f){return ve.resolve().then(function(){var v=ke.transless||ke,x=o._createTransaction(r,u,o._dbSchema,d);x.explicit=!0;var D={trans:x,transless:v};if(d)x.idbtrans=d.idbtrans;else try{x.create(),x.idbtrans._explicit=!0,o._state.PR1398_maxLoop=3}catch(j){return j.name===Hn.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return Oc(o,r,u,null,f)})):it(j)}var S=ue(f);S&&qr();var O,A=ve.follow(function(){if(O=f.call(x,x),O)if(S){var j=Qn.bind(null,null);O.then(j,j)}else typeof O.next=="function"&&typeof O.throw=="function"&&(O=Is(O))},D);return(O&&typeof O.then=="function"?ve.resolve(O).then(function(j){return x.active?j:it(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return O})).then(function(j){return d&&x._resolve(),x._completion.then(function(){return j})}).catch(function(j){return x._reject(j),it(j)})})}function oa(o,r,u){for(var d=p(o)?o.slice():[o],f=0;f<u;++f)d.push(r);return d}function kf(o){return a(a({},o),{table:function(r){var u=o.table(r),d=u.schema,f={},v=[];function x(L,Z,H){var te=Oo(L),ee=f[te]=f[te]||[],ne=L==null?0:typeof L=="string"?1:L.length,V=Z>0,fe=a(a({},H),{name:V?"".concat(te,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:V,keyTail:Z,keyLength:ne,extractKey:ys(L),unique:!V&&H.unique});if(ee.push(fe),fe.isPrimaryKey||v.push(fe),ne>1){var _e=ne===2?L[0]:L.slice(0,ne-1);x(_e,Z+1,H)}return ee.sort(function(pe,Ee){return pe.keyTail-Ee.keyTail}),fe}var D=x(d.primaryKey.keyPath,0,d.primaryKey);f[":id"]=[D];for(var S=0,O=d.indexes;S<O.length;S++){var A=O[S];x(A.keyPath,0,A)}function j(L){var Z=f[Oo(L)];return Z&&Z[0]}function W(L,Z){return{type:L.type===1?2:L.type,lower:oa(L.lower,L.lowerOpen?o.MAX_KEY:o.MIN_KEY,Z),lowerOpen:!0,upper:oa(L.upper,L.upperOpen?o.MIN_KEY:o.MAX_KEY,Z),upperOpen:!0}}function ie(L){var Z=L.query.index;return Z.isVirtual?a(a({},L),{query:{index:Z.lowLevelIndex,range:W(L.query.range,Z.keyTail)}}):L}var $=a(a({},u),{schema:a(a({},d),{primaryKey:D,indexes:v,getIndexByKeyPath:j}),count:function(L){return u.count(ie(L))},query:function(L){return u.query(ie(L))},openCursor:function(L){var Z=L.query.index,H=Z.keyTail,te=Z.isVirtual,ee=Z.keyLength;if(!te)return u.openCursor(L);function ne(V){function fe(pe){pe!=null?V.continue(oa(pe,L.reverse?o.MAX_KEY:o.MIN_KEY,H)):L.unique?V.continue(V.key.slice(0,ee).concat(L.reverse?o.MIN_KEY:o.MAX_KEY,H)):V.continue()}var _e=Object.create(V,{continue:{value:fe},continuePrimaryKey:{value:function(pe,Ee){V.continuePrimaryKey(oa(pe,o.MAX_KEY,H),Ee)}},primaryKey:{get:function(){return V.primaryKey}},key:{get:function(){var pe=V.key;return ee===1?pe[0]:pe.slice(0,ee)}},value:{get:function(){return V.value}}});return _e}return u.openCursor(ie(L)).then(function(V){return V&&ne(V)})}});return $}})}var Df={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:kf};function Ms(o,r,u,d){return u=u||{},d=d||"",l(o).forEach(function(f){if(!w(r,f))u[d+f]=void 0;else{var v=o[f],x=r[f];if(typeof v=="object"&&typeof x=="object"&&v&&x){var D=B(v),S=B(x);D!==S?u[d+f]=r[f]:D==="Object"?Ms(v,x,u,d+f+"."):v!==x&&(u[d+f]=r[f])}else v!==x&&(u[d+f]=r[f])}}),l(r).forEach(function(f){w(o,f)||(u[d+f]=r[f])}),u}function Os(o,r){return r.type==="delete"?r.keys:r.keys||r.values.map(o.extractKey)}var Cf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return a(a({},o),{table:function(r){var u=o.table(r),d=u.schema.primaryKey,f=a(a({},u),{mutate:function(v){var x=ke.trans,D=x.table(r).hook,S=D.deleting,O=D.creating,A=D.updating;switch(v.type){case"add":if(O.fire===Ge)break;return x._promise("readwrite",function(){return j(v)},!0);case"put":if(O.fire===Ge&&A.fire===Ge)break;return x._promise("readwrite",function(){return j(v)},!0);case"delete":if(S.fire===Ge)break;return x._promise("readwrite",function(){return j(v)},!0);case"deleteRange":if(S.fire===Ge)break;return x._promise("readwrite",function(){return W(v)},!0)}return u.mutate(v);function j($){var L=ke.trans,Z=$.keys||Os(d,$);if(!Z)throw new Error("Keys missing");return $=$.type==="add"||$.type==="put"?a(a({},$),{keys:Z}):a({},$),$.type!=="delete"&&($.values=s([],$.values,!0)),$.keys&&($.keys=s([],$.keys,!0)),Sf(u,$,Z).then(function(H){var te=Z.map(function(ee,ne){var V=H[ne],fe={onerror:null,onsuccess:null};if($.type==="delete")S.fire.call(fe,ee,V,L);else if($.type==="add"||V===void 0){var _e=O.fire.call(fe,ee,$.values[ne],L);ee==null&&_e!=null&&(ee=_e,$.keys[ne]=ee,d.outbound||z($.values[ne],d.keyPath,ee))}else{var pe=Ms(V,$.values[ne]),Ee=A.fire.call(fe,pe,ee,V,L);if(Ee){var $e=$.values[ne];Object.keys(Ee).forEach(function(be){w($e,be)?$e[be]=Ee[be]:z($e,be,Ee[be])})}}return fe});return u.mutate($).then(function(ee){for(var ne=ee.failures,V=ee.results,fe=ee.numFailures,_e=ee.lastResult,pe=0;pe<Z.length;++pe){var Ee=V?V[pe]:Z[pe],$e=te[pe];Ee==null?$e.onerror&&$e.onerror(ne[pe]):$e.onsuccess&&$e.onsuccess($.type==="put"&&H[pe]?$.values[pe]:Ee)}return{failures:ne,results:V,numFailures:fe,lastResult:_e}}).catch(function(ee){return te.forEach(function(ne){return ne.onerror&&ne.onerror(ee)}),Promise.reject(ee)})})}function W($){return ie($.trans,$.range,1e4)}function ie($,L,Z){return u.query({trans:$,values:!1,query:{index:d,range:L},limit:Z}).then(function(H){var te=H.result;return j({type:"delete",keys:te,trans:$}).then(function(ee){return ee.numFailures>0?Promise.reject(ee.failures[0]):te.length<Z?{failures:[],numFailures:0,lastResult:void 0}:ie($,a(a({},L),{lower:te[te.length-1],lowerOpen:!0}),Z)})})}}});return f}})}};function Sf(o,r,u){return r.type==="add"?Promise.resolve([]):o.getMany({trans:r.trans,keys:u,cache:"immutable"})}function Rc(o,r,u){try{if(!r||r.keys.length<o.length)return null;for(var d=[],f=0,v=0;f<r.keys.length&&v<o.length;++f)ze(r.keys[f],o[v])===0&&(d.push(u?T(r.values[f]):r.values[f]),++v);return d.length===o.length?d:null}catch{return null}}var Ef={stack:"dbcore",level:-1,create:function(o){return{table:function(r){var u=o.table(r);return a(a({},u),{getMany:function(d){if(!d.cache)return u.getMany(d);var f=Rc(d.keys,d.trans._cache,d.cache==="clone");return f?ve.resolve(f):u.getMany(d).then(function(v){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?T(v):v},v})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),u.mutate(d)}})}}}};function Pc(o,r){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function jc(o,r){switch(o){case"query":return r.values&&!r.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Tf={stack:"dbcore",level:0,name:"Observability",create:function(o){var r=o.schema.name,u=new gt(o.MIN_KEY,o.MAX_KEY);return a(a({},o),{transaction:function(d,f,v){if(ke.subscr&&f!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return o.transaction(d,f,v)},table:function(d){var f=o.table(d),v=f.schema,x=v.primaryKey,D=v.indexes,S=x.extractKey,O=x.outbound,A=x.autoIncrement&&D.filter(function($){return $.compound&&$.keyPath.includes(x.keyPath)}),j=a(a({},f),{mutate:function($){var L,Z,H=$.trans,te=$.mutatedParts||($.mutatedParts={}),ee=function(Te){var Fe="idb://".concat(r,"/").concat(d,"/").concat(Te);return te[Fe]||(te[Fe]=new gt)},ne=ee(""),V=ee(":dels"),fe=$.type,_e=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[Os(x,$).filter(function(Te){return Te}),$.values]:[],pe=_e[0],Ee=_e[1],$e=$.trans._cache;if(p(pe)){ne.addKeys(pe);var be=fe==="delete"||pe.length===Ee.length?Rc(pe,$e):null;be||V.addKeys(pe),(be||Ee)&&If(ee,v,be,Ee)}else if(pe){var Ne={from:(L=pe.lower)!==null&&L!==void 0?L:o.MIN_KEY,to:(Z=pe.upper)!==null&&Z!==void 0?Z:o.MAX_KEY};V.add(Ne),ne.add(Ne)}else ne.add(u),V.add(u),v.indexes.forEach(function(Te){return ee(Te.name).add(u)});return f.mutate($).then(function(Te){return pe&&($.type==="add"||$.type==="put")&&(ne.addKeys(Te.results),A&&A.forEach(function(Fe){for(var Ce=$.values.map(function(zt){return Fe.extractKey(zt)}),rt=Fe.keyPath.findIndex(function(zt){return zt===x.keyPath}),vt=0,wn=Te.results.length;vt<wn;++vt)Ce[vt][rt]=Te.results[vt];ee(Fe.name).addKeys(Ce)})),H.mutatedParts=na(H.mutatedParts||{},te),Te})}}),W=function($){var L,Z,H=$.query,te=H.index,ee=H.range;return[te,new gt((L=ee.lower)!==null&&L!==void 0?L:o.MIN_KEY,(Z=ee.upper)!==null&&Z!==void 0?Z:o.MAX_KEY)]},ie={get:function($){return[x,new gt($.key)]},getMany:function($){return[x,new gt().addKeys($.keys)]},count:W,query:W,openCursor:W};return l(ie).forEach(function($){j[$]=function(L){var Z=ke.subscr,H=!!Z,te=Pc(ke,f)&&jc($,L),ee=te?L.obsSet={}:Z;if(H){var ne=function(be){var Ne="idb://".concat(r,"/").concat(d,"/").concat(be);return ee[Ne]||(ee[Ne]=new gt)},V=ne(""),fe=ne(":dels"),_e=ie[$](L),pe=_e[0],Ee=_e[1];if($==="query"&&pe.isPrimaryKey&&!L.values?fe.add(Ee):ne(pe.name||"").add(Ee),!pe.isPrimaryKey)if($==="count")fe.add(u);else{var $e=$==="query"&&O&&L.values&&f.query(a(a({},L),{values:!1}));return f[$].apply(this,arguments).then(function(be){if($==="query"){if(O&&L.values)return $e.then(function(Ce){var rt=Ce.result;return V.addKeys(rt),be});var Ne=L.values?be.result.map(S):be.result;L.values?V.addKeys(Ne):fe.addKeys(Ne)}else if($==="openCursor"){var Te=be,Fe=L.values;return Te&&Object.create(Te,{key:{get:function(){return fe.addKey(Te.primaryKey),Te.key}},primaryKey:{get:function(){var Ce=Te.primaryKey;return fe.addKey(Ce),Ce}},value:{get:function(){return Fe&&V.addKey(Te.primaryKey),Te.value}}})}return be})}}return f[$].apply(this,arguments)}}),j}})}};function If(o,r,u,d){function f(v){var x=o(v.name||"");function D(O){return O!=null?v.extractKey(O):null}var S=function(O){return v.multiEntry&&p(O)?O.forEach(function(A){return x.addKey(A)}):x.addKey(O)};(u||d).forEach(function(O,A){var j=u&&D(u[A]),W=d&&D(d[A]);ze(j,W)!==0&&(j!=null&&S(j),W!=null&&S(W))})}r.indexes.forEach(f)}function Nc(o,r,u){if(u.numFailures===0)return r;if(r.type==="deleteRange")return null;var d=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;if(u.numFailures===d)return null;var f=a({},r);return p(f.keys)&&(f.keys=f.keys.filter(function(v,x){return!(x in u.failures)})),"values"in f&&p(f.values)&&(f.values=f.values.filter(function(v,x){return!(x in u.failures)})),f}function Mf(o,r){return r.lower===void 0?!0:r.lowerOpen?ze(o,r.lower)>0:ze(o,r.lower)>=0}function Of(o,r){return r.upper===void 0?!0:r.upperOpen?ze(o,r.upper)<0:ze(o,r.upper)<=0}function Rs(o,r){return Mf(o,r)&&Of(o,r)}function $c(o,r,u,d,f,v){if(!u||u.length===0)return o;var x=r.query.index,D=x.multiEntry,S=r.query.range,O=d.schema.primaryKey,A=O.extractKey,j=x.extractKey,W=(x.lowLevelIndex||x).extractKey,ie=u.reduce(function($,L){var Z=$,H=[];if(L.type==="add"||L.type==="put")for(var te=new gt,ee=L.values.length-1;ee>=0;--ee){var ne=L.values[ee],V=A(ne);if(!te.hasKey(V)){var fe=j(ne);(D&&p(fe)?fe.some(function(be){return Rs(be,S)}):Rs(fe,S))&&(te.addKey(V),H.push(ne))}}switch(L.type){case"add":{var _e=new gt().addKeys(r.values?$.map(function(be){return A(be)}):$);Z=$.concat(r.values?H.filter(function(be){var Ne=A(be);return _e.hasKey(Ne)?!1:(_e.addKey(Ne),!0)}):H.map(function(be){return A(be)}).filter(function(be){return _e.hasKey(be)?!1:(_e.addKey(be),!0)}));break}case"put":{var pe=new gt().addKeys(L.values.map(function(be){return A(be)}));Z=$.filter(function(be){return!pe.hasKey(r.values?A(be):be)}).concat(r.values?H:H.map(function(be){return A(be)}));break}case"delete":var Ee=new gt().addKeys(L.keys);Z=$.filter(function(be){return!Ee.hasKey(r.values?A(be):be)});break;case"deleteRange":var $e=L.range;Z=$.filter(function(be){return!Rs(A(be),$e)});break}return Z},o);return ie===o?o:(ie.sort(function($,L){return ze(W($),W(L))||ze(A($),A(L))}),r.limit&&r.limit<1/0&&(ie.length>r.limit?ie.length=r.limit:o.length===r.limit&&ie.length<r.limit&&(f.dirty=!0)),v?Object.freeze(ie):ie)}function Ac(o,r){return ze(o.lower,r.lower)===0&&ze(o.upper,r.upper)===0&&!!o.lowerOpen==!!r.lowerOpen&&!!o.upperOpen==!!r.upperOpen}function Rf(o,r,u,d){if(o===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;var f=ze(o,r);if(f===0){if(u&&d)return 0;if(u)return 1;if(d)return-1}return f}function Pf(o,r,u,d){if(o===void 0)return r!==void 0?1:0;if(r===void 0)return-1;var f=ze(o,r);if(f===0){if(u&&d)return 0;if(u)return-1;if(d)return 1}return f}function jf(o,r){return Rf(o.lower,r.lower,o.lowerOpen,r.lowerOpen)<=0&&Pf(o.upper,r.upper,o.upperOpen,r.upperOpen)>=0}function Nf(o,r,u,d){var f=Cr["idb://".concat(o,"/").concat(r)];if(!f)return[];var v=f.queries[u];if(!v)return[null,!1,f,null];var x=d.query?d.query.index.name:null,D=v[x||""];if(!D)return[null,!1,f,null];switch(u){case"query":var S=D.find(function(j){return j.req.limit===d.limit&&j.req.values===d.values&&Ac(j.req.query.range,d.query.range)});if(S)return[S,!0,f,D];var O=D.find(function(j){var W="limit"in j.req?j.req.limit:1/0;return W>=d.limit&&(d.values?j.req.values:!0)&&jf(j.req.query.range,d.query.range)});return[O,!1,f,D];case"count":var A=D.find(function(j){return Ac(j.req.query.range,d.query.range)});return[A,!!A,f,D]}}function $f(o,r,u,d){o.subscribers.add(u),d.addEventListener("abort",function(){o.subscribers.delete(u),o.subscribers.size===0&&Af(o,r)})}function Af(o,r){setTimeout(function(){o.subscribers.size===0&&ye(r,o)},3e3)}var Lf={stack:"dbcore",level:0,name:"Cache",create:function(o){var r=o.schema.name,u=a(a({},o),{transaction:function(d,f,v){var x=o.transaction(d,f,v);if(f==="readwrite"){var D=new AbortController,S=D.signal,O=function(A){return function(){if(D.abort(),f==="readwrite"){for(var j=new Set,W=0,ie=d;W<ie.length;W++){var $=ie[W],L=Cr["idb://".concat(r,"/").concat($)];if(L){var Z=o.table($),H=L.optimisticOps.filter(function(Fe){return Fe.trans===x});if(x._explicit&&A&&x.mutatedParts)for(var te=0,ee=Object.values(L.queries.query);te<ee.length;te++)for(var ne=ee[te],V=0,fe=ne.slice();V<fe.length;V++){var _e=fe[V];Cs(_e.obsSet,x.mutatedParts)&&(ye(ne,_e),_e.subscribers.forEach(function(Fe){return j.add(Fe)}))}else if(H.length>0){L.optimisticOps=L.optimisticOps.filter(function(Fe){return Fe.trans!==x});for(var pe=0,Ee=Object.values(L.queries.query);pe<Ee.length;pe++)for(var ne=Ee[pe],$e=0,be=ne.slice();$e<be.length;$e++){var _e=be[$e];if(_e.res!=null&&x.mutatedParts)if(A&&!_e.dirty){var Ne=Object.isFrozen(_e.res),Te=$c(_e.res,_e.req,H,Z,_e,Ne);_e.dirty?(ye(ne,_e),_e.subscribers.forEach(function(rt){return j.add(rt)})):Te!==_e.res&&(_e.res=Te,_e.promise=ve.resolve({result:Te}))}else _e.dirty&&ye(ne,_e),_e.subscribers.forEach(function(rt){return j.add(rt)})}}}}j.forEach(function(Fe){return Fe()})}}};x.addEventListener("abort",O(!1),{signal:S}),x.addEventListener("error",O(!1),{signal:S}),x.addEventListener("complete",O(!0),{signal:S})}return x},table:function(d){var f=o.table(d),v=f.schema.primaryKey,x=a(a({},f),{mutate:function(D){var S=ke.trans;if(v.outbound||S.db._options.cache==="disabled"||S.explicit||S.idbtrans.mode!=="readwrite")return f.mutate(D);var O=Cr["idb://".concat(r,"/").concat(d)];if(!O)return f.mutate(D);var A=f.mutate(D);return(D.type==="add"||D.type==="put")&&(D.values.length>=50||Os(v,D).some(function(j){return j==null}))?A.then(function(j){var W=a(a({},D),{values:D.values.map(function($,L){var Z;if(j.failures[L])return $;var H=!((Z=v.keyPath)===null||Z===void 0)&&Z.includes(".")?T($):a({},$);return z(H,v.keyPath,j.results[L]),H})}),ie=Nc(O,W,j);O.optimisticOps.push(ie),queueMicrotask(function(){return D.mutatedParts&&ra(D.mutatedParts)})}):(O.optimisticOps.push(D),D.mutatedParts&&ra(D.mutatedParts),A.then(function(j){if(j.numFailures>0){ye(O.optimisticOps,D);var W=Nc(O,D,j);W&&O.optimisticOps.push(W),D.mutatedParts&&ra(D.mutatedParts)}}),A.catch(function(){ye(O.optimisticOps,D),D.mutatedParts&&ra(D.mutatedParts)})),A},query:function(D){var S;if(!Pc(ke,f)||!jc("query",D))return f.query(D);var O=((S=ke.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",A=ke,j=A.requery,W=A.signal,ie=Nf(r,d,"query",D),$=ie[0],L=ie[1],Z=ie[2],H=ie[3];if($&&L)$.obsSet=D.obsSet;else{var te=f.query(D).then(function(ee){var ne=ee.result;if($&&($.res=ne),O){for(var V=0,fe=ne.length;V<fe;++V)Object.freeze(ne[V]);Object.freeze(ne)}else ee.result=T(ne);return ee}).catch(function(ee){return H&&$&&ye(H,$),Promise.reject(ee)});$={obsSet:D.obsSet,promise:te,subscribers:new Set,type:"query",req:D,dirty:!1},H?H.push($):(H=[$],Z||(Z=Cr["idb://".concat(r,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),Z.queries.query[D.query.index.name||""]=H)}return $f($,H,j,W),$.promise.then(function(ee){return{result:$c(ee.result,D,Z?.optimisticOps,f,$,O)}})}});return x}});return u}};function ia(o,r){return new Proxy(o,{get:function(u,d,f){return d==="db"?r:Reflect.get(u,d,f)}})}var jn=(function(){function o(r,u){var d=this;this._middlewares={},this.verno=0;var f=o.dependencies;this._options=u=a({addons:o.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var v=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ge,dbReadyPromise:null,cancelOpen:Ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};x.dbReadyPromise=new ve(function(S){x.dbReadyResolve=S}),x.openCanceller=new ve(function(S,O){x.cancelOpen=O}),this._state=x,this.name=r,this.on=So(this,"populate","blocked","versionchange","close",{ready:[Ja,Ge]}),this.once=function(S,O){var A=function(){for(var j=[],W=0;W<arguments.length;W++)j[W]=arguments[W];d.on(S).unsubscribe(A),O.apply(d,j)};return d.on(S,A)},this.on.ready.subscribe=de(this.on.ready.subscribe,function(S){return function(O,A){o.vip(function(){var j=d._state;if(j.openComplete)j.dbOpenError||ve.resolve().then(O),A&&S(O);else if(j.onReadyBeingFired)j.onReadyBeingFired.push(O),A&&S(O);else{S(O);var W=d;A||S(function ie(){W.on.ready.unsubscribe(O),W.on.ready.unsubscribe(ie)})}})}}),this.Collection=Kh(this),this.Table=Fh(this),this.Transaction=Vh(this),this.Version=yf(this),this.WhereClause=Jh(this),this.on("versionchange",function(S){S.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(S){!S.newVersion||S.newVersion<S.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(S.oldVersion/10))}),this._maxKey=Mo(u.IDBKeyRange),this._createTransaction=function(S,O,A,j){return new d.Transaction(S,O,A,d._options.chromeTransactionDurability,j)},this._fireOnBlocked=function(S){d.on("blocked").fire(S),Ur.filter(function(O){return O.name===d.name&&O!==d&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(S)})},this.use(Ef),this.use(Lf),this.use(Tf),this.use(Df),this.use(Cf);var D=new Proxy(this,{get:function(S,O,A){if(O==="_vip")return!0;if(O==="table")return function(W){return ia(d.table(W),D)};var j=Reflect.get(S,O,A);return j instanceof gc?ia(j,D):O==="tables"?j.map(function(W){return ia(W,D)}):O==="_createTransaction"?function(){var W=j.apply(this,arguments);return ia(W,D)}:j}});this.vip=D,v.forEach(function(S){return S(d)})}return o.prototype.version=function(r){if(isNaN(r)||r<.1)throw new xe.Type("Given version is not a positive number");if(r=Math.round(r*10)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var u=this._versions,d=u.filter(function(f){return f._cfg.version===r})[0];return d||(d=new this.Version(r),u.push(d),u.sort(sf),d.stores({}),this._state.autoSchema=!1,d)},o.prototype._whenReady=function(r){var u=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?r():new ve(function(d,f){if(u._state.openComplete)return f(new xe.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){f(new xe.DatabaseClosed);return}u.open().catch(Ge)}u._state.dbReadyPromise.then(d,f)}).then(r)},o.prototype.use=function(r){var u=r.stack,d=r.create,f=r.level,v=r.name;v&&this.unuse({stack:u,name:v});var x=this._middlewares[u]||(this._middlewares[u]=[]);return x.push({stack:u,create:d,level:f??10,name:v}),x.sort(function(D,S){return D.level-S.level}),this},o.prototype.unuse=function(r){var u=r.stack,d=r.name,f=r.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(v){return f?v.create!==f:d?v.name!==d:!1})),this},o.prototype.open=function(){var r=this;return xr(Xn,function(){return wf(r)})},o.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,u=Ur.indexOf(this);if(u>=0&&Ur.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new ve(function(d){r.dbReadyResolve=d}),r.openCanceller=new ve(function(d,f){r.cancelOpen=f}))},o.prototype.close=function(r){var u=r===void 0?{disableAutoOpen:!0}:r,d=u.disableAutoOpen,f=this._state;d?(f.isBeingOpened&&f.cancelOpen(new xe.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new xe.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},o.prototype.delete=function(r){var u=this;r===void 0&&(r={disableAutoOpen:!0});var d=arguments.length>0&&typeof arguments[0]!="object",f=this._state;return new ve(function(v,x){var D=function(){u.close(r);var S=u._deps.indexedDB.deleteDatabase(u.name);S.onsuccess=Qe(function(){_f(u._deps,u.name),v()}),S.onerror=bn(x),S.onblocked=u._fireOnBlocked};if(d)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(D):D()})},o.prototype.backendDB=function(){return this.idbdb},o.prototype.isOpen=function(){return this.idbdb!==null},o.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},o.prototype.hasFailed=function(){return this._state.dbOpenError!==null},o.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(o.prototype,"tables",{get:function(){var r=this;return l(this._allTables).map(function(u){return r._allTables[u]})},enumerable:!1,configurable:!0}),o.prototype.transaction=function(){var r=xf.apply(this,arguments);return this._transaction.apply(this,r)},o.prototype._transaction=function(r,u,d){var f=this,v=ke.trans;(!v||v.db!==this||r.indexOf("!")!==-1)&&(v=null);var x=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");var D,S;try{if(S=u.map(function(A){var j=A instanceof f.Table?A.name:A;if(typeof j!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return j}),r=="r"||r===cs)D=cs;else if(r=="rw"||r==ls)D=ls;else throw new xe.InvalidArgument("Invalid transaction mode: "+r);if(v){if(v.mode===cs&&D===ls)if(x)v=null;else throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v&&S.forEach(function(A){if(v&&v.storeNames.indexOf(A)===-1)if(x)v=null;else throw new xe.SubTransaction("Table "+A+" not included in parent transaction.")}),x&&v&&!v.active&&(v=null)}}catch(A){return v?v._promise(null,function(j,W){W(A)}):it(A)}var O=Oc.bind(null,this,D,S,v,d);return v?v._promise(D,O,"lock"):ke.trans?xr(ke.transless,function(){return f._whenReady(O)}):this._whenReady(O)},o.prototype.table=function(r){if(!w(this._allTables,r))throw new xe.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},o})(),Bf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yf=(function(){function o(r){this._subscribe=r}return o.prototype.subscribe=function(r,u,d){return this._subscribe(!r||typeof r=="function"?{next:r,error:u,complete:d}:r)},o.prototype[Bf]=function(){return this},o})(),aa;try{aa={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{aa={indexedDB:null,IDBKeyRange:null}}function Lc(o){var r=!1,u,d=new Yf(function(f){var v=ue(o);function x(H){var te=zr();try{v&&qr();var ee=Jn(o,H);return v&&(ee=ee.finally(Qn)),ee}finally{te&&Fr()}}var D=!1,S,O={},A={},j={get closed(){return D},unsubscribe:function(){D||(D=!0,S&&S.abort(),W&&tr.storagemutated.unsubscribe(L))}};f.start&&f.start(j);var W=!1,ie=function(){return as(Z)};function $(){return Cs(A,O)}var L=function(H){na(O,H),$()&&ie()},Z=function(){if(!(D||!aa.indexedDB)){O={};var H={};S&&S.abort(),S=new AbortController;var te={subscr:H,signal:S.signal,requery:ie,querier:o,trans:null},ee=x(te);Promise.resolve(ee).then(function(ne){r=!0,u=ne,!(D||te.signal.aborted)&&(O={},A=H,!C(A)&&!W&&(tr(Io,L),W=!0),as(function(){return!D&&f.next&&f.next(ne)}))},function(ne){r=!1,["DatabaseClosedError","AbortError"].includes(ne?.name)||D||as(function(){D||f.error&&f.error(ne)})})}};return setTimeout(ie,0),j});return d.hasValue=function(){return r},d.getValue=function(){return u},d}var Sr=jn;E(Sr,a(a({},Ni),{delete:function(o){var r=new Sr(o,{addons:[]});return r.delete()},exists:function(o){return new Sr(o,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return gf(Sr.dependencies).then(o)}catch{return it(new xe.MissingAPI)}},defineClass:function(){function o(r){m(this,r)}return o},ignoreTransaction:function(o){return ke.trans?xr(ke.transless,o):o()},vip:xs,async:function(o){return function(){try{var r=Is(o.apply(this,arguments));return!r||typeof r.then!="function"?ve.resolve(r):r}catch(u){return it(u)}}},spawn:function(o,r,u){try{var d=Is(o.apply(u,r||[]));return!d||typeof d.then!="function"?ve.resolve(d):d}catch(f){return it(f)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(o,r){var u=ve.resolve(typeof o=="function"?Sr.ignoreTransaction(o):o).timeout(r||6e4);return ke.trans?ke.trans.waitFor(u):u},Promise:ve,debug:{get:function(){return _n},set:function(o){tc(o)}},derive:N,extend:m,props:E,override:de,Events:So,on:tr,liveQuery:Lc,extendObservabilitySet:na,getByKeyPath:me,setByKeyPath:z,delByKeyPath:J,shallowClone:G,deepClone:T,getObjectDiff:Ms,cmp:ze,asap:Se,minKey:us,addons:[],connections:Ur,errnames:Hn,dependencies:aa,cache:Cr,semVer:lc,version:lc.split(".").map(function(o){return parseInt(o)}).reduce(function(o,r,u){return o+r/Math.pow(10,u*2)})})),Sr.maxKey=Mo(Sr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tr(Io,function(o){if(!nr){var r;r=new CustomEvent(fs,{detail:o}),nr=!0,dispatchEvent(r),nr=!1}}),addEventListener(fs,function(o){var r=o.detail;nr||Ps(r)}));function Ps(o){var r=nr;try{nr=!0,tr.storagemutated.fire(o),Ts(o,!0)}finally{nr=r}}var nr=!1,Wr,js=function(){};typeof BroadcastChannel<"u"&&(js=function(){Wr=new BroadcastChannel(fs),Wr.onmessage=function(o){return o.data&&Ps(o.data)}},js(),typeof Wr.unref=="function"&&Wr.unref(),tr(Io,function(o){nr||Wr.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!jn.disableBfCache&&o.persisted){_n&&console.debug("Dexie: handling persisted pagehide"),Wr?.close();for(var r=0,u=Ur;r<u.length;r++){var d=u[r];d.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(o){!jn.disableBfCache&&o.persisted&&(_n&&console.debug("Dexie: handling persisted pageshow"),js(),Ps({all:new gt(-1/0,[[]])}))}));function zf(o){return new Co({add:o})}function Ff(o){return new Co({remove:o})}function qf(o,r){return new Co({replacePrefix:[o,r]})}ve.rejectionMapper=Xa,tc(_n);var Uf=Object.freeze({__proto__:null,Dexie:jn,liveQuery:Lc,Entity:fc,cmp:ze,PropModification:Co,replacePrefix:qf,add:zf,remove:Ff,default:jn,RangeSet:gt,mergeRanges:Po,rangesOverlap:Ec});return a(jn,Uf,{default:jn}),jn}))}),Xu=Wp(Gp(),1),jd=Symbol.for("Dexie"),Za=globalThis[jd]||(globalThis[jd]=Xu.default);if(Xu.default.semVer!==Za.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Xu.default.semVer} and ${Za.semVer}`);var{liveQuery:ay,mergeRanges:sy,rangesOverlap:uy,RangeSet:cy,cmp:ly,Entity:dy,PropModification:hy,replacePrefix:fy,add:my,remove:py,DexieYProvider:yy}=Za,Ju=Za;Ft();var Hp=Spicetify.Platform.LibraryAPI||Spicetify.Platform.Registry.resolve(Symbol.for("LibraryAPI"));async function $d(){return(await Hp.getContents({offset:0,limit:1e7,flattenTree:!0})).items}var Xp=Spicetify.Platform.PlaylistAPI||Spicetify.Platform.Registry.resolve(Symbol.for("PlaylistAPI"));async function Ad(t){return{items:(await Xp.getContents(t,{offset:0,limit:-1})).items}}async function Ld(t){let e=new Map,n=50,i=[...new Set(t)];for(let a=0;a<i.length;a+=n){let c=i.slice(a,a+n).map(async l=>{let m=(await Spicetify.Platform.GraphQLLoader(Spicetify.GraphQL.Definitions.queryAlbumTracks,{uri:l,locale:Spicetify.Locale.getLocale(),offset:0,limit:5e3}))?.data?.albumUnion?.tracksV2?.items;if(m)for(let g of m){let b=g?.track?.uri;b&&e.set(b,g.track)}});await Promise.allSettled(c)}return e}async function Bd(t){let e=new Map,n=[...new Set(t.map(c=>Spicetify.URI.fromString(c).id).filter(c=>!!c))],i=async c=>{for(let p=0;p<c.length;p+=50){let g=`https://api.spotify.com/v1/tracks?ids=${c.slice(p,p+50).join(",")}`;try{(await Spicetify.CosmosAsync.get(g))?.tracks?.forEach(w=>{w?.uri&&e.set(w.uri,w)})}catch{}}},a=async c=>{for(let p=0;p<c.length;p+=50){let m=c.slice(p,p+50);await Promise.allSettled(m.map(async g=>{let b=`spotify:track:${g}`;if(!e.has(b))try{let w=Spicetify.URI.idToHex(g),M=await(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/track/${w}`).send()).body;M&&e.set(b,M)}catch{}}))}};await i(n);let s=n.filter(c=>!e.has(`spotify:track:${c}`));return s.length>0&&await a(s),e}Ft();var Yd=webpackChunkclient_web.push([[Symbol()],{},t=>t]),Jp=Object.entries(Yd.m),Qp=Jp.filter(([t,e])=>typeof e=="function"&&e.toString().includes("main-confirmDialog-container")),Vp=Qp.flatMap(([t])=>Object.values(Yd(t)))[0];Spicetify.ReactComponent.ConfirmDialog=Vp;function zd({titleText:t,descriptionText:e,cancelText:n="Cancel",confirmText:i="Confirm",onConfirm:a,onClose:s,onOpen:c,onOutside:l,allowHTML:p,confirmLabel:m,shouldCloseOnEsc:g,shouldCloseOnOverlayClick:b,shouldFocusAfterRender:w,width:E}){let M=document.createElement("div");document.body.appendChild(M);let P=fa(M),N=()=>{let[K,Q]=Jt(!0),oe=xt(null);un(()=>{c?.()},[c]),un(()=>{if(K)return;let de=()=>{P.unmount(),M.remove()},he=oe.current;if(he)return he.addEventListener("animationend",de,{once:!0}),()=>{he.removeEventListener("animationend",de)};de()},[K]);let se=de=>()=>{de?.(),Q(!1)};return ce(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:p,cancelText:n,confirmLabel:m,confirmText:i,descriptionText:e,isOpen:K,onClose:se(s),onConfirm:se(a),onOutside:se(l),ref:oe,shouldCloseOnEsc:g,shouldCloseOnOverlayClick:b,shouldFocusAfterRender:w,titleText:t,width:E})};P.render(ce(N,{}))}var Ud=Xt(Qt());Ft();var Fd=new CSSStyleSheet;Fd.replaceSync(".dropdown{position:relative;width:fit-content;min-width:101px;font-size:14px;cursor:pointer;&:disabled{cursor:not-allowed;opacity:.5}.dropdown__button{display:flex;align-items:center;justify-content:space-between;width:100%;height:32px;padding:0 8px;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:none;border-radius:4px}.dropdown__arrow{display:flex}.dropdown__menu{max-height:250px;overflow-y:scroll;color:rgba(var(--spice-rgb-text),.8);scrollbar-width:none;background:var(--spice-card);border:solid rgba(255,255,255,.1) 1px;border-radius:4px;box-shadow:0 4px 12px #0003}.dropdown__option{display:flex;align-items:center;height:28px;padding:0 8px;margin:4px;cursor:pointer;border-radius:4px;&:hover,.dropdown__option--selected{background:var(--spice-button)}}}");var qd=Fd;document.adoptedStyleSheets.push(qd);var Wa=ut(t=>{let e=(0,Ud.c)(43),{value:n,options:i,onChange:a,disabled:s}=t,c=As(),l=xt(null),p=`--dropdown-anchor-${c.replace(/:/g,"id")}`,m,g,b,w,E,M,P,N,K;if(e[0]!==p||e[1]!==s||e[2]!==a||e[3]!==i||e[4]!==c||e[5]!==n){let se=le=>{a?.(le.value),l.current?.hidePopover()},de;e[15]!==i||e[16]!==n?(de=i.find(le=>le.value===n)?.label||"Select...",e[15]=i,e[16]=n,e[17]=de):de=e[17];let he=de;P="dropdown",N=s;let Se;e[18]!==p?(Se={anchorName:p},e[18]=p,e[19]=Se):Se=e[19];let Me;e[20]!==he?(Me=ce("div",{className:"dropdown__text",children:he}),e[20]=he,e[21]=Me):Me=e[21];let me;e[22]===Symbol.for("react.memo_cache_sentinel")?(me=ce("div",{className:"dropdown__arrow",children:ce(kt.React.dropdown,{size:12})}),e[22]=me):me=e[22],e[23]!==c||e[24]!==Se||e[25]!==Me?(K=Be("button",{className:"dropdown__button",popoverTarget:c,popoverTargetAction:"toggle",style:Se,children:[Me,me]}),e[23]=c,e[24]=Se,e[25]=Me,e[26]=K):K=e[26],m="dropdown__menu",g=c,b="auto",w=l;let z=`calc(anchor(${p} bottom) + 4px)`,J=`anchor(${p} left)`,G=`anchor-size(${p} width)`;e[27]!==z||e[28]!==J||e[29]!==G?(E={top:z,left:J,width:G},e[27]=z,e[28]=J,e[29]=G,e[30]=E):E=e[30],M=i.map(le=>ce("div",{className:`dropdown__option${n===le.value?" dropdown__option--selected":""}`,onClick:()=>se(le),onKeyDown:k=>k.key==="Enter"&&se(le),role:"option",tabIndex:0,children:le.label},le.value)),e[0]=p,e[1]=s,e[2]=a,e[3]=i,e[4]=c,e[5]=n,e[6]=m,e[7]=g,e[8]=b,e[9]=w,e[10]=E,e[11]=M,e[12]=P,e[13]=N,e[14]=K}else m=e[6],g=e[7],b=e[8],w=e[9],E=e[10],M=e[11],P=e[12],N=e[13],K=e[14];let Q;e[31]!==m||e[32]!==g||e[33]!==b||e[34]!==w||e[35]!==E||e[36]!==M?(Q=ce("div",{className:m,id:g,popover:b,ref:w,style:E,children:M}),e[31]=m,e[32]=g,e[33]=b,e[34]=w,e[35]=E,e[36]=M,e[37]=Q):Q=e[37];let oe;return e[38]!==Q||e[39]!==P||e[40]!==N||e[41]!==K?(oe=Be("div",{className:P,disabled:N,children:[K,Q]}),e[38]=Q,e[39]=P,e[40]=N,e[41]=K,e[42]=oe):oe=e[42],oe});var lh=Xt(Qt());Ft();var Kd=new CSSStyleSheet;Kd.replaceSync(".option__row{display:flex;justify-content:space-between;.option__content{display:flex;gap:8px;align-items:center;.option__desc{display:flex;align-items:center;height:100%;font-size:15px;color:var(--spice-subtext)}}.option__control{display:flex;gap:8px;align-items:center}}");var Zd=Kd;var oh=Xt(Qt());Ft();var Hd=Xt(Qt());Ft();var Wd=new CSSStyleSheet;Wd.replaceSync(".input{width:128px;height:32px;padding-left:10px;text-overflow:ellipsis;color:rgba(var(--spice-rgb-text),.8);background:rgba(var(--spice-rgb-selected-row),.1);border:0;border-radius:4px;&:disabled{cursor:not-allowed;opacity:.5}}");var Gd=Wd;document.adoptedStyleSheets.push(Gd);var Xd=ut(t=>{let e=(0,Hd.c)(7),{value:n,onChange:i,placeholder:a,disabled:s}=t,c=s===void 0?!1:s,l;e[0]!==i?(l=g=>{i(g.target.value)},e[0]=i,e[1]=l):l=e[1];let p=l,m;return e[2]!==c||e[3]!==p||e[4]!==a||e[5]!==n?(m=ce("input",{className:"input",disabled:c,onChange:p,placeholder:a,type:"text",value:n}),e[2]=c,e[3]=p,e[4]=a,e[5]=n,e[6]=m):m=e[6],m});var Vd=Xt(Qt());Ft();var Jd=new CSSStyleSheet;Jd.replaceSync(".slider{--fill-color: var(--spice-button-active, #1ed760);--track-color: var(--spice-button-disabled, #535353);--thumb-color: var(--spice-text, #ffffff);--text-color: var(--spice-subtext, #b3b3b3);display:flex;gap:8px;align-items:center;width:100%;&:disabled{cursor:not-allowed;opacity:.5}&:hover{.slider__thumb{opacity:1}.slider__fill{background-color:var(--fill-color)}}.slider-time{min-width:40px;font-size:12px;color:var(--text-color);text-align:center;user-select:none}.slider-container{display:flex;flex-grow:1;align-items:center;height:12px;cursor:pointer;.slider__track{position:relative;width:100%;height:4px;background-color:var(--track-color);border-radius:2px;.slider__fill{position:absolute;height:100%;background-color:var(--fill-color);border-radius:2px}.slider__thumb{position:absolute;top:50%;width:12px;height:12px;background-color:var(--thumb-color);border-radius:50%;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}}}}");var Qd=Jd;document.adoptedStyleSheets.push(Qd);var Ga=ut(t=>{let e=(0,Vd.c)(28),{value:n,min:i,max:a,step:s,defaultValue:c,onChange:l,onRelease:p,disabled:m}=t,g=i===void 0?0:i,b=a===void 0?100:a,w=s===void 0?1:s,E=xt(null),M=xt(!1),P=n!==void 0?n:c,N=b>g&&P!==void 0?(P-g)/(b-g)*100:0,K;e[0]!==m||e[1]!==b||e[2]!==g||e[3]!==l||e[4]!==w?(K=h=>{if(!E.current||m)return;let y=E.current.getBoundingClientRect(),C=h.clientX,T=Math.max(0,Math.min(C-y.left,y.width))/y.width*(b-g)+g;T=Math.round(T/w)*w,T=Math.max(g,Math.min(T,b)),l(T)},e[0]=m,e[1]=b,e[2]=g,e[3]=l,e[4]=w,e[5]=K):K=e[5];let Q=K,oe;e[6]!==m||e[7]!==Q?(oe=h=>{m||!E.current||(M.current=!0,E.current.setPointerCapture(h.pointerId),Q(h.nativeEvent))},e[6]=m,e[7]=Q,e[8]=oe):oe=e[8];let se=oe,de;e[9]!==Q?(de=h=>{M.current&&Q(h.nativeEvent)},e[9]=Q,e[10]=de):de=e[10];let he=de,Se;e[11]!==p?(Se=h=>{!M.current||!E.current||(M.current=!1,E.current.releasePointerCapture(h.pointerId),p?.())},e[11]=p,e[12]=Se):Se=e[12];let Me=Se,me=`${N}%`,z;e[13]!==me?(z=ce("div",{className:"slider__fill",style:{width:me}}),e[13]=me,e[14]=z):z=e[14];let J=`${N}%`,G;e[15]!==J?(G=ce("div",{className:"slider__thumb",style:{left:J}}),e[15]=J,e[16]=G):G=e[16];let le;e[17]!==G||e[18]!==z?(le=Be("div",{className:"slider__track",children:[z,G]}),e[17]=G,e[18]=z,e[19]=le):le=e[19];let k;e[20]!==se||e[21]!==he||e[22]!==Me||e[23]!==le?(k=ce("div",{className:"slider-container",onPointerCancel:Me,onPointerDown:se,onPointerMove:he,onPointerUp:Me,ref:E,children:le}),e[20]=se,e[21]=he,e[22]=Me,e[23]=le,e[24]=k):k=e[24];let q;return e[25]!==m||e[26]!==k?(q=ce("div",{className:"slider",disabled:m,children:k}),e[25]=m,e[26]=k,e[27]=q):q=e[27],q});var nh=Xt(Qt());Ft();var eh=new CSSStyleSheet;eh.replaceSync(".toggle{display:flex;align-items:center;cursor:pointer;background:none;border:none;&:disabled{cursor:not-allowed;opacity:.5}.toggle__background{display:flex;align-items:center;width:42px;height:24px;background:rgba(var(--spice-rgb-selected-row),.1);border-radius:12px;&:has(.toggle__slider--enabled){background:var(--spice-button)}.toggle__slider--enabled{margin-left:20px}}.toggle__slider{width:20px;height:20px;margin-left:2px;background:var(--spice-text);border-radius:50%;box-shadow:0 0 5px rgba(var(--spice-rgb-shadow),.3);transition:.1s cubic-bezier(.45,.05,.55,.95)}}");var th=eh;document.adoptedStyleSheets.push(th);var rh=ut(t=>{let e=(0,nh.c)(10),{value:n,onChange:i,disabled:a}=t,s;e[0]!==a||e[1]!==i||e[2]!==n?(s=()=>{a||i(!n)},e[0]=a,e[1]=i,e[2]=n,e[3]=s):s=e[3];let c=s,l=`toggle__slider${n?" toggle__slider--enabled":""}${a?" toggle__slider--disabled":""}`,p;e[4]!==l?(p=ce("span",{className:"toggle__background",children:ce("span",{className:l})}),e[4]=l,e[5]=p):p=e[5];let m;return e[6]!==a||e[7]!==c||e[8]!==p?(m=ce("button",{className:"toggle",disabled:a,onClick:c,role:"switch",children:p}),e[6]=a,e[7]=c,e[8]=p,e[9]=m):m=e[9],m});var ih=ut(t=>{let e=(0,oh.c)(23),{option:n,value:i,onChange:a,disabled:s}=t;switch(n.type){case"toggle":{let c=i,l;return e[0]!==s||e[1]!==a||e[2]!==c?(l=ce(rh,{disabled:s,onChange:a,value:c}),e[0]=s,e[1]=a,e[2]=c,e[3]=l):l=e[3],l}case"input":{let c=i,l;return e[4]!==s||e[5]!==a||e[6]!==n.placeholder||e[7]!==c?(l=ce(Xd,{disabled:s,onChange:a,placeholder:n.placeholder,value:c}),e[4]=s,e[5]=a,e[6]=n.placeholder,e[7]=c,e[8]=l):l=e[8],l}case"dropdown":{let c;e[9]!==n.options?(c=n.options||[],e[9]=n.options,e[10]=c):c=e[10];let l=i,p;return e[11]!==s||e[12]!==a||e[13]!==c||e[14]!==l?(p=ce(Wa,{disabled:s,onChange:a,options:c,value:l}),e[11]=s,e[12]=a,e[13]=c,e[14]=l,e[15]=p):p=e[15],p}case"slider":{let c=i,l;return e[16]!==s||e[17]!==a||e[18]!==n.max||e[19]!==n.min||e[20]!==n.step||e[21]!==c?(l=ce(Ga,{disabled:s,max:n.max,min:n.min,onChange:a,step:n.step,value:c}),e[16]=s,e[17]=a,e[18]=n.max,e[19]=n.min,e[20]=n.step,e[21]=c,e[22]=l):l=e[22],l}default:return console.warn(`Unknown option type for option "${n.name||"N/A"}"`),null}});var ah=Xt(Qt());Ft();var sh=ut(t=>{let e=(0,ah.c)(6),{name:n,popupModal:i}=t,a;e[0]!==i||e[1]!==n?(a=()=>Er({title:n,content:ce(i,{}),isLarge:!1}),e[0]=i,e[1]=n,e[2]=a):a=e[2];let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=ce(kt.React.editButton,{size:16}),e[3]=s):s=e[3];let c;return e[4]!==a?(c=ce("button",{className:"popup-button",onClick:a,children:s}),e[4]=a,e[5]=c):c=e[5],c});var uh=Xt(Qt());Ft();var ch=ut(t=>{let e=(0,uh.c)(3),{tippy:n}=t,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=ce("div",{className:"info-tippy",children:ce(kt.React.questionMark,{fill:"var(--spice-subtext)",size:20})}),e[0]=i):i=e[0];let a;return e[1]!==n?(a=ce(Spicetify.ReactComponent.TooltipWrapper,{label:n,placement:"top",showDelay:0,children:i}),e[1]=n,e[2]=a):a=e[2],a});document.adoptedStyleSheets.push(Zd);var dh=ut(t=>{let e=(0,lh.c)(21),{name:n,desc:i,tippy:a,popupModal:s,option:c,value:l,onChange:p,disabled:m}=t,g;e[0]!==i?(g=ce("div",{className:"option__desc",children:i}),e[0]=i,e[1]=g):g=e[1];let b;e[2]!==a?(b=a&&ce(ch,{tippy:a}),e[2]=a,e[3]=b):b=e[3];let w;e[4]!==g||e[5]!==b?(w=Be("div",{className:"option__content",children:[g,b]}),e[4]=g,e[5]=b,e[6]=w):w=e[6];let E;e[7]!==n||e[8]!==s?(E=s&&ce(sh,{name:n,popupModal:s}),e[7]=n,e[8]=s,e[9]=E):E=e[9];let M;e[10]!==m||e[11]!==p||e[12]!==c||e[13]!==l?(M=c&&ce(ih,{disabled:m,onChange:p||e0,option:c,value:l}),e[10]=m,e[11]=p,e[12]=c,e[13]=l,e[14]=M):M=e[14];let P;e[15]!==E||e[16]!==M?(P=Be("div",{className:"option__control",children:[E,M]}),e[15]=E,e[16]=M,e[17]=P):P=e[17];let N;return e[18]!==w||e[19]!==P?(N=Be("div",{className:"option__row",children:[w,P]}),e[18]=w,e[19]=P,e[20]=N):N=e[20],N});function e0(){}var hh=()=>{let t=globalThis.webpackChunkclient_web.push([[Symbol()],{},i=>i]),e=/"data-encore-id":(?:\w+\.)+([A-Z]\w*)\b/,n={};for(let[i,a]of Object.entries(t.m)){if(typeof a!="function")continue;let s=t(i);if(!(!s||typeof s!="object"))for(let c of Object.values(s)){let l=typeof c=="function"?c:c?.render;if(!l)continue;let p=l.toString().match(e);p?.[1]&&!n[p[1]]&&(n[p[1]]=c)}}console.log(`ComponentMenu: Discovery finished. Found ${Object.keys(n).length} components.`),globalThis.UI=n};var mh=Xt(Qt());Ft();var Rn=Spicetify.Platform.PlayerAPI,fh={subscribe:t=>{let e=()=>t();return Rn._events.addListener("update",e,{}),()=>{Rn._events.removeListener("update",e,{})}},getSnapshot:()=>Rn._state},ph=(t,e)=>{let n=(0,mh.c)(22),i=No(fh.subscribe,fh.getSnapshot),a=i.item?.uri===t,s=i.isPaused,c=a&&!s,[l,p]=Jt(0),[m,g]=Jt(e),b=xt(!1),w=xt(0),E,M;n[0]!==a||n[1]!==s||n[2]!==i.duration||n[3]!==i.positionAsOfTimestamp||n[4]!==e?(E=()=>{if(!a){p(0),g(e);return}if(g(i.duration),b.current)return;if(s){p(i.positionAsOfTimestamp);return}let he=setInterval(()=>{let Se=Date.now(),Me=Rn._state.positionAsOfTimestamp,me=Rn._state.timestamp,z=Se-me+Me;p(Math.min(z,i.duration))},100);return()=>clearInterval(he)},M=[a,s,i.duration,i.positionAsOfTimestamp,e],n[0]=a,n[1]=s,n[2]=i.duration,n[3]=i.positionAsOfTimestamp,n[4]=e,n[5]=E,n[6]=M):(E=n[5],M=n[6]),un(E,M);let P;n[7]!==a||n[8]!==s||n[9]!==t?(P=()=>{a?s?Rn.resume({}):Rn.pause({}):Rn.play({uri:t},{})},n[7]=a,n[8]=s,n[9]=t,n[10]=P):P=n[10];let N=P,K;n[11]===Symbol.for("react.memo_cache_sentinel")?(K=he=>{b.current=!0,p(he),w.current=he},n[11]=K):K=n[11];let Q=K,oe;n[12]!==a||n[13]!==t?(oe=()=>{b.current=!1,a?Rn.seekTo(w.current):Rn.play({uri:t},{})},n[12]=a,n[13]=t,n[14]=oe):oe=n[14];let se=oe,de;return n[15]!==m||n[16]!==se||n[17]!==a||n[18]!==c||n[19]!==l||n[20]!==N?(de={position:l,duration:m,isPlaying:c,isActiveTrack:a,togglePlay:N,handleSliderChange:Q,handleSliderRelease:se},n[15]=m,n[16]=se,n[17]=a,n[18]=c,n[19]=l,n[20]=N,n[21]=de):de=n[21],de};hh();var Qu=class{starts=new Map;start(e){this.starts.set(e,performance.now())}end(e){let n=this.starts.get(e);if(n){let i=performance.now()-n;console.debug(`[Debug] ${e}: ${i.toFixed(2)}ms`),this.starts.delete(e)}}},yr=new Qu,vh=["exact","isrc","probable","likely","possible","maybe"],Vu=class extends Ju{constructor(){super("findDupeTracks"),this.version(.1).stores({tracks:"&trackUri, trackName, trackDuration, trackPlayCount, trackIsrc, albumUri, albumReleaseDate, lastUpdated, ignoreDuplicates"})}},ec=new Vu;globalThis.findDupeTracks=ec;var Ha={groupSettings:{exact:!0,isrc:!0,probable:!0,likely:!0,possible:!0,maybe:!1},confirmSettings:{exact:!1,isrc:!1,probable:!0,likely:!0,possible:!0,maybe:!0},defaultNormaliseWords:["live","remix","mix","acoustic","inst","instrumental","radio","version","ver","edit","mono","stereo","deluxe","demo","rehearsal","intro","outro","remaster","remastered","bonus","feat","ft","explicit","clean","piano","guitar","cover","original","extended","album","single"],customNormaliseWords:[]},yh="findDupeTracks:settings",pr={listeners:new Set,snapshot:(()=>{try{let t=localStorage.getItem(yh);return t?{...Ha,...JSON.parse(t)}:Ha}catch{return Ha}})(),subscribe(t){return pr.listeners.add(t),()=>pr.listeners.delete(t)},getSnapshot(){return pr.snapshot},update(t){pr.snapshot=t,localStorage.setItem(yh,JSON.stringify(t)),pr.listeners.forEach(e=>{e()})}},_h=()=>No(pr.subscribe,pr.getSnapshot),t0=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n0=(t,e)=>t.toLowerCase().replace(/\(.*?\)|\[.*?\]/g,"").replace(e,"").replace(/-/g," ").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),r0=(t,e)=>{let n=t.replace(/\s+/g,""),i=e.replace(/\s+/g,"");if(n===i)return 1;if(n.length<2||i.length<2)return 0;let a=new Map;for(let c=0;c<n.length-1;c++){let l=n.substring(c,c+2);a.set(l,(a.get(l)||0)+1)}let s=0;for(let c=0;c<i.length-1;c++){let l=i.substring(c,c+2),p=a.get(l)||0;p>0&&(a.set(l,p-1),s++)}return 2*s/(n.length+i.length-2)};function o0(){let t=(0,gr.c)(6),e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];let[n,i]=Jt(e),[a,s]=Jt(!0),c,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let m=!0;return(async()=>{yr.start("Fetch: All Playlists");let b=await $d();if(!m)return;let w=b.filter(i0);i(w),m&&(s(!1),yr.end("Fetch: All Playlists"))})(),()=>{m=!1}},l=[],t[1]=c,t[2]=l):(c=t[1],l=t[2]),un(c,l);let p;return t[3]!==a||t[4]!==n?(p={playlists:n,loading:a},t[3]=a,t[4]=n,t[5]=p):p=t[5],p}function i0(t){return t.type==="playlist"&&t.canAddTo}function a0(t,e){let n=(0,gr.c)(8),i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],n[0]=i):i=n[0];let[a,s]=Jt(i),[c,l]=Jt(!1),p,m;n[1]!==t||n[2]!==e?(p=()=>{if(!t){s([]);return}let b=new AbortController;return l(!0),(async()=>{yr.start("LOAD ALL DATA");let{items:E}=await Ad(t);if(b.signal.aborted)return;let M=E,P=M.map(h0),N=await ec.tracks.bulkGet(P),K=new Map(N.filter(d0).map(l0)),Q=Hu.Now.instant(),oe=[],se=[],de=new RegExp(`\\b(${[...e.defaultNormaliseWords,...e.customNormaliseWords].map(t0).join("|")})\\b`,"gi");for(let le of M){let k=K.get(le.uri),q=!1;if(!k)q=!0;else if(k.lastUpdated)try{let h=Hu.Instant.from(k.lastUpdated);Q.since(h).total("days")>=30&&(q=!0)}catch{q=!0}else q=!0;q&&oe.push(le),se.push({...le,playCount:k?.trackPlayCount??null,duration:k?.trackDuration??null,isrc:k?.trackIsrc??null,releaseDate:k?.albumReleaseDate??null,normalisedName:le.name.toLowerCase().trim(),normalisedFuzzy:n0(le.name,de)})}if(b.signal.aborted)return;if(s(se),oe.length===0){l(!1),yr.end("LOAD ALL DATA");return}let[he,Se]=await Promise.allSettled([Ld(oe.map(c0)),Bd(oe.map(u0))]);if(b.signal.aborted)return;let Me=he.status==="fulfilled"?he.value:null,me=Se.status==="fulfilled"?Se.value:null,z=[],J=Q.toString(),G=[...se];oe.forEach(le=>{let k=Me?.get(le.uri),q=me?.get(le.uri),h=k?.duration?.totalMilliseconds??null,y=k?.playcount?Number(k.playcount):null,C=q?.external_ids?.isrc??q?.external_id?.find(s0)?.id??null,I=q?.album?.date,T=null;typeof I=="string"?T=I:I?.year&&(T=`${I.year}`,I.month&&(T=T+`-${String(I.month).padStart(2,"0")}`),I.day&&(T=T+`-${String(I.day).padStart(2,"0")}`)),z.push({trackUri:le.uri,trackName:le.name,trackDuration:h,trackPlayCount:y,trackIsrc:C,albumUri:le.album.uri,albumReleaseDate:T,lastUpdated:J});let R=G.findIndex(F=>F.uid===le.uid);R!==-1&&(G[R]={...G[R],playCount:y,duration:h,isrc:C,releaseDate:T})}),await ec.tracks.bulkPut(z),b.signal.aborted||(s(G),yr.end("LOAD ALL DATA")),b.signal.aborted||l(!1)})(),()=>b.abort()},m=[t,e],n[1]=t,n[2]=e,n[3]=p,n[4]=m):(p=n[3],m=n[4]),un(p,m);let g;return n[5]!==c||n[6]!==a?(g={tracks:a,loading:c,setTracks:s},n[5]=c,n[6]=a,n[7]=g):g=n[7],g}function s0(t){return t?.type==="isrc"}function u0(t){return t.uri}function c0(t){return t.album.uri}function l0(t){return[t.trackUri,t]}function d0(t){return!!t}function h0(t){return t.uri}function f0(t,e){let n=(0,gr.c)(4),i;e:{yr.start("Dupe Algorithm: Compute");let a;if(n[0]!==e||n[1]!==t){if(a={exact:[],isrc:[],probable:[],likely:[],possible:[],maybe:[]},t.length<2){yr.end("Dupe Algorithm: Compute"),i=a;break e}let{groupSettings:s}=e,c=[...t],l=new Set,p=(w,E)=>{if(w.length<2)return;let M=w.sort(k0);a[E].push({mainTrack:M[0],duplicates:M.slice(1)}),w.forEach(P=>{l.add(P.uid)})},m=w=>{let E=w===void 0?!0:w;c=c.filter(M=>!l.has(M.uid)),E&&l.clear()};if(s.exact){let w=Object.groupBy(c,x0);for(let E in w){let M=w[E];M&&p(M,"exact")}m()}if(s.isrc){let w=Object.groupBy(c,w0);for(let E in w){let M=w[E];E&&M&&p(M,"isrc")}m()}let g=_0,b=v0;if(s.probable){let w=Object.groupBy(c,g0);for(let E in w){let M=w[E];if(!M||M.length<2)continue;let P=new Set;for(let N of M){if(P.has(N.uid))continue;let K=M.filter(Q=>N.uid===Q.uid||!P.has(Q.uid)&&g(N,Q));K.length>1&&(p(K,"probable"),K.forEach(Q=>{P.add(Q.uid)}))}}m()}if(s.likely){let w=Object.groupBy(c,y0);for(let E in w){let M=w[E];if(!M||M.length<2)continue;let P=new Set;for(let N of M){if(P.has(N.uid))continue;let K=M.filter(Q=>N.uid===Q.uid||!P.has(Q.uid)&&b(N,Q));K.length>1&&(p(K,"likely"),K.forEach(Q=>{P.add(Q.uid)}))}}m()}if(s.possible){let w=Object.groupBy(c,p0);for(let E in w){let M=w[E];if(!M||M.length<2)continue;let P=new Set;for(let N of M){if(P.has(N.uid))continue;let K=M.filter(Q=>N.uid===Q.uid||!P.has(Q.uid)&&b(N,Q));K.length>1&&(p(K,"possible"),K.forEach(Q=>{P.add(Q.uid)}))}}m()}if(s.maybe){c.sort(m0);for(let w=0;w<c.length;w++){let E=c[w];if(l.has(E.uid))continue;let M=[E];for(let P=w+1;P<Math.min(w+30,c.length);P++){let N=c[P];if(!l.has(N.uid)){if(E.normalisedFuzzy[0]!==N.normalisedFuzzy[0])break;r0(E.normalisedFuzzy,N.normalisedFuzzy)>=.8&&M.push(N)}}M.length>1&&p(M,"maybe")}}n[0]=e,n[1]=t,n[2]=a,n[3]=i}else a=n[2],i=n[3];yr.end("Dupe Algorithm: Compute"),i=a}return i}function m0(t,e){return t.normalisedFuzzy.localeCompare(e.normalisedFuzzy)}function p0(t){return t.normalisedFuzzy}function y0(t){return t.normalisedName}function g0(t){return t.normalisedName}function v0(t,e){return t.duration==null||e.duration==null?!1:Math.abs(t.duration-e.duration)<=5e3}function _0(t,e){let n=new Set(t.artists.map(b0));return e.artists.some(i=>n.has(i.name.toLowerCase()))}function b0(t){return t.name.toLowerCase()}function w0(t){return t.isrc||""}function x0(t){return t.uri}function k0(t,e){let n=(e.playCount??0)-(t.playCount??0);if(n!==0)return n;let i=t.releaseDate??"9999",a=e.releaseDate??"9999";return i.localeCompare(a)}var D0=()=>{let t=(0,gr.c)(7),e=_h(),n;t[0]!==e?(n=(l,p,m)=>{let g={...e,[l]:{...e[l],[p]:m}};pr.update(g)},t[0]=e,t[1]=n):n=t[1];let i=n,a;t[2]!==e||t[3]!==i?(a=(l,p,m)=>Be("section",{className:"duplicate-settings__section",children:[ce("h3",{className:"duplicate-settings__section-title",children:l}),ce("div",{className:"duplicate-settings__options",children:vh.map(g=>ce(dh,{desc:m[g],name:`${p}-${g}`,onChange:b=>i(p,g,!!b),option:{type:"toggle",name:g,desc:m[g],defaultVal:Ha[p][g]},value:e[p][g]},g))})]}),t[2]=e,t[3]=i,t[4]=a):a=t[4];let s=a,c;return t[5]!==s?(c=Be("div",{className:"duplicate-settings",children:[s("Display Groups","groupSettings",{exact:"Exact Duplicates",isrc:"ISRC Match",probable:"Same Title & Artist",likely:"Same Title & Duration",possible:"Similar Title & Duration",maybe:"Fuzzy Matches"}),s("Confirm Delete","confirmSettings",{exact:"Exact",isrc:"ISRC",probable:"Probable",likely:"Likely",possible:"Possible",maybe:"Maybe"})]}),t[5]=s,t[6]=c):c=t[6],c},C0=t=>{let e=(0,gr.c)(19),{uri:n,duration:i}=t,{position:a,duration:s,isPlaying:c,togglePlay:l,handleSliderChange:p,handleSliderRelease:m}=ph(n,i??0),g=E0,b;e[0]!==c?(b=c?ce(kt.React.pause,{}):ce(kt.React.play,{}),e[0]=c,e[1]=b):b=e[1];let w;e[2]!==b||e[3]!==l?(w=ce("button",{className:"duplicate-group__playback-button",onClick:l,children:b}),e[2]=b,e[3]=l,e[4]=w):w=e[4];let E=g(a),M;e[5]!==E?(M=ce("span",{className:"slider-time",children:E}),e[5]=E,e[6]=M):M=e[6];let P=s||0,N=a||0,K;e[7]!==p||e[8]!==m||e[9]!==P||e[10]!==N?(K=ce(Ga,{max:P,min:0,onChange:p,onRelease:m,step:1,value:N}),e[7]=p,e[8]=m,e[9]=P,e[10]=N,e[11]=K):K=e[11];let Q=g(s),oe;e[12]!==Q?(oe=ce("span",{className:"slider-time",children:Q}),e[12]=Q,e[13]=oe):oe=e[13];let se;return e[14]!==w||e[15]!==M||e[16]!==K||e[17]!==oe?(se=Be("div",{className:"duplicate-group__playback-controls",children:[w,M,K,oe]}),e[14]=w,e[15]=M,e[16]=K,e[17]=oe,e[18]=se):se=e[18],se},gh=t=>{let e=(0,gr.c)(42),{track:n,category:i,onDelete:a,isSource:s}=t,c=`duplicate-group__duplicate-item duplicate-group__item--${i}`,l;e[0]!==s?(l=s&&ce("strong",{children:"Source: "}),e[0]=s,e[1]=l):l=e[1];let p;e[2]!==l||e[3]!==n.name?(p=Be("span",{className:"duplicate-group__duplicate-name",children:[l,n.name]}),e[2]=l,e[3]=n.name,e[4]=p):p=e[4];let m;e[5]!==n.artists?(m=n.artists.map(T0).join(", "),e[5]=n.artists,e[6]=m):m=e[6];let g;e[7]!==m?(g=Be("span",{className:"track-details__artists",children:["Artists: ",m]}),e[7]=m,e[8]=g):g=e[8];let b;e[9]!==n.album.name?(b=Be("span",{className:"track-details__album",children:["Album: ",n.album.name]}),e[9]=n.album.name,e[10]=b):b=e[10];let w;e[11]!==g||e[12]!==b?(w=Be("div",{className:"track-details__line",children:[g,b]}),e[11]=g,e[12]=b,e[13]=w):w=e[13];let E;e[14]!==n.playCount?(E=n.playCount?.toLocaleString()??"N/A",e[14]=n.playCount,e[15]=E):E=e[15];let M;e[16]!==E?(M=Be("span",{className:"track-details__playcount",children:["Plays: ",E]}),e[16]=E,e[17]=M):M=e[17];let P=n.releaseDate??"Unknown",N;e[18]!==P?(N=Be("span",{className:"track-details__date",children:["Released: ",P]}),e[18]=P,e[19]=N):N=e[19];let K;e[20]!==N||e[21]!==M?(K=Be("div",{className:"track-details__line",children:[M,N]}),e[20]=N,e[21]=M,e[22]=K):K=e[22];let Q;e[23]!==K||e[24]!==w?(Q=Be("div",{className:"track-details",children:[w,K]}),e[23]=K,e[24]=w,e[25]=Q):Q=e[25];let oe;e[26]!==Q||e[27]!==p?(oe=Be("div",{className:"duplicate-group__duplicate-content",children:[p,Q]}),e[26]=Q,e[27]=p,e[28]=oe):oe=e[28];let se;e[29]!==a||e[30]!==n?(se=ce("button",{className:"duplicate-group__delete-button",onClick:()=>a(n),children:"Delete"}),e[29]=a,e[30]=n,e[31]=se):se=e[31];let de;e[32]!==oe||e[33]!==se?(de=Be("div",{className:"duplicate-group__duplicate-info",children:[oe,se]}),e[32]=oe,e[33]=se,e[34]=de):de=e[34];let he;e[35]!==n.duration||e[36]!==n.uri?(he=ce("div",{className:"duplicate-group__actions",children:ce(C0,{duration:n.duration,uri:n.uri})}),e[35]=n.duration,e[36]=n.uri,e[37]=he):he=e[37];let Se;return e[38]!==c||e[39]!==de||e[40]!==he?(Se=Be("div",{className:c,children:[de,he]}),e[38]=c,e[39]=de,e[40]=he,e[41]=Se):Se=e[41],Se},S0=t=>{let e=(0,gr.c)(14),{title:n,category:i,groups:a,onDelete:s}=t,c;e[0]!==n?(c=ce("div",{className:"duplicate-group__heading-title",children:n}),e[0]=n,e[1]=c):c=e[1];let l;e[2]!==a.length?(l=Be("div",{className:"duplicate-group__heading-length",children:[a.length," found"]}),e[2]=a.length,e[3]=l):l=e[3];let p;e[4]!==c||e[5]!==l?(p=Be("div",{className:"duplicate-group__heading",children:[c,l]}),e[4]=c,e[5]=l,e[6]=p):p=e[6];let m;e[7]!==i||e[8]!==a||e[9]!==s?(m=a.length>0&&ce("div",{className:"duplicate-group__list",children:a.map(b=>Be("div",{className:`duplicate-group__item duplicate-group__item--${i}`,children:[ce(gh,{category:i,isSource:!0,onDelete:w=>s(i,w),track:b.mainTrack}),ce("div",{className:"duplicate-group__duplicates-list",children:b.duplicates.map(w=>ce(gh,{category:i,onDelete:E=>s(i,E),track:w},w.uid))})]},b.mainTrack.uid))}),e[7]=i,e[8]=a,e[9]=s,e[10]=m):m=e[10];let g;return e[11]!==p||e[12]!==m?(g=Be("div",{className:"duplicate-group",children:[p,m]}),e[11]=p,e[12]=m,e[13]=g):g=e[13],g};function bh({selectedPlaylist:t}){let[e,n]=Jt("finder"),[i,a]=Jt(t?.uri),s=_h(),{playlists:c,loading:l}=o0(),p=Ls(()=>c.find(N=>N.uri===i)??(i?{uri:i,name:"Selected Playlist",type:"playlist"}:void 0),[c,i]),{tracks:m,loading:g,setTracks:b}=a0(i,s),w=f0(m,s),E=xt(performance.now());E.current=performance.now(),un(()=>{let N=performance.now()-E.current;N>10&&console.debug(`[DEBUG] Render:React took ${N.toFixed(2)}ms to render`)});let M=async(N,K)=>{let Q=async()=>{p&&(await Spicetify.Platform.PlaylistAPI.remove(p.uri,[{uid:K.uid}]),b(oe=>oe.filter(se=>se.uid!==K.uid)))};s.confirmSettings[N]?zd({titleText:"Remove Track",descriptionText:`Are you sure you want to remove "${K.name}"? This cannot be undone`,confirmText:"Remove",onConfirm:()=>{Q()}}):Q()},P={exact:"Exact URI Matches",isrc:"Same ISRC",probable:"Same Title + Shared Artist",likely:"Same Title + Duration (\xB15s)",possible:"Similar Title + Duration (\xB15s)",maybe:"Maybe Duplicates (Fuzzy)"};return Be("div",{className:"find-duplicates",children:[Be("div",{className:"modal__header",children:[ce("h1",{className:"modal__title",children:e==="finder"?"Playlist Duplicate Finder":"Settings"}),Be("div",{className:"modal__buttonContainer",children:[ce("button",{className:"modal__button",onClick:()=>n(N=>N==="finder"?"settings":"finder"),children:ce(kt.React.settings,{})}),ce("button",{className:"modal__button",onClick:()=>Er.hide(),children:ce(kt.React.close,{size:18})})]})]}),ce("div",{className:"find-duplicates__content",children:e==="settings"?ce(D0,{}):Be(Gc,{children:[Be("div",{className:"find-duplicates__header",children:[ce("span",{className:"find-duplicates__header-label",children:"Select Playlist:"}),ce(Wa,{disabled:l||g,onChange:a,options:c.map(N=>({value:N.uri,label:N.name})),value:i??""})]}),g?ce("div",{className:"find-duplicates__loading",children:ce(UI.ProgressDots,{size:"medium"})}):vh.map(N=>s.groupSettings[N]?ce(S0,{category:N,groups:w[N],onDelete:M,title:P[N]},N):null)]})})]})}function E0(t){if(t==null||t<0)return"--:--";let e=Math.floor(t/1e3);return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}function T0(t){return t.name}var wh=new CSSStyleSheet;wh.replaceSync(".find-duplicates{--fdp-radius-lg: 14px;--fdp-radius: 10px;--fdp-radius-sm: 8px;--fdp-gap: 14px;--fdp-border: rgba(var(--spice-rgb-selected-row), .14);--fdp-border-strong: rgba(var(--spice-rgb-selected-row), .22);--fdp-surface: var(--spice-main-elevated);--fdp-text: var(--spice-text);--fdp-subtext: var(--spice-subtext);--fdp-accent: var(--spice-button);display:flex;flex-direction:column;gap:var(--fdp-gap);overflow:hidden;animation:fdp-fade-in .2s ease-out both}.find-duplicates__header{display:flex;gap:12px;align-items:center;padding:12px 14px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius)}.find-duplicates__header-label{font-weight:600;color:var(--fdp-text)}.find-duplicates__loading{display:flex;align-items:center;justify-content:center;height:16700000px}.find-duplicates__content{display:flex;flex-direction:column;gap:8px;padding:0 32px;overflow:scroll}.duplicate-group{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--fdp-surface);border:1px solid var(--fdp-border);border-radius:var(--fdp-radius-lg)}.duplicate-group__heading{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fdp-text)}.duplicate-group__heading-length{padding:2px 8px;font-size:12px;color:var(--fdp-subtext);border:1px solid var(--fdp-border);border-radius:999px}.duplicate-group__list{display:flex;flex-direction:column;gap:10px}.duplicate-group__item{display:flex;flex-direction:column;gap:10px;padding:14px;border:1px solid var(--fdp-border);border-left:3px solid;border-radius:var(--fdp-radius);transition:background-color .12s ease,border-color .12s ease}.duplicate-group__item:hover{background:rgba(var(--spice-rgb-selected-row),.05);border-color:var(--fdp-border-strong)}.duplicate-group__item--exact{border-left-color:#e53935}.duplicate-group__item--isrc{border-left-color:#fb8c00}.duplicate-group__item--probable{border-left-color:#fdd835}.duplicate-group__item--likely{border-left-color:#43a047}.duplicate-group__item--possible{border-left-color:#1e88e5}.duplicate-group__item--maybe{border-left-color:#306}.duplicate-group__duplicate-info{display:flex;gap:12px;align-items:center;justify-content:space-between}.duplicate-group__duplicate-content{display:flex;flex-direction:column;gap:6px;min-width:0}.duplicate-group__duplicate-name{overflow:hidden;text-overflow:ellipsis;font-weight:600;color:var(--fdp-text);white-space:nowrap}.track-details{font-size:.9rem;color:var(--fdp-subtext)}.track-details__line{display:flex;flex-wrap:wrap;gap:10px}.duplicate-group__playback-controls{display:flex;gap:10px;align-items:center}.duplicate-group__playback-button{width:32px;height:32px;color:var(--fdp-text);cursor:pointer;background:transparent;border:1px solid transparent;border-radius:50%}.duplicate-group__playback-button:hover{background:rgba(var(--spice-rgb-selected-row),.08);border-color:var(--fdp-border)}.slider-time{min-width:38px;font-size:12px;color:var(--fdp-subtext);text-align:center}.duplicate-group__delete-button{padding:6px 12px;font-size:.85rem;font-weight:600;color:#fff;cursor:pointer;background:#e91429;border:1px solid rgba(233,20,41,.4);border-radius:999px}.duplicate-group__delete-button:hover{filter:brightness(1.05)}.duplicate-settings__section{margin-bottom:24px}.duplicate-settings__section-title{padding-bottom:6px;margin-bottom:12px;font-weight:600;border-bottom:1px solid var(--fdp-border)}.duplicate-settings__options{display:flex;flex-direction:column;gap:10px}.find-duplicates :is(button,[role=button],input,select):focus-visible{outline:none;border-color:var(--fdp-accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--fdp-accent),transparent 60%)}@keyframes fdp-fade-in{0%{opacity:0;transform:translateY(3px)}to{opacity:1;transform:none}}");var xh=wh;document.adoptedStyleSheets.push(xh);var I0=new Spicetify.ContextMenuV2.Item({children:"Find Duplicates",leadingIcon:kt.HTML.duplicate,onClick:async(t,e,n)=>{let i=Ns(t.props),a=i.uri,s=i.name,c=Spicetify.URI.from(a)?.type,l={uri:a,name:s||(await Spicetify.Platform.PlaylistAPI.getMetadata(a,{}))?.name||"",type:c||""};Er({title:"Find Duplicates",content:ce(bh,{selectedPlaylist:l}),isLarge:!0,template:!1})},divider:"after",shouldAdd:(t,e,n)=>{let i=Ns(t),a=Spicetify.URI.from(i.uri)?.type;return a===Spicetify.URI.Type.PLAYLIST||a===Spicetify.URI.Type.PLAYLIST_V2}});I0.register();
